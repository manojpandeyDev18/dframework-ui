{"version":3,"file":"index.js","sources":["../src/lib/components/SnackBar/index.js","../src/lib/components/Dialog/index.js","../src/lib/components/useRouter/actions.js","../src/lib/components/Grid/httpRequest.js","../src/lib/components/utils.js","../src/lib/components/Grid/crud-helper.js","../src/lib/components/Grid/footer.js","../src/lib/components/Grid/template.js","../src/lib/components/Typography/index.js","../src/lib/components/useMobile.js","../src/lib/components/useRouter/stateReducer.js","../src/lib/components/useRouter/initialState.js","../src/lib/components/mui/locale/data-grid/daDK.js","../src/lib/components/mui/locale/data-grid/deDE.js","../src/lib/components/mui/locale/data-grid/elGR.js","../src/lib/components/mui/locale/data-grid/esES.js","../src/lib/components/mui/locale/data-grid/frFR.js","../src/lib/components/mui/locale/data-grid/itIT.js","../src/lib/components/mui/locale/data-grid/trTR.js","../src/lib/components/mui/locale/data-grid/ptPT.js","../src/lib/components/mui/locale/data-grid/enUS.js","../src/lib/components/mui/locale/localization.js","../src/lib/components/useRouter/StateProvider.js","../src/lib/components/HelpModal/index.js","../src/lib/components/PageTitle/index.js","../src/lib/components/Grid/LocalizedDatePicker.js","../src/lib/components/Grid/GridPreference.js","../src/lib/components/Grid/CustomDropdownMenu.js","../src/lib/components/Grid/helper.js","../src/lib/components/Grid/index.js","../src/lib/components/Form/fields/boolean.js","../src/lib/components/Form/fields/string.js","../src/lib/hooks/useDebounce.js","../src/lib/components/Form/fields/number.js","../src/lib/components/Form/fields/password.js","../src/lib/components/Form/fields/date.js","../src/lib/components/Form/fields/dateTime.js","../src/lib/components/Form/fields/time.js","../src/lib/hooks/useCascadingLookup.js","../src/lib/components/Form/fields/select.js","../src/lib/components/Form/fields/grid-transfer.js","../src/lib/components/Form/fields/radio.js","../src/lib/components/Form/fields/autocomplete.js","../src/lib/components/Form/fields/CustomRenderCell.js","../src/lib/components/Form/fields/dayRadio.js","../src/lib/components/Form/fields/chipInput.js","../src/lib/components/Form/fields/treeCheckBox.js","../src/lib/components/Form/fields/fileUpload.js","../src/lib/components/Form/fields/jsonInput.js","../src/lib/components/Form/field-mapper.js","../src/lib/components/Form/relations.js","../src/lib/components/Form/Form.js","../src/lib/components/Grid/ui-models.js"],"sourcesContent":["import React, { useState, useContext, createContext } from 'react'\nimport Snackbar from '@mui/material/Snackbar'\nimport MuiAlert from '@mui/material/Alert';\n\nconst SnackbarContext = createContext(null);\nconst vertical = 'bottom';\nconst horizontal = 'center';\n\nconst Alert = React.forwardRef(function Alert(props, ref) {\n    return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\nconst SnackbarProvider = ({ children }) => {\n    const [message, setMessage] = useState(null);\n    const [open, setOpen] = useState(false);\n    const [severity, setSeverity] = useState(null);\n    const [handleAction, setHandleAction] = useState(null);\n\n    const showMessage = function (title, message, severity = \"info\", onAction) {\n        if (typeof title !== 'string') {\n            title = title.toString();\n        }\n        if (message && typeof message !== 'string') {\n            message = message.toString();\n        }\n        setMessage(message ? `${title}: ${message}` : title);\n        setSeverity(severity);\n        setOpen(true);\n        setHandleAction(onAction);\n    }\n\n    const showError = function (title, message, severity = \"error\", onAction) {\n        showMessage(title, message, severity, onAction);\n    }\n\n    const handleClose = function () {\n        setOpen(false);\n        setHandleAction(null);\n        if (handleAction) {\n            handleAction()\n        }\n    }\n    return (\n        <>\n            <SnackbarContext.Provider\n                value={{ showMessage, showError }}\n            >\n                {children}\n            </SnackbarContext.Provider>\n            <Snackbar open={open} autoHideDuration={6000} onClose={handleClose} anchorOrigin={{ vertical, horizontal }}>\n                <Alert severity={severity}>{message}</Alert>\n            </Snackbar>\n        </>\n    )\n}\nconst useSnackbar = function () {\n    return useContext(SnackbarContext)\n}\n\nexport { SnackbarProvider, SnackbarContext, useSnackbar }","import React from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\n/**\n * DialogComponent is a reusable dialog/modal component based on Material-UI's Dialog.\n *\n * @param {Object} props - The props for the DialogComponent.\n * @param {boolean} props.open - Controls whether the dialog is open.\n * @param {function} props.onConfirm - Callback fired when the confirm/ok button is clicked.\n * @param {string} [props.title=\"Confirm\"] - The title of the dialog.\n * @param {function} props.onCancel - Callback fired when the cancel button or dialog close is triggered.\n * @param {string} [props.okText] - Custom text for the confirm/ok button.\n * @param {string} [props.cancelText] - Custom text for the cancel button.\n * @param {boolean} [props.yesNo=false] - If true, uses \"Yes\"/\"No\" for button texts instead of \"Ok\"/\"Cancel\".\n * @param {React.ReactNode} props.children - The content of the dialog.\n * @param {string} [props.maxWidth='sm'] - The maxWidth of the dialog (xs, sm, md, lg, xl).\n * @param {boolean} [props.fullWidth=true] - If true, the dialog stretches to the full width of its container.\n * @param {Object} [props.props] - Additional props passed to the MUI Dialog component.\n * @returns {JSX.Element} The rendered Dialog component.\n */\n\nconst DialogComponent = ({ open, onConfirm, title = \"Confirm\", onCancel, okText, cancelText, yesNo = false, children, maxWidth = 'sm', fullWidth = true, ...props }) => {\n    okText = okText || (yesNo ? 'Yes' : 'Ok');\n    cancelText = cancelText || (yesNo ? 'No' : 'Cancel');\n    return (\n        <Dialog\n            {...props}\n            open={open}\n            onClose={onCancel}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            maxWidth={maxWidth}\n            fullWidth={fullWidth}\n        >\n            <DialogTitle id=\"alert-dialog-title\" >\n                {title}\n            </DialogTitle>\n            <DialogContent dividers>\n                <DialogContentText>{children}</DialogContentText>\n            </DialogContent>\n            {(onCancel || onConfirm) && (\n                < DialogActions >\n                    {onCancel && <Button onClick={onCancel}>{cancelText}</Button>}\n                    {onConfirm && <Button onClick={onConfirm} autoFocus>{okText}</Button>}\n                </DialogActions>\n            )}\n        </Dialog >\n    )\n}\nexport { DialogComponent }\n","const actionsStateProvider = {\n    UPDATE_FORM_MODE:'UPDATE_FORM_MODE',\n    UPDATE_DATE_TIME:'UPDATE_DATE_TIME',\n    UPDATE_LOCALIZATION: 'UPDATE_LOCALIZATION',\n    PAGE_TITLE_DETAILS:'PAGE_TITLE_DETAILS',\n    OPEN_MODAL:'OPEN_MODAL',\n    SET_PAGE_BACK_BUTTON:'SET_PAGE_BACK_BUTTON',\n    SET_GRID_SETTINGS:'SET_GRID_SETTINGS',\n    SET_LOCAL_LOCALIZATION:'SET_LOCAL_LOCALIZATION',\n    USER_DATA:'USER_DATA',\n    UDPATE_PREFERENCES: 'UDPATE_PREFERENCES',\n    TOTAL_PREFERENCES: 'TOTAL_PREFERENCES',\n    SET_CURRENT_PREFERENCE_NAME: 'SET_CURRENT_PREFERENCE_NAME',\n    UPDATE_LOADER_STATE: 'UPDATE_LOADER_STATE',\n    PASS_FILTERS_TO_HEADER: 'PASS_FILTERS_TO_HEADER',\n    SET_TIMEZONE: 'SET_TIMEZONE'\n  };\n  export default actionsStateProvider;","import actionsStateProvider from '../useRouter/actions';\nlet pendingRequests = 0;\n\nconst HTTP_STATUS_CODES = {\n    OK: 200,\n    SESSION_EXPIRED: 401,\n    FORBIDDEN: 403,\n    NOT_FOUND: 404,\n    INTERNAL_SERVER_ERROR: 500\n};\n\nconst getFormData = (props) => {\n    const formData = new FormData();\n    for (const key in props) {\n        if (typeof props[key] === \"object\") {\n            formData.append(key, JSON.stringify(props[key]));\n        } else {\n            formData.append(key, props[key]);\n        }\n    }\n    return formData;\n};\n\nconst exportRequest = (url, query) => {\n    const newURL = new URL(url);\n    for (const key in query) {\n        const value = typeof query[key] === 'object' ? JSON.stringify(query[key]) : query[key];\n        newURL.searchParams.append(key, value);\n    }\n    window.open(newURL, '_blank').focus();\n};\n\nconst transport = async (config) => {\n    const {\n        method = 'GET',\n        url,\n        data,\n        headers = {},\n        credentials = 'include',\n        ...rest\n    } = config;\n\n    const fetchOptions = {\n        method,\n        credentials,\n        headers: {\n            ...headers\n        },\n        ...rest\n    };\n\n    if (data) {\n        if (headers['Content-Type'] === 'multipart/form-data') {\n            delete fetchOptions.headers['Content-Type']; // Let browser set it\n            fetchOptions.body = data instanceof FormData ? data : getFormData(data);\n        } else {\n            fetchOptions.headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n            fetchOptions.body = typeof data === 'string' ? data : JSON.stringify(data);\n        }\n    }\n\n    const response = await fetch(url, fetchOptions);\n    const contentType = response.headers.get('content-type') || {};\n    const responseObj = {\n        status: response.status,\n        data: contentType.includes('application/json') ? await response.json() : await response.text(),\n        headers: Object.fromEntries(response.headers.entries())\n    };\n\n    return responseObj;\n};\n\nconst request = async ({ url, params = {}, history, jsonPayload = false, additionalParams = {}, additionalHeaders = {}, disableLoader = false, dispatchData }) => {\n    if (params.exportData) {\n        return exportRequest(url, params);\n    }\n    if (!disableLoader) {\n        dispatchData({ type: actionsStateProvider.UPDATE_LOADER_STATE, payload: true });\n    }\n    pendingRequests++;\n\n    const reqParams = {\n        method: 'POST',\n        credentials: 'include',\n        url: url,\n        headers: jsonPayload ? { ...additionalHeaders } : { 'Content-Type': 'multipart/form-data', ...additionalHeaders },\n        ...additionalParams\n    };\n\n    if (params) {\n        reqParams.data = jsonPayload ? params : getFormData(params);\n    }\n\n    try {\n        const response = await transport(reqParams);\n        pendingRequests--;\n        const data = response.data;\n\n        if (pendingRequests === 0 && !disableLoader) {\n            dispatchData({ type: 'UPDATE_LOADER_STATE', loaderOpen: false });\n        }\n\n        // Handle HTTP errors here\n        if (response.status === HTTP_STATUS_CODES.SESSION_EXPIRED) {\n            history('/login');\n            return;\n        }\n        if (response.status !== HTTP_STATUS_CODES.OK) {\n            // You can return the error object or handle as needed\n            return { data: { message: data.message || 'An error occurred' } };\n        }\n        return data;\n    } catch (ex) {\n        pendingRequests--;\n        if (pendingRequests === 0) {\n            dispatchData({ type: 'UPDATE_LOADER_STATE', loaderOpen: false });\n        }\n        // Only network errors will be caught here\n        return { data: { message: ex.message || 'Network error' } };\n    }\n};\n\nexport {\n    HTTP_STATUS_CODES,\n    transport\n};\n\nexport default request;","const utils = {\n    filterFieldDataTypes: {\n        Number: 'number',\n        String: 'string',\n        Boolean: 'boolean'\n    },\n    fixedFilterFormat: {\n        date: \"YYYY-MM-DD\",\n        datetime: \"YYYY-MM-DD hh:mm:ss a\",\n        dateTimeLocal: \"YYYY-MM-DD hh:mm:ss a\",\n        OverrideDateFormat: \"DD-MMM-YYYY\"\n    },\n    errorMapping: {\n        413: \"Upload failed: The file exceeds the 30 MB size limit. Please select a smaller file.\"\n    },\n    permissionsMapper: {\n        add: \"Permission2\",\n        edit: \"Permission3\",\n        delete: \"Permission4\"\n    },\n    emptyIdValues: [null, undefined, '', '0', 0]\n}\nexport const getPermissions = ({ userData = {}, model, userDefinedPermissions }) => {\n    const { permissions = [] } = userData;\n    userDefinedPermissions = userDefinedPermissions || { add: true, edit: true, delete: true };\n    const userPermissions = permissions.find(item => item.Module === model.module);\n    if (!userPermissions) {\n        return { canAdd: userDefinedPermissions.add, canEdit: userDefinedPermissions.edit, canDelete: userDefinedPermissions.delete };\n    }\n    return {\n        canAdd: userDefinedPermissions.add && Boolean(userPermissions[utils.permissionsMapper.add]),\n        canEdit: userDefinedPermissions.edit && Boolean(userPermissions[utils.permissionsMapper.edit]),\n        canDelete: userDefinedPermissions.delete && Boolean(userPermissions[[utils.permissionsMapper.delete]])\n    };\n};\nexport default utils;","import actionsStateProvider from \"../useRouter/actions\";\nimport { transport, HTTP_STATUS_CODES } from \"./httpRequest\";\nimport utils from '../utils';\n\nconst dateDataTypes = ['date', 'dateTime'];\nconst lookupDataTypes = ['singleSelect'];\nconst timeInterval = 200;\n\nconst isLocalTime = (dateValue) => new Date().getTimezoneOffset() === new Date(dateValue).getTimezoneOffset();\n\n/**\n * Handles common HTTP error responses such as session expiration and forbidden access.\n * If an error is detected, sets an appropriate error message and redirects the user after a delay.\n * Returns true if a common error was handled, otherwise false.\n * \n * @param {Object} response - The HTTP response object containing the status code.\n * @param {Function} setError - Callback function to set the error message.\n * @returns {boolean} Returns true if a common error was handled and a redirect is triggered, otherwise false.\n */\nconst handleCommonErrors = (response, setError) => {\n    if (response.status === HTTP_STATUS_CODES.SESSION_EXPIRED) {\n        setError('Session Expired!');\n        setTimeout(() => {\n            window.location.href = '/';\n        }, timeInterval);\n        return true;\n    } else if (response.status === HTTP_STATUS_CODES.FORBIDDEN) {\n        setError('Access Denied!');\n        setTimeout(() => {\n            window.location.href = '/';\n        }, timeInterval);\n        return true;\n    } else if (response.status === HTTP_STATUS_CODES.INTERNAL_SERVER_ERROR) {\n        setError('Internal Server Error');\n    }\n    return false;\n};\n\nfunction shouldApplyFilter(filter) {\n    const { operator, value, type } = filter;\n\n    const isUnaryOperator = [\"isEmpty\", \"isNotEmpty\"].includes(operator);\n    const hasValidValue = value !== undefined &&\n        value !== null &&\n        (value !== '' || (type === 'number' && value === 0) || (type === 'boolean' && value === false));\n\n    return isUnaryOperator || hasValidValue;\n}\n\nconst getList = async ({ gridColumns, setIsLoading, setData, page, pageSize, sortModel, filterModel, api, parentFilters, action = 'list', setError, extraParams, contentType, columns, controllerType = 'node', template = null, configFileName = null, dispatchData, showFullScreenLoader = false, model, baseFilters = null, isElasticExport }) => {\n    if (!contentType) {\n        if (showFullScreenLoader) {\n            dispatchData({ type: actionsStateProvider.UPDATE_LOADER_STATE, payload: true });\n        }\n    }\n\n    const lookups = [];\n    const lookupWithDeps = []; // for backward compatibility having two lookups arrays\n    const dateColumns = [];\n    gridColumns.forEach(({ lookup, type, field, keepLocal = false, keepLocalDate, filterable = true, dependsOn }) => {\n        if (dateDataTypes.includes(type)) {\n            dateColumns.push({ field, keepLocal, keepLocalDate });\n        }\n        if (!lookup) {\n            return;\n        }\n        if (!lookups.includes(lookup) && lookupDataTypes.includes(type) && filterable) {\n            lookups.push(lookup);\n            lookupWithDeps.push({ lookup, dependsOn });\n        }\n    });\n\n    const where = [];\n    if (filterModel?.items?.length) {\n        filterModel.items.forEach(filter => {\n            if (shouldApplyFilter(filter)) {\n                const { field, operator, filterField } = filter;\n                let { value } = filter;\n                const column = gridColumns.filter((item) => item?.field === filter.field);\n                const type = column[0]?.type;\n                if (type === 'boolean') {\n                    value = (value === 'true' || value === true) ? 1 : 0;\n                } else if (type === 'number') {\n                    value = Array.isArray(value) ? value.filter(e => e) : value;\n                }\n                value = filter.filterValues || value;\n                where.push({\n                    field: filterField || field,\n                    operator,\n                    value,\n                    type\n                });\n            }\n        });\n    }\n    if (parentFilters) {\n        where.push(...parentFilters);\n    }\n\n    if (baseFilters) {\n        where.push(...baseFilters);\n    }\n    const requestData = {\n        start: page * pageSize,\n        limit: isElasticExport ? model.exportSize : pageSize,\n        ...extraParams,\n        logicalOperator: filterModel.logicOperator,\n        sort: sortModel.map(sort => (sort.filterField || sort.field) + ' ' + sort.sort).join(','),\n        where,\n        isElasticExport,\n        model: model.module,\n        fileName: model.overrideFileName\n    };\n\n    if (lookups.length) {\n        requestData.lookups = lookups.join(',');\n    }\n\n    if (lookupWithDeps.length) {\n        requestData.lookupWithDeps = JSON.stringify(lookupWithDeps);\n    }\n\n    if (model?.limitToSurveyed) {\n        requestData.limitToSurveyed = model?.limitToSurveyed;\n    }\n\n    const headers = {};\n    let url = controllerType === 'cs' ? `${api}?action=${action}&asArray=0` : `${api}/${action}`;\n\n    if (template !== null) {\n        url += `&template=${template}`;\n    }\n    if (configFileName !== null) {\n        url += `&configFileName=${configFileName}`;\n    }\n    if (contentType) {\n        const form = document.createElement(\"form\");\n        requestData.responseType = contentType;\n        requestData.columns = columns;\n        requestData.userTimezoneOffset = -new Date().getTimezoneOffset(); // Negate to get the correct offset for conversion\n        form.setAttribute(\"method\", \"POST\");\n        form.setAttribute(\"id\", \"exportForm\");\n        form.setAttribute(\"target\", \"_blank\");\n        if (template === null) {\n            for (const key in requestData) {\n                let v = requestData[key];\n                if (v === undefined || v === null) {\n                    continue;\n                } else if (typeof v !== 'string') {\n                    v = JSON.stringify(v);\n                }\n                const hiddenTag = document.createElement('input');\n                hiddenTag.type = \"hidden\";\n                hiddenTag.name = key;\n                hiddenTag.value = v;\n                form.append(hiddenTag);\n            }\n        }\n        form.setAttribute('action', url);\n        document.body.appendChild(form);\n        form.submit();\n        setTimeout(() => {\n            document.getElementById(\"exportForm\").remove();\n        }, 3000);\n        return;\n    }\n    try {\n        setIsLoading(true);\n        const params = {\n            url,\n            method: 'POST',\n            data: requestData,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                ...headers\n            },\n            credentials: 'include'\n        };\n        setData(prevData => ({\n            ...prevData,\n            records: [] // reset records to empty array before fetching new data\n        }));\n        const response = await transport(params);\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            const { records } = response.data;\n            if (records) {\n                records.forEach(record => {\n                    dateColumns.forEach(column => {\n                        const { field, keepLocal, keepLocalDate } = column;\n                        if (record[field]) {\n                            record[field] = new Date(record[field]);\n                            if (keepLocalDate) {\n                                const userTimezoneOffset = record[field].getTimezoneOffset() * 60000;\n                                record[field] = new Date(record[field].getTime() + userTimezoneOffset);\n                            }\n                            if (keepLocal && !isLocalTime(record[field])) {\n                                const userTimezoneOffset = record[field].getTimezoneOffset() * 60000;\n                                record[field] = new Date(record[field].getTime() + userTimezoneOffset);\n                            }\n                        }\n                    });\n                    model.columns.forEach(({ field, displayIndex }) => {\n                        if (!displayIndex) return;\n                        record[field] = record[displayIndex];\n                    });\n                });\n            }\n            setData(response.data);\n        } else if (!handleCommonErrors(response, setError)) {\n            setError(response.statusText);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not list record', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n        if (!contentType && showFullScreenLoader) {\n            dispatchData({ type: actionsStateProvider.UPDATE_LOADER_STATE, payload: false });\n        }\n    }\n};\n\nconst getRecord = async ({ api, id, setIsLoading, setActiveRecord, model, parentFilters, where = {}, setError }) => {\n    api = api || model.api;\n    setIsLoading(true);\n    const searchParams = new URLSearchParams();\n    const url = `${api}/${id === undefined || id === null ? '-' : id}`;\n    const lookupsToFetch = [];\n    const fields = model.formDef || model.columns;\n    fields?.forEach(field => {\n        if (field.lookup && !lookupsToFetch.includes(field.lookup) && !field.dependsOn) {\n            lookupsToFetch.push(field.lookup);\n        }\n    });\n    searchParams.set(\"lookups\", lookupsToFetch);\n    if (where && Object.keys(where)?.length) {\n        searchParams.set(\"where\", JSON.stringify(where));\n    }\n    try {\n        const response = await transport({\n            url: `${url}?${searchParams.toString()}`,\n            method: 'GET',\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            const { data: record, lookups } = response.data;\n            let title = record[model.linkColumn];\n            const columnConfig = model.columns.find(a => a.field === model.linkColumn);\n            if (columnConfig && columnConfig.lookup) {\n                if (lookups && lookups[columnConfig.lookup] && lookups[columnConfig.lookup]?.length) {\n                    const lookupValue = lookups[columnConfig.lookup].find(a => a.value === title);\n                    if (lookupValue) {\n                        title = lookupValue.label;\n                    }\n                }\n            }\n            const defaultValues = { ...model.defaultValues };\n            setActiveRecord({ id, title: title, record: { ...defaultValues, ...record, ...parentFilters }, lookups });\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Could not load record', response.body.toString());\n        }\n    } catch (error) {\n        if (error.response && handleCommonErrors(error.response, setError)) {\n            setError('Could not load record', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n};\n\nconst deleteRecord = async function ({ id, api, setIsLoading, setError }) {\n    const result = { success: false, error: '' };\n    if (!id) {\n        setError('Deleted failed. No active record.');\n        return;\n    }\n    setIsLoading(true);\n    try {\n        const response = await transport({\n            url: `${api}/${id}`,\n            method: 'DELETE',\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            if (response.data && !response.data.success) {\n                result.success = false;\n                setError('Delete failed', response.data.message);\n                return false;\n            }\n            result.success = true;\n            return true;\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Delete failed', response.body);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not delete record', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n    return result;\n};\n\nconst saveRecord = async function ({ id, api, values, setIsLoading, setError }) {\n    let url, method;\n\n    if (id !== 0) {\n        url = `${api}/${id}`;\n        method = 'PUT';\n    } else {\n        url = api;\n        method = 'POST';\n    }\n\n\n    try {\n        setIsLoading(true);\n        const response = await transport({\n            url,\n            method,\n            data: values,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            const data = response.data;\n            if (data.success) {\n                return data;\n            }\n            setError('Save failed', data.err || data.message);\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Save failed', response.body);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not save record', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n\n    return false;\n};\n\nconst getLookups = async ({ api, setIsLoading, setActiveRecord, model, setError, lookups, scopeId }) => {\n    api = api || model.api;\n    setIsLoading(true);\n    const searchParams = new URLSearchParams();\n    const url = `${api}/lookups`;\n    searchParams.set(\"lookups\", lookups);\n    searchParams.set(\"scopeId\", scopeId);\n    try {\n        const response = await transport({\n            url: `${url}?${searchParams.toString()}`,\n            method: 'GET',\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            setActiveRecord(response.data);\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Could not load lookups', response.statusText);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not load lookups', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n};\nexport {\n    getList,\n    getRecord,\n    deleteRecord,\n    saveRecord,\n    getLookups\n};\n","import {\n    GridFooterContainer,\n    GridFooter\n} from '@mui/x-data-grid-premium';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport TextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport { useTranslation } from 'react-i18next';\nimport React, { useEffect, useState } from 'react';\nconst Footer = ({ pagination, apiRef, tTranslate = (key) => key }) => {\n    const page = apiRef.current.state.pagination.paginationModel.page;\n    const rowsPerPage = apiRef.current.state.pagination.paginationModel.pageSize;\n    const totalRows = apiRef.current.state.rows.totalRowCount;\n    const totalPages = Math.ceil(totalRows / rowsPerPage);\n    const { t: translate, i18n } = useTranslation();\n    const tOpts = { t: translate, i18n };\n    const [pageNumber, setPageNumber] = useState(page + 1);\n\n    const handleChange = function (e) {\n        let value = e.target?.value;\n\n        if (value === '') {\n            setPageNumber('');\n        } else {\n            value = parseInt(value);\n            value = isNaN(value) || value < 1 ? 1 : value;\n            setPageNumber(value);\n        }\n    };\n\n    useEffect(() => {\n        setPageNumber(page + 1);\n    }, [page, rowsPerPage]);\n\n    const onPageChange = function () {\n        let targetPage = pageNumber === '' ? 1 : pageNumber;\n        targetPage = Math.max(targetPage, 1);\n        targetPage = Math.min(targetPage, totalPages);\n        apiRef.current.setPage(targetPage - 1);\n        setPageNumber(targetPage);\n        if (pageNumber === '') {\n            setPageNumber(1);\n        }\n    };\n    const handleKeyPress = (event) => {\n        const keyCode = event.which || event.keyCode;\n        const keyValue = String.fromCharCode(keyCode);\n        if (!/\\d/.test(keyValue)) event.preventDefault();\n    };\n\n    return (\n        <GridFooterContainer>\n            <Box sx={{ pl: 5 }}>\n                {pagination &&\n                    <>\n                        <Typography variant=\"p\">{tTranslate('Jump to page', tOpts)}:</Typography>\n                        <TextField\n                            sx={{\n                                width: 70,\n                                pl: 1,\n                                '& input[type=number]::-webkit-inner-spin-button': {\n                                    cursor: 'pointer'\n                                },\n                                '& input[type=number]::-webkit-outer-spin-button': {\n                                    cursor: 'pointer'\n                                }\n                            }}\n                            variant=\"standard\"\n                            type='number'\n                            min={1}\n                            value={pageNumber}\n                            onChange={handleChange}\n                            onKeyPress={handleKeyPress}\n                            disabled={!totalRows}\n                        />\n                        <Button disabled={!totalRows} size='small' onClick={onPageChange}>{tTranslate('Go', tOpts)}</Button>\n                    </>\n                }\n            </Box>\n            <GridFooter />\n        </GridFooterContainer>\n    );\n};\nexport { Footer };","const defaultTemplate = /\\${((\\w+)\\.)?(\\w+)}/g;\n\n/**\n * @description Replaces the given tags in the given source with the given values.\n * @param {string} source The source to replace the tags in.\n * @param {object} values The values to replace the tags with.\n * @param {object} options template - Regex to use for matching tags, keepMissingTags - Whether to keep tags that are not replaced.\n * @returns {string} The source with the tags replaced.\n * @example\n * // Replaces all tags in the given source with the given values.\n * console.log(template(\"${firstName} ${lastName}\", { firstName: \"John\", lastName: \"Doe\" }));\n * // -> \"John Doe\"\n * // Two level tags are supported.\n * console.log(template(\"${user.firstName} ${user.lastName}\", { user: { firstName: \"John\", lastName: \"Doe\" } }));\n * // -> \"John Doe\"\n **/\nconst replaceTags = function (source, tags, { template = defaultTemplate, keepMissingTags = false } = {}) {\n    if (!source || !tags) {\n        return source;\n    }\n\n    return source.replace(template, function (match, g1, g2, g3) {\n        const container = g2 ? tags[g2] || {} : tags;\n        return container[g3] === undefined ? (keepMissingTags ? match : \"\") : container[g3];\n    });\n};\n\nexport default {\n    replaceTags\n};","import React from 'react';\nimport { Typography } from \"@mui/material\";\n\nexport default function MuiTypography({ variant = \"h2\", component = \"h2\", text = '', name = null, ...rest }) {\n    return (\n        <Typography variant={variant} component={component} {...rest}>\n            {text}\n            {name && ` ${name}`}\n        </Typography>\n    );\n}","import { useState, useEffect } from 'react';\n\nfunction useMobile(onlyMobile = false) {\n  const initialValue = checkDevice();\n  const [view, setView] = useState(initialValue);\n\n  function handleWindowSizeChange() {\n    setTimeout(() => {\n      setView(checkDevice())\n    }, 10);\n  }\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowSizeChange);\n    return () => {\n      window.removeEventListener('resize', handleWindowSizeChange);\n    }\n  }, []);\n\n\n  function checkDevice() {\n    let userAgent = typeof window.navigator === \"undefined\" ? \"\" : navigator.userAgent;\n    const mobile = Boolean(userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i));\n    userAgent = userAgent.toLowerCase();\n    const tablet = /(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(userAgent);\n    let currentOrientation = null;\n    if (window.innerWidth <= window.innerHeight) {\n      currentOrientation = \"portrait\";\n    } else {\n      currentOrientation = \"landscape\";\n    }\n    return { mobile, tablet, portrait: currentOrientation === 'portrait', landscape: currentOrientation === 'landscape' };\n  }\n\n  return onlyMobile ? view.mobile : view;\n}\n\nexport default useMobile;","import actionsStateProvider from \"./actions\";\nconst stateReducer = (state, action) => {\n    switch (action.type) {\n        case actionsStateProvider.UPDATE_LOCALIZATION:\n            return { ...state, dataLocalization: action.payload };\n        case actionsStateProvider.UPDATE_DATE_TIME:\n            return { ...state, dateTime: action.payload };\n        case actionsStateProvider.UPDATE_FORM_MODE:\n            return { ...state, dataForm: action.payload };\n        case actionsStateProvider.PAGE_TITLE_DETAILS:\n            return { ...state, pageTitleDetails: action.payload };\n        case actionsStateProvider.OPEN_MODAL:\n            return { ...state, modal: action.payload };\n        case actionsStateProvider.SET_PAGE_BACK_BUTTON:\n            return { ...state, pageBackButton: action.payload };\n        case actionsStateProvider.SET_GRID_SETTINGS:\n            return { ...state, gridSettings: action.payload };\n        case actionsStateProvider.SET_LOCAL_LOCALIZATION:\n            return { ...state, getLocal: action.payload };\n        case actionsStateProvider.USER_DATA:\n            return { ...state, getUserData: action.payload };\n        case actionsStateProvider.UDPATE_PREFERENCES:\n            return { ...state, preferences: action.payload };\n        case actionsStateProvider.SET_CURRENT_PREFERENCE_NAME:\n            return { ...state, currentPreference: action.payload };\n        case actionsStateProvider.TOTAL_PREFERENCES:\n            return { ...state, totalPreferences: action.payload };\n        case actionsStateProvider.UPDATE_LOADER_STATE:\n            return { ...state, loaderOpen: action.payload };\n        case actionsStateProvider.PASS_FILTERS_TO_HEADER:\n            return { ...state, filtersInHeader: action.payload };\n        case actionsStateProvider.SET_TIMEZONE:\n            return { ...state, timeZone: action.payload };\n        default:\n            return state;\n    }\n};\nexport default stateReducer;","const initialState = {\n    dataLocalization: 'en',\n    dateTime: 'MM/DD/YYYY hh:mm:ss A',\n    dataForm: '',\n    pageTitleDetails:null,\n    modal:null,\n    pageBackButton:null,\n    gridSettings:{},\n    getLocal:{},\n    getUserData:null,\n    preferences: [],\n    currentPreference: null,\n    totalPreferences: null,\n    loaderOpen: false,\n    filtersInHeader: {},\n    timeZone: \"\"\n  };\n\n  export default initialState;","import * as locales from '@mui/x-data-grid-premium';\nexport const daDKGrid = {\n\n    Jumptopage: 'Gå til side',\n    Go: 'Gå',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'I dette rum vil vi snart bringe dig et dashboard med hovedoversigt KPIer for nem adgang',\n    Pages: 'sider',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Rækker pr. side',\n    }\n};\nconst mergedLocalizationDatadaDK = {\n    ...locales['daDK'],\n    ...daDKGrid,\n};\nexport default mergedLocalizationDatadaDK;\n","import * as locales from '@mui/x-data-grid-premium';\nexport const deDEGrid = {\n    Jumptopage: 'Zur Seite springen',\n    Go: 'Gehen',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'In diesem Bereich werden wir Ihnen in Kürze ein Dashboard mit den wichtigsten Übersichts-KPIs für einen einfachen Zugriff bereitstellen',\n    Pages: 'Seiten',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Zeilen pro Seite',\n    }\n};\nconst mergedLocalizationDatadeDE= {\n    ...locales['deDE'],\n    ...deDEGrid,\n};\n\nexport default mergedLocalizationDatadeDE;","import * as locales from '@mui/x-data-grid-premium';\nexport const elGRGrid = {\n    Jumptopage: 'Μετάβαση στη σελίδα',\n    Go: 'Πηγαίνω',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'Σε αυτόν τον χώρο θα σας φέρουμε σύντομα έναν πίνακα ελέγχου βασικών επισκόπησης KPI για εύκολη πρόσβαση',\n    Pages: 'Σελίδες',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Σειρές ανά σελίδα',\n    }\n};\nconst mergedLocalizationDataelGR = {\n    ...locales['elGR'],\n    ...elGRGrid,\n};\n\nexport default mergedLocalizationDataelGR;","import * as locales from '@mui/x-data-grid-premium';\nexport const esESGrid = {\n    Jumptopage: 'Saltar a la página',\n    Go: 'Ir',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'En este espacio pronto le ofreceremos un panel con los principales KPI generales para un fácil acceso.',\n    Pages: 'paginas',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Filas por página',\n    }\n};\nconst mergedLocalizationDataesES = {\n    ...locales['esES'],\n    ...esESGrid,\n};\n\nexport default mergedLocalizationDataesES;","\n\nimport * as locales from '@mui/x-data-grid-premium';\nexport const frFRGrid = {\n    Jumptopage: 'Aller à la page',\n    Go: 'Aller',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'Dans cet espace, nous vous proposerons bientôt un tableau de bord des principaux KPI pour un accès facile.',\n    Pages: 'Pages',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Lignes par page',\n    }\n};\nconst mergedLocalizationDatafrFR = {\n    ...locales['frFR'],\n    ...frFRGrid,\n};\nexport default mergedLocalizationDatafrFR;","\nimport * as locales from '@mui/x-data-grid-premium';\nexport const itITGrid = {\n    Jumptopage: 'Vai alla pagina',\n    Go: 'Andare',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'In questo spazio presto ti forniremo una dashboard con i principali KPI generali per un facile accesso',\n    Pages: 'Pagine',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Righe per pagina',\n    }\n};\nconst mergedLocalizationDataitIT = {\n    ...locales['itIT'],\n    ...itITGrid,\n};\n\nexport default mergedLocalizationDataitIT;","\nimport * as locales from '@mui/x-data-grid-premium';\nexport const trTRGrid = {\n  Jumptopage: 'Sayfaya atla',\n  Go: 'Gitmek',\n  InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'Bu alanda yakında size kolay erişim için ana genel bakış KPI larının bir kontrol panelini sunacağız',\n  Pages: 'Sayfalar',\n  MuiTablePagination: {\n    labelRowsPerPage: 'Sayfa başına satır',\n  },\n};\nconst mergedLocalizationDatatrTR = {\n  ...locales['trTR'],\n  ...trTRGrid,\n};\nexport default mergedLocalizationDatatrTR;\n","export default {\n  components: {\n    MuiDataGrid: {\n      defaultProps: {\n        localeText: {\n          Add: \"createew\",\n          noRowsLabel: 'Sem resultados',\n          noResultsOverlayLabel: 'Nenhum resultado encontrado.',\n\n          // Density selector toolbar button text\n          toolbarDensity: 'Densidade',\n          toolbarDensityLabel: 'Densidade',\n          toolbarDensityCompact: 'Compacto',\n          toolbarDensityStandard: 'Padrão',\n          toolbarDensityComfortable: 'Confortável',\n\n          // Columns selector toolbar button text\n          toolbarColumns: 'Colunas',\n          toolbarColumnsLabel: 'Selecionar colunas',\n\n          // Filters toolbar button text\n          toolbarFilters: 'Filtros',\n          toolbarFiltersLabel: 'Mostrar filtros',\n          toolbarFiltersTooltipHide: 'Esconder filtros',\n          toolbarFiltersTooltipShow: 'Mostrar filtros',\n          toolbarFiltersTooltipActive: (count) =>\n            count !== 1 ? `${count} filtros ativos` : `${count} filtro ativo`,\n\n          // Quick filter toolbar field\n          toolbarQuickFilterPlaceholder: 'Pesquisar...',\n          toolbarQuickFilterLabel: 'Pesquisar',\n          toolbarQuickFilterDeleteIconLabel: 'Limpar',\n\n          // Export selector toolbar button text\n          toolbarExport: 'Exportar',\n          toolbarExportLabel: 'Exportar',\n          toolbarExportCSV: 'Baixar como CSV',\n          toolbarExportPrint: 'Imprimir',\n          toolbarExportExcel: 'Baixar como Excel',\n\n          // Columns panel text\n          columnsPanelTextFieldLabel: 'Encontrar coluna',\n          columnsPanelTextFieldPlaceholder: 'Título da coluna',\n          columnsPanelDragIconLabel: 'Reorganizar coluna',\n          columnsPanelShowAllButton: 'Mostrar todas',\n          columnsPanelHideAllButton: 'Esconder todas',\n\n          // Filter panel text\n          filterPanelAddFilter: 'Adicionar filtro',\n          filterPanelRemoveAll: 'Remover todos',\n          filterPanelDeleteIconLabel: 'Excluir',\n          filterPanelLogicOperator: 'Operador lógico',\n          filterPanelOperator: 'Operador',\n          filterPanelOperatorAnd: 'E',\n          filterPanelOperatorOr: 'Ou',\n          filterPanelColumns: 'Colunas',\n          filterPanelInputLabel: 'Valor',\n          filterPanelInputPlaceholder: 'Valor do filtro',\n\n          // Filter operators text\n          filterOperatorContains: 'contém',\n          filterOperatorEquals: 'é igual a',\n          filterOperatorStartsWith: 'começa com',\n          filterOperatorEndsWith: 'termina com',\n          filterOperatorIs: 'é',\n          filterOperatorNot: 'não é',\n          filterOperatorAfter: 'é posterior a',\n          filterOperatorOnOrAfter: 'é em ou depois de',\n          filterOperatorBefore: 'é anterior a',\n          filterOperatorOnOrBefore: 'é em ou antes de',\n          filterOperatorIsEmpty: 'está vazio',\n          filterOperatorIsNotEmpty: 'não está vazio',\n          filterOperatorIsAnyOf: 'é algum de',\n          'filterOperator=': '=',\n          'filterOperator!=': '!=',\n          'filterOperator>': '>',\n          'filterOperator>=': '>=',\n          'filterOperator<': '<',\n          'filterOperator<=': '<=',\n\n          // Header filter operators text\n          headerFilterOperatorContains: 'Contém',\n          headerFilterOperatorEquals: 'É igual a',\n          headerFilterOperatorStartsWith: 'Começa com',\n          headerFilterOperatorEndsWith: 'Termina com',\n          headerFilterOperatorIs: 'É',\n          headerFilterOperatorNot: 'Não é',\n          headerFilterOperatorAfter: 'É depois de',\n          headerFilterOperatorOnOrAfter: 'É em ou depois de',\n          headerFilterOperatorBefore: 'É antes de',\n          headerFilterOperatorOnOrBefore: 'É em ou antes de',\n          headerFilterOperatorIsEmpty: 'Está vazio',\n          headerFilterOperatorIsNotEmpty: 'Não está vazio',\n          headerFilterOperatorIsAnyOf: 'É algum de',\n          'headerFilterOperator=': 'É igual a',\n          'headerFilterOperator!=': 'Não é igual a',\n          'headerFilterOperator>': 'Maior que',\n          'headerFilterOperator>=': 'Maior ou igual a',\n          'headerFilterOperator<': 'Menor que',\n          'headerFilterOperator<=': 'Menor ou igual a',\n\n          // Filter values text\n          filterValueAny: 'qualquer',\n          filterValueTrue: 'verdadeiro',\n          filterValueFalse: 'falso',\n\n          // Column menu text\n          columnMenuLabel: 'Menu',\n          columnMenuShowColumns: 'Mostrar colunas',\n          columnMenuManageColumns: 'Gerenciar colunas',\n          columnMenuFilter: 'Filtro',\n          columnMenuHideColumn: 'Esconder coluna',\n          columnMenuUnsort: 'Desfazer ordenação',\n          columnMenuSortAsc: 'Ordenar por ASC',\n          columnMenuSortDesc: 'Ordenar por DESC',\n\n          // Column header text\n          columnHeaderFiltersTooltipActive: (count) =>\n            count !== 1 ? `${count} filtros ativos` : `${count} filtro ativo`,\n          columnHeaderFiltersLabel: 'Mostrar filtros',\n          columnHeaderSortIconLabel: 'Ordenar',\n\n          // Rows selected footer text\n          footerRowSelected: (count) =>\n            count !== 1\n              ? `${count.toLocaleString()} linhas selecionadas`\n              : `${count.toLocaleString()} linha selecionada`,\n\n          // Total row amount footer text\n          footerTotalRows: 'Total de linhas:',\n\n          // Total visible row amount footer text\n          footerTotalVisibleRows: (visibleCount, totalCount) =>\n            `${visibleCount.toLocaleString()} de ${totalCount.toLocaleString()}`,\n\n          // Checkbox selection text\n          checkboxSelectionHeaderName: 'Seleção de caixa de seleção',\n          checkboxSelectionSelectAllRows: 'Selecionar todas as linhas',\n          checkboxSelectionUnselectAllRows: 'Desselecionar todas as linhas',\n          checkboxSelectionSelectRow: 'Selecionar linha',\n          checkboxSelectionUnselectRow: 'Desselecionar linha',\n\n          // Boolean cell text\n          booleanCellTrueLabel: 'sim',\n          booleanCellFalseLabel: 'não',\n\n          // Actions cell more text\n          actionsCellMore: 'mais',\n\n          // Column pinning text\n          pinToLeft: 'Fixar à esquerda',\n          pinToRight: 'Fixar à direita',\n          unpin: 'Desafixar',\n\n          // Tree Data\n          treeDataGroupingHeaderName: 'Agrupar',\n          treeDataExpand: 'ver filhos',\n          treeDataCollapse: 'esconder filhos',\n\n          // Grouping columns\n          groupingColumnHeaderName: 'Agrupar',\n          groupColumn: (name) => `Agrupar por ${name}`,\n          unGroupColumn: (name) => `Parar de agrupar por ${name}`,\n\n          // Master/detail\n          detailPanelToggle: 'Alternar painel de detalhes',\n          expandDetailPanel: 'Expandir',\n          collapseDetailPanel: 'Recolher',\n\n          // Used core components translation keys\n          MuiTablePagination: {},\n\n          // Row reordering text\n          rowReorderingHeaderName: 'Reorganização de linhas',\n\n          // Aggregation\n          aggregationMenuItemHeader: 'Agregação',\n          aggregationFunctionLabelSum: 'soma',\n          aggregationFunctionLabelAvg: 'média',\n          aggregationFunctionLabelMin: 'mínimo',\n          aggregationFunctionLabelMax: 'máximo',\n          aggregationFunctionLabelSize: 'tamanho',\n          //footer\n          Jumptopage: 'Ir para a página',\n          Go: 'Ir',\n          InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess:'Neste espaço em breve traremos para você um dashboard com os principais KPIs de visão geral para fácil acesso',\n          Pages:'Páginas',\n          MuiTablePagination: {\n            labelRowsPerPage: 'Linhas por página',\n          }\n        }\n      },\n    },\n  },\n};","\nimport * as locales from '@mui/x-data-grid-premium';\n\nexport const enUSGrid = {\n    Jumptopage: 'Jump to page',\n    Go: 'Go',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'In this space we will soon bring you a dashboard of main overview KPIs for easy access',\n    Pages: 'Pages',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Rows per page',\n    },\n};\nconst mergedLocalizationDataenUS = {\n    ...locales['enUS'],\n    ...enUSGrid,\n};\nexport default mergedLocalizationDataenUS;","// localization.js\nimport mergedLocalizationDatadaDK from './data-grid/daDK';\nimport mergedLocalizationDatadeDE from './data-grid/deDE';\nimport mergedLocalizationDataelGR from './data-grid/elGR';\nimport mergedLocalizationDataesES from './data-grid/esES';\nimport mergedLocalizationDatafrFR from './data-grid/frFR';\nimport mergedLocalizationDataitIT from './data-grid/itIT';\nimport mergedLocalizationDatatrTR from './data-grid/trTR';\nimport ptPT from './data-grid/ptPT';\nimport mergedLocalizationDataenUS from './data-grid/enUS';\nimport * as React from 'react';\nexport const locales = {\n  'en': mergedLocalizationDataenUS,\n  'tr-TR': mergedLocalizationDatatrTR,\n  'es-ES': mergedLocalizationDataesES,\n  'da-DK': mergedLocalizationDatadaDK,\n  'de-DE': mergedLocalizationDatadeDE,\n  'el-GR': mergedLocalizationDataelGR,\n  'fr-FR': mergedLocalizationDatafrFR,\n  'pt-PT': ptPT,\n  'it-IT': mergedLocalizationDataitIT\n};","import React, { createContext, useReducer, useContext } from 'react';\nimport stateReducer from './stateReducer';\nimport initialState from './initialState';\nimport request from '../Grid/httpRequest';\nimport { locales } from '../mui/locale/localization';\nimport dayjs from 'dayjs';\nimport actionsStateProvider from './actions';\nimport utc from 'dayjs/plugin/utc';\nimport timezone from 'dayjs/plugin/timezone';\n\n// Extend dayjs with the plugins\ndayjs.extend(utc);\ndayjs.extend(timezone);\n\nconst StateContext = createContext();\nconst RouterContext = createContext(null);\n\nconst StateProvider = ({ children }) => {\n\n  const [stateData, dispatchData] = useReducer(stateReducer, initialState);\n\n  /**\n   * Returns the system date and/or time format string based on user preferences and options.\n   *\n   * @param {boolean} isDateFormatOnly - If true, returns only the date format; otherwise, returns date and time format.\n   * @param {boolean} showOnlyDate - If true and isDateFormatOnly is false, returns only the date part in uppercase.\n   * @param {string|null|undefined} state - The user-defined date/time format string (e.g., \"dd-mm-yyyy hh:mm A\").\n   * @returns {string} The formatted date/time format string.\n   */\n  function systemDateTimeFormat(isDateFormatOnly, showOnlyDate, state) {\n    if (state !== undefined && state !== null) {\n      const userData = state; // Access 'state' \n      let userDateFormat = isDateFormatOnly ? 'DD-MM-YYYY' : 'DD-MM-YYYY hh:mm:ss A';\n      if (userData) {\n        userDateFormat = userData.split(' ');\n        userDateFormat[0] = userDateFormat[0].toUpperCase();\n        if (!isDateFormatOnly) {\n          if (showOnlyDate) {\n            userDateFormat = userDateFormat[0].toUpperCase();\n          } else {\n            userDateFormat[1] += !userDateFormat[1].includes(':ss') ? ':ss' : '';\n            userDateFormat = userDateFormat.join(\" \");\n          }\n        } else {\n          userDateFormat = userDateFormat[0];\n        }\n      };\n      return userDateFormat;\n    }\n    return isDateFormatOnly ? 'DD-MM-YYYY' : 'DD-MM-YYYY hh:mm:ss A';\n  }\n\n  /**\n   * Fetches all saved preferences for a given grid and user, and updates the state.\n   * Optionally adds a default preference to the list.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {string} params.preferenceName - The name of the grid or preference.\n   * @param {string} params.Username - The username for which to fetch preferences.\n   * @param {object} params.history - The history object for navigation.\n   * @param {function} params.dispatchData - The dispatch function to update state.\n   * @param {string} params.preferenceApi - The API endpoint for preferences.\n   * @param {Object} [params.defaultPreferenceEnums={}] - Default preferences mapping.\n   * @param {boolean} [params.addDefaultPreference=false] - Whether to add a default preference.\n   */\n  async function getAllSavedPreferences({ preferenceName, Username, history, dispatchData, preferenceApi, defaultPreferenceEnums = {}, addDefaultPreference = false }) {\n    const response = await request({ url: preferenceApi, params: { action: 'list', id: preferenceName, Username }, history, dispatchData }) || {};\n    const preferences = response.preferences || [];\n    if (addDefaultPreference) {\n      preferences.unshift({\n        prefName: \"Default\",\n        prefId: 0,\n        GridId: preferenceName,\n        GridPreferenceId: 0,\n        prefValue: defaultPreferenceEnums[preferenceName]\n      });\n    }\n    dispatchData({ type: actionsStateProvider.UDPATE_PREFERENCES, payload: preferences });\n    dispatchData({ type: actionsStateProvider.TOTAL_PREFERENCES, payload: preferences.length });\n    return preferences;\n  }\n\n  /**\n   * Filters out data elements whose fields do not exist in the grid's columns.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {Object} params.gridRef - A reference to the grid component.\n   * @param {Array} params.data - The data array to filter.\n   * @returns {Array} The filtered array containing only elements with existing columns in the grid.\n   */\n  const filterNonExistingColumns = ({ gridRef, data }) => {\n    return data.filter(ele => gridRef.current.getColumnIndex(ele.field) !== -1);\n  };\n\n  /**\n   * Applies the default grid preference if it exists for the user, otherwise applies the default enum.\n   * Updates the grid and state accordingly.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {Object} params.gridRef - Reference to the grid component.\n   * @param {Object} params.history - History object for navigation.\n   * @param {Function} params.dispatchData - Dispatch function to update state.\n   * @param {string} params.Username - Username for which to fetch preferences.\n   * @param {string} params.preferenceName - Name of the grid or preference.\n   * @param {Function} params.setIsGridPreferenceFetched - Callback to set grid preference fetched state.\n   * @param {string} params.preferenceApi - API endpoint for preferences.\n   * @param {Object} [params.defaultPreferenceEnums={}] - Default preferences mapping.\n   */\n  async function applyDefaultPreferenceIfExists({ preferences = [], gridRef, dispatchData, preferenceName, setIsGridPreferenceFetched, defaultPreferenceEnums = {} }) {\n    const defaultPreference = preferences.find(pref => pref.isDefault && pref.GridId === preferenceName);\n    const userPreferenceCharts = defaultPreference ? JSON.parse(defaultPreference.prefValue) : defaultPreferenceEnums[preferenceName];\n    if (userPreferenceCharts && Object.keys(userPreferenceCharts).length) {\n      userPreferenceCharts.gridColumn = filterNonExistingColumns({ gridRef, data: userPreferenceCharts.gridColumn });\n      userPreferenceCharts.sortModel = filterNonExistingColumns({ gridRef, data: userPreferenceCharts.sortModel });\n      userPreferenceCharts.filterModel.items = filterNonExistingColumns({ gridRef, data: userPreferenceCharts.filterModel.items });\n      gridRef.current.setColumnVisibilityModel(userPreferenceCharts.columnVisibilityModel);\n      gridRef.current.setPinnedColumns(userPreferenceCharts.pinnedColumns);\n      gridRef.current.setSortModel(userPreferenceCharts.sortModel || []);\n      gridRef.current.setFilterModel(userPreferenceCharts?.filterModel);\n      dispatchData({ type: actionsStateProvider.SET_CURRENT_PREFERENCE_NAME, payload: defaultPreference ? defaultPreference.prefName : 'Default' });\n    }\n    if (setIsGridPreferenceFetched) {\n      setIsGridPreferenceFetched(true);\n    }\n  }\n\n  /**\n   * Removes the current preference name from the state.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {Function} params.dispatchData - Dispatch function to update state.\n   */\n  function removeCurrentPreferenceName({ dispatchData }) {\n    dispatchData({ type: actionsStateProvider.SET_CURRENT_PREFERENCE_NAME, payload: null });\n  }\n\n  /**\n   * Formats a date value using the system or user-defined format and optional timezone.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {string|Date} params.value - The date value to format.\n   * @param {boolean} params.useSystemFormat - Whether to use the system date format.\n   * @param {boolean} [params.showOnlyDate=false] - Whether to show only the date part.\n   * @param {string|null|undefined} params.state - The user-defined date/time format string.\n   * @param {string} [params.timeZone] - The timezone to use for formatting.\n   * @returns {string} The formatted date string or '-' if value is falsy.\n   */\n  function formatDate({ value, useSystemFormat, showOnlyDate = false, state, timeZone }) {\n    if (!value) return '-';\n    const format = systemDateTimeFormat(useSystemFormat, showOnlyDate, state); // Pass 'state' as an argument\n    if (!timeZone) {\n      return dayjs(value).format(format);\n    }\n    return dayjs(value).tz(timeZone).format(format);\n  }\n\n  /**\n   * Provides localization utilities for the current locale.\n   *\n   * @returns {Object} An object with a getLocalizedString function.\n   */\n  function useLocalization() {\n    const currentLocaleData = stateData.dataLocalization;\n    const localeData = locales[currentLocaleData];\n    function getLocalizedString(key) {\n      return currentLocaleData === 'pt-PT' || currentLocaleData === 'ptPT' ? localeData.components.MuiDataGrid.defaultProps.localeText[key] || key : localeData[key] || key;\n    }\n    return { getLocalizedString };\n  }\n\n  return (\n    <StateContext.Provider value={{ stateData, dispatchData, systemDateTimeFormat, formatDate, removeCurrentPreferenceName, getAllSavedPreferences, applyDefaultPreferenceIfExists, useLocalization }}>\n      {children}\n    </StateContext.Provider>\n  );\n};\n\nconst RouterProvider = RouterContext.Provider;\n\nconst useRouter = () => {\n  return useContext(RouterContext);\n};\n\nconst useStateContext = () => {\n  const context = useContext(StateContext);\n  if (context === undefined) {\n    throw new Error('useStateContext must be used within a StateProvider');\n  }\n  return context;\n};\n\nexport { StateProvider, useStateContext, useRouter, RouterProvider };\n","import React, { useEffect, useState } from 'react';\nimport {\n    Grid, Typography,\n    Dialog, DialogContent, DialogTitle,\n} from '@mui/material';\nimport { Replay, Close } from '@mui/icons-material';\nimport { useStateContext } from '../useRouter/StateProvider';\nimport actionsStateProvider from '../useRouter/actions';\n\nconst HelpModal = () => {\n    const [height, setHeight] = useState();\n    const [loading, setLoading] = useState(false);\n    const { stateData, dispatchData } = useStateContext()\n    const openModal = stateData.modal; //useSelector(state => state.appReducer.modal);\n    const ratio = 16 / 9;\n    let zoom = ((window.outerWidth - 10) / window.innerWidth) * 100;\n    const updateHeight = () => {\n        let widthPercentage = document.getElementById('tutorial-iframe');\n        if (widthPercentage) {\n            widthPercentage = widthPercentage.offsetWidth;\n            widthPercentage = widthPercentage / window.innerWidth;\n        } else {\n            widthPercentage = 0.9;\n        }\n        const calculatedHeight = window.innerWidth * widthPercentage * (1 / ratio);\n        const maxHeight = window.innerHeight - 180;\n        setHeight(Math.min(calculatedHeight, maxHeight));\n    };\n    useEffect(() => {\n        if (openModal?.status) {\n            setLoading(true);\n            updateHeight();\n        }\n    }, [openModal, zoom])\n\n    useEffect(() => {\n        window.addEventListener(\"resize\", updateHeight);\n\n        return () => {\n            window.removeEventListener(\"resize\", updateHeight);\n        }\n    }, [])\n\n    function resetIframe() {\n        const iframe = document.getElementById('tutorial-iframe');\n        iframe.src = openModal?.data?.url;\n    }\n\n    return (\n        <div>\n            {openModal?.status &&\n                <Dialog fullWidth={true} maxWidth={\"lg\"} open={openModal.status} onClose={() => {\n                    dispatchData({\n                        type: actionsStateProvider.OPEN_MODAL, payload: { status: false, data: {}, }\n                    })\n                }} >\n                    <DialogTitle className='pt-2 pb-0'>\n                        <Grid container spacing={1}>\n                            <Grid size={11} >\n                                <Typography variant=\"h7\" component='div'> {openModal?.data?.title || ''}</Typography>\n                                <Typography variant=\"caption\" component='div'>{openModal?.data?.subTitle || <>&nbsp;</>}</Typography>\n                            </Grid>\n                            <Grid className=\"text-right\" size={1} >\n                                <Replay className='cursor_pointer mt-2 mr-2' onClick={resetIframe} />\n                                <Close className='cursor_pointer mt-2' onClick={() => {\n                                    dispatchData({\n                                        type: actionsStateProvider.OPEN_MODAL, payload: { status: false, data: {} }\n                                    })\n                                }} />\n                            </Grid>\n                        </Grid>\n                    </DialogTitle>\n                    <DialogContent dividers>\n                        {loading && <div>{\"Loading...\"}</div>}\n                        {openModal?.data?.url && <iframe\n                            id='tutorial-iframe'\n                            style={{ width: '100%', height: `${height}px` }}\n                            title={openModal?.data?.title || ''}\n                            src={openModal?.data?.url}\n                            allowfullscreen\n                            frameborder=\"0\"\n                            loading=\"lazy\"\n                            onLoad={() => setLoading(false)}\n                        />}\n                    </DialogContent>\n                </Dialog>}\n        </div>\n    )\n}\n\nexport default HelpModal","import React, { useEffect } from \"react\";\n\nimport { Box } from \"@mui/material\";\nimport { withTranslation } from \"react-i18next\";\nimport MuiTypography from \"../Typography\";\nimport useMobile from \"../useMobile\";\nimport { Breadcrumbs, Typography, Link as MuiLink, Button, IconButton, Grid } from \"@mui/material\";\nimport HelpIcon from '@mui/icons-material/Help';\nimport HelpModal from \"../HelpModal\";\nimport { Card, CardContent } from '@mui/material';\n\nfunction PageTitle({\n  titleHeading,\n  navigate,\n  name = null,\n  RightComponent = null,\n  mobileRightComponent,\n  title = \"\",\n  titleClass = \"text-theme-blue text-max-width\",\n  showBreadcrumbs,\n  breadcrumbs = [],\n  enableBackButton = false,\n  breadcrumbColor,\n  showHelpButton = false\n}) {\n  const isMobile = useMobile(true);\n  const breadcrumbsLasIndex = breadcrumbs.length - 1;\n  const needToShowBreadcrumbs = showBreadcrumbs && breadcrumbs.length;\n  const handleBack = () => {\n    navigate(-1);\n  };\n\n  // Update document title when title prop changes\n  useEffect(() => {\n    if (title) {\n      document.title = title;\n    }\n  }, [title]);\n\n  return (\n    <>\n      <MuiTypography className=\"print-only\" text={titleHeading} />\n      {needToShowBreadcrumbs && (<>\n        <Card sx={{ mb: 3 }}>\n          <CardContent sx={{ backgroundColor: breadcrumbColor || '#fff' }}>\n            {/* Add BreadCrumbs  */}\n            <Grid container>\n              <Grid sx={{ display: 'flex', alignItems: 'center', flex: 1 }}>\n                <Breadcrumbs variant=\"h5\" aria-label=\"breadcrumb\" separator=\">\" className={`${titleClass} breadcrumbs-text-title text-max-width`}>\n                  {breadcrumbs.map((breadcrumb, index) => index < breadcrumbsLasIndex ? (\n                    <MuiLink onClick={handleBack} key={index} className={`${titleClass} breadcrumbs-text-title text-max-width`} variant=\"inherit\" sx={{ textDecoration: 'none', color: '#1976d2' }}>\n                      {breadcrumb.text}\n                    </MuiLink>\n                  ) : <Typography key={index} className={`${titleClass} breadcrumbs-text-title text-max-width`} variant=\"inherit\">\n                    {breadcrumb.text}\n                  </Typography>)}\n                </Breadcrumbs>\n              </Grid>\n              {(breadcrumbs.length > 1 || enableBackButton) && <Grid sx={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\n                <Button variant=\"contained\" onClick={handleBack}>Back</Button>\n              </Grid>}\n              {showHelpButton && <Grid sx={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\n                <IconButton color=\"primary\" title='Help' size=\"large\">\n                  <HelpIcon fontSize=\"inherit\" />\n                </IconButton>\n              </Grid>}\n            </Grid>\n            {/* Title render */}\n            <Box className=\"app-page-title--first\">\n              <div>\n                <div style={{ display: isMobile ? 'block' : \"flex\", alignItems: \"center\" }}>\n                  <div style={{ flex: \"1 0 auto\" }}>\n                    <MuiTypography\n                      className={`${titleClass} page-text-title`}\n                      variant=\"p\"\n                      text={titleHeading}\n                      name={name}\n                    />\n                  </div>\n                </div>\n              </div>\n            </Box>\n            {/* For Mobile */}\n            {!isMobile && (\n              <>\n                <Box> {RightComponent && <RightComponent />} </Box>\n                <Box> {mobileRightComponent} </Box>\n              </>\n            )}\n          </CardContent>\n        </Card>\n        <HelpModal />\n      </>)}\n    </>\n  );\n}\n\nexport default withTranslation()(PageTitle);\n","import React from 'react';\nimport dayjs from 'dayjs';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport { DateTimePicker } from '@mui/x-date-pickers/DateTimePicker';\nimport { getGridDateOperators } from '@mui/x-data-grid-premium';\nimport utcPlugin from 'dayjs/plugin/utc.js';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport { useStateContext } from '../useRouter/StateProvider';\nimport utils from '../utils';\n\ndayjs.extend(utcPlugin);\nconst componentMap = {\n    date: DatePicker,\n    datetime: DateTimePicker,\n    dateTimeLocal: DateTimePicker\n};\nconst LocalizedDatePicker = (props) => {\n    const { fixedFilterFormat } = utils;\n    const { item, applyValue, convert } = props;\n    const { systemDateTimeFormat, stateData } = useStateContext();\n    const columnType = props?.type || 'date';\n    const filterFormat = fixedFilterFormat[columnType];\n    const isValidDate = (date) => {\n        const parsedDate = dayjs(date);\n        return parsedDate.isValid() && parsedDate.year() > 1900;\n    };\n    const format = (systemDateTimeFormat((columnType !== \"datetime\" && columnType !== \"dateTimeLocal\", false, stateData.dateTime)));\n\n    const handleFilterChange = (newValue) => {\n        if (columnType !== \"date\" && columnType !== \"datetime\" && columnType !== \"dateTimeLocal\") return;\n        const isPartialDate = (value) => {\n            if (typeof value !== 'string') return false;\n            return !dayjs(value, format, true).isValid();\n        };\n        if (isPartialDate(newValue)) {\n            return;\n        }\n        if (convert) {\n            newValue = dayjs(newValue).utc();\n            applyValue({ ...item, value: newValue });\n            return;\n        }\n        if (!isValidDate(newValue)) {\n            applyValue({ ...item, value: null });\n            return;\n        }\n        applyValue({ ...item, value: newValue.format(filterFormat) });\n    };\n    const getMonthAbbreviation = (format) => {\n        if (format && format === fixedFilterFormat.OverrideDateFormat) {\n            const parts = format.split('-');\n            return parts.length === 3 ? parts[1] : null;\n        }\n    };\n    const ComponentToRender = componentMap[columnType];\n    const Dateformatvalue = columnType === \"dateTimeLocal\"\n        ? item?.value ? dayjs(item?.value.$d) : null\n        : item?.value ? dayjs(item.value) : null;\n    return (\n        <LocalizationProvider dateAdapter={AdapterDayjs}>\n            <ComponentToRender\n                fullWidth\n                format={format}\n                value={Dateformatvalue}\n                onChange={handleFilterChange}\n                slotProps={{ textField: { variant: \"standard\", label: \"Value\" } }}\n                localeText={{\n                    fieldMonthPlaceholder: () => {\n                        const monthAbbreviation = getMonthAbbreviation(format);\n                        return monthAbbreviation === \"MMM\" ? 'MMM' : 'MM';\n                    }\n                }}\n            />\n        </LocalizationProvider>\n    );\n};\n\nconst localizedDateFormat = (colProps) => getGridDateOperators().map((operator) => ({\n    ...operator,\n    InputComponent: operator.InputComponent\n        ? (props) => <LocalizedDatePicker {...props} {...colProps} />\n        : undefined\n}));\n\nexport default localizedDateFormat;","import React, { useEffect, useMemo, useState } from 'react';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport SaveIcon from '@mui/icons-material/Save';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport { Box, Button, Checkbox, FormControlLabel, Grid, List, ListItem, ListItemButton, ListItemText, Menu, MenuItem, Stack, TextField, Typography, Tooltip, ListItemIcon } from '@mui/material';\nimport { DataGridPremium, GridActionsCellItem, gridFilterModelSelector, gridSortModelSelector, useGridSelector, useGridApiRef } from '@mui/x-data-grid-premium';\nimport { useFormik } from 'formik';\nimport * as yup from 'yup';\nimport { useSnackbar } from '../SnackBar';\nimport { useTranslation } from 'react-i18next';\nimport request from './httpRequest';\nimport { useStateContext, useRouter } from '../useRouter/StateProvider';\nimport actionsStateProvider from '../useRouter/actions';\nimport { DialogComponent } from '../Dialog';\n\nconst actionTypes = {\n    Copy: \"Copy\",\n    Edit: \"Edit\",\n    Delete: \"Delete\"\n};\n\nconst formTypes = {\n    Add: \"Add\",\n    Edit: \"Edit\",\n    Manage: 'Manage'\n};\n\nconst gridColumns = [\n    { field: \"prefName\", type: 'string', width: 300, headerName: \"Preference Name\", sortable: false, filterable: false },\n    { field: \"prefDesc\", type: 'string', width: 300, headerName: \"Preference Description\", sortable: false, filterable: false },\n    { field: \"isDefault\", type: \"boolean\", width: 100, headerName: \"Default\", sortable: false, filterable: false },\n    { field: 'editAction', type: 'actions', headerName: '', width: 20, getActions: () => [<GridActionsCellItem key={1} icon={<Tooltip title={actionTypes.Edit}>   <EditIcon /></Tooltip>} tabIndex={1} data-action={actionTypes.Edit} label=\"Edit\" color=\"primary\" />] },\n    { field: 'deleteAction', type: 'actions', headerName: '', width: 20, getActions: () => [<GridActionsCellItem key={2} icon={<Tooltip title={actionTypes.Delete}><DeleteIcon /> </Tooltip>} tabIndex={2} data-action={actionTypes.Delete} label=\"Delete\" color=\"error\" />] }\n];\n\nconst initialValues = {\n    prefName: '',\n    prefDesc: '',\n    isDefault: false\n};\nconst pageSizeOptions = [5, 10, 20, 50, 100];\nconst GridPreferences = ({ tTranslate = (key) => key, preferenceName, gridRef, columns = [], setIsGridPreferenceFetched }) => {\n    const { stateData, dispatchData, removeCurrentPreferenceName, getAllSavedPreferences } = useStateContext();\n    const { navigate } = useRouter();\n    const apiRef = useGridApiRef();\n    const snackbar = useSnackbar();\n    const { t: translate, i18n } = useTranslation();\n    const tOpts = { t: translate, i18n };\n    const [openDialog, setOpenDialog] = useState(false);\n    const [openForm, setOpenForm] = useState(false);\n    const [filteredPrefs, setFilteredPrefs] = useState([]);\n    const [formType, setFormType] = useState();\n    const [menuAnchorEl, setMenuAnchorEl] = useState();\n    const [openPreferenceExistsModal, setOpenPreferenceExistsModal] = useState(false);\n    const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = useState({});\n    const { Username } = stateData?.getUserData ? stateData.getUserData : {};\n    const preferences = stateData?.preferences;\n    const currentPreference = stateData?.currentPreference;\n    const preferenceApi = stateData?.gridSettings?.permissions?.preferenceApi; // this is the api endpoint used to fetch, save, edit or delete the preferences, passed via redux form application.\n    const defaultPreferenceEnums = stateData?.gridSettings?.permissions?.defaultPreferenceEnums;\n    const filterModel = useGridSelector(gridRef, gridFilterModelSelector);\n    const sortModel = useGridSelector(gridRef, gridSortModelSelector);\n    const validationSchema = useMemo(() => {\n        const schema = yup.object({\n            prefName: yup\n                .string()\n                .trim(true)\n                .required('Preference Name is Required')\n                .max(20, 'Maximum Length is 20'),\n            prefDesc: yup.string().max(100, `Description maximum length is 100`)\n        });\n        return schema;\n    }, []);\n\n    useEffect(() => {\n        setFilteredPrefs(preferences?.filter(pref => pref.prefId !== 0));\n    }, [preferences]);\n\n    const formik = useFormik({\n        initialValues,\n        validationSchema: validationSchema,\n        onSubmit: async (values) => {\n            await savePreference(values);\n        },\n        mode: \"onBlur\"\n    });\n\n    const handleOpen = (event) => {\n        setMenuAnchorEl(event?.currentTarget);\n    };\n\n    const handleClose = () => {\n        setMenuAnchorEl(null);\n    };\n\n    const handleDialogClose = () => {\n        setFormType();\n        handleClose();\n        setOpenDialog(false);\n    };\n\n    const deletePreference = async (id, prefName) => {\n        const params = {\n            action: 'delete',\n            id: preferenceName,\n            Username,\n            prefIdArray: id\n        };\n        const response = await request({ url: preferenceApi, params, history: navigate, dispatchData });\n        if (response === true || response?.success) {\n            if (prefName === currentPreference) {\n                removeCurrentPreferenceName({ dispatchData });\n            }\n            snackbar.showMessage('Preference Deleted Successfully.');\n        }\n    };\n\n    const applySelectedPreference = async (prefId) => {\n        if (setIsGridPreferenceFetched) {\n            setIsGridPreferenceFetched(false);\n        }\n        await applyPreference(prefId);\n    };\n    const savePreference = async (values) => {\n        const presetName = values.prefName.trim();\n        const preferenceAlreadyExists = preferences.findIndex(ele => ele.prefName === presetName);\n        // if any default preferences maintain them inside the preferences array.\n        if (preferenceAlreadyExists > -1 && (formType === formTypes.Add || preferences[preferenceAlreadyExists].prefId !== values.prefId)) {\n            setOpenPreferenceExistsModal(true);\n            return;\n        }\n        const { pinnedColumns } = gridRef.current.state;\n        const { orderedFields, columnVisibilityModel, lookup } = gridRef.current.state.columns;\n        const gridColumn = [];\n        orderedFields?.forEach(ele => {\n            const { field } = lookup[ele];\n            const col = columns.find(ele => ele.field === field) || lookup[ele];\n            col.width = lookup[ele].width;\n            gridColumn.push(col);\n        });\n        const filter = filterModel?.items?.map(ele => {\n            const { field, operator, value } = ele;\n            return { field, operator, value };\n        });\n        filterModel.items = filter;\n        const params = {\n            action: 'save',\n            id: preferenceName,\n            prefName: presetName,\n            prefDesc: values.prefDesc,\n            prefValue: { sortModel, filterModel, columnVisibilityModel, gridColumn, pinnedColumns },\n            isDefault: values.isDefault\n        };\n        if (values.prefId) {\n            params[\"prefId\"] = values.prefId;\n        }\n        const response = await request({ url: preferenceApi, params, history: navigate, dispatchData });\n        const action = formType === formTypes.Add ? \"Added\" : \"Saved\";\n        if (response === true || response?.success === true) {\n            snackbar.showMessage(`Preference ${action} Successfully.`);\n            handleDialogClose();\n        }\n        getAllSavedPreferences({ preferenceName, Username, history: navigate, dispatchData, preferenceApi, defaultPreferenceEnums });\n    };\n\n    const applyPreference = async (prefId) => {\n        let userPreferenceCharts;\n        let defaultPreference = 'Default';\n        // Check if prefId is 0, if so, use defaultPreferenceEnums, otherwise fetch from API\n        if (prefId === 0) {\n            userPreferenceCharts = defaultPreferenceEnums[preferenceName] || null;\n        } else {\n            const params = {\n                action: 'load',\n                id: preferenceName,\n                Username,\n                prefId\n            };\n            const response = await request({ url: preferenceApi, params, history: navigate, dispatchData }) || {};\n            userPreferenceCharts = response.prefValue ? JSON.parse(response.prefValue) : null;\n            if (response.prefName) {\n                defaultPreference = response.prefName;\n            }\n        }\n\n        // If userPreferenceCharts is available, apply preferences to the grid\n        if (!userPreferenceCharts) return;\n        const { gridColumn, columnVisibilityModel, pinnedColumns, sortModel, filterModel } = userPreferenceCharts;\n        gridColumn.forEach(({ field, width }) => {\n            if (gridRef.current.getColumnIndex(field) !== -1) {\n                gridRef.current.setColumnWidth(field, width);\n            }\n        });\n        gridRef.current.setColumnVisibilityModel(columnVisibilityModel);\n        gridRef.current.state.columns.orderedFields = gridColumn.map(({ field }) => field);\n        gridRef.current.setPinnedColumns(pinnedColumns);\n        gridRef.current.setSortModel(sortModel || []);\n        gridRef.current.setFilterModel(filterModel);\n\n        dispatchData({ type: actionsStateProvider.SET_CURRENT_PREFERENCE_NAME, payload: defaultPreference });\n        setIsGridPreferenceFetched(true);\n    };\n\n    const getGridRowId = (row) => {\n        return row['GridPreferenceId'];\n    };\n\n    const openModal = (params, openFormModal = true) => {\n        setFormType(params);\n        handleClose();\n        setOpenDialog(true);\n        setOpenForm(openFormModal);\n        if (openFormModal) {\n            formik.resetForm();\n        }\n    };\n\n    const confirmDeletePreference = async () => {\n        const { prefId, preferenceName: currentPrefname } = openConfirmDeleteDialog;\n        await deletePreference(prefId, currentPrefname);\n        getAllSavedPreferences({ preferenceName, history: navigate, dispatchData, Username, preferenceApi, defaultPreferenceEnums });\n        setOpenConfirmDeleteDialog({});\n    };\n\n    const onCellClick = async (cellParams) => {\n        const action = cellParams.field === 'editAction' ? actionTypes.Edit : cellParams.field === 'deleteAction' ? actionTypes.Delete : null;\n        if (cellParams.id === 0 && (action === actionTypes.Edit || action === actionTypes.Delete)) {\n            snackbar.showMessage(`Default Preference Can Not Be ${action === actionTypes.Edit ? 'Edited' : 'Deleted'}`);\n            return;\n        }\n        if (action === actionTypes.Edit) {\n            setFormType('Modify');\n            formik.setValues(cellParams?.row);\n            setOpenForm(true);\n        }\n        if (action === actionTypes.Delete) {\n            setOpenConfirmDeleteDialog({\n                prefId: cellParams.id,\n                preferenceName: cellParams.row.prefName\n            });\n        }\n    };\n\n    const prefName = formik.values.prefName.trim();\n    // represent manage preferences form type.\n    const isManageForm = formType === formTypes.Manage;\n    return (\n        <Box>\n            <Button\n                id=\"grid-preferences-btn\"\n                aria-controls={menuAnchorEl ? 'basic-menu' : undefined}\n                aria-haspopup=\"true\"\n                aria-expanded={menuAnchorEl ? 'true' : undefined}\n                onClick={handleOpen}\n                title={tTranslate('Preference', tOpts)}\n                startIcon={<SettingsIcon />}\n            >\n                {tTranslate('Preferences', tOpts)} {currentPreference && `(${currentPreference})`}\n            </Button>\n            <Menu\n                id={`grid-preference-menu`}\n                anchorEl={menuAnchorEl}\n                open={!!menuAnchorEl}\n                onClose={handleClose}\n                component={List}\n                dense\n                MenuListProps={{\n                    'aria-labelledby': 'grid-preferences-btn'\n                }}\n                sx={{\n                    '& .MuiMenu-paper': { minWidth: 240, maxHeight: 320 },\n                    '& .MuiListItemSecondaryAction-root': {\n                        display: 'flex'\n                    },\n                    '& .Mui-selected': {\n                        color: 'text.primary',\n                        '&:hover': {\n                            backgroundColor: 'success.main'\n                        }\n                    }\n                }}\n            >\n                <MenuItem component={ListItemButton} dense onClick={() => openModal(formTypes.Add)}>\n                    {tTranslate('Add Preference', tOpts)}\n                </MenuItem>\n                <MenuItem component={ListItemButton} dense divider={preferences?.length > 0} onClick={() => openModal(formTypes.Manage, false)}>\n                    <ListItemIcon>\n                        <SettingsIcon />\n                    </ListItemIcon>\n                    {tTranslate('Manage Preferences', tOpts)}\n                </MenuItem>\n\n                {preferences?.length > 0 && preferences?.map((ele) => {\n                    const { prefName, prefDesc, prefId } = ele;\n                    return (\n                        <MenuItem\n                            onClick={() => applySelectedPreference(prefId)}\n                            component={ListItem}\n                            selected={currentPreference === prefName}\n                            key={`pref-item-${prefId}`}\n                            title={tTranslate(prefDesc, tOpts)}\n                            dense\n                        >\n                            <ListItemText primary={tTranslate(prefName, tOpts)} />\n                        </MenuItem>\n                    );\n                })}\n            </Menu>\n            <DialogComponent\n                open={openDialog}\n                disableRestoreFocus\n                title={\n                    <Stack direction=\"row\" columnGap={2}>\n                        <Typography variant=\"h5\" >\n                            {formType} {tTranslate(`Preference${(formType === formTypes.Manage ? 's' : '')}`, tOpts)}\n                        </Typography>\n                    </Stack>\n                }\n                maxWidth={isManageForm ? 'md' : 'sm'}\n                fullWidth\n            >\n                {openForm && (\n                    <Grid\n                        component={'form'}\n                        onSubmit={formik.handleSubmit}\n                        rowGap={2}\n                        container\n                        sx={{\n                            '& .MuiFormLabel-root:not(.MuiTypography-root)': {\n                                fontWeight: 400,\n                                display: 'table',\n                                whiteSpace: 'pre-wrap' /* css-3 */,\n                                wordWrap: 'break-word' /* Internet Explorer 5.5+ */\n                            }\n                        }}\n                    >\n                        <Grid size={12}>\n                            <TextField\n                                defaultValue={tTranslate(formik.values.prefName, tOpts)}\n                                variant=\"outlined\"\n                                size=\"small\"\n                                margin=\"dense\"\n                                label={\n                                    <span>\n                                        {tTranslate('Preference Name', tOpts)} <span style={{ color: 'red' }}>*</span>\n                                    </span>\n                                }\n                                autoFocus\n                                name={'prefName'}\n                                onChange={formik.handleChange}\n                                error={!!formik.errors.prefName}\n                                helperText={formik.errors.prefName}\n                                fullWidth\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <TextField\n                                defaultValue={tTranslate(formik.values.prefDesc, tOpts)}\n                                variant=\"outlined\"\n                                multiline\n                                rows={2}\n                                size=\"small\"\n                                margin=\"dense\"\n                                label={tTranslate('Preference Description', tOpts)}\n                                name={'prefDesc'}\n                                onChange={formik.handleChange}\n                                error={!!formik.errors.prefDesc}\n                                helperText={formik.errors.prefDesc}\n                                fullWidth\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <FormControlLabel\n                                control={\n                                    <Checkbox\n                                        checked={formik.values.isDefault}\n                                        name={'isDefault'}\n                                        onChange={formik.handleChange}\n                                    />\n                                }\n                                label={tTranslate('Default', tOpts)}\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <Stack direction=\"row\" columnGap={1} style={{ justifyContent: 'end' }}>\n                                <Button\n                                    type=\"submit\"\n                                    size=\"small\"\n                                    startIcon={<SaveIcon />}\n                                    color=\"primary\"\n                                    variant=\"contained\"\n                                    disableElevation\n                                >\n                                    {tTranslate('Save', tOpts)}\n                                </Button>\n                                <Button\n                                    type=\"button\"\n                                    startIcon={<CloseIcon />}\n                                    color=\"error\"\n                                    variant=\"contained\"\n                                    size=\"small\"\n                                    onClick={handleDialogClose}\n                                    disableElevation\n                                >\n                                    {tTranslate('Close', tOpts)}\n                                </Button>\n                            </Stack>\n                        </Grid>\n                    </Grid>\n                )}\n\n                {(openDialog && formType === formTypes.Manage) && (\n                    <Grid container rowGap={2}>\n                        <Grid size={12}>\n                            <DataGridPremium\n                                sx={{\n                                    \"& .MuiTablePagination-selectLabel\": {\n                                        marginTop: 2\n                                    },\n                                    \"& .MuiTablePagination-displayedRows\": {\n                                        marginTop: 2\n                                    },\n                                    \"& .MuiDataGrid-columnHeader .MuiInputLabel-shrink\": {\n                                        display: \"none\"\n                                    }\n                                }}\n                                className=\"pagination-fix\"\n                                onCellClick={onCellClick}\n                                columns={gridColumns}\n                                pageSizeOptions={pageSizeOptions}\n                                pagination\n                                rowCount={filteredPrefs.length}\n                                rows={filteredPrefs}\n                                getRowId={getGridRowId}\n                                slots={{\n                                    headerFilterMenu: false\n                                }}\n                                density=\"compact\"\n                                disableDensitySelector={true}\n                                apiRef={apiRef}\n                                disableAggregation={true}\n                                disableRowGrouping={true}\n                                disableRowSelectionOnClick={true}\n                                autoHeight\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <Stack direction=\"row\" columnGap={1} style={{ justifyContent: 'end' }}>\n                                <Button\n                                    type=\"button\"\n                                    startIcon={<CloseIcon />}\n                                    color=\"error\"\n                                    variant=\"contained\"\n                                    size=\"small\"\n                                    onClick={handleDialogClose}\n                                    disableElevation\n                                >\n                                    {tTranslate('Close', tOpts)}\n                                </Button>\n                            </Stack>\n                        </Grid>\n                    </Grid>\n                )}\n            </DialogComponent>\n            <DialogComponent\n                open={openPreferenceExistsModal}\n                onConfirm={() => setOpenPreferenceExistsModal(false)}\n                title=\"\"\n                okText={tTranslate('Ok', tOpts)}\n                cancelText=\"\"\n            >\n                \"{prefName}\" {tTranslate('name already in use, please use another name.', tOpts)}\n            </DialogComponent>\n            <DialogComponent\n                open={openConfirmDeleteDialog.preferenceName}\n                onConfirm={confirmDeletePreference}\n                onCancel={() => setOpenConfirmDeleteDialog({})}\n                title=\"Confirm delete\"\n                yesNo={true}\n            >\n                Are you sure you wish to delete \"{openConfirmDeleteDialog.preferenceName}\"\n            </DialogComponent>\n        </Box>\n    );\n};\n\n\nexport default GridPreferences;","import React, { useMemo, useCallback } from 'react';\nimport {\n    useGridSelector,\n    gridFilterModelSelector\n} from '@mui/x-data-grid-premium';\n\nimport { FormControl, InputLabel, MenuItem, Select } from '@mui/material';\n\nconst GridOperators = {\n    IsAnyOf: 'isAnyOf'\n};\n\nconst CustomDropdownMenu = (props) => {\n    const { column, item, applyValue, apiRef } = props;\n    const lookupData = column?.dataRef?.current?.lookups;\n    let options = column.customLookup || lookupData[column.lookup] || [];\n\n    if (typeof column.lookup === 'string') {\n        options = options.map(({ label, value }) => ({\n            label,\n            value\n        }));\n    }\n\n    const filterModel = useGridSelector(apiRef, gridFilterModelSelector);\n    const currentFieldFilters = useMemo(\n        () =>\n            filterModel.items?.filter((value) => {\n                return value.field === column.field;\n            }),\n        [column.field, filterModel.items]\n    );\n\n    const handleFilterChange = useCallback(\n        (event) => {\n            let inputValue = event.target.value;\n            if (filterModel.items.length >= 1) {\n                inputValue = inputValue.length === 1 ? inputValue[0] : inputValue;\n\n                for (const element of filterModel.items) {\n                    if (element.field !== item.field) {\n                        continue;\n                    }\n                    if (element.operator === GridOperators.IsAnyOf) {\n                        inputValue = Array.isArray(inputValue) ? inputValue : [inputValue];\n                    } else {\n                        inputValue = inputValue === 0 ? '0' : inputValue;\n                    }\n                }\n            }\n\n            if (inputValue.length === 0 && currentFieldFilters[0]) {\n                apiRef.current.deleteFilterItem(currentFieldFilters[0]);\n                return;\n            }\n\n            const newValue = inputValue;\n            const newitem = currentFieldFilters[0] ? currentFieldFilters[0] : item;\n            applyValue({ ...newitem, value: newValue });\n        },\n        [apiRef, column.applyZeroFilter, currentFieldFilters, item, applyValue]\n    );\n\n    const value = currentFieldFilters[0]?.value ?? '';\n\n    return (\n        <FormControl variant=\"standard\" className=\"w-100\">\n            <InputLabel></InputLabel>\n            <Select\n                label={column.field}\n                variant=\"standard\"\n                value={value}\n                onChange={(e) => handleFilterChange(e)}\n                multiple={Array.isArray(value)}\n                MenuProps={{\n                    PaperProps: {\n                        style: {\n                            height: 'fit-content',\n                            overflow: 'hidden'\n                        }\n                    }\n                }}\n            >\n                {options?.map((option, index) => (\n                    <MenuItem key={index} value={option.value}>\n                        {option.label}\n                    </MenuItem>\n                ))}\n            </Select>\n        </FormControl>\n    );\n};\n\nexport default CustomDropdownMenu;\n","import MenuItem from '@mui/material/MenuItem';\nimport { GridToolbarExportContainer } from '@mui/x-data-grid-premium';\nimport React from 'react';\n\n// Helper to convert default sort string to array\nexport const convertDefaultSort = (defaultSort, constants, sortRegex) => {\n    if (typeof defaultSort !== constants.string) return [];\n    return defaultSort.split(',').map(sortField => {\n        sortRegex.lastIndex = 0;\n        const sortInfo = sortRegex.exec(sortField);\n        if (!sortInfo) return null;\n        const [, field, direction = 'ASC'] = sortInfo;\n        return {\n            field: field.trim(),\n            sort: direction.trim().toLowerCase()\n        };\n    }).filter(Boolean);\n};\n\n// Export menu item component\nexport const ExportMenuItem = ({ tTranslate, tOpts, handleExport, contentType, type, isPivotExport = false }) => (\n    <MenuItem\n        onClick={handleExport}\n        data-type={type}\n        data-content-type={contentType}\n        data-is-pivot-export={isPivotExport}\n    >\n        {tTranslate(\"Export\", tOpts)} {type.charAt(0).toUpperCase() + type.slice(1).toLowerCase()}\n    </MenuItem>\n);\n\n// Custom export button component\nexport const CustomExportButton = ({ exportFormats, ...props }) => (\n    <GridToolbarExportContainer {...props}>\n        {exportFormats.csv !== false && <ExportMenuItem {...props} type=\"csv\" contentType=\"text/csv\" />}\n        {exportFormats.excel !== false && <ExportMenuItem {...props} type=\"excel\" contentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" />}\n        {props.showPivotExportBtn && <ExportMenuItem {...props} type=\"excel With Pivot\" contentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" isPivotExport={true} />}\n        {exportFormats.xml !== false && <ExportMenuItem {...props} type=\"xml\" contentType=\"text/xml\" />}\n        {exportFormats.html !== false && <ExportMenuItem {...props} type=\"html\" contentType=\"text/html\" />}\n        {exportFormats.json !== false && <ExportMenuItem {...props} type=\"json\" contentType=\"application/json\" />}\n    </GridToolbarExportContainer>\n);\n\n// Shallow props comparison\nexport const areEqual = (prevProps = {}, nextProps = {}) => {\n    let equal = true;\n    for (const o in prevProps) {\n        if (prevProps[o] !== nextProps[o]) {\n            equal = false;\n        }\n    }\n    for (const o in nextProps) {\n        if (!(o in prevProps)) {\n            equal = false;\n        }\n    }\n    return equal;\n};","import Button from '@mui/material/Button';\nimport {\n    DataGridPremium,\n    Toolbar,\n    ColumnsPanelTrigger,\n    FilterPanelTrigger,\n    getGridDateOperators,\n    GRID_CHECKBOX_SELECTION_COL_DEF,\n    getGridStringOperators,\n    getGridBooleanOperators,\n    GridActionsCellItem,\n    useGridApiRef\n} from '@mui/x-data-grid-premium';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CopyIcon from '@mui/icons-material/FileCopy';\nimport ArticleIcon from '@mui/icons-material/Article';\nimport EditIcon from '@mui/icons-material/Edit';\nimport FilterListOffIcon from '@mui/icons-material/FilterListOff';\nimport React, { useMemo, useEffect, memo, useRef, useState, useCallback } from 'react';\nimport AddIcon from '@mui/icons-material/Add';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport Typography from '@mui/material/Typography';\nimport { useSnackbar } from '../SnackBar/index';\nimport { DialogComponent } from '../Dialog/index';\nimport { getList, getRecord, deleteRecord, saveRecord } from './crud-helper';\nimport { Footer } from './footer';\nimport template from './template';\nimport { Tooltip, CardContent, Card } from \"@mui/material\";\nimport CheckIcon from '@mui/icons-material/Check';\nimport CloseIcon from '@mui/icons-material/Close';\nimport PageTitle from '../PageTitle';\nimport { useStateContext, useRouter } from '../useRouter/StateProvider';\nimport LocalizedDatePicker from './LocalizedDatePicker';\nimport actionsStateProvider from '../useRouter/actions';\nimport GridPreferences from './GridPreference';\nimport CustomDropdownMenu from './CustomDropdownMenu';\nimport { getPermissions } from '../utils';\nimport HistoryIcon from '@mui/icons-material/History';\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\nimport Checkbox from '@mui/material/Checkbox';\nimport { useTranslation } from 'react-i18next';\nimport { convertDefaultSort, CustomExportButton, areEqual } from './helper';\nimport { styled } from '@mui/material/styles';\nimport ViewColumnIcon from '@mui/icons-material/ViewColumn';\nimport FilterListIcon from '@mui/icons-material/FilterList';\n\nconst defaultPageSize = 10;\nconst sortRegex = /(\\w+)( ASC| DESC)?/i;\nconst recordCounts = 60000;\nconst actionTypes = {\n    Copy: \"Copy\",\n    Edit: \"Edit\",\n    Delete: \"Delete\",\n    History: \"History\",\n    Download: \"Download\"\n};\nconst iconMapper = {\n    'article': <ArticleIcon />\n};\nconst constants = {\n    gridFilterModel: { items: [], logicOperator: 'and', quickFilterValues: Array(0), quickFilterLogicOperator: 'and' },\n    permissions: { edit: true, add: true, export: true, delete: true, showColumnsOrder: true, filter: true },\n    client: 'client',\n    server: 'server',\n    object: 'object',\n    startDate: 'startDate',\n    endDate: 'endDate',\n    oneToMany: 'oneToMany',\n    lookup: 'lookup',\n    Number: 'number',\n    string: 'string',\n    boolean: 'boolean',\n    right: 'right',\n    left: 'left',\n    dateTime: 'dateTime',\n    actions: 'actions',\n    function: 'function',\n    pageSizeOptions: [5, 10, 20, 50, 100]\n};\nconst auditColumnMappings = [\n    { key: 'addCreatedOnColumn', field: 'CreatedOn', type: 'dateTime', header: 'Created On' },\n    { key: 'addCreatedByColumn', field: 'CreatedByUser', type: 'string', header: 'Created By' },\n    { key: 'addModifiedOnColumn', field: 'ModifiedOn', type: 'dateTime', header: 'Modified On' },\n    { key: 'addModifiedByColumn', field: 'ModifiedByUser', type: 'string', header: 'Modified By' }\n];\nconst booleanIconRenderer = (params) => {\n    if (params.value) {\n        return <CheckIcon style={{ color: 'green' }} />;\n    } else {\n        return <CloseIcon style={{ color: 'gray' }} />;\n    }\n};\n\nconst DeleteContentText = styled('span')({\n    width: '100%',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n});\n\nconst ButtonWithMargin = styled(Button)({\n    margin: '6px'\n});\n\nconst GridToolBar = styled(Toolbar)({\n    display: 'flex',\n    alignItems: 'center',\n    gap: '1.5rem',\n    flexWrap: 'nowrap',\n    whiteSpace: 'nowrap',\n    minHeight: 'auto',\n    borderBottom: 'none'\n});\n\nconst CustomToolbar = function (props) {\n    const {\n        model,\n        data,\n        currentPreference,\n        isReadOnly,\n        canAdd,\n        forAssignment,\n        showAddIcon,\n        onAdd,\n        selectionApi,\n        selectedSet,\n        selectAll,\n        available,\n        onAssign,\n        assigned,\n        onUnassign,\n        effectivePermissions,\n        clearFilters,\n        handleExport,\n        preferenceName,\n        apiRef,\n        gridColumns,\n        setIsGridPreferenceFetched,\n        tTranslate,\n        tOpts\n    } = props;\n\n    const addText = model.customAddText || (model.title ? `Add ${model.title}` : 'Add');\n\n    return (\n        <div\n            style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                padding: '10px'\n            }}\n        >\n            <div>\n                {model.gridSubTitle && <Typography variant=\"h6\" component=\"h3\" textAlign=\"center\" sx={{ ml: 1 }}> {tTranslate(model.gridSubTitle, tOpts)}</Typography>}\n                {currentPreference && model.showPreferenceInHeader && <Typography className=\"preference-name-text\" variant=\"h6\" component=\"h6\" textAlign=\"center\" sx={{ ml: 1 }} >{tTranslate('Applied Preference', tOpts)} - {currentPreference}</Typography>}\n                {(isReadOnly || (!canAdd && !forAssignment)) && <Typography variant=\"h6\" component=\"h3\" textAlign=\"center\" sx={{ ml: 1 }} > {!canAdd || isReadOnly ? \"\" : model.title}</Typography>}\n                {!forAssignment && canAdd && !isReadOnly && <ButtonWithMargin startIcon={!showAddIcon ? null : <AddIcon />} onClick={onAdd} size=\"medium\" variant=\"contained\" >{addText}</ButtonWithMargin>}\n                {(selectionApi.length && data.records.length) ? (\n                    <ButtonWithMargin\n                        onClick={selectAll}\n                        size=\"medium\"\n                        variant=\"contained\"\n                    >\n                        {selectedSet.current.size === data.records.length ? \"Deselect All\" : \"Select All\"}\n                    </ButtonWithMargin>) :\n                    <></>\n                }\n                {available && <ButtonWithMargin startIcon={!showAddIcon ? null : <AddIcon />} onClick={onAssign} size=\"medium\" variant=\"contained\"  >{\"Assign\"}</ButtonWithMargin>}\n                {assigned && <ButtonWithMargin startIcon={!showAddIcon ? null : <RemoveIcon />} onClick={onUnassign} size=\"medium\" variant=\"contained\"  >{\"Remove\"}</ButtonWithMargin>}\n            </div>\n            <GridToolBar {...props}>\n                {effectivePermissions.showColumnsOrder && (\n                    <ColumnsPanelTrigger\n                        render={(triggerProps) => (\n                            <Button\n                                {...triggerProps}\n                                startIcon={<ViewColumnIcon />}\n                                size=\"small\"\n                                variant=\"text\"\n                            >\n                                {tTranslate(\"COLUMNS\", tOpts)}\n                            </Button>\n                        )}\n                    />\n                )}\n                {effectivePermissions.filter && (<>\n                    <FilterPanelTrigger\n                        render={(triggerProps) => (\n                            <Button\n                                {...triggerProps}\n                                startIcon={<FilterListIcon />}\n                                size=\"small\"\n                                variant=\"text\"\n                            >\n                                {tTranslate(\"FILTERS\", tOpts)}\n                            </Button>\n                        )}\n                    />\n                    <Button startIcon={<FilterListOffIcon />} onClick={clearFilters} size=\"small\">{\"CLEAR FILTER\"}</Button>\n                </>)}\n\n                {effectivePermissions.export && (\n                    <CustomExportButton handleExport={handleExport} showPivotExportBtn={model.pivotApi} exportFormats={model.exportFormats || {}} tTranslate={tTranslate} tOpts={tOpts} />\n                )}\n                {preferenceName &&\n                    <GridPreferences preferenceName={preferenceName} gridRef={apiRef} columns={gridColumns} setIsGridPreferenceFetched={setIsGridPreferenceFetched} />\n                }\n            </GridToolBar>\n        </div >\n    );\n};\n\nconst GridBase = memo(({\n    model,\n    columns,\n    api,\n    defaultSort,\n    setActiveRecord,\n    parentFilters,\n    parent,\n    where,\n    title,\n    permissions,\n    selected,\n    assigned,\n    available,\n    disableCellRedirect = false,\n    onAssignChange,\n    customStyle,\n    onCellClick,\n    showRowsSelected,\n    chartFilters,\n    clearChartFilter,\n    showFullScreenLoader,\n    customFilters,\n    onRowDoubleClick,\n    onRowClick = () => { },\n    gridStyle,\n    reRenderKey,\n    additionalFilters,\n    onCellDoubleClickOverride,\n    onAddOverride,\n    dynamicColumns,\n    readOnly = false,\n    baseFilters = [],\n    ...props\n}) => {\n    const [paginationModel, setPaginationModel] = useState({ pageSize: defaultPageSize, page: 0 });\n    const [data, setData] = useState({ recordCount: 0, records: [], lookups: {} });\n    const [isLoading, setIsLoading] = useState(true);\n    const forAssignment = !!onAssignChange;\n    const rowsSelected = showRowsSelected;\n    const [selection, setSelection] = useState([]);\n    const [isDeleting, setIsDeleting] = useState(false);\n    const [record, setRecord] = useState(null);\n    const visibilityModel = { CreatedOn: false, CreatedByUser: false, ...model.columnVisibilityModel };\n    const [showAddConfirmation, setShowAddConfirmation] = useState(false);\n    const snackbar = useSnackbar();\n    const paginationMode = model.paginationMode === constants.client ? constants.client : constants.server;\n    const { t: translate, i18n } = useTranslation();\n    const tOpts = { t: translate, i18n };\n    const [errorMessage, setErrorMessage] = useState('');\n    const [sortModel, setSortModel] = useState(convertDefaultSort(defaultSort || model.defaultSort, constants, sortRegex));\n    const initialFilterModel = { items: [], logicOperator: 'and', quickFilterValues: Array(0), quickFilterLogicOperator: 'and' };\n    if (model.defaultFilters) {\n        initialFilterModel.items = [];\n        model.defaultFilters.forEach((ele) => {\n            initialFilterModel.items.push(ele);\n        });\n    }\n    const [filterModel, setFilterModel] = useState({ ...initialFilterModel });\n    const { navigate, getParams, useParams, pathname } = useRouter();\n    const { id: idWithOptions } = useParams() || getParams;\n    const id = idWithOptions?.split('-')[0];\n    const apiRef = useGridApiRef();\n    const { idProperty = \"id\", showHeaderFilters = true, disableRowSelectionOnClick = true, hideBackButton = false, hideTopFilters = true, updatePageTitle = true, isElasticScreen = false, navigateBack = false, selectionApi = {} } = model;\n    const isReadOnly = model.readOnly === true || readOnly;\n    const isDoubleClicked = model.allowDoubleClick === false;\n    const dataRef = useRef(data);\n    const showAddIcon = model.showAddIcon === true;\n    const toLink = model.columns.filter(({ link }) => Boolean(link)).map(item => item.link);\n    const [isGridPreferenceFetched, setIsGridPreferenceFetched] = useState(false);\n    const { stateData, dispatchData, formatDate, removeCurrentPreferenceName, getAllSavedPreferences, applyDefaultPreferenceIfExists } = useStateContext();\n    const { timeZone } = stateData;\n    const effectivePermissions = { ...constants.permissions, ...stateData.gridSettings.permissions, ...model.permissions, ...permissions };\n    const { Username } = stateData?.getUserData ? stateData.getUserData : {};\n    const {\n        gridSettings: {\n            permissions: {\n                routesWithNoChildRoute = [],\n                Url: url,\n                withControllersUrl,\n                defaultPreferenceEnums,\n                preferenceApi,\n                historyScreenName = \"historyScreen\"\n            } = {}\n        } = {},\n        currentPreference\n    } = stateData;\n    const emptyIsAnyOfOperatorFilters = [\"isEmpty\", \"isNotEmpty\", \"isAnyOf\"];\n    const userData = stateData.getUserData || {};\n    const documentField = model.columns.find(ele => ele.type === 'fileUpload')?.field || \"\";\n    const userDefinedPermissions = { add: effectivePermissions.add, edit: effectivePermissions.edit, delete: effectivePermissions.delete };\n    const { canAdd, canEdit, canDelete } = getPermissions({ userData, model, userDefinedPermissions });\n    const tTranslate = model.tTranslate ?? ((key) => key);\n    const { addUrlParamKey, searchParamKey, hideBreadcrumb = false, tableName, showHistory = true, hideBreadcrumbInGrid = false, breadcrumbColor } = model;\n    const gridTitle = model.gridTitle || model.title;\n    const preferenceName = model.preferenceId || model.module?.preferenceId;\n    const searchParams = new URLSearchParams(window.location.search);\n\n    const baseDataFromParams = searchParams.has('baseData') && searchParams.get('baseData');\n    const baseSaveData = (() => {\n        if (baseDataFromParams) {\n            const parsedData = JSON.parse(baseDataFromParams);\n            if (typeof parsedData === constants.object && parsedData !== null) {\n                return parsedData;\n            }\n        }\n        return {};\n    })();\n    const selectedSet = useRef(new Set());\n\n    const handleSelectRow = ({ row }) => {\n        const rowId = row[idProperty];\n        const isSelected = selectedSet.current.has(rowId);\n        if (isSelected) {\n            selectedSet.current.delete(rowId);\n        } else {\n            selectedSet.current.add(rowId);\n        }\n        setSelection(Array.from(selectedSet.current));\n    };\n\n    const CustomCheckBox = (params) => {\n        const rowId = params.row[idProperty];\n        const [isCheckedLocal, setIsCheckedLocal] = useState(selectedSet.current.has(rowId));\n\n        useEffect(() => {\n            setIsCheckedLocal(selectedSet.current.has(rowId));\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, [params.row, selectedSet.current.size]);\n\n        const handleCheckboxClick = (event) => {\n            event.stopPropagation();\n            handleSelectRow(params);\n        };\n\n        return (\n            <Checkbox\n                onClick={handleCheckboxClick}\n                checked={isCheckedLocal}\n                color=\"primary\"\n                inputProps={{ 'aria-label': 'checkbox' }}\n            />\n        );\n    };\n\n    const gridColumnTypes = {\n        \"radio\": {\n            \"type\": \"singleSelect\",\n            \"valueOptions\": \"lookup\"\n        },\n        \"date\": {\n            \"valueFormatter\": (value) => (\n                formatDate({ value, useSystemFormat: true, showOnlyDate: false, state: stateData.dateTime, timeZone })\n            ),\n            \"filterOperators\": LocalizedDatePicker({ columnType: \"date\" })\n        },\n        \"dateTime\": {\n            \"valueFormatter\": (value) => (\n                formatDate({ value, useSystemFormat: false, showOnlyDate: false, state: stateData.dateTime, timeZone })\n            ),\n            \"filterOperators\": LocalizedDatePicker({ columnType: \"datetime\" })\n        },\n        \"dateTimeLocal\": {\n            \"valueFormatter\": (value) => (\n                formatDate({ value, useSystemFormat: false, showOnlyDate: false, state: stateData.dateTime, timeZone })\n            ),\n            \"filterOperators\": LocalizedDatePicker({ type: \"dateTimeLocal\", convert: true })\n        },\n        \"boolean\": {\n            renderCell: booleanIconRenderer\n        },\n        \"select\": {\n            \"type\": \"singleSelect\",\n            \"valueOptions\": \"lookup\"\n        },\n        \"selection\": {\n            renderCell: (params) => <CustomCheckBox {...params} />\n        }\n    };\n\n    useEffect(() => {\n        dataRef.current = data;\n    }, [data]);\n\n    useEffect(() => {\n        if (!customFilters || !Object.keys(customFilters).length) return;\n        if (customFilters.clear) {\n            setFilterModel({ items: [], logicOperator: \"and\", quickFilterValues: [], quickFilterLogicOperator: \"and\" });\n            return;\n        }\n        const items = Object.entries(customFilters).reduce((acc, [key, value]) => {\n            if (key === constants.startDate || key === constants.endDate) {\n                acc.push(value);\n            } else if (key in customFilters) {\n                acc.push({ field: key, value, operator: \"equals\", type: \"string\" });\n            }\n            return acc;\n        }, []);\n        setFilterModel({ items, logicOperator: \"and\", quickFilterValues: [], quickFilterLogicOperator: \"and\" });\n    }, [customFilters]);\n\n    const lookupOptions = ({ field }) => {\n        const lookupData = dataRef.current.lookups || {};\n        return lookupData[lookupMap[field].lookup] || [];\n    };\n\n    useEffect(() => {\n        if (props.isChildGrid || !hideTopFilters) {\n            return;\n        }\n        dispatchData({\n            type: actionsStateProvider.PASS_FILTERS_TO_HEADER, payload: {\n                filterButton: null,\n                hidden: { search: true, operation: true, export: true, print: true, filter: true }\n            }\n        });\n    }, []);\n    const { customActions = [] } = model;\n    const { gridColumns, pinnedColumns, lookupMap } = useMemo(() => {\n        let baseColumnList = columns || model.gridColumns || model.columns;\n        if (dynamicColumns) {\n            baseColumnList = [...dynamicColumns, ...baseColumnList];\n        }\n        const pinnedColumns = { left: [GRID_CHECKBOX_SELECTION_COL_DEF.field], right: [] };\n        const finalColumns = [];\n        const lookupMap = {};\n        for (const column of baseColumnList) {\n            if (column.gridLabel === null || (parent && column.lookup === parent) || (column.type === constants.oneToMany && column.countInList === false)) continue;\n            const overrides = {};\n            if (column.type === constants.oneToMany) {\n                overrides.type = 'number';\n                overrides.field = column.field.replace(/s$/, 'Count');\n            }\n            if (gridColumnTypes[column.type]) {\n                Object.assign(overrides, gridColumnTypes[column.type]);\n            }\n            // Common filter operator pattern\n            if (overrides.valueOptions === constants.lookup || column.type === constants.boolean) {\n                let operators = [];\n\n                if (overrides.valueOptions === constants.lookup) {\n                    overrides.valueOptions = lookupOptions;\n                    const lookupFilters = [...getGridDateOperators(), ...getGridStringOperators()]\n                        .filter((op) => ['is', 'not', 'isAnyOf'].includes(op.value));\n                    operators = lookupFilters;\n                }\n\n                if (column.type === constants.boolean) {\n                    operators = getGridBooleanOperators();\n                }\n\n                overrides.filterOperators = operators.map((operator) => ({\n                    ...operator,\n                    InputComponent: operator.InputComponent\n                        ? (params) => (\n                            <CustomDropdownMenu\n                                column={{\n                                    ...column,\n                                    ...(column.type === constants.boolean\n                                        ? {\n                                            customLookup: [\n                                                { value: true, label: 'Yes' },\n                                                { value: false, label: 'No' }\n                                            ]\n                                        }\n                                        : {}),\n                                    dataRef\n                                }}\n                                {...params}\n                                autoHighlight\n                            />\n                        )\n                        : undefined\n                }));\n            }\n            if (column.linkTo || column.link) {\n                overrides.cellClassName = 'mui-grid-linkColumn';\n            }\n            const headerName = tTranslate(column.gridLabel || column.label, tOpts);\n            finalColumns.push({ headerName, description: headerName, ...column, ...overrides });\n            if (column.pinned) {\n                pinnedColumns[column.pinned === constants.right ? constants.right : constants.left].push(column.field);\n            }\n            lookupMap[column.field] = column;\n        }\n        let auditColumns = model.standard;\n        if (auditColumns === true) {\n            auditColumns = { addCreatedOnColumn: true, addCreatedByColumn: true, addModifiedOnColumn: true, addModifiedByColumn: true };\n        }\n        if (auditColumns && typeof auditColumns === constants.object) {\n            auditColumnMappings.forEach(({ key, field, type, header }) => {\n                if (auditColumns[key] === true) {\n                    const column = { field, type, headerName: header, width: 200 };\n                    if (type === constants.dateTime) {\n                        column.filterOperators = LocalizedDatePicker({ columnType: 'date' });\n                        column.valueFormatter = gridColumnTypes.dateTime.valueFormatter;\n                        column.keepLocal = true;\n                    }\n                    finalColumns.push(column);\n                }\n            });\n        }\n        const actions = [];\n        if (!forAssignment && !isReadOnly) {\n            if (canEdit) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"Edit\"><EditIcon /></Tooltip>} data-action={actionTypes.Edit} label=\"Edit\" color=\"primary\" />);\n            }\n            if (effectivePermissions.copy) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"Copy\"><CopyIcon /> </Tooltip>} data-action={actionTypes.Copy} label=\"Copy\" color=\"primary\" />);\n            }\n            if (canDelete) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"Delete\"><DeleteIcon /> </Tooltip>} data-action={actionTypes.Delete} label=\"Delete\" color=\"error\" />);\n            }\n            if (showHistory) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"History\"><HistoryIcon /> </Tooltip>} data-action={actionTypes.History} label=\"History\" color=\"primary\" />);\n            }\n            if (customActions.length) {\n                customActions.forEach(({ icon, action, color }) => {\n                    actions.push(\n                        <GridActionsCellItem\n                            icon={<Tooltip title={action}>{iconMapper[icon] || <CopyIcon />}</Tooltip>}\n                            data-action={action}\n                            label={action}\n                            color={color || \"primary\"}\n                        />\n                    );\n                });\n            }\n        }\n        if (documentField.length) {\n            actions.push(<GridActionsCellItem icon={<Tooltip title=\"Download document\"><FileDownloadIcon /> </Tooltip>} data-action={actionTypes.Download} label=\"Download document\" color=\"primary\" />);\n        }\n        if (actions.length) {\n            finalColumns.push({\n                field: 'actions',\n                type: 'actions',\n                label: '',\n                width: actions.length * 50,\n                hidable: false,\n                getActions: (params) => {\n                    const rowActions = [...actions];\n                    if (canEdit && !isReadOnly) {\n                        const isDisabled = params.row.canEdit === false;\n                        rowActions[0] = (\n                            <GridActionsCellItem\n                                icon={\n                                    <Tooltip title=\"Edit\">\n                                        <EditIcon />\n                                    </Tooltip>\n                                }\n                                data-action={actionTypes.Edit}\n                                label=\"Edit\"\n                                color=\"primary\"\n                                disabled={isDisabled}\n                            />\n                        );\n                    }\n                    return rowActions;\n                }\n            });\n        }\n        pinnedColumns.right.push('actions');\n        return { gridColumns: finalColumns, pinnedColumns, lookupMap };\n    }, [columns, model, parent, permissions, forAssignment, dynamicColumns]);\n\n    const fetchData = (action = \"list\", extraParams = {}, contentType, columns, isPivotExport, isElasticExport) => {\n        const { pageSize, page } = paginationModel;\n\n        let controllerType = model.controllerType;\n        let gridApi = `${controllerType === \"cs\" ? withControllersUrl : url || \"\"}${model.api || api}`;\n\n        if (isPivotExport) {\n            gridApi = `${withControllersUrl}${model.pivotApi}`;\n            controllerType = \"cs\";\n        }\n\n        if (assigned || available) {\n            extraParams[assigned ? \"include\" : \"exclude\"] = Array.isArray(selected) ? selected.join(\",\") : selected;\n        }\n\n        const filters = { ...filterModel };\n        if (chartFilters?.items?.length > 0) {\n            const { columnField, operatorValue } = chartFilters.items[0] || {};\n            const chartField = constants.chartFilterFields[columnField];\n            filters.items = [{ field: chartField, operator: operatorValue, isChartFilter: false }];\n            if (JSON.stringify(filterModel) !== JSON.stringify(filters)) {\n                setFilterModel({ ...filters });\n                chartFilters.items.length = 0;\n            }\n        }\n        if (model.joinColumn && id) {\n            baseFilters.push({ field: model.joinColumn, operator: \"is\", type: \"number\", value: Number(id) });\n        }\n\n        if (additionalFilters) {\n            filters.items = [...(filters.items || []), ...additionalFilters];\n        }\n        extraParams = { ...extraParams, ...props.extraParams }; // Merge any custom params passed via component props into extraParams\n        const isValidFilters = !filters.items.length || filters.items.every(item => \"value\" in item && item.value !== undefined);\n        if (!isValidFilters) return;\n\n        getList({\n            action,\n            page: !contentType ? page : 0,\n            pageSize: !contentType ? pageSize : 1000000,\n            sortModel,\n            filterModel: filters,\n            controllerType,\n            api: gridApi,\n            setIsLoading,\n            setData,\n            gridColumns,\n            model,\n            parentFilters,\n            extraParams,\n            setError: snackbar.showError,\n            contentType,\n            columns,\n            template: isPivotExport ? model.exportTemplate : null,\n            configFileName: isPivotExport ? model.configFileName : null,\n            dispatchData,\n            showFullScreenLoader,\n            history: navigate,\n            baseFilters,\n            isElasticExport\n        });\n    };\n\n    const openForm = ({ id, record = {}, mode }) => {\n        if (setActiveRecord) {\n            getRecord({ id, api: api || model.api, setIsLoading, setActiveRecord, model, parentFilters, where });\n            return;\n        }\n        let path = pathname;\n        if (!path.endsWith(\"/\")) {\n            path += \"/\";\n        }\n        if (mode === \"copy\") {\n            path += \"0-\" + id;\n            dispatchData({ type: 'UPDATE_FORM_MODE', payload: 'copy' });\n\n        } else {\n            path += id;\n            dispatchData({ type: 'UPDATE_FORM_MODE', payload: '' });\n        }\n        if (addUrlParamKey) {\n            searchParams.set(addUrlParamKey, record[addUrlParamKey]);\n            path += `?${searchParams.toString()}`;\n        }\n        navigate(path);\n    };\n\n    const handleDownload = async ({ documentLink, fileName }) => {\n        if (!documentLink) return;\n        try {\n            const response = await fetch(documentLink);\n            if (!response.ok) {\n                throw new Error(`Failed to fetch the file: ${response.statusText}`);\n            }\n\n            const blob = await response.blob();\n            const url = window.URL.createObjectURL(blob);\n\n            const link = document.createElement(\"a\");\n            link.href = url;\n\n            // Derive a file name from the URL or fall back to default\n            const fileNameFromLink = documentLink.split(\"/\").pop() || `downloaded-file.${blob.type.split(\"/\")[1] || \"txt\"}`;\n            link.download = fileName || fileNameFromLink;\n\n            // Append the link to the DOM and trigger a click\n            document.body.appendChild(link);\n            link.click();\n\n            // Cleanup after the download\n            document.body.removeChild(link);\n            window.URL.revokeObjectURL(url);\n        } catch (error) {\n            window.open(documentLink);\n        }\n    };\n    const onCellClickHandler = async (cellParams, event, details) => {\n        let action = cellParams.field === model.linkColumn ? actionTypes.Edit : null;\n        if (!action && cellParams.field === constants.actions) {\n            action = details?.action;\n            if (!action) {\n                const el = event.target.closest('button');\n                if (el) {\n                    action = el.dataset.action;\n                }\n            }\n        }\n        const { row: record } = cellParams;\n        if (!isReadOnly) {\n            if (onCellClick) {\n                const result = await onCellClick({ cellParams, event, details });\n                if (typeof result !== constants.boolean) {\n                    return;\n                }\n            }\n            const columnConfig = lookupMap[cellParams.field] || {};\n            if (columnConfig.linkTo) {\n                navigate({\n                    pathname: template.replaceTags(columnConfig.linkTo, record)\n                });\n                return;\n            }\n            switch (action) {\n                case actionTypes.Edit:\n                    return openForm({ id: record[idProperty], record });\n                case actionTypes.Copy:\n                    return openForm({ id: record[idProperty], mode: 'copy' });\n                case actionTypes.Delete:\n                    setIsDeleting(true);\n                    setRecord({ name: record[model.linkColumn], id: record[idProperty] });\n                    break;\n                case actionTypes.History:\n                    // navigates to history screen, specifying the tablename, id of record and breadcrumb to render title on history screen.\n                    return navigate(`${historyScreenName}?tableName=${tableName}&id=${record[idProperty]}&breadCrumb=${searchParamKey ? searchParams.get(searchParamKey) : gridTitle}`);\n                default:\n                    // Check if action matches any customAction and call its onClick if found\n                    const foundCustomAction = customActions.find(ca => ca.action === action && typeof ca.onClick === constants.function);\n                    if (foundCustomAction) {\n                        foundCustomAction.onClick({ row: record, navigate });\n                        return;\n                    }\n                    break;\n            }\n        }\n        if (action === actionTypes.Download) {\n            handleDownload({ documentLink: record[documentField], fileName: record.FileName });\n        }\n        if (!toLink.length) {\n            return;\n        }\n        const { row } = cellParams;\n        const columnConfig = lookupMap[cellParams.field] || {};\n        const historyObject = {\n            pathname: template.replaceTags(columnConfig.linkTo, row)\n        };\n        if (model.addRecordToState) {\n            historyObject.state = row;\n        }\n        navigate(historyObject);\n    };\n\n    const handleDelete = async function () {\n        const result = await deleteRecord({ id: record.id, api: `${model.controllerType === 'cs' ? withControllersUrl : url}${model.api || api}`, setIsLoading, setError: snackbar.showError, setErrorMessage });\n        if (result === true) {\n            setIsDeleting(false);\n            snackbar.showMessage('Record Deleted Successfully.');\n            fetchData();\n        } else {\n            setIsDeleting(false);\n        }\n    };\n    const clearError = () => {\n        setErrorMessage(null);\n        setIsDeleting(false);\n    };\n\n    const processRowUpdate = (updatedRow) => {\n        if (typeof props.processRowUpdate === \"function\") {\n            props.processRowUpdate(updatedRow, data);\n        }\n        return updatedRow;\n    };\n\n    const onCellDoubleClick = (event) => {\n        if (event.row.canEdit === false) {\n            return;\n        }\n        const { row: record } = event;\n        if (typeof onCellDoubleClickOverride === constants.function) {\n            onCellDoubleClickOverride(event);\n            return;\n        }\n        if (!isReadOnly && !isDoubleClicked && !disableCellRedirect) {\n            openForm({ id: record[idProperty], record });\n        }\n        if (isReadOnly && model.rowRedirectLink) {\n            const historyObject = {\n                pathname: template.replaceTags(model.rowRedirectLink, record)\n            };\n            if (model.addRecordToState) {\n                historyObject.state = record;\n            }\n            navigate(historyObject);\n        }\n        if (typeof onRowDoubleClick === constants.function) {\n            onRowDoubleClick(event);\n        }\n    };\n\n    const handleAddRecords = async () => {\n        if (selectedSet.current.size < 1) {\n            snackbar.showError(\"Please select at least one record to proceed\");\n            return;\n        }\n\n        const selectedIds = Array.from(selectedSet.current);\n        const recordMap = new Map(data.records.map(record => [record[idProperty], record]));\n        let selectedRecords = selectedIds.map(id => ({ ...baseSaveData, ...recordMap.get(id) }));\n\n        // If selectionUpdateKeys is defined, filter each record to only those keys\n        if (Array.isArray(model.selectionUpdateKeys) && model.selectionUpdateKeys.length) {\n            selectedRecords = selectedRecords.map(item =>\n                Object.fromEntries(model.selectionUpdateKeys.map(key => [key, item[key]]))\n            );\n        }\n\n        try {\n            const result = await saveRecord({\n                id: 0,\n                api: `${url}${selectionApi || api}/updateMany`,\n                values: { items: selectedRecords },\n                setIsLoading,\n                setError: snackbar.showError\n            });\n\n            if (result) {\n                fetchData();\n                const message = result.info ? result.info : \"Record Added Successfully.\";\n                snackbar.showMessage(message);\n            }\n        } catch (err) {\n            snackbar.showError(err.message || \"An error occurred, please try again later.\");\n        } finally {\n            selectedSet.current.clear();\n            setIsLoading(false);\n            setShowAddConfirmation(false);\n        }\n    };\n\n    const onAdd = () => {\n        if (selectionApi.length > 0) {\n            if (selectedSet.current.size) {\n                setShowAddConfirmation(true);\n                return;\n            }\n            snackbar.showError(\n                \"Please select at least one record to proceed\"\n            );\n            setIsLoading(false);\n            return;\n        }\n        if (typeof onAddOverride === constants.function) {\n            onAddOverride();\n        } else {\n            openForm({ id: 0 });\n        }\n    };\n\n    const clearFilters = () => {\n        if (!filterModel?.items?.length) return;\n        const filters = JSON.parse(JSON.stringify(constants.gridFilterModel));\n        setFilterModel(filters);\n        if (clearChartFilter) {\n            clearChartFilter();\n        }\n    };\n    const updateAssignment = ({ unassign, assign }) => {\n        const assignedValues = Array.isArray(selected) ? selected : (selected.length ? selected.split(',') : []);\n        const finalValues = unassign ? assignedValues.filter(id => !unassign.includes(parseInt(id))) : [...assignedValues, ...assign];\n        onAssignChange(typeof selected === constants.string ? finalValues.join(',') : finalValues);\n    };\n\n    const onAssign = () => {\n        updateAssignment({ assign: selection });\n    };\n\n    const onUnassign = () => {\n        updateAssignment({ unassign: selection });\n    };\n\n    const selectAll = () => {\n        if (selectedSet.current.size === data.records.length) {\n            // If all records are selected, deselect all\n            selectedSet.current.clear();\n            setSelection([]);\n        } else {\n            // Select all records\n            data.records.forEach(record => {\n                selectedSet.current.add(record[idProperty]);\n            });\n            setSelection(data.records.map(record => record[idProperty]));\n        }\n    };\n\n    const setupGridPreference = async ({ preferenceName, Username, preferenceApi, defaultPreferenceEnums }) => {\n        removeCurrentPreferenceName({ dispatchData });\n        const preferences = await getAllSavedPreferences({ preferenceName, history: navigate, dispatchData, Username, preferenceApi, defaultPreferenceEnums });\n        applyDefaultPreferenceIfExists({ preferenceName, dispatchData, gridRef: apiRef, setIsGridPreferenceFetched, defaultPreferenceEnums, preferences });\n    }\n\n    useEffect(() => {\n        if (!preferenceName || !preferenceApi) {\n            return;\n        }\n        setupGridPreference({ preferenceName, Username, preferenceApi, defaultPreferenceEnums });\n    }, [preferenceApi]);\n\n    const getGridRowId = (row) => {\n        return row[idProperty];\n    };\n    const handleExport = (e) => {\n        if (data?.recordCount > recordCounts) {\n            snackbar.showMessage('Cannot export more than 60k records, please apply filters or reduce your results using filters');\n            return;\n        }\n        const { orderedFields, columnVisibilityModel, lookup } = apiRef.current.state.columns;\n        const isPivotExport = e.target.dataset.isPivotExport === 'true';\n        const hiddenColumns = Object.keys(columnVisibilityModel).filter(key => columnVisibilityModel[key] === false);\n\n        const nonExportColumns = new Set(gridColumns.filter(col => col.exportable === false).map(col => col.field));\n\n        const visibleColumns = orderedFields.filter(\n            field => !nonExportColumns.has(field) && !hiddenColumns.includes(field) && field !== '__check__' && field !== 'actions'\n        );\n\n        if (visibleColumns.length === 0) {\n            snackbar.showMessage('You cannot export while all columns are hidden... please show at least 1 column before exporting');\n            return;\n        }\n\n        const columns = {};\n        visibleColumns.forEach(field => {\n            const col = lookup[field];\n            columns[field] = { field, width: col.width, headerName: col.headerName || col.field, type: col.type, keepLocal: col.keepLocal === true, isParsable: col.isParsable, lookup: col.lookup };\n        });\n        fetchData(\n            isPivotExport ? 'export' : undefined,\n            undefined,\n            e.target.dataset.contentType,\n            columns,\n            isPivotExport,\n            isElasticScreen\n        );\n    };\n\n    useEffect(() => {\n        if (!url || (preferenceName && !isGridPreferenceFetched)) return;\n        fetchData();\n    }, [paginationModel, sortModel, filterModel, api, gridColumns, model, parentFilters, assigned, selected, available, chartFilters, isGridPreferenceFetched, reRenderKey, url]);\n\n    useEffect(() => {\n        if (props.isChildGrid || forAssignment || !updatePageTitle) {\n            return;\n        }\n        dispatchData({ type: actionsStateProvider.PAGE_TITLE_DETAILS, payload: { icon: \"\", titleHeading: model.pageTitle || model.title, title: model.title } });\n        return () => {\n            dispatchData({\n                type: actionsStateProvider.PAGE_TITLE_DETAILS, payload: null\n            });\n        };\n    }, []);\n\n    useEffect(() => {\n        if (props.isChildGrid) {\n            return;\n        }\n        let backRoute = pathname;\n\n        // we do not need to show the back button for these routes\n        if (hideBackButton || routesWithNoChildRoute.includes(backRoute)) {\n            dispatchData({\n                type: actionsStateProvider.SET_PAGE_BACK_BUTTON,\n                payload: { status: false, backRoute: '' }\n            });\n            return;\n        }\n        backRoute = backRoute.split(\"/\");\n        backRoute.pop();\n        backRoute = backRoute.join(\"/\");\n        dispatchData({\n            type: actionsStateProvider.SET_PAGE_BACK_BUTTON,\n            payload: { status: true, backRoute: backRoute }\n        });\n    }, [isLoading]);\n\n    const updateFilters = (e) => {\n        const { items } = e;\n        const updatedItems = items.map(item => {\n            const { field, operator, type, value } = item;\n            const column = gridColumns.find(col => col.field === field) || {};\n            const isNumber = column.type === constants.number;\n\n            if (isNumber && value < 0) {\n                return { ...item, value: null };\n            }\n\n            if ((emptyIsAnyOfOperatorFilters.includes(operator)) || (isNumber && !isNaN(value)) || ((!isNumber))) {\n                const isKeywordField = isElasticScreen && gridColumns.filter(element => element.field === field)[0]?.isKeywordField;\n                if (isKeywordField) {\n                    item.filterField = `${item.field}.keyword`;\n                }\n                item.value = ['isEmpty', 'isNotEmpty'].includes(operator) ? null : value;\n                return { ...item, type: column.type };\n            }\n            const updatedValue = isNumber ? null : value;\n            return { field, operator, type, value: updatedValue };\n        });\n        e.items = updatedItems;\n        setFilterModel(e);\n        const shouldClearChartFilter =\n            (e.items.findIndex(ele => ele.isChartFilter && !(['isEmpty', 'isNotEmpty'].includes(ele.operator))) === -1) ||\n            (\n                chartFilters?.items?.length &&\n                (\n                    (!e.items.length) ||\n                    (chartFilters.items.findIndex(ele => ele.columnField === e.items[0]?.field) > -1)\n                )\n            );\n\n        if (shouldClearChartFilter && clearChartFilter) {\n            clearChartFilter();\n        }\n    };\n\n    const updateSort = (e) => {\n        const sort = e.map((ele) => {\n            const field = gridColumns.filter(element => element.field === ele.field)[0] || {};\n            const isKeywordField = isElasticScreen && field.isKeywordField;\n            const obj = { ...ele, filterField: isKeywordField ? `${ele.field}.keyword` : ele.field };\n            if (field.dataIndex) {\n                obj.filterField = field.dataIndex;\n            }\n            return obj;\n        });\n        setSortModel(sort);\n    };\n    const pageTitle = title || model.gridTitle || model.title;\n    const breadCrumbs = searchParamKey\n        ? [{ text: searchParams.get(searchParamKey) || pageTitle }]\n        : [{ text: pageTitle }];\n    return (\n        <>\n            <PageTitle navigate={navigate} showBreadcrumbs={!hideBreadcrumb && !hideBreadcrumbInGrid}\n                breadcrumbs={breadCrumbs} enableBackButton={navigateBack} breadcrumbColor={breadcrumbColor} />\n            <Card style={gridStyle || customStyle} elevation={0} sx={{ '& .MuiCardContent-root': { p: 0 } }}>\n                <CardContent>\n                    <DataGridPremium\n                        sx={{\n                            \"& .MuiTablePagination-selectLabel\": {\n                                marginTop: 2\n                            },\n                            \"& .MuiTablePagination-displayedRows\": {\n                                marginTop: 2\n                            },\n                            \"& .MuiDataGrid-columnHeader .MuiInputLabel-shrink\": {\n                                display: \"none\"\n                            }\n                        }}\n                        unstable_headerFilters={showHeaderFilters}\n                        checkboxSelection={forAssignment}\n                        loading={isLoading}\n                        className=\"pagination-fix\"\n                        onCellClick={onCellClickHandler}\n                        onCellDoubleClick={onCellDoubleClick}\n                        columns={gridColumns}\n                        paginationModel={paginationModel}\n                        pageSizeOptions={constants.pageSizeOptions}\n                        onPaginationModelChange={setPaginationModel}\n                        pagination\n                        rowCount={data.recordCount}\n                        rows={data.records}\n                        sortModel={sortModel}\n                        paginationMode={paginationMode}\n                        sortingMode={paginationMode}\n                        filterMode={paginationMode}\n                        processRowUpdate={processRowUpdate}\n                        keepNonExistentRowsSelected\n                        onSortModelChange={updateSort}\n                        onFilterModelChange={updateFilters}\n                        rowSelection={selection}\n                        onRowSelectionModelChange={setSelection}\n                        filterModel={filterModel}\n                        getRowId={getGridRowId}\n                        onRowClick={onRowClick}\n                        slots={{\n                            headerFilterMenu: false,\n                            toolbar: CustomToolbar,\n                            footer: Footer\n                        }}\n                        slotProps={{\n                            toolbar: {\n                                model,\n                                data,\n                                currentPreference,\n                                isReadOnly,\n                                canAdd,\n                                forAssignment,\n                                showAddIcon,\n                                onAdd,\n                                selectionApi,\n                                selectedSet,\n                                selectAll,\n                                available,\n                                onAssign,\n                                assigned,\n                                onUnassign,\n                                effectivePermissions,\n                                clearFilters,\n                                handleExport,\n                                preferenceName,\n                                apiRef,\n                                gridColumns,\n                                setIsGridPreferenceFetched,\n                                tTranslate,\n                                tOpts,\n                                idProperty\n                            },\n                            footer: {\n                                pagination: true,\n                                apiRef\n                            },\n                            panel: {\n                                placement: \"bottom-end\"\n                            }\n                        }}\n                        hideFooterSelectedRowCount={rowsSelected}\n                        density=\"compact\"\n                        disableDensitySelector={true}\n                        apiRef={apiRef}\n                        disableAggregation={true}\n                        disableRowGrouping={true}\n                        disableRowSelectionOnClick={disableRowSelectionOnClick}\n                        autoHeight\n                        initialState={{\n                            columns: {\n                                columnVisibilityModel: visibilityModel\n                            },\n                            pinnedColumns: pinnedColumns\n                        }}\n                        localeText={{\n                            filterValueTrue: 'Yes',\n                            filterValueFalse: 'No'\n                        }}\n                        showToolbar={true}\n                    />\n                    {errorMessage && (<DialogComponent open={!!errorMessage} onConfirm={clearError} onCancel={clearError} title=\"Info\" hideCancelButton={true} > {errorMessage}</DialogComponent>)\n                    }\n                    {isDeleting && !errorMessage && (\n                        <DialogComponent open={isDeleting} onConfirm={handleDelete} onCancel={() => setIsDeleting(false)} title=\"Confirm Delete\">\n                            <DeleteContentText>\n                                Are you sure you want to delete {record.name && <Tooltip style={{ display: \"inline\" }} title={record.name} arrow>\n                                    {record.name.length > 30 ? `${record.name.slice(0, 30)}...` : record.name}\n                                </Tooltip>} ?\n                            </DeleteContentText>\n                        </DialogComponent>)}\n                    {showAddConfirmation && (\n                        <DialogComponent\n                            open={showAddConfirmation}\n                            onConfirm={handleAddRecords}\n                            onCancel={() => setShowAddConfirmation(false)}\n                            title=\"Confirm Add\"\n                        >\n                            <DeleteContentText>\n                                Are you sure you want to add {selectedSet.current.size} records?\n                            </DeleteContentText>\n                        </DialogComponent>\n                    )}\n                </CardContent>\n            </Card >\n        </>\n    );\n}, areEqual);\n\nexport default GridBase;","import React, { useMemo } from 'react';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport { FormHelperText } from '@mui/material';\nimport Checkbox from '@mui/material/Checkbox';\n\nconst Field = ({ column, field, formik, otherProps }) => {\n    const handleChange = (event) => {\n        formik.setFieldValue(field, event.target.checked);\n    }\n    const checked = useMemo(()=> formik.values[field] ?? !!column.defaultValue, [formik, column]);\n    const isDisabled = typeof column.readOnly === 'function' ? column.readOnly(formik) : column.readOnly; \n    return <div key={field}>\n        <FormControlLabel\n            control={\n                <Checkbox\n                    {...otherProps}\n                    name={field}\n                    disabled={isDisabled || column.disabled === true}\n                    checked={checked}\n                    onChange={handleChange}\n                    onBlur={formik.handleBlur}\n                    defaultChecked={column.defaultValue}\n                />\n            }\n        />\n        <FormHelperText error={formik.touched[field] && Boolean(formik.errors[field])} >{formik.touched[field] && formik.errors[field]}</FormHelperText>\n    </div>\n}\n\nexport default Field;","import TextField from '@mui/material/TextField';\nimport React from 'react';\nimport { useTheme } from '@mui/material';\n\nconst field = ({ column, field, formik, otherProps }) => {\n    const theme = useTheme();\n    const rows = column.rows || (column.multiline ? 5 : 1);\n    return <TextField\n        type=\"text\"\n        variant={column.variant || \"standard\"}\n        InputProps={{\n            readOnly: column.readOnly === true,\n            sx: column.readOnly\n                ? { backgroundColor: theme.palette?.action?.disabled } // Light grey background for read-only inputs\n                : undefined\n        }}\n        key={field}\n        required={column.required}\n        multiline={column.multiline}\n        rows={rows}\n        fullWidth\n        name={field}\n        value={formik.values[field]}\n        onChange={formik.handleChange}\n        onBlur={formik.handleBlur}\n        error={formik.touched[field] && Boolean(formik.errors[field])}\n        helperText={formik.touched[field] && formik.errors[field]}\n        autoComplete={column.autoComplete}\n        {...otherProps}\n        defaultValue={column.defaultValue}\n    />;\n};\n\nexport default field;","import { useEffect, useState } from 'react';\n\nfunction useDebounce(value, delay) {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(() => {\n        // Set a timer to update the debounced value\n        const timer = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        // Cleanup function to cancel the timer if the value changes again before the delay\n        return () => {\n            clearTimeout(timer);\n        };\n    }, [value, delay]); // Rerun effect only if value or delay changes\n\n    return debouncedValue;\n}\n\nexport default useDebounce;\n","import React, { useCallback, useMemo, useState, useEffect } from 'react';\nimport StringField from './string';\nimport useDebounce from '../../../hooks/useDebounce';\nimport { useTheme } from '@mui/material';\n\n// Key code constants\nconst DIGIT_START = 47;\nconst DIGIT_END = 58;\nconst ARROW_LEFT = 37;\nconst ARROW_RIGHT = 40;\n\n// Control key codes\nconst CONTROL_KEYS = [8, 46, 9, 27, 13]; // backspace, delete, tab, escape, enter\nconst resolveValue = ({ value, state }) => {\n    if (typeof value === 'string' && value.startsWith('{') && value.endsWith('}')) {\n        const key = value.slice(1, -1); // Extract key inside the braces\n        return state[key] !== undefined ? state[key] : value;\n    }\n    return value;\n};\nconst Field = ({ column, otherProps, formik, field, ...props }) => {\n    const { min, max } = column;\n    const theme = useTheme();\n    const [inputValue, setInputValue] = useState(formik.values[field]);\n    const debouncedValue = useDebounce(inputValue, 400);\n\n    const resolvedMin = useMemo(\n        () => Math.max(0, resolveValue({ value: min, state: formik.values })),\n        [min, formik.values]\n    );\n    const resolvedMax = useMemo(\n        () => resolveValue({ value: max, state: formik.values }),\n        [max, formik.values]\n    );\n\n    // Update formik when debounced value changes\n    useEffect(() => {\n        if (debouncedValue !== formik.values[field]) {\n            const numValue = Number(debouncedValue);\n            if (isNaN(numValue)) {\n                return;\n            }\n            if (numValue < resolvedMin) {\n                formik.setFieldValue(field, resolvedMin);\n            } else if (resolvedMax && numValue > resolvedMax) {\n                formik.setFieldValue(field, resolvedMax);\n            } else {\n                formik.setFieldValue(field, numValue);\n            }\n        }\n    }, [debouncedValue, field, resolvedMin, resolvedMax]);\n\n    const { onBlur } = props;\n    otherProps = {\n        InputProps: {\n            inputProps: {\n                min: resolvedMin,\n                max: resolvedMax,\n                readOnly: column.readOnly === true,\n                onKeyDown: (event) => {\n                    const keyCode = event.which ? event.which : event.keyCode;\n                    // Allow: backspace, delete, tab, escape, enter, arrows\n                    if (CONTROL_KEYS.includes(keyCode) || (keyCode >= ARROW_LEFT && keyCode <= ARROW_RIGHT)) {\n                        return;\n                    }\n                    // Allow number keys (0-9)\n                    if (!(keyCode > DIGIT_START && keyCode < DIGIT_END)) {\n                        event.preventDefault();\n                    }\n                },\n                sx: column.readOnly\n                    ? { backgroundColor: theme.palette?.action?.disabled } // Light grey background for read-only inputs\n                    : undefined,\n            }\n        },\n        type: 'number',\n        ...otherProps,\n        onChange: (event) => {\n            setInputValue(event.target.value);\n            if (typeof onBlur === \"function\") {\n                onBlur(event);\n            }\n        },\n    };\n\n    return <StringField column={column} otherProps={otherProps} formik={formik} field={field} {...props} />;\n};\n\nexport default Field;\n","import React from 'react';\nimport StringField from './string';\nimport { IconButton, InputAdornment } from '@mui/material';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\n\nconst Field = ({ otherProps, ...props }) => {\n\tconst [showPassword, setShowPassword] = React.useState(false);\n\tconst handleClickShowPassword = () => setShowPassword((show) => !show);\n\n\tconst handleMouseDownPassword = (event) => {\n\t\tevent.preventDefault();\n\t};\n    const { readOnly = false, disabled = false } = props.column || {};\n    otherProps = {\n\t\ttype: showPassword ? 'text' : 'password',\n\t\tInputProps: {\n\t\t\treadOnly,\n\t\t\tdisabled,\n\t\t\tendAdornment: (\n\t\t\t\t<InputAdornment position=\"end\">\n\t\t\t\t\t<IconButton\n                        aria-label=\"toggle password visibility\"\n                        onClick={handleClickShowPassword}\n                        onMouseDown={handleMouseDownPassword}\n                        edge=\"end\"\n                        disabled={disabled}\n                        readOnly={readOnly}\n                        size=\"large\">\n\t\t\t\t\t\t{showPassword ? <VisibilityOffIcon /> : <VisibilityIcon />}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</InputAdornment>\n\t\t\t)\n\t\t},\n        ...otherProps\n    }\n    return <StringField otherProps={otherProps} {...props} />\n}\n\nexport default Field;","import React from 'react';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport dayjs from 'dayjs';\nimport { useStateContext } from '../../useRouter/StateProvider';\n\nconst Field = ({ column, field, formik, otherProps, fieldConfigs = {}, mode }) => {\n    const isDisabled = mode !== 'copy' && fieldConfigs.disabled;\n    const { systemDateTimeFormat, stateData } = useStateContext(); //provider\n    return <DatePicker\n        {...otherProps}\n        variant=\"standard\"\n        readOnly={column?.readOnly === true}\n        key={field}\n        fullWidth\n        format={systemDateTimeFormat(true, false, stateData.dateTime)}\n        name={field}\n        value={dayjs(formik.values[field])}\n        onChange={(value) => {\n            const adjustedDate = dayjs(value).hour(12);\n            const isoString = adjustedDate.toISOString();\n            formik.setFieldValue(field, isoString);\n        }}\n        onBlur={formik.handleBlur}\n        helperText={formik.touched[field] && formik.errors[field]}\n        minDate={(column.min ? dayjs(column.min) : null)}\n        maxDate={(column.max ? dayjs(column.max) : null)}\n        disabled={isDisabled}\n        slotProps={{ textField: { fullWidth: true, helperText: formik.errors[field], variant: \"standard\" } }}\n    />\n\n}\n\nexport default Field;","import React from 'react';\nimport { DateTimePicker } from '@mui/x-date-pickers/DateTimePicker';\nimport dayjs from 'dayjs';\nimport { useStateContext } from '../../useRouter/StateProvider'\n\nconst Field = ({ column, field, formik, otherProps }) => {\n    const { systemDateTimeFormat, stateData } = useStateContext();\n    return <DateTimePicker\n        {...otherProps}\n        variant=\"standard\"\n        readOnly={column?.readOnly === true}\n        key={field}\n        fullWidth\n        format={systemDateTimeFormat(false, false, stateData.dateTime)}\n        name={field}\n        value={dayjs(formik.values[field])}\n        onChange={(value) => formik.setFieldValue(field, value)}\n        onBlur={formik.handleBlur}\n        helperText={formik.touched[field] && formik.errors[field]}\n        minDateTime={(column.min ? dayjs(column.min) : null)}\n        maxDateTime={(column.max ? dayjs(column.max) : null)}\n        slotProps={{ textField: { fullWidth: true, helperText: formik.errors[field], variant: \"standard\" } }}\n    />\n\n}\n\nexport default Field;","import React from 'react';\nimport { TimePicker } from '@mui/x-date-pickers/TimePicker';\nimport dayjs from 'dayjs';\n\nconst field = ({ column, field, formik, otherProps }) => {\n    let inputValue = formik.values[field];\n    if (column.isUtc) {\n        inputValue = dayjs.utc(inputValue).utcOffset(dayjs().utcOffset(), true).format();\n    }\n    return <TimePicker\n        {...otherProps}\n        variant=\"standard\"\n        readOnly={column.readOnly === true}\n        key={field}\n        fullWidth\n        name={field}\n        value={dayjs(inputValue)}\n        onChange={(value) => {\n            if (column.isUtc) {\n                value = (value && value.isValid()) ? value.format('YYYY-MM-DDTHH:mm:ss') + '.000Z' : null;\n            }\n            return formik.setFieldValue(field, value);\n        }}\n        onBlur={formik.handleBlur}\n        helperText={formik.touched[field] && formik.errors[field]}\n        slotProps={{ textField: { fullWidth: true, helperText: formik.errors[field], variant: \"standard\" } }}\n    />\n}\n\nexport default field;","import { useEffect, useMemo, useState } from 'react';\nimport request from \"../components/Grid/httpRequest\";\nimport { useStateContext } from \"../components/useRouter/StateProvider\";\n\nconst emptyValues = [null, undefined, ''];\n\nexport default function useCascadingLookup({ column, formik, lookups, dependsOn = [], isAutoComplete = false, userSelected, model }) {\n    const [options, setOptions] = useState([]);\n    const { stateData } = useStateContext();\n    const url = stateData?.gridSettings?.permissions?.Url || '';\n    const api = useMemo(() => `${url}${model?.api || ''}`, [url, model?.api]);\n    \n    // Memoize dependency values\n    const dependencyValues = useMemo(() => {\n        const toReturn = {};\n        if (!dependsOn.length) return toReturn;\n        for (const dependency of dependsOn) {\n            toReturn[dependency] = formik.values[dependency];\n        }\n        return toReturn;\n    }, dependsOn.map(dep => formik.values[dep]));\n\n    // Initial options for non-cascading\n    const initialOptions = useMemo(() => {\n        if (dependsOn.length) return [];\n        return typeof column.lookup === 'string' ? lookups[column.lookup] : column.lookup;\n    }, [column.lookup, lookups, dependsOn]);\n\n    const fetchOptions = async () => {\n        if (!column.lookup) return;\n        // Only fetch if all dependencies have values\n        const allDependenciesHaveValues = Object.values(dependencyValues).every(\n            value => !emptyValues.includes(value)\n        );\n        if (!allDependenciesHaveValues) {\n            setOptions([]);\n            return;\n        }\n        let newOptions = [];\n        const requestBody = {\n            lookups: [{ lookup: column.lookup, where: dependencyValues }]\n        };\n        try {\n            const response = await request({ url: `${api}/combo`, params: requestBody, disableLoader: true, jsonPayload: true });\n            if (response && response.success && response.lookups) {\n                newOptions = response.lookups[column.lookup] || [];\n            } else {\n                newOptions = [];\n            }\n        } catch {\n            newOptions = [];\n        } finally {\n            setOptions(newOptions);\n        }\n    };\n\n    // Fetch cascading options\n    useEffect(() => {\n        if (dependsOn.length) {\n            fetchOptions();\n        } else if (isAutoComplete || !userSelected.current) {\n            setOptions(initialOptions);\n        }\n    }, [dependencyValues, initialOptions, api, column.lookup]);\n\n    return options;\n}\n","import React, { useEffect, useMemo, useCallback } from 'react';\nimport { FormHelperText, useTheme } from '@mui/material';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport FormControl from '@mui/material/FormControl';\nimport InputLabel from '@mui/material/InputLabel';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport useCascadingLookup from '../../../hooks/useCascadingLookup';\n\nconst SelectField = React.memo(({ column, field, formik, lookups, dependsOn = [], model, ...otherProps }) => {\n    const userSelected = React.useRef(false);\n    const { placeHolder } = column;\n    const options = useCascadingLookup({ column, formik, lookups, dependsOn, userSelected, model });\n    const theme = useTheme();\n\n    // Memoize input value processing to avoid recalculation on each render\n    const inputValue = useMemo(() => {\n        let value = formik.values[field];\n        \n        // Handle default value selection\n        if (options?.length && !value && !column.multiSelect && \"IsDefault\" in options[0]) {\n            const isDefaultOption = options.find(e => e.IsDefault);\n            if (isDefaultOption) {\n                value = isDefaultOption.value;\n                formik.setFieldValue(field, isDefaultOption.value);\n            }\n        }\n        \n        // Handle multi-select values\n        if (column.multiSelect) {\n            if (!value || value.length === 0) {\n                value = [];\n            } else if (!Array.isArray(value)) {\n                value = value.split(',').map((e) => parseInt(e));\n            }\n        }\n        \n        return value;\n    }, [formik.values[field], options, column.multiSelect, field]);\n\n    // Memoize event handlers to prevent unnecessary re-renders of child components\n    const handleChange = useCallback((event) => {\n        formik.handleChange(event);\n        userSelected.current = true;\n    }, [formik]);\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            error={formik.touched[field] && formik.errors[field]}\n            variant=\"standard\">\n            <InputLabel>{placeHolder ? placeHolder : \"\"}</InputLabel> \n            <Select\n                IconComponent={KeyboardArrowDownIcon}\n                {...otherProps}\n                name={field}\n                multiple={column.multiSelect === true}\n                readOnly={column.readOnly === true}\n                value={`${inputValue}`}\n                onChange={handleChange}\n                onBlur={formik.handleBlur}\n                sx={{\n                    backgroundColor: column.readOnly ? theme.palette?.action?.disabled : ''\n                }}\n            >\n                {Array.isArray(options) && options.map(option => (\n                    <MenuItem key={option.value} value={option.value} disabled={option.isDisabled}>\n                        {option.label}\n                    </MenuItem>\n                ))}\n            </Select>\n            <FormHelperText>{formik.touched[field] && formik.errors[field]}</FormHelperText>\n        </FormControl>\n    );\n});\n\nexport default SelectField;","import { useCallback } from \"react\";\nimport { styled } from \"@mui/material/styles\";\n\nconst DivSpacing = styled('div')({\n    marginTop: '10px',\n    marginBottom: '10px',\n    fontSize: '20px'\n});\nconst TransferField = ({ component, name, formik, field, column }) => {\n    const { value } = formik.getFieldProps(name || field);\n    const { setFieldValue } = formik;\n    const Component = component || column.relation;\n    const onAssignChange = useCallback((value) => {\n        setFieldValue(name || field, value);\n    }, [setFieldValue, name, field]);\n    return (\n        <div>\n            <DivSpacing>{`${\"Available\"} ${column.label}`}</DivSpacing>\n            <Component selected={value} available={true} onAssignChange={onAssignChange} disableCellRedirect={column.disableCellRedirect} readOnly={column.readOnly} />\n            <DivSpacing>{`${\"Assigned\"} ${column.label}`}</DivSpacing>\n            <Component selected={value} assigned={true} onAssignChange={onAssignChange} disableCellRedirect={column.disableCellRedirect} readOnly={column.readOnly} />\n        </div>\n    );\n}\n\nexport default TransferField;","import React from \"react\";\nimport { FormControl, FormControlLabel, FormLabel, Radio, RadioGroup, FormHelperText, useTheme } from \"@mui/material\";\n\nconst Field = ({ field, formik, orientation = \"row\", label, lookups, fieldConfigs={}, mode, ...otherProps }) => {\n    const handleChange = (event) => {\n        formik.setFieldValue(field, event.target.value);\n    }\n\n    const options = lookups ? lookups[otherProps.column.lookup] : [];\n    const theme = useTheme();\n    const isError = formik.touched[field] && Boolean(formik.errors[field]);\n    const isDisabled = mode !== 'copy' && fieldConfigs.disabled;\n    return (\n        <>\n            <FormControl component=\"fieldset\" error={isError}>\n                <FormLabel component=\"legend\">{label}</FormLabel>\n                <RadioGroup\n                    row={orientation === \"row\"}\n                    aria-label={label}\n                    name={field}\n                    value={formik.values[field]}\n                    onChange={handleChange}\n                >\n                    {options?.map((option, index) => (\n                        <FormControlLabel\n                            key={index}\n                            value={option.value}\n                            control={<Radio />}\n                            label={option.label}\n                            disabled={isDisabled}\n                        />\n                    ))}\n                </RadioGroup>\n            </FormControl>\n            {isError && <FormHelperText style={{ color: theme.palette.error.main }}>{formik.errors[field]}</FormHelperText>}\n        </>\n    );\n};\n\nexport default Field;\n","import * as React from 'react';\nimport { FormHelperText } from '@mui/material';\nimport FormControl from '@mui/material/FormControl';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport TextField from '@mui/material/TextField';\nimport useCascadingLookup from '../../../hooks/useCascadingLookup';\n\nconst consts = {\n    limitTags: 5\n}\n\nconst Field = React.memo(({ column, field, formik, lookups, dependsOn = [], fieldConfigs = {}, mode, model, ...otherProps }) => {\n    const options = useCascadingLookup({ column, formik, lookups, dependsOn, model, isAutoComplete: true });\n    let inputValue = formik.values[field] || [];\n    if (!Array.isArray(inputValue)) {\n        inputValue = inputValue.split(\", \").map(Number);\n    }\n    const filteredCombos = options.filter(option => inputValue.includes(option.value)) || [];\n    const isDisabled = mode !== 'copy' && fieldConfigs.disabled;\n    const handleAutoCompleteChange = (_, newValue) => {\n        let toSave = newValue?.map(val => val.value) || [];\n        // multi-select values are stored as array or as comma-separated-string based on dataFormat\n        if (column.dataFormat !== 'array') {\n            toSave = toSave.length ? toSave.join(', ') : '';\n        }\n        formik.setFieldValue(field, toSave);\n    };\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            variant=\"standard\"\n            error={formik.touched[field] && Boolean(formik.errors[field])}\n        >\n            <Autocomplete\n                {...otherProps}\n                multiple\n                id={field}\n                limitTags={column.limitTags || consts.limitTags}\n                options={options || []}\n                getOptionLabel={(option) => option.label || ''}\n                defaultValue={filteredCombos}\n                renderInput={(params) => <TextField {...params} variant=\"standard\" />}\n                onChange={handleAutoCompleteChange}\n                value={filteredCombos}\n                size=\"small\"\n                disabled={isDisabled}\n            />\n            {formik.touched[field] && formik.errors[field] && <FormHelperText>{formik.errors[field]}</FormHelperText>}\n        </FormControl>\n    )\n});\n\nexport default Field;\n\n","import { Avatar, useTheme } from \"@mui/material\";\n\nexport const brandBackgroundColor = '#182eb5';\nexport const brandColor = '#ffffff';\nfunction RenderDayCell({ value }) {\n    const days = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];\n    const dayValues = value.split('');\n\n    const theme = useTheme();\n    return (\n        <div style={{ display: 'flex' }}>\n            {dayValues.map((val, index) => (\n                <Avatar\n                    key={index}\n                    sx={{\n                        backgroundColor: val === '1' ? theme.palette.success.main : brandColor,\n                        color: val === '1' ? 'white' : 'black',\n                        marginRight: '5px',\n                        width: '25px',\n                        height: '25px',\n                        fontSize: '0.65rem',\n                        lineHeight: '25px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        border: \"1px solid grey\"\n                    }}\n                >\n                    {days[index]}\n                </Avatar>\n            ))}\n        </div>\n    );\n}\n\nexport {\n    RenderDayCell\n}","import React from 'react';\nimport { useCallback, useState } from 'react';\nimport { Avatar, FormControl, FormControlLabel, FormHelperText, Radio, RadioGroup, styled, useTheme } from '@mui/material';\nimport {  grey } from '@mui/material/colors';\nimport { brandBackgroundColor } from './CustomRenderCell';\n\n\nconst days = [\n    { label: 'Sunday', value: 0, display: 'S' },\n    { label: 'Monday', value: 1, display: 'M' },\n    { label: 'Tuesday', value: 2, display: 'T' },\n    { label: 'Wednesday', value: 3, display: 'W' },\n    { label: 'Thursday', value: 4, display: 'T' },\n    { label: 'Friday', value: 5, display: 'F' },\n    { label: 'Saturday', value: 6, display: 'S' },\n];\n\nconst CustomAvator = styled(Avatar)(({ theme, isSelected }) => ({\n    width: 34,\n    height: 34,\n    padding: 1,\n    margin: 1,\n    backgroundColor: isSelected ? brandBackgroundColor : '#ffffff',\n    border: `1px solid ${grey[500]}`,\n    color: isSelected ? 'white' : 'black',\n}));\n\nconst DayAvatar = ({ day, onClick, isSelected }) => {\n    return (\n        <CustomAvator\n            key={day.value}\n            onClick={() => onClick(day.value)}\n            isSelected={isSelected}\n            style={{ margin: '4px' }}\n        >\n            {day.display}\n        </CustomAvator>\n    );\n};\nconst DaySelection = ({ name, field, formik, expired }) => {\n    const { setFieldValue } = formik;\n    const { value } = formik.getFieldProps(name || field);\n\n    const isWeekend = '1000001';\n    const isWeekdays = '0111110';\n    const defaultVal = \"0\".repeat(7);\n\n    const [selectedDays, setSelectedDays] = useState(value || defaultVal);\n    const [radioValue, setRadioValue] = useState(() => {\n        if (!value) return '';\n        if (value === isWeekend) return isWeekend;\n        if (value === isWeekdays) return isWeekdays;\n        return 'Custom';\n    });\n    const [presetSelected, setPresetSelected] = useState(false);\n    const onAssignChange = useCallback((newValue) => {\n        if (Array.isArray(newValue)) {\n            let finalValue = defaultVal;\n            for (const val of newValue) {\n                finalValue = finalValue.substring(0, val) + \"1\" + finalValue.substring(val + 1);\n            }\n            setSelectedDays(finalValue);\n            setFieldValue(name || field, finalValue);\n            setPresetSelected(true);\n        } else {\n            let baseValue = presetSelected ? defaultVal : selectedDays;\n            const finalValue = baseValue.slice(0, newValue) + (baseValue[newValue] === \"1\" ? \"0\" : \"1\") + baseValue.slice(newValue + 1);\n            setSelectedDays(finalValue);\n            setFieldValue(name || field, finalValue);\n            setRadioValue('Custom');\n            setPresetSelected(false);\n        }\n    }, [presetSelected, defaultVal, selectedDays, name, field, setFieldValue]);\n    const theme = useTheme();\n    const isError = formik.touched[field] && Boolean(formik.errors[field]);\n    return (\n        <>\n            <FormControl component=\"fieldset\" error={isError}>\n                <RadioGroup\n                    row\n                    name={name || field}\n                    value={radioValue}\n                    onChange={event => {\n                        const val = event.target.value;\n                        setRadioValue(val);\n                        if (val !== 'Custom') {\n                            setSelectedDays(val);\n                            setFieldValue(name || field, val);\n                            setPresetSelected(true);\n                        } else {\n                            setSelectedDays(defaultVal);\n                            setFieldValue(name || field, defaultVal);\n                            setPresetSelected(false);\n                        }\n                    }}\n                >\n                    <FormControlLabel value={isWeekend} control={<Radio />} label={\"Weekends (Sat - Sun)\"} onClick={() => onAssignChange([0, 6])} />\n                    <FormControlLabel value={isWeekdays} control={<Radio />} label={\"Weekdays (Mon - Fri)\"} onClick={() => onAssignChange([1, 2, 3, 4, 5])} />\n                    <FormControlLabel value={'Custom'} control={<Radio />} label={\"Specific days\"} />\n                    {days.map((day, index) => (\n                        <DayAvatar\n                            key={day.value}\n                            day={day}\n                            onClick={() => onAssignChange(index)}\n                            isSelected={radioValue === 'Custom' && selectedDays[index] === \"1\"}\n                            disabled={expired}\n                        />\n                    ))}\n                </RadioGroup>\n            </FormControl>\n            {isError && <FormHelperText style={{ color: theme.palette.error.main }}>{formik.errors[field]}</FormHelperText>}\n        </>\n    );\n};\n\nexport default DaySelection;","import * as React from 'react';\nimport { FormHelperText, useTheme } from '@mui/material';\nimport FormControl from '@mui/material/FormControl';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport TextField from '@mui/material/TextField';\nimport Chip from '@mui/material/Chip';\nimport { useCallback } from 'react';\n\nconst Field = ({ isAdd, column, field, formik, otherProps, fieldConfigs = {}, mode }) => {\n    const theme = useTheme();\n    let inputValue = formik.values[field] || [];\n    if (!Array.isArray(inputValue)) {\n        inputValue = inputValue.split(',').map(item => item.trim());\n    }\n    const isDisabled = React.useMemo(() => {\n        if (mode === 'copy') return true;\n        if (typeof fieldConfigs.disabled !== 'undefined') return fieldConfigs.disabled;\n        if (typeof column.disabled === 'function') return column.disabled({ isAdd, formik });\n        return Boolean(column.disabled);\n    }, [mode, fieldConfigs.disabled, column.disabled]);\n    const fixedOptions = column.hasDefault && !isAdd ? [inputValue[0]] : [];\n\n    const handleAutoCompleteChange = useCallback((e, newValue, action, item = {}) => {\n        const lastElement = newValue.pop()?.trim();\n        if (!newValue.includes(lastElement)) {\n            newValue.push(lastElement);\n        }\n        if (fixedOptions && fixedOptions.includes(item.option) && action === \"removeOption\") {\n            newValue = [item.option];\n        }\n        // multi-select values are stored as array or as comma-separated-string based on dataFormat\n        if (column.dataFormat !== 'array') {\n            newValue = newValue.length ? newValue.join(',') : '';\n        }\n        formik.setFieldValue(field, newValue);\n    },[formik, field]);\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            variant=\"standard\"\n            error={formik.touched[field] && Boolean(formik.errors[field])}\n        >\n            <Autocomplete\n                {...otherProps}\n                multiple\n                id={field}\n                freeSolo={true}\n                value={inputValue}\n                options={[]}\n                renderInput={(params) => (\n                    <TextField \n                        {...params} \n                        variant=\"standard\"\n                        InputProps={{\n                            ...params.InputProps,\n                            sx: {\n                                ...params.InputProps?.sx,\n                                ...(isDisabled && { backgroundColor: theme.palette?.action?.disabled })\n                            }\n                        }}\n                    />\n                )}\n                onChange={handleAutoCompleteChange}\n                size=\"small\"\n                renderTags={(tagValue, getTagProps) =>\n                    tagValue.map((option, index) => {\n                        const { key, ...tagProps } = getTagProps({ index });\n                        return (\n                            <Chip\n                                key={key}\n                                label={option}\n                                {...tagProps}\n                                disabled={fixedOptions.includes(option)}\n                            />\n                        );\n                    })\n                }\n                disabled={isDisabled}\n            />\n            {formik.touched[field] && formik.errors[field] && <FormHelperText>{formik.errors[field]}</FormHelperText>}\n        </FormControl>\n    )\n}\n\nexport default Field;\n\n","import React from 'react';\nimport Box from '@mui/material/Box';\nimport { SimpleTreeView } from '@mui/x-tree-view/SimpleTreeView';\nimport { TreeItem } from '@mui/x-tree-view/TreeItem';\n\n/**\n * Builds a tree structure from a flat array of data.\n * \n * @param {Array<Object>} data - The array of items to build the tree from.\n * @param {string|number} data[].ParentId - The ID of the parent item.\n * @param {string} data[].ParentName - The label for the parent item.\n * @param {string|number} data[].value - The unique value of the item.\n * @param {string} data[].label - The label for the item.\n * @returns {Array<Object>} The tree structure containing parent and child nodes.\n */\nconst buildTree = (data = []) => {\n  const tree = {};\n  data.forEach((item) => {\n    if (item.ParentId && tree[item.ParentId]) {\n      tree[item.ParentId].children.push({\n        value: item.value?.toString(),\n        label: item.label\n      });\n    } else {\n      tree[item.ParentId] = {\n        label: item.ParentName,\n        value: \"Parent\" + item.ParentId.toString(),\n        children: [{\n          value: item.value?.toString(),\n          label: item.label\n        }]\n      };\n    }\n  });\n  return Object.values(tree);\n};\n\n/**\n * Renders a tree view component with checkboxes for selection.\n * \n * @param {Object} props - The properties passed to the component.\n * @param {Object} props.column - The column metadata, including lookup information.\n * @param {string} props.field - The name of the field in the form to bind.\n * @param {Object} props.formik - The Formik instance for managing form state.\n * @param {Object} props.lookups - The lookup data for populating tree items.\n * @param {Array<Object>} props.data - Additional data for the tree.\n * @param {Object} props.otherProps - Other props for customization.\n * @param {Object} props.model - The model configuration.\n * @param {Object} props.fieldConfigs - Configuration for the field, including disabled state.\n * @param {string} props.mode - The mode of the form, such as 'edit' or 'copy'.\n * @returns {JSX.Element} The rendered tree view component.\n */\nexport default function treeCheckBox({ column, field, formik, lookups, fieldConfigs, mode }) {\n  const options = lookups ? lookups[column.lookup] : [];\n  const tree = buildTree(options);\n  const inputValue = formik.values[field]?.length ? formik.values[field].split(\", \") : [];\n  let isDisabled;\n  if (mode !== 'copy') {\n    isDisabled = fieldConfigs?.disabled;\n  }\n  const handleChange = (_, newValue) => {\n    formik.setFieldValue(field, newValue?.join(', ') || '');\n  };\n  return (\n    <Box sx={{ minHeight: 350 }}>\n      <SimpleTreeView\n        selectedItems={inputValue}\n        onSelectedItemsChange={handleChange}\n        disabled={isDisabled}\n        multiSelect\n        checkboxSelection\n      >\n        {tree.map((node) => (\n          <TreeItem key={node.value} itemId={node.value} label={node.label}>\n            {node.children.map((child) => (\n              <TreeItem key={child.value} itemId={child.value} label={child.label} />\n            ))}\n          </TreeItem>\n        ))}\n      </SimpleTreeView>\n    </Box>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Box, RadioGroup, FormControlLabel, Radio, TextField, Button, Typography, Tooltip, CircularProgress } from \"@mui/material\";\nimport { useRouter, useStateContext } from \"../../useRouter/StateProvider\";\nimport { transport } from \"../../Grid/httpRequest\";\nimport { useSnackbar } from \"../../SnackBar\";\nimport utils from \"../../utils\";\n\nconst consts = { maxLength: 500 }; // Default max length for document link\nconst { errorMapping } = utils;\nconst MB = 1024 * 1024;\nfunction FileUpload({ column, field, formik }) {\n    const inputValue = formik.values[field] || \"\";\n    const { stateData } = useStateContext();\n    const { maxSize, formats } = column;\n    const { uploadApi, mediaApi, Url } = stateData?.gridSettings?.permissions;\n    const [formState, setFormState] = useState({\n        isExternal: \"no\",\n        selectedFile: null\n    });\n    const [loading, setLoading] = useState(false); // Add loading state\n    const snackbar = useSnackbar();\n    const { getParams, useParams } = useRouter();\n    const { associationId } = useParams() || getParams;\n    const id = associationId?.split(\"-\")[0] || 1;\n\n    const handleRadioChange = (event) => {\n        const isExternal = event.target.value;\n        setFormState({\n            ...formState,\n            isExternal,\n            selectedFile: null\n        });\n        formik.setFieldValue(field, formik.values[field]); // Reset form field value\n    };\n\n    const handleInputChange = (e) => {\n        formik.setFieldValue(field, e.target.value);\n    };\n\n    const handleFileChange = (event) => {\n        const selectedFile = event.target.files[0];\n        if (!selectedFile) return;\n        if (maxSize && selectedFile.size > maxSize * MB) {\n            snackbar.showError(`File size exceeds the maximum limit of ${maxSize} MB.`);\n            return;\n        }\n        if (Array.isArray(formats) && !formats.includes(selectedFile.type)) {\n            snackbar.showError(`Invalid file format. Allowed formats: ${formats.join(\", \")}.`);\n            return;\n        }\n        setFormState((prev) => ({ ...prev, selectedFile }));\n    };\n\n    const handleFileUpload = async () => {\n        if (!formState.selectedFile) return;\n\n        setLoading(true); // Start loading\n        try {\n            const formData = new FormData();\n            formData.append(\"file\", formState.selectedFile);\n            formData.append(\"DocumentGroupId\", formik.values.DocumentGroupId); // Doc group ID\n            formData.append(\"AssociationId\", id); // Association ID\n            const response = await transport({\n                method: 'POST',\n                url: uploadApi,\n                data: formData,\n                headers: { 'Content-Type': 'multipart/form-data' },\n                credentials: 'include'\n            });\n            const data = response.data || {};\n            if (!data.success) {\n                snackbar.showError(data.message || \"Upload failed\");\n                return;\n            }\n            const fileUrl = mediaApi + '/' + data.filePath;\n            formik.setFieldValue(field, fileUrl);\n        } catch (error) {\n            const statusCode = (error.message.match(/status code (\\d{3})/) || [])[1];\n            snackbar.showError(errorMapping[statusCode]);\n        } finally {\n            setLoading(false); // Stop loading\n        }\n    };\n\n    const host = new URL(Url, window.location.origin).hostname.toLowerCase();\n    React.useEffect(() => {\n        setFormState({\n            ...formState,\n            isExternal: !inputValue.toLowerCase().includes(host) ? \"yes\" : \"no\"\n        });\n    }, [inputValue, setFormState]);\n\n    const isLengthExceeded = formik.values[field]?.length > (column.max || consts.maxLength);\n    const colorScheme = isLengthExceeded ? 'red' : '';\n\n    return (\n        <Box>\n            {/* Radio group */}\n            <Box sx={{ display: \"flex\", alignItems: \"center\", marginBottom: 2 }}>\n                <Typography variant=\"body1\" sx={{ width: \"150px\", marginRight: 2 }}>\n                    External Link?\n                </Typography>\n                <RadioGroup\n                    row\n                    value={formState.isExternal}\n                    onChange={handleRadioChange}\n                    aria-label=\"is-external-link\"\n                    name=\"is-external-link\"\n                >\n                    <FormControlLabel value=\"yes\" control={<Radio />} label=\"Yes\" />\n                    <FormControlLabel value=\"no\" control={<Radio />} label=\"No\" />\n                </RadioGroup>\n            </Box>\n\n            {/* Document link */}\n            <Box sx={{ display: \"flex\", alignItems: \"center\", marginBottom: 2 }}>\n                <Typography variant=\"body1\" sx={{ width: \"150px\", marginRight: 2 }}>\n                    Document Link\n                </Typography>\n                <Box sx={{ flex: 1, display: \"flex\", flexDirection: \"column\" }}>\n                    {formState.isExternal === \"yes\" ? (\n                        <TextField\n                            fullWidth\n                            value={inputValue}\n                            sx={{\n                                \"& .MuiOutlinedInput-root\": {\n                                    \"& fieldset\": { borderColor: colorScheme },\n                                    \"&.Mui-focused fieldset\": { borderColor: colorScheme },\n                                    \"&:hover fieldset\": { borderColor: colorScheme }\n                                }\n                            }}\n                            onChange={handleInputChange}\n                            placeholder=\"Enter external link\"\n                        />\n                    ) : (\n                        <TextField\n                            fullWidth\n                            value={inputValue}\n                            placeholder=\"Link autopopulated once uploaded\"\n                            InputProps={{ readOnly: true }}\n                        />\n                    )}\n                    {isLengthExceeded && <Typography sx={{ color: 'red' }}>Maximum allowed length for the document link is {column.max} characters.</Typography>}\n                </Box>\n            </Box>\n\n            {/* File upload */}\n            {formState.isExternal === \"no\" && (\n                <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 2 }}>\n                    <Button\n                        variant=\"outlined\"\n                        component=\"label\"\n                        disabled={loading} // Disable while loading\n                    >\n                        Choose File\n                        <input type=\"file\" hidden onChange={handleFileChange} />\n                    </Button>\n                    {formState.selectedFile && (\n                        <Tooltip title={formState.selectedFile.name} arrow>\n                            <Typography variant=\"body2\">\n                                {formState.selectedFile.name.length > 20\n                                    ? `${formState.selectedFile.name.substring(0, 20)}...`\n                                    : formState.selectedFile.name}\n                            </Typography>\n                        </Tooltip>\n                    )}\n\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={handleFileUpload}\n                        disabled={!formState.selectedFile || loading} // Disable while loading\n                    >\n                        {loading ? <CircularProgress size={24} color=\"inherit\" /> : \"Upload File\"}\n                    </Button>\n                </Box>\n            )}\n        </Box>\n    );\n}\n\nexport default FileUpload;\n","import * as React from 'react';\nimport FormControl from '@mui/material/FormControl';\nimport Input from '@mui/material/Input';\nimport Typography from '@mui/material/Typography';\nimport useDebounce from '../../../hooks/useDebounce';\n\nconst Field = ({ field, formik }) => {\n    const [state, setState] = React.useState({});\n    const debouncedState = useDebounce(state, 300);\n\n    React.useEffect(() => {\n        if (!formik.values[field]) return;\n        try {\n            const inputJSON = JSON.parse(formik.values[field]);\n            setState(inputJSON);\n        } catch (e) {\n            setState({});\n        }\n    }, [formik.values[field]]);\n\n    // Update formik when debounced state changes\n    React.useEffect(() => {\n        const nextValue = JSON.stringify(debouncedState);\n        if (formik.values[field] !== nextValue) {\n            formik.setFieldValue(field, nextValue);\n        }\n    }, [debouncedState, field, formik, formik.values[field]]);\n\n    const handleChange = (key, value) => {\n        const updatedState = { ...state, [key]: value };\n        setState(updatedState);\n    };\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            variant=\"standard\"\n            error={formik.touched[field] && Boolean(formik.errors[field])}\n            style={{ marginBottom: '1rem' }}\n        >\n            {Object.keys(state).map((key) => (\n                <div\n                    key={key}\n                    style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        marginBottom: '0.5rem'\n                    }}\n                >\n                    <Typography variant=\"body1\" sx={{ width: \"180px\", marginRight: 2 }}>\n                        {key}:\n                    </Typography>\n                    <Input\n                        id={key}\n                        name={key}\n                        value={state[key]}\n                        onChange={(e) => handleChange(key, e.target.value)}\n                        fullWidth\n                        style={{ flex: 2 }}\n                    />\n                </div>\n            ))}\n        </FormControl>\n    );\n};\n\nexport default Field;\n","import * as React from 'react';\nimport Box from '@mui/material/Box';\nimport BooleanField from './fields/boolean';\nimport StringField from './fields/string';\nimport NumberField from './fields/number';\nimport PasswordField from './fields/password';\nimport DateField from './fields/date';\nimport DateTimeField from './fields/dateTime';\nimport TimeField from './fields/time';\nimport SelectField from './fields/select';\nimport GridTransfer from './fields/grid-transfer';\nimport Grid from '@mui/material/Grid';\nimport RadioField from './fields/radio';\nimport AutocompleteField from './fields/autocomplete';\nimport Stepper from '@mui/material/Stepper';\nimport Step from '@mui/material/Step';\nimport StepLabel from '@mui/material/StepLabel';\nimport Button from '@mui/material/Button';\nimport DaySelection from './fields/dayRadio';\nimport { Typography } from '@mui/material';\nimport { ActiveStepContext } from './Form';\nimport styled from '@emotion/styled';\nimport ChipInput from './fields/chipInput';\nimport TreeCheckbox from './fields/treeCheckBox';\nimport FileUpload from './fields/fileUpload';\nimport JSONInput from './fields/jsonInput';\nimport utils from '../utils';\n\nconst fieldMappers = {\n    \"boolean\": BooleanField,\n    \"select\": SelectField,\n    \"string\": StringField,\n    \"number\": NumberField,\n    \"password\": PasswordField,\n    \"date\": DateField,\n    \"dateTime\": DateTimeField,\n    \"time\": TimeField,\n    \"oneToMany\": GridTransfer,\n    \"radio\": RadioField,\n    \"autocomplete\": AutocompleteField,\n    \"dayRadio\": DaySelection,\n    \"email\": StringField,\n    \"chipInput\": ChipInput,\n    \"treeCheckbox\": TreeCheckbox,\n    \"fileUpload\": FileUpload,\n    \"json\": JSONInput\n};\n\nconst gridContainerStyle = { paddingTop: \"2.5px\", paddingBottom: \"2.5px\" };\n\nconst ImportantSpan = styled('span')({\n  color: 'red !important',\n});\n\nconst RenderSteps = ({ tabColumns, model, formik, data, onChange, combos, lookups, fieldConfigs, mode, handleSubmit }) => {\n    const [skipped, setSkipped] = React.useState(new Set());\n\n    const { activeStep, setActiveStep } = React.useContext(ActiveStepContext);\n\n    const skipSteps = {};\n    for (let index = 0, len = model.columns.length; index < len; index++) {\n        const { field, skip } = model.columns[index];\n        if (skip) {\n            skipSteps[skip.step] = formik.values[field];\n        }\n    }\n\n    const isStepSkipped = (step) => {\n        return skipped.has(step) || skipSteps[step];\n    };\n\n    const isLastStep = () => {\n        for (let nextStep = activeStep + 1; nextStep < tabColumns.length; nextStep++) {\n            if (!isStepSkipped(nextStep)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    const handleNext = () => {\n        let nextStep = activeStep + 1;\n        while (skipSteps[nextStep]) {\n            nextStep++;\n        }\n\n        setSkipped((prevSkipped) => new Set(prevSkipped).add(activeStep));\n\n        if (nextStep >= tabColumns.length || isLastStep()) {\n            handleSubmit();\n        } else {\n            setActiveStep(nextStep);\n        }\n    };\n\n    const handleBack = () => {\n        let prevStep = activeStep - 1;\n\n        while (skipSteps[prevStep] && prevStep > 0) {\n            prevStep--;\n        }\n        setActiveStep(prevStep);\n    };\n\n    if (!tabColumns?.length) {\n        return null;\n    }\n\n    const currentStep = tabColumns[activeStep];\n    return (\n        <>\n            <Stepper activeStep={activeStep} sx={{ marginBottom: '20px' }}>\n                {tabColumns.map(({ title, key }, index) => {\n                    return (\n                        <Step key={key} completed={isStepSkipped(index)}>\n                            <StepLabel>\n                                <Typography sx={{ fontSize: '20px' }}>{title}</Typography>\n                            </StepLabel>\n                        </Step>\n                    );\n                })}\n            </Stepper>\n            <React.Fragment>\n                <RenderColumns formElements={currentStep.items} model={model} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} fieldConfigs={fieldConfigs} mode={mode} />\n                <Box sx={{ display: 'flex', flexDirection: 'row', pt: 2, mr: 2 }}>\n                    {activeStep !== 0 ? <Button color=\"inherit\" disabled={activeStep === 0} onClick={handleBack} variant=\"contained\" sx={{ mr: 2 }}> {'Back'}</Button> : null}\n                    <Button onClick={handleNext} variant=\"contained\">{isLastStep() ? \"Finish\" : \"Next\"}</Button>\n                </Box>\n            </React.Fragment>\n        </>\n    );\n};\n\nconst RenderColumns = ({ formElements, model, formik, data, onChange, combos, lookups, fieldConfigs, mode, isAdd }) => {\n    if (!formElements?.length) {\n        return null;\n    }\n    return (\n        <>\n            {\n                formElements.map(({ Component, column, field, label, otherProps }, key) => {\n                    const isGridComponent = typeof column.relation === 'function';\n                    return (\n                        <Grid container spacing={2} key={key} sx={{ marginTop: \"1rem\", marginBottom: \"1rem\" }} alignItems={isGridComponent ? \"flex-start\" : \"center\"}>\n                            {column?.showLabel !== false ?\n                                <Grid size={{ xs: 3 }} sx={gridContainerStyle}>\n                                    <Typography sx={{ fontSize: \"16px\", fontWeight: \"bold\" }}>{column.label || field}: {column.required && <ImportantSpan>*</ImportantSpan>}</Typography>\n                                </Grid>\n                                : null\n                            }\n                            <Grid size={{ xs: isGridComponent ? 12 : 9 }} sx={gridContainerStyle}>\n                                <Component isAdd={isAdd} model={model} fieldConfigs={fieldConfigs[field]} mode={mode} column={column} field={field} label={label} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} {...otherProps} />\n                            </Grid>\n                        </Grid >\n                    );\n                })\n            }\n        </>\n    );\n};\n\nconst getFormConfig = function ({ columns, tabs = {}, id, searchParams }) {\n    const formElements = [], tabColumns = {};\n    for (const tab in tabs) {\n        tabColumns[tab] = [];\n    }\n    for (const column of columns) {\n        const fieldType = column.type;\n        if (column.label === null) { /* If the field should not be shown in form mode, specify label as null */\n            continue;\n        }\n        const { field, label, tab } = column;\n        const otherProps = {};\n        if (column.options) {\n            otherProps.options = column.options;\n        }\n        if (column.dependsOn) {\n            otherProps.dependsOn = column.dependsOn;\n        }\n        const Component = fieldMappers[fieldType];\n        if (!Component || (column.hideInAddGrid && id === '0')) {\n            continue;\n        }\n\n        const target = tab && tabs[tab] ? tabColumns[tab] : formElements;\n        target.push({ Component, field, label, column: { ...column, readOnly: searchParams.has('showRelation') || column.readOnly }, otherProps });\n    }\n    const tabsData = [];\n    for (const tabColumn in tabColumns) {\n        tabsData.push({ key: tabColumn, title: tabs[tabColumn], items: tabColumns[tabColumn] });\n    }\n    return { formElements, tabColumns: tabsData };\n};\n\nconst FormLayout = ({ model, formik, data, combos, onChange, lookups, id: displayId, fieldConfigs, mode, handleSubmit }) => {\n    const isAdd = utils.emptyIdValues.includes(displayId);\n    const { formElements, tabColumns } = React.useMemo(() => {\n        const showTabs = model.formConfig?.showTabbed;\n        const searchParams = new URLSearchParams(window.location.search);\n        const { formElements, tabColumns } = getFormConfig({ columns: model.columns, tabs: showTabs ? model.tabs : {}, id: displayId, searchParams });\n        return { formElements, tabColumns, showTabs: showTabs && tabColumns.length > 0 };\n    }, [model]);\n    return (\n        <div>\n            <RenderColumns isAdd={isAdd} formElements={formElements} model={model} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} fieldConfigs={fieldConfigs} mode={mode} />\n            <div style={{ marginTop: '20px' }}>\n                <RenderSteps tabColumns={tabColumns} model={model} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} fieldConfigs={fieldConfigs} mode={mode} handleSubmit={handleSubmit} />\n            </div>\n        </div>\n    );\n};\n\nexport {\n    BooleanField,\n    StringField,\n    NumberField,\n    PasswordField,\n    DateField,\n    TimeField,\n    SelectField,\n    GridTransfer,\n    fieldMappers\n};\n\nexport default FormLayout;\n","import React, {\n  memo,\n  useState\n} from \"react\";\nimport Tab from \"@mui/material/Tab\";\nimport Box from \"@mui/material/Box\";\nimport Tabs from '@mui/material/Tabs';\nimport { UiModel } from \"../Grid/ui-models\";\n\nfunction CustomTabPanel(props) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`\n  };\n}\n\n/**\n * Memoized ChildGrid Component\n * @param {Object} params - Parameters for rendering the child grid\n * @param {string} params.relation - Name of the related model\n * @param {Object} params.parentFilters - Filters to apply to the parent\n * @param {Object} params.parent - Parent data\n * @param {Object} params.where - Conditions for the grid\n * @param {Array} params.models - List of available models\n */\nconst ChildGrid = memo(({ relation, parentFilters, parent, where, models, readOnly }) => {\n  const modelConfigOfChildGrid = models.find(({ name }) => name === relation);\n  if (!modelConfigOfChildGrid) return null;\n  const config = { ...modelConfigOfChildGrid, hideBreadcrumb: true };\n  const ChildModel = config instanceof UiModel ? config : new UiModel(config);\n  if (!ChildModel) return null;\n\n  return (\n    <ChildModel.ChildGrid\n      readOnly={readOnly}\n      parentFilters={parentFilters}\n      parent={parent}\n      model={config}\n      where={where}\n      isChildGrid={true}\n    />\n  );\n});\n\n/**\n * Relations component using MUI Tabs\n * Renders a tab for each relation, and a ChildGrid in each panel\n */\nconst Relations = React.memo(({ relations, parent, where = [], models, relationFilters, readOnly }) => {\n  const [tabIndex, setTabIndex] = useState(0);\n\n  const handleChange = (_, newValue) => {\n    setTabIndex(newValue);\n  };\n\n  return (\n    <Box sx={{ width: '100%' }}>\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={tabIndex} onChange={handleChange} aria-label=\"relations tabs\">\n          {relations.map((relation, idx) => {\n            const modelConfigOfChildGrid = models.find(({ name }) => name === relation) || {};\n            const label = modelConfigOfChildGrid.listTitle || modelConfigOfChildGrid.title || relation;\n            return (\n              <Tab\n                key={relation}\n                label={label}\n                {...a11yProps(idx)}\n              />\n            );\n          })}\n        </Tabs>\n      </Box>\n      {relations.map((relation, idx) => (\n        <CustomTabPanel value={tabIndex} index={idx} key={relation}>\n          <ChildGrid\n            readOnly={readOnly}\n            relation={relation}\n            key={relation}\n            models={models}\n            parentFilters={relationFilters[relation] || []}\n            parent={parent}\n            where={where}\n          />\n        </CustomTabPanel>\n      ))}\n    </Box>\n  );\n});\n\nexport default Relations;\n","import React from \"react\";\nimport { useFormik } from \"formik\";\nimport { useState, useEffect, createContext, useMemo } from \"react\";\nimport {\n  getRecord,\n  saveRecord,\n  deleteRecord\n} from \"../Grid/crud-helper\";\nimport Button from \"@mui/material/Button\";\nimport Paper from \"@mui/material/Paper\";\nimport Stack from \"@mui/material/Stack\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport Box from \"@mui/material/Box\";\nimport FormLayout from \"./field-mapper\";\nimport { useSnackbar } from \"../SnackBar\";\nimport { DialogComponent } from \"../Dialog\";\nimport { useStateContext, useRouter } from \"../useRouter/StateProvider\";\nimport actionsStateProvider from \"../useRouter/actions\";\nimport PageTitle from \"../PageTitle\";\nimport utils, { getPermissions } from \"../utils\";\nimport Relations from \"./relations\";\nexport const ActiveStepContext = createContext(1);\nconst defaultFieldConfigs = {};\nconst consts = {\n  object: \"object\",\n  function: \"function\",\n  baseData: \"baseData\",\n  string: \"string\",\n  create: \"Create\",\n  copy: \"Copy\",\n  edit: \"Edit\",\n  number: \"number\"\n};\n\nconst Form = ({\n  model,\n  api,\n  models,\n  relationFilters = {},\n  permissions = {},\n  Layout = FormLayout,\n  baseSaveData = {},\n  sx,\n  readOnly,\n  beforeSubmit,\n  deletePromptText\n}) => {\n  const formTitle = model.formTitle || model.title;\n  const { navigate, getParams, useParams, pathname } = useRouter();\n  const { relations = [] } = model;\n  const { dispatchData, stateData } = useStateContext();\n  const params = useParams() || getParams;\n  const { id: idWithOptions = \"\" } = params;\n  const id = idWithOptions.split(\"-\")[0];\n  const searchParams = new URLSearchParams(window.location.search);\n  const baseDataFromParams = searchParams.has(consts.baseData) && searchParams.get(consts.baseData);\n  if (baseDataFromParams) {\n    const parsedData = JSON.parse(baseDataFromParams);\n    if (typeof parsedData === consts.object && parsedData !== null) {\n      baseSaveData = { ...baseSaveData, ...parsedData };\n    }\n  }\n  const [isLoading, setIsLoading] = useState(true);\n  const [data, setData] = useState({});\n  const [lookups, setLookups] = useState(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const snackbar = useSnackbar();\n  const [validationSchema, setValidationSchema] = useState(null);\n  const [activeStep, setActiveStep] = useState(0);\n  const [isDiscardDialogOpen, setIsDiscardDialogOpen] = useState(false);\n  const [deleteError, setDeleteError] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const url = stateData?.gridSettings?.permissions?.Url || '';\n  const fieldConfigs = typeof model.applyFieldConfig === consts.function\n    ? model.applyFieldConfig({ data, lookups })\n    : defaultFieldConfigs;\n  const gridApi = useMemo(() => `${url}${model.api || api || ''}`, [url, model.api, api]);\n  const { mode } = stateData.dataForm;\n  const userData = stateData.getUserData || {};\n  const userDefinedPermissions = {\n    add: true,\n    edit: true,\n    delete: true,\n    ...model.permissions,\n    ...permissions\n  };\n  const { canEdit } = getPermissions({\n    userData,\n    model,\n    userDefinedPermissions\n  });\n  const { hideBreadcrumb = false, navigateBack } = model;\n\n  const handleNavigation = () => {\n    let navigatePath;\n    switch (typeof navigateBack) {\n      case consts.function:\n        navigatePath = navigateBack({ params, searchParams, data });\n        break;\n      case consts.number:\n      case consts.string:\n        navigatePath = navigateBack;\n        break;\n      default:\n        navigatePath = pathname.substring(0, pathname.lastIndexOf(\"/\"));\n        break;\n    }\n    navigate(navigatePath);\n  };\n\n  const isNew = useMemo(() => utils.emptyIdValues.includes(id), [id]);\n\n  const initialValues = useMemo(() => isNew\n    ? { ...model.initialValues, ...data, ...baseSaveData }\n    : { ...baseSaveData, ...model.initialValues, ...data }, [model.initialValues, data, id]);\n\n  useEffect(() => {\n    if (!url) return;\n    setValidationSchema(model.getValidationSchema({ id, snackbar }));\n    const options = idWithOptions.split(\"-\");\n    const params = {\n      api: api || gridApi,\n      model,\n      setError: errorOnLoad\n    };\n    getRecord({\n      ...params,\n      id: options.length > 1 ? options[1] : options[0],\n      setIsLoading,\n      setActiveRecord\n    });\n\n  }, [id, idWithOptions, model, url]);\n\n  const formik = useFormik({\n    enableReinitialize: true,\n    initialValues,\n    validationSchema: validationSchema,\n    validateOnBlur: false,\n    onSubmit: async (values, { resetForm }) => {\n      Object.keys(values).forEach(key => {\n        if (typeof values[key] === consts.string) {\n          values[key] = values[key].trim();\n        }\n      });\n      setIsLoading(true);\n      saveRecord({\n        id,\n        api: gridApi,\n        values: values,\n        setIsLoading,\n        setError: snackbar.showError,\n      })\n        .then((success) => {\n          if (!success) return;\n          if (model.reloadOnSave) {\n            return window.location.reload();\n          }\n          const message = success.info ? success.info : `Record ${id === 0 ? \"Added\" : \"Updated\"} Successfully.`;\n          snackbar.showMessage(message);\n          /**\n          * Handle navigation after form operations\n          * By default, the form navigates back to the grid after save/cancel operations.\n          * This behavior can be controlled by setting navigateBack \"false\" / false in model config which disables navigation completely.\n          */\n          navigateBack !== false && handleNavigation();\n        })\n        .catch((err) => {\n          snackbar.showError(\n            \"An error occured.\",\n            err\n          );\n          if (model.reloadOnSave) {\n            resetForm();\n          }\n        })\n        .finally(() => setIsLoading(false));\n    }\n  });\n\n  const { dirty } = formik;\n\n  const handleDiscardChanges = () => {\n    formik.resetForm();\n    setIsDiscardDialogOpen(false);\n    navigateBack !== false && handleNavigation();\n  };\n\n  const errorOnLoad = function (title, error) {\n    snackbar.showError(title, error);\n    handleNavigation();\n  };\n\n  const setActiveRecord = function ({ id, title, record, lookups }) {\n    const isCopy = idWithOptions.indexOf(\"-\") > -1;\n    const isNew = !id || id === \"0\";\n    const pageTitle = isNew ? consts.create : isCopy ? consts.copy : consts.edit;\n    const linkColumn = isNew ? \"\" : record[model.linkColumn];\n    const breadcrumbs = [{ text: model.breadCrumbs }, { text: pageTitle }];\n    if (isCopy) {\n      record[model.linkColumn] = \"\";\n    }\n    model.columns.forEach((item) => {\n      if (item.skipCopy && isCopy) {\n        record[item.field] = \"\";\n      }\n    });\n    setData(record);\n    setLookups(lookups);\n    if (linkColumn !== \"\") {\n      breadcrumbs.push({ text: linkColumn });\n    }\n    dispatchData({\n      type: actionsStateProvider.PAGE_TITLE_DETAILS,\n      payload: {\n        showBreadcrumbs: true,\n        breadcrumbs: breadcrumbs\n      }\n    });\n  };\n  const handleFormCancel = function (event) {\n    if (dirty && recordEditable) {\n      setIsDiscardDialogOpen(true);\n    } else {\n      navigateBack !== false && handleNavigation();\n    }\n    event.preventDefault();\n  };\n  const handleDelete = async function () {\n    try {\n      setIsDeleting(true);\n      const response = await deleteRecord({\n        id,\n        api: api || model.api,\n        setIsLoading,\n        setError: snackbar.showError,\n        setErrorMessage\n      });\n      if (response === true) {\n        snackbar.showMessage(\"Record Deleted Successfully.\");\n        navigateBack !== false && handleNavigation();\n      }\n    } catch (error) {\n      snackbar.showError(\"An error occured, please try after some time.\");\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n  const clearError = () => {\n    setErrorMessage(null)\n    setIsDeleting(false);\n  };\n  if (isLoading) {\n    return (\n      <Box sx={{ display: \"flex\", pt: \"20%\", justifyContent: \"center\" }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n  const handleChange = function (e) {\n    const { name, value } = e.target;\n    setData({ ...data, [name]: value });\n  };\n\n  const handleSubmit = async function (e) {\n    if (e) e.preventDefault();\n    if (typeof beforeSubmit === consts.function) {\n      await beforeSubmit({ formik });\n    }\n    const { errors } = formik;\n    formik.handleSubmit();\n    const fieldName = Object.keys(errors)[0];\n    const errorMessage = errors[fieldName];\n    if (errorMessage) {\n      snackbar.showError(errorMessage, null, \"error\");\n    }\n    const fieldConfig = model.columns.find(\n      (column) => column.field === fieldName\n    ) || {};\n    if (fieldConfig.tab) {\n      setActiveStep(Object.keys(model.tabs).indexOf(fieldConfig.tab));\n    }\n  };\n\n  const breadcrumbs = [\n    { text: formTitle },\n    { text: id === \"0\" ? \"New\" : \"Update\" }\n  ];\n  const showRelations = Number(id) !== 0 && Boolean(relations.length);\n  const showSaveButton = searchParams.has(\"showRelation\");\n  const recordEditable = !(\"canEdit\" in data) || data.canEdit;\n  const readOnlyRelations = !recordEditable || data.readOnlyRelations;\n  deletePromptText = deletePromptText || \"Are you sure you want to delete ?\";\n  return (\n    <>\n      <PageTitle\n        navigate={navigate}\n        title={formTitle}\n        showBreadcrumbs={!hideBreadcrumb}\n        breadcrumbs={breadcrumbs}\n        model={model}\n      />\n      <ActiveStepContext.Provider value={{ activeStep, setActiveStep }}>\n        <Paper sx={{ padding: 2, ...sx }}>\n          <form>\n            <Stack\n              direction=\"row\"\n              spacing={2}\n              justifyContent=\"flex-end\"\n              mb={1}\n            >\n              {canEdit && recordEditable && !showSaveButton && !readOnly && (\n                <Button\n                  variant=\"contained\"\n                  type=\"submit\"\n                  color=\"success\"\n                  onClick={handleSubmit}\n                >{`${\"Save\"}`}</Button>\n              )}\n              <Button\n                variant=\"contained\"\n                type=\"cancel\"\n                color=\"error\"\n                onClick={handleFormCancel}\n              >{`${\"Cancel\"}`}</Button>\n              {permissions.delete && (\n                <Button\n                  variant=\"contained\"\n                  color=\"error\"\n                  onClick={() => setIsDeleting(true)}\n                >{`${\"Delete\"}`}</Button>\n              )}\n            </Stack>\n            <Layout\n              model={model}\n              formik={formik}\n              data={data}\n              fieldConfigs={fieldConfigs}\n              onChange={handleChange}\n              lookups={lookups}\n              id={id}\n              handleSubmit={handleSubmit}\n              mode={mode}\n            />\n          </form>\n          {errorMessage && (\n            <DialogComponent\n              open={!!errorMessage}\n              onConfirm={clearError}\n              onCancel={clearError}\n              title=\"Info\"\n              hideCancelButton={true}\n            >\n              {\" \"}\n              {errorMessage}\n            </DialogComponent>\n          )}\n          <DialogComponent\n            open={isDiscardDialogOpen}\n            onConfirm={handleDiscardChanges}\n            onCancel={() => setIsDiscardDialogOpen(false)}\n            title=\"Changes not saved\"\n            okText=\"Discard\"\n            cancelText=\"Continue\"\n          >\n            {\"Would you like to continue to edit or discard changes?\"}\n          </DialogComponent>\n          <DialogComponent\n            open={isDeleting}\n            onConfirm={handleDelete}\n            onCancel={() => {\n              setIsDeleting(false);\n              setDeleteError(null);\n            }}\n            title={deleteError ? \"Error Deleting Record\" : \"Confirm Delete\"}\n          >{deletePromptText}</DialogComponent>\n          {showRelations ? (\n            <Relations\n              readOnly={readOnlyRelations}\n              models={models}\n              relationFilters={relationFilters}\n              relations={relations}\n              parent={model.name || model.title || \"\"}\n            />\n          ) : null}\n        </Paper>\n      </ActiveStepContext.Provider>\n    </>\n  );\n};\nexport default Form;\n","import GridBase from './index';\nimport React from 'react';\nimport * as yup from 'yup';\nimport { Divider } from '@mui/material';\nimport Form from '../Form/Form';\n\nconst regexConfig = {\n\tpassword: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,50}$/,\n\tnonAlphaNumeric: /[^a-zA-Z0-9]/g,\n\tcompareValidatorRegex: /^compare:(.+)$/,\n\temail: /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$/\n};\n\nconst customStyle = {};\nconst showRowsSelected = true;\nconst defaultValueConfigs = {\n\t\"string\": \"\",\n\t\"boolean\": false,\n\t\"radio\": false,\n\t\"oneToMany\": \"\"\n};\n\nclass UiModel {\n\n\tstatic defaultPermissions = {\n\t\tadd: true,\n\t\tedit: true,\n\t\tdelete: true\n\t};\n\n\tconstructor(modelConfig) {\n\t\tconst { title = \"\", controllerType } = modelConfig;\n\t\tlet { api, idProperty = api + 'Id' } = modelConfig;\n\t\tconst module = \"module\" in modelConfig ? modelConfig.module : title.replace(/[^\\w\\s]/gi, \"\");\n\t\tif (!api) {\n\t\t\tapi = `${title.replaceAll(regexConfig.nonAlphaNumeric, '-').toLowerCase()}`;\n\t\t\tidProperty = title.replaceAll(' ', '') + 'Id';\n\t\t}\n\t\tapi = controllerType === 'cs' ? `${api}.ashx` : `${api}`;\n\t\tconst defaultValues = { ...modelConfig.defaultValues };\n\t\tconst name = module || title;\n\t\tObject.assign(this, {\n\t\t\tstandard: true,\n\t\t\tname,\n\t\t\tpermissions: { ...UiModel.defaultPermissions },\n\t\t\tidProperty,\n\t\t\tlinkColumn: `${name}Name`,\n\t\t\toverrideFileName: title,\n\t\t\tpreferenceId: name,\n\t\t\ttableName: name,\n\t\t\tmodule,\n\t\t\t...modelConfig,\n\t\t\tapi\n\t\t});\n\t\tthis.columnVisibilityModel = this._getColumnVisibilityModel();\n\t\tthis.defaultValues = this._getDefaultValues(defaultValues);\n\t}\n\n\t_getColumnVisibilityModel() {\n\t\tconst columnVisibilityModel = {};\n\t\tfor (const col of this.columns) {\n\t\t\tif (col.hide === true) {\n\t\t\t\tcolumnVisibilityModel[col.id || col.field] = false;\n\t\t\t}\n\t\t}\n\t\treturn columnVisibilityModel;\n\t}\n\n\t_getDefaultValues(defaultValues) {\n\t\tfor (const col of this.columns) {\n\t\t\tconst name = col.field || col.id;\n\t\t\tdefaultValues[name] = col.defaultValue === undefined ? (defaultValueConfigs[col.type] || \"\") : col.defaultValue;\n\t\t}\n\t\treturn defaultValues;\n\t}\n\n\tgetValidationSchema({ id }) {\n\t\tconst { columns } = this;\n\t\tconst validationConfig = {};\n\t\tfor (const column of columns) {\n\t\t\tconst { field, label, header, type = 'string', requiredIfNew = false, required = false, min = '', max = '', validate } = column;\n\t\t\tconst formLabel = label || header || field;\n\t\t\tif (!formLabel) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet config;\n\t\t\tswitch (type) {\n\t\t\t\tcase 'string':\n\t\t\t\t\tconfig = yup.string().nullable().trim().label(formLabel);\n\t\t\t\t\tif (min && !isNaN(Number(min))) {\n\t\t\t\t\t\tconfig = config.min(Number(min), `${formLabel} must be at least ${min} characters long`);\n\t\t\t\t\t}\n\t\t\t\t\tif (max && !isNaN(Number(max))) {\n\t\t\t\t\t\tconfig = config.max(Number(max), `${formLabel} must be at most ${max} characters long`);\n\t\t\t\t\t}\n\t\t\t\t\tif (required) {\n\t\t\t\t\t\tconfig = config.trim().required(`${formLabel} is required`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'boolean':\n\t\t\t\t\tconfig = yup.bool().nullable().transform((value, originalValue) => {\n\t\t\t\t\t\tif (originalValue === '') return null;\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}).label(formLabel);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radio':\n\t\t\t\tcase 'dayRadio':\n\t\t\t\t\tconfig = yup.mixed().label(formLabel).required(`Select at least one option for ${formLabel}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'date':\n\t\t\t\t\tconfig = yup.date().nullable().transform((value, originalValue) => {\n\t\t\t\t\t\tif (originalValue === '' || originalValue === null) return null;\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}).label(formLabel).required(`${formLabel} is required`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dateTime':\n\t\t\t\t\tconfig = yup\n\t\t\t\t\t\t.date()\n\t\t\t\t\t\t.nullable() // Allow null values\n\t\t\t\t\t\t.transform((value, originalValue) => {\n\t\t\t\t\t\t\t// Transform empty strings or null values into null\n\t\t\t\t\t\t\tif (originalValue === '' || originalValue === null) return null;\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.label(formLabel); // Set a label for better error messages\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'select':\n\t\t\t\tcase 'autocomplete':\n\t\t\t\t\tif (required) {\n\t\t\t\t\t\tconfig = yup.string().trim().label(formLabel).required(`Select at least one ${formLabel}`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig = yup.string().nullable();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'password':\n\t\t\t\t\tconfig = yup.string()\n\t\t\t\t\t\t.label(formLabel)\n\t\t\t\t\t\t.test(\"ignore-asterisks\", `${formLabel} must be a valid password.`, (value) => {\n\t\t\t\t\t\t\t// Skip further validations if value is exactly \"******\"\n\t\t\t\t\t\t\tif (value === \"******\") return true;\n\t\t\t\t\t\t\tconst minlength = Number(min) || 8;\n\t\t\t\t\t\t\tconst maxlength = Number(max) || 50;\n\t\t\t\t\t\t\tconst regex = column.regex || regexConfig.password;\n\t\t\t\t\t\t\t// Check minimum length, maximum length, and pattern if not \"******\"\n\t\t\t\t\t\t\treturn yup.string()\n\t\t\t\t\t\t\t\t.min(minlength, `${formLabel} must be at least ${minlength} characters`)\n\t\t\t\t\t\t\t\t.max(maxlength, `${formLabel} must be at most ${maxlength} characters`)\n\t\t\t\t\t\t\t\t.matches(\n\t\t\t\t\t\t\t\t\tregex,\n\t\t\t\t\t\t\t\t\t`${formLabel} must contain at least one lowercase letter, one uppercase letter, one digit, and one special character`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.isValidSync(value);\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'email':\n\t\t\t\t\tconfig = yup\n\t\t\t\t\t\t.string()\n\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t.matches(\n\t\t\t\t\t\t\t(column.regex || regexConfig.email),\n\t\t\t\t\t\t\t'Email must be a valid email'\n\t\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'number':\n\t\t\t\t\tif (required) {\n\t\t\t\t\t\tconfig = yup.number().label(formLabel).required(`${formLabel} is required.`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig = yup.number().nullable();\n\t\t\t\t\t}\n\t\t\t\t\tif (min !== undefined && min !== '' && !isNaN(Number(min))) {\n\t\t\t\t\t\tconfig = config.min(Number(min), `${formLabel} must be greater than or equal to ${min}`);\n\t\t\t\t\t}\n\t\t\t\t\tif (max !== undefined && max !== '' && !isNaN(Number(max))) {\n\t\t\t\t\t\tconfig = config.max(Number(max), `${formLabel} must be less than or equal to ${max}`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'fileUpload':\n\t\t\t\t\tconfig = yup.string().trim().label(formLabel);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconfig = yup.mixed().nullable().label(formLabel);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (required && type !== \"string\") {\n\t\t\t\tconfig = config.required(`${formLabel} is required`);\n\t\t\t}\n\t\t\tif (requiredIfNew && (!id || id === '')) {\n\t\t\t\tconfig = config.trim().required(`${formLabel} is required`);\n\t\t\t}\n\t\t\tif (validate) {\n\t\t\t\tconst compareValidator = regexConfig.compareValidatorRegex.exec(validate);\n\t\t\t\tif (compareValidator) {\n\t\t\t\t\tconst compareFieldName = compareValidator[1];\n\t\t\t\t\tconst compareField = columns.find(\n\t\t\t\t\t\t(f) => (f.formField === compareFieldName || f.field) === compareFieldName\n\t\t\t\t\t);\n\t\t\t\t\tconfig = config.oneOf(\n\t\t\t\t\t\t[yup.ref(compareFieldName)],\n\t\t\t\t\t\t`${formLabel} must match ${compareField.label}`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvalidationConfig[field] = config;\n\t\t}\n\n\t\treturn yup.object({ ...validationConfig, ...this.validationSchema });\n\t}\n\n\tForm = ({ match, ...props }) => {\n\t\treturn <Form model={this} Layout={this.Layout} {...props} />;\n\t};\n\n\tGrid = ({ match, ...props }) => {\n\t\treturn <GridBase model={this} showRowsSelected={showRowsSelected} {...props} />;\n\t};\n\tChildGrid = (props) => {\n\t\treturn <>\n\t\t\t<GridBase model={this} {...props} customStyle={customStyle} showRowsSelected={showRowsSelected} />\n\t\t\t<Divider orientation='horizontal' sx={{ mt: 2 }} />\n\t\t</>;\n\t};\n}\n\nexport {\n\tUiModel\n};\n\n\n"],"names":["SnackbarContext","createContext","vertical","horizontal","Alert","React","props","ref","jsx","MuiAlert","SnackbarProvider","children","message","setMessage","useState","open","setOpen","severity","setSeverity","handleAction","setHandleAction","showMessage","title","onAction","showError","handleClose","jsxs","Fragment","Snackbar","useSnackbar","useContext","DialogComponent","onConfirm","onCancel","okText","cancelText","yesNo","maxWidth","fullWidth","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","actionsStateProvider","pendingRequests","HTTP_STATUS_CODES","getFormData","formData","key","exportRequest","url","query","newURL","value","transport","config","method","data","headers","credentials","rest","fetchOptions","response","contentType","request","params","history","jsonPayload","additionalParams","additionalHeaders","disableLoader","dispatchData","reqParams","ex","utils","getPermissions","userData","model","userDefinedPermissions","permissions","userPermissions","item","dateDataTypes","lookupDataTypes","timeInterval","isLocalTime","dateValue","handleCommonErrors","setError","shouldApplyFilter","filter","operator","type","isUnaryOperator","hasValidValue","getList","gridColumns","setIsLoading","setData","page","pageSize","sortModel","filterModel","api","parentFilters","action","extraParams","columns","controllerType","template","configFileName","showFullScreenLoader","baseFilters","isElasticExport","lookups","lookupWithDeps","dateColumns","lookup","field","keepLocal","keepLocalDate","filterable","dependsOn","where","filterField","e","requestData","sort","form","v","hiddenTag","prevData","records","record","column","userTimezoneOffset","displayIndex","error","getRecord","id","setActiveRecord","searchParams","lookupsToFetch","columnConfig","a","lookupValue","defaultValues","deleteRecord","result","saveRecord","values","Footer","pagination","apiRef","tTranslate","rowsPerPage","totalRows","totalPages","translate","i18n","useTranslation","tOpts","pageNumber","setPageNumber","handleChange","useEffect","onPageChange","targetPage","handleKeyPress","event","keyCode","keyValue","GridFooterContainer","Box","Typography","TextField","GridFooter","defaultTemplate","replaceTags","source","tags","keepMissingTags","match","g1","g2","g3","container","MuiTypography","variant","component","text","name","useMobile","onlyMobile","initialValue","checkDevice","view","setView","handleWindowSizeChange","userAgent","mobile","tablet","currentOrientation","stateReducer","state","initialState","daDKGrid","mergedLocalizationDatadaDK","locales","deDEGrid","mergedLocalizationDatadeDE","elGRGrid","mergedLocalizationDataelGR","esESGrid","mergedLocalizationDataesES","frFRGrid","mergedLocalizationDatafrFR","itITGrid","mergedLocalizationDataitIT","trTRGrid","mergedLocalizationDatatrTR","ptPT","count","visibleCount","totalCount","enUSGrid","mergedLocalizationDataenUS","dayjs","utc","timezone","StateContext","RouterContext","StateProvider","stateData","useReducer","systemDateTimeFormat","isDateFormatOnly","showOnlyDate","userDateFormat","getAllSavedPreferences","preferenceName","Username","preferenceApi","defaultPreferenceEnums","addDefaultPreference","preferences","filterNonExistingColumns","gridRef","ele","applyDefaultPreferenceIfExists","setIsGridPreferenceFetched","defaultPreference","pref","userPreferenceCharts","removeCurrentPreferenceName","formatDate","useSystemFormat","timeZone","format","useLocalization","currentLocaleData","localeData","getLocalizedString","RouterProvider","useRouter","useStateContext","context","HelpModal","height","setHeight","loading","setLoading","openModal","ratio","zoom","updateHeight","widthPercentage","calculatedHeight","maxHeight","resetIframe","iframe","Grid","Replay","Close","PageTitle","titleHeading","navigate","RightComponent","mobileRightComponent","titleClass","showBreadcrumbs","breadcrumbs","enableBackButton","breadcrumbColor","showHelpButton","isMobile","breadcrumbsLasIndex","needToShowBreadcrumbs","handleBack","Card","CardContent","Breadcrumbs","breadcrumb","index","MuiLink","IconButton","HelpIcon","PageTitle$1","withTranslation","utcPlugin","componentMap","DatePicker","DateTimePicker","LocalizedDatePicker","fixedFilterFormat","applyValue","convert","columnType","filterFormat","isValidDate","date","parsedDate","handleFilterChange","newValue","getMonthAbbreviation","parts","ComponentToRender","Dateformatvalue","LocalizationProvider","AdapterDayjs","localizedDateFormat","colProps","getGridDateOperators","actionTypes","formTypes","GridActionsCellItem","Tooltip","EditIcon","DeleteIcon","initialValues","pageSizeOptions","GridPreferences","useGridApiRef","snackbar","openDialog","setOpenDialog","openForm","setOpenForm","filteredPrefs","setFilteredPrefs","formType","setFormType","menuAnchorEl","setMenuAnchorEl","openPreferenceExistsModal","setOpenPreferenceExistsModal","openConfirmDeleteDialog","setOpenConfirmDeleteDialog","currentPreference","useGridSelector","gridFilterModelSelector","gridSortModelSelector","validationSchema","useMemo","yup","formik","useFormik","savePreference","handleOpen","handleDialogClose","deletePreference","prefName","applySelectedPreference","prefId","applyPreference","presetName","preferenceAlreadyExists","pinnedColumns","orderedFields","columnVisibilityModel","gridColumn","col","width","getGridRowId","row","openFormModal","confirmDeletePreference","currentPrefname","onCellClick","cellParams","isManageForm","SettingsIcon","Menu","List","MenuItem","ListItemButton","ListItemIcon","prefDesc","ListItem","ListItemText","Stack","FormControlLabel","Checkbox","SaveIcon","CloseIcon","DataGridPremium","GridOperators","CustomDropdownMenu","lookupData","options","label","currentFieldFilters","useCallback","inputValue","element","newitem","FormControl","InputLabel","Select","option","convertDefaultSort","defaultSort","constants","sortRegex","sortField","sortInfo","direction","ExportMenuItem","handleExport","isPivotExport","CustomExportButton","exportFormats","GridToolbarExportContainer","areEqual","prevProps","nextProps","equal","o","defaultPageSize","recordCounts","iconMapper","ArticleIcon","auditColumnMappings","booleanIconRenderer","CheckIcon","DeleteContentText","styled","ButtonWithMargin","GridToolBar","Toolbar","CustomToolbar","isReadOnly","canAdd","forAssignment","showAddIcon","onAdd","selectionApi","selectedSet","selectAll","available","onAssign","assigned","onUnassign","effectivePermissions","clearFilters","addText","AddIcon","RemoveIcon","ColumnsPanelTrigger","triggerProps","ViewColumnIcon","FilterPanelTrigger","FilterListIcon","FilterListOffIcon","GridBase","memo","parent","selected","disableCellRedirect","onAssignChange","customStyle","showRowsSelected","chartFilters","clearChartFilter","customFilters","onRowDoubleClick","onRowClick","gridStyle","reRenderKey","additionalFilters","onCellDoubleClickOverride","onAddOverride","dynamicColumns","readOnly","paginationModel","setPaginationModel","isLoading","rowsSelected","selection","setSelection","isDeleting","setIsDeleting","setRecord","visibilityModel","showAddConfirmation","setShowAddConfirmation","paginationMode","errorMessage","setErrorMessage","setSortModel","initialFilterModel","setFilterModel","getParams","useParams","pathname","idWithOptions","idProperty","showHeaderFilters","disableRowSelectionOnClick","hideBackButton","hideTopFilters","updatePageTitle","isElasticScreen","navigateBack","isDoubleClicked","dataRef","useRef","toLink","link","isGridPreferenceFetched","routesWithNoChildRoute","withControllersUrl","historyScreenName","emptyIsAnyOfOperatorFilters","documentField","canEdit","canDelete","addUrlParamKey","searchParamKey","hideBreadcrumb","tableName","showHistory","hideBreadcrumbInGrid","gridTitle","baseDataFromParams","baseSaveData","parsedData","handleSelectRow","rowId","CustomCheckBox","isCheckedLocal","setIsCheckedLocal","gridColumnTypes","items","acc","lookupOptions","lookupMap","customActions","baseColumnList","GRID_CHECKBOX_SELECTION_COL_DEF","finalColumns","overrides","operators","getGridStringOperators","op","getGridBooleanOperators","headerName","auditColumns","header","actions","CopyIcon","HistoryIcon","icon","color","FileDownloadIcon","rowActions","isDisabled","fetchData","gridApi","filters","columnField","operatorValue","chartField","mode","path","handleDownload","documentLink","fileName","blob","fileNameFromLink","onCellClickHandler","details","el","foundCustomAction","ca","historyObject","handleDelete","clearError","processRowUpdate","updatedRow","onCellDoubleClick","handleAddRecords","selectedIds","recordMap","selectedRecords","err","updateAssignment","unassign","assign","assignedValues","finalValues","setupGridPreference","hiddenColumns","nonExportColumns","visibleColumns","backRoute","updateFilters","updatedItems","isNumber","updateSort","isKeywordField","obj","pageTitle","breadCrumbs","Field","otherProps","checked","FormHelperText","theme","useTheme","rows","useDebounce","delay","debouncedValue","setDebouncedValue","timer","DIGIT_START","DIGIT_END","ARROW_LEFT","ARROW_RIGHT","CONTROL_KEYS","resolveValue","min","max","setInputValue","resolvedMin","resolvedMax","numValue","onBlur","StringField","showPassword","setShowPassword","handleClickShowPassword","show","handleMouseDownPassword","disabled","InputAdornment","VisibilityOffIcon","VisibilityIcon","fieldConfigs","createElement","isoString","TimePicker","emptyValues","useCascadingLookup","isAutoComplete","userSelected","setOptions","dependencyValues","toReturn","dependency","dep","initialOptions","newOptions","requestBody","SelectField","placeHolder","isDefaultOption","KeyboardArrowDownIcon","DivSpacing","TransferField","setFieldValue","Component","orientation","isError","FormLabel","RadioGroup","Radio","consts","filteredCombos","handleAutoCompleteChange","_","toSave","val","Autocomplete","brandBackgroundColor","days","CustomAvator","Avatar","isSelected","grey","DayAvatar","day","onClick","DaySelection","expired","isWeekend","isWeekdays","defaultVal","selectedDays","setSelectedDays","radioValue","setRadioValue","presetSelected","setPresetSelected","finalValue","baseValue","isAdd","fixedOptions","lastElement","tagValue","getTagProps","tagProps","Chip","buildTree","tree","treeCheckBox","SimpleTreeView","node","TreeItem","child","errorMapping","MB","FileUpload","maxSize","formats","uploadApi","mediaApi","Url","formState","setFormState","associationId","handleRadioChange","isExternal","handleInputChange","handleFileChange","selectedFile","prev","handleFileUpload","fileUrl","statusCode","host","isLengthExceeded","colorScheme","CircularProgress","setState","debouncedState","inputJSON","nextValue","updatedState","Input","fieldMappers","BooleanField","NumberField","PasswordField","DateField","DateTimeField","TimeField","GridTransfer","RadioField","AutocompleteField","ChipInput","TreeCheckbox","JSONInput","gridContainerStyle","ImportantSpan","RenderSteps","tabColumns","onChange","combos","handleSubmit","skipped","setSkipped","activeStep","setActiveStep","ActiveStepContext","skipSteps","len","skip","isStepSkipped","step","isLastStep","nextStep","handleNext","prevSkipped","prevStep","currentStep","Stepper","Step","StepLabel","RenderColumns","formElements","isGridComponent","getFormConfig","tabs","tab","fieldType","tabsData","tabColumn","FormLayout","displayId","showTabs","CustomTabPanel","other","a11yProps","ChildGrid","relation","models","modelConfigOfChildGrid","ChildModel","UiModel","Relations","relations","relationFilters","tabIndex","setTabIndex","Tabs","idx","Tab","defaultFieldConfigs","Form","Layout","sx","beforeSubmit","deletePromptText","formTitle","setLookups","setValidationSchema","isDiscardDialogOpen","setIsDiscardDialogOpen","deleteError","setDeleteError","handleNavigation","navigatePath","isNew","errorOnLoad","resetForm","success","dirty","handleDiscardChanges","isCopy","linkColumn","handleFormCancel","recordEditable","errors","fieldName","fieldConfig","showRelations","showSaveButton","readOnlyRelations","Paper","regexConfig","defaultValueConfigs","modelConfig","module","validationConfig","requiredIfNew","required","validate","formLabel","originalValue","minlength","maxlength","regex","compareValidator","compareFieldName","compareField","f","Divider"],"mappings":"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"}