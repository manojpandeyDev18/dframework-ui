{"version":3,"file":"index.js","sources":["../src/lib/components/SnackBar/index.js","../src/lib/components/Dialog/index.js","../src/lib/components/useRouter/actions.js","../src/lib/components/Grid/httpRequest.js","../src/lib/components/utils.js","../src/lib/components/Grid/crud-helper.js","../src/lib/components/Grid/footer.js","../src/lib/components/Grid/template.js","../src/lib/components/Typography/index.js","../src/lib/components/useMobile.js","../src/lib/components/useRouter/stateReducer.js","../src/lib/components/useRouter/initialState.js","../src/lib/components/mui/locale/data-grid/daDK.js","../src/lib/components/mui/locale/data-grid/deDE.js","../src/lib/components/mui/locale/data-grid/elGR.js","../src/lib/components/mui/locale/data-grid/esES.js","../src/lib/components/mui/locale/data-grid/frFR.js","../src/lib/components/mui/locale/data-grid/itIT.js","../src/lib/components/mui/locale/data-grid/trTR.js","../src/lib/components/mui/locale/data-grid/ptPT.js","../src/lib/components/mui/locale/data-grid/enUS.js","../src/lib/components/mui/locale/localization.js","../src/lib/components/useRouter/StateProvider.js","../src/lib/components/HelpModal/index.js","../src/lib/components/PageTitle/index.js","../src/lib/components/Grid/LocalizedDatePicker.js","../src/lib/components/Grid/GridPreference.js","../src/lib/components/Grid/CustomDropdownMenu.js","../src/lib/components/Grid/helper.js","../src/lib/components/Grid/index.js","../src/lib/components/Form/fields/boolean.js","../src/lib/components/Form/fields/string.js","../src/lib/hooks/useDebounce.js","../src/lib/components/Form/fields/number.js","../src/lib/components/Form/fields/password.js","../src/lib/components/Form/fields/date.js","../src/lib/components/Form/fields/dateTime.js","../src/lib/components/Form/fields/time.js","../src/lib/hooks/useCascadingLookup.js","../src/lib/components/Form/fields/select.js","../src/lib/components/Form/fields/grid-transfer.js","../src/lib/components/Form/fields/radio.js","../src/lib/components/Form/fields/autocomplete.js","../src/lib/components/Form/fields/CustomRenderCell.js","../src/lib/components/Form/fields/dayRadio.js","../src/lib/components/Form/fields/chipInput.js","../src/lib/components/Form/fields/treeCheckBox.js","../src/lib/components/Form/fields/fileUpload.js","../src/lib/components/Form/fields/jsonInput.js","../src/lib/components/Form/field-mapper.js","../src/lib/components/Form/relations.js","../src/lib/components/Form/Form.js","../src/lib/components/Grid/ui-models.js"],"sourcesContent":["import React, { useState, useContext, createContext } from 'react'\nimport Snackbar from '@mui/material/Snackbar'\nimport MuiAlert from '@mui/material/Alert';\n\nconst SnackbarContext = createContext(null);\nconst vertical = 'bottom';\nconst horizontal = 'center';\n\nconst Alert = React.forwardRef(function Alert(props, ref) {\n    return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\nconst SnackbarProvider = ({ children }) => {\n    const [message, setMessage] = useState(null);\n    const [open, setOpen] = useState(false);\n    const [severity, setSeverity] = useState(null);\n    const [handleAction, setHandleAction] = useState(null);\n\n    const showMessage = function (title, message, severity = \"info\", onAction) {\n        if (typeof title !== 'string') {\n            title = title.toString();\n        }\n        if (message && typeof message !== 'string') {\n            message = message.toString();\n        }\n        setMessage(message ? `${title}: ${message}` : title);\n        setSeverity(severity);\n        setOpen(true);\n        setHandleAction(onAction);\n    }\n\n    const showError = function (title, message, severity = \"error\", onAction) {\n        showMessage(title, message, severity, onAction);\n    }\n\n    const handleClose = function () {\n        setOpen(false);\n        setHandleAction(null);\n        if (handleAction) {\n            handleAction()\n        }\n    }\n    return (\n        <>\n            <SnackbarContext.Provider\n                value={{ showMessage, showError }}\n            >\n                {children}\n            </SnackbarContext.Provider>\n            <Snackbar open={open} autoHideDuration={6000} onClose={handleClose} anchorOrigin={{ vertical, horizontal }}>\n                <Alert severity={severity}>{message}</Alert>\n            </Snackbar>\n        </>\n    )\n}\nconst useSnackbar = function () {\n    return useContext(SnackbarContext)\n}\n\nexport { SnackbarProvider, SnackbarContext, useSnackbar }","import React from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\n/**\n * DialogComponent is a reusable dialog/modal component based on Material-UI's Dialog.\n *\n * @param {Object} props - The props for the DialogComponent.\n * @param {boolean} props.open - Controls whether the dialog is open.\n * @param {function} props.onConfirm - Callback fired when the confirm/ok button is clicked.\n * @param {string} [props.title=\"Confirm\"] - The title of the dialog.\n * @param {function} props.onCancel - Callback fired when the cancel button or dialog close is triggered.\n * @param {string} [props.okText] - Custom text for the confirm/ok button.\n * @param {string} [props.cancelText] - Custom text for the cancel button.\n * @param {boolean} [props.yesNo=false] - If true, uses \"Yes\"/\"No\" for button texts instead of \"Ok\"/\"Cancel\".\n * @param {React.ReactNode} props.children - The content of the dialog.\n * @param {string} [props.maxWidth='sm'] - The maxWidth of the dialog (xs, sm, md, lg, xl).\n * @param {boolean} [props.fullWidth=true] - If true, the dialog stretches to the full width of its container.\n * @param {Object} [props.props] - Additional props passed to the MUI Dialog component.\n * @returns {JSX.Element} The rendered Dialog component.\n */\n\nconst DialogComponent = ({ open, onConfirm, title = \"Confirm\", onCancel, okText, cancelText, yesNo = false, children, maxWidth = 'sm', fullWidth = true, ...props }) => {\n    okText = okText || (yesNo ? 'Yes' : 'Ok');\n    cancelText = cancelText || (yesNo ? 'No' : 'Cancel');\n    return (\n        <Dialog\n            {...props}\n            open={open}\n            onClose={onCancel}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            maxWidth={maxWidth}\n            fullWidth={fullWidth}\n        >\n            <DialogTitle id=\"alert-dialog-title\" sx={{ fontSize: children ? 'inherit' : '1.25rem' }} >\n                {title}\n            </DialogTitle>\n            {children && (\n                <DialogContent dividers>\n                    <DialogContentText>{children}</DialogContentText>\n                </DialogContent>\n            )}\n            {(onCancel || onConfirm) && (\n                < DialogActions >\n                    {onCancel && <Button onClick={onCancel}>{cancelText}</Button>}\n                    {onConfirm && <Button onClick={onConfirm} autoFocus>{okText}</Button>}\n                </DialogActions>\n            )}\n        </Dialog >\n    )\n}\nexport { DialogComponent }\n","const actionsStateProvider = {\n    UPDATE_FORM_MODE:'UPDATE_FORM_MODE',\n    UPDATE_DATE_TIME:'UPDATE_DATE_TIME',\n    UPDATE_LOCALIZATION: 'UPDATE_LOCALIZATION',\n    PAGE_TITLE_DETAILS:'PAGE_TITLE_DETAILS',\n    OPEN_MODAL:'OPEN_MODAL',\n    SET_PAGE_BACK_BUTTON:'SET_PAGE_BACK_BUTTON',\n    SET_GRID_SETTINGS:'SET_GRID_SETTINGS',\n    SET_LOCAL_LOCALIZATION:'SET_LOCAL_LOCALIZATION',\n    USER_DATA:'USER_DATA',\n    UDPATE_PREFERENCES: 'UDPATE_PREFERENCES',\n    TOTAL_PREFERENCES: 'TOTAL_PREFERENCES',\n    SET_CURRENT_PREFERENCE_NAME: 'SET_CURRENT_PREFERENCE_NAME',\n    UPDATE_LOADER_STATE: 'UPDATE_LOADER_STATE',\n    PASS_FILTERS_TO_HEADER: 'PASS_FILTERS_TO_HEADER',\n    SET_TIMEZONE: 'SET_TIMEZONE'\n  };\n  export default actionsStateProvider;","import actionsStateProvider from '../useRouter/actions';\nlet pendingRequests = 0;\n\nconst HTTP_STATUS_CODES = {\n    OK: 200,\n    SESSION_EXPIRED: 401,\n    FORBIDDEN: 403,\n    NOT_FOUND: 404,\n    INTERNAL_SERVER_ERROR: 500\n};\n\nconst getFormData = (props) => {\n    const formData = new FormData();\n    for (const key in props) {\n        if (typeof props[key] === \"object\") {\n            formData.append(key, JSON.stringify(props[key]));\n        } else {\n            formData.append(key, props[key]);\n        }\n    }\n    return formData;\n};\n\nconst exportRequest = (url, query) => {\n    const newURL = new URL(url);\n    for (const key in query) {\n        const value = typeof query[key] === 'object' ? JSON.stringify(query[key]) : query[key];\n        newURL.searchParams.append(key, value);\n    }\n    window.open(newURL, '_blank').focus();\n};\n\nconst transport = async (config) => {\n    const {\n        method = 'GET',\n        url,\n        data,\n        headers = {},\n        credentials = 'include',\n        ...rest\n    } = config;\n\n    const fetchOptions = {\n        method,\n        credentials,\n        headers: {\n            ...headers\n        },\n        ...rest\n    };\n\n    if (data) {\n        if (headers['Content-Type'] === 'multipart/form-data') {\n            delete fetchOptions.headers['Content-Type']; // Let browser set it\n            fetchOptions.body = data instanceof FormData ? data : getFormData(data);\n        } else {\n            fetchOptions.headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n            fetchOptions.body = typeof data === 'string' ? data : JSON.stringify(data);\n        }\n    }\n\n    const response = await fetch(url, fetchOptions);\n    const contentType = response.headers.get('content-type') || {};\n    const responseObj = {\n        status: response.status,\n        data: contentType.includes('application/json') ? await response.json() : await response.text(),\n        headers: Object.fromEntries(response.headers.entries())\n    };\n\n    return responseObj;\n};\n\nconst request = async ({ url, params = {}, history, jsonPayload = false, additionalParams = {}, additionalHeaders = {}, disableLoader = false, dispatchData }) => {\n    if (params.exportData) {\n        return exportRequest(url, params);\n    }\n    if (!disableLoader) {\n        dispatchData({ type: actionsStateProvider.UPDATE_LOADER_STATE, payload: true });\n    }\n    pendingRequests++;\n\n    const reqParams = {\n        method: 'POST',\n        credentials: 'include',\n        url: url,\n        headers: jsonPayload ? { ...additionalHeaders } : { 'Content-Type': 'multipart/form-data', ...additionalHeaders },\n        ...additionalParams\n    };\n\n    if (params) {\n        reqParams.data = jsonPayload ? params : getFormData(params);\n    }\n\n    try {\n        const response = await transport(reqParams);\n        pendingRequests--;\n        const data = response.data;\n\n        if (pendingRequests === 0 && !disableLoader) {\n            dispatchData({ type: 'UPDATE_LOADER_STATE', loaderOpen: false });\n        }\n\n        // Handle HTTP errors here\n        if (response.status === HTTP_STATUS_CODES.SESSION_EXPIRED) {\n            history('/login');\n            return;\n        }\n        if (response.status !== HTTP_STATUS_CODES.OK) {\n            // You can return the error object or handle as needed\n            return { data: { message: data.message || 'An error occurred' } };\n        }\n        return data;\n    } catch (ex) {\n        pendingRequests--;\n        if (pendingRequests === 0) {\n            dispatchData({ type: 'UPDATE_LOADER_STATE', loaderOpen: false });\n        }\n        // Only network errors will be caught here\n        return { data: { message: ex.message || 'Network error' } };\n    }\n};\n\nexport {\n    HTTP_STATUS_CODES,\n    transport\n};\n\nexport default request;","const utils = {\n    filterFieldDataTypes: {\n        Number: 'number',\n        String: 'string',\n        Boolean: 'boolean'\n    },\n    fixedFilterFormat: {\n        date: \"YYYY-MM-DD\",\n        datetime: \"YYYY-MM-DD hh:mm:ss a\",\n        dateTimeLocal: \"YYYY-MM-DD hh:mm:ss a\",\n        OverrideDateFormat: \"DD-MMM-YYYY\"\n    },\n    errorMapping: {\n        413: \"Upload failed: The file exceeds the 30 MB size limit. Please select a smaller file.\"\n    },\n    permissionsMapper: {\n        add: \"Permission2\",\n        edit: \"Permission3\",\n        delete: \"Permission4\"\n    },\n    emptyIdValues: [null, undefined, '', '0', 0]\n}\nexport const getPermissions = ({ userData = {}, model, userDefinedPermissions }) => {\n    const { permissions = [] } = userData;\n    userDefinedPermissions = userDefinedPermissions || { add: true, edit: true, delete: true };\n    const userPermissions = permissions.find(item => item.Module === model.module);\n    if (!userPermissions) {\n        return { canAdd: userDefinedPermissions.add, canEdit: userDefinedPermissions.edit, canDelete: userDefinedPermissions.delete };\n    }\n    return {\n        canAdd: userDefinedPermissions.add && Boolean(userPermissions[utils.permissionsMapper.add]),\n        canEdit: userDefinedPermissions.edit && Boolean(userPermissions[utils.permissionsMapper.edit]),\n        canDelete: userDefinedPermissions.delete && Boolean(userPermissions[[utils.permissionsMapper.delete]])\n    };\n};\nexport default utils;","import actionsStateProvider from \"../useRouter/actions\";\nimport { transport, HTTP_STATUS_CODES } from \"./httpRequest\";\nimport utils from '../utils';\n\nconst dateDataTypes = ['date', 'dateTime'];\nconst lookupDataTypes = ['singleSelect'];\nconst timeInterval = 200;\n\nconst isLocalTime = (dateValue) => new Date().getTimezoneOffset() === new Date(dateValue).getTimezoneOffset();\n\n/**\n * Handles common HTTP error responses such as session expiration and forbidden access.\n * If an error is detected, sets an appropriate error message and redirects the user after a delay.\n * Returns true if a common error was handled, otherwise false.\n * \n * @param {Object} response - The HTTP response object containing the status code.\n * @param {Function} setError - Callback function to set the error message.\n * @returns {boolean} Returns true if a common error was handled and a redirect is triggered, otherwise false.\n */\nconst handleCommonErrors = (response, setError) => {\n    if (response.status === HTTP_STATUS_CODES.SESSION_EXPIRED) {\n        setError('Session Expired!');\n        setTimeout(() => {\n            window.location.href = '/';\n        }, timeInterval);\n        return true;\n    } else if (response.status === HTTP_STATUS_CODES.FORBIDDEN) {\n        setError('Access Denied!');\n        setTimeout(() => {\n            window.location.href = '/';\n        }, timeInterval);\n        return true;\n    } else if (response.status === HTTP_STATUS_CODES.INTERNAL_SERVER_ERROR) {\n        setError('Internal Server Error');\n    }\n    return false;\n};\n\nfunction shouldApplyFilter(filter) {\n    const { operator, value, type } = filter;\n\n    const isUnaryOperator = [\"isEmpty\", \"isNotEmpty\"].includes(operator);\n    const hasValidValue = value !== undefined &&\n        value !== null &&\n        (value !== '' || (type === 'number' && value === 0) || (type === 'boolean' && value === false));\n\n    return isUnaryOperator || hasValidValue;\n}\n\nconst getList = async ({ gridColumns, setIsLoading, setData, page, pageSize, sortModel, filterModel, api, parentFilters, action = 'list', setError, extraParams, contentType, columns, controllerType = 'node', template = null, configFileName = null, dispatchData, showFullScreenLoader = false, model, baseFilters = null, isElasticExport }) => {\n    if (!contentType) {\n        if (showFullScreenLoader) {\n            dispatchData({ type: actionsStateProvider.UPDATE_LOADER_STATE, payload: true });\n        }\n    }\n\n    const lookups = [];\n    const lookupWithDeps = []; // for backward compatibility having two lookups arrays\n    const dateColumns = [];\n    gridColumns.forEach(({ lookup, type, field, keepLocal = false, keepLocalDate, filterable = true, dependsOn }) => {\n        if (dateDataTypes.includes(type)) {\n            dateColumns.push({ field, keepLocal, keepLocalDate });\n        }\n        if (!lookup) {\n            return;\n        }\n        if (!lookups.includes(lookup) && lookupDataTypes.includes(type) && filterable) {\n            lookups.push(lookup);\n            lookupWithDeps.push({ lookup, dependsOn });\n        }\n    });\n\n    const where = [];\n    if (filterModel?.items?.length) {\n        filterModel.items.forEach(filter => {\n            if (shouldApplyFilter(filter)) {\n                const { field, operator, filterField } = filter;\n                let { value } = filter;\n                const column = gridColumns.filter((item) => item?.field === filter.field);\n                const type = column[0]?.type;\n                if (type === 'boolean') {\n                    value = (value === 'true' || value === true) ? 1 : 0;\n                } else if (type === 'number') {\n                    value = Array.isArray(value) ? value.filter(e => e) : value;\n                }\n                value = filter.filterValues || value;\n                where.push({\n                    field: filterField || field,\n                    operator,\n                    value,\n                    type\n                });\n            }\n        });\n    }\n    if (parentFilters) {\n        where.push(...parentFilters);\n    }\n\n    if (baseFilters) {\n        where.push(...baseFilters);\n    }\n    const requestData = {\n        start: page * pageSize,\n        limit: isElasticExport ? model.exportSize : pageSize,\n        ...extraParams,\n        logicalOperator: filterModel.logicOperator,\n        sort: sortModel.map(sort => (sort.filterField || sort.field) + ' ' + sort.sort).join(','),\n        where,\n        isElasticExport,\n        model: model.module,\n        fileName: model.overrideFileName\n    };\n\n    if (lookups.length) {\n        requestData.lookups = lookups.join(',');\n    }\n\n    if (lookupWithDeps.length) {\n        requestData.lookupWithDeps = JSON.stringify(lookupWithDeps);\n    }\n\n    if (model?.limitToSurveyed) {\n        requestData.limitToSurveyed = model?.limitToSurveyed;\n    }\n\n    const headers = {};\n    let url = controllerType === 'cs' ? `${api}?action=${action}&asArray=0` : `${api}/${action}`;\n\n    if (template !== null) {\n        url += `&template=${template}`;\n    }\n    if (configFileName !== null) {\n        url += `&configFileName=${configFileName}`;\n    }\n    if (contentType) {\n        const form = document.createElement(\"form\");\n        requestData.responseType = contentType;\n        requestData.columns = columns;\n        requestData.userTimezoneOffset = -new Date().getTimezoneOffset(); // Negate to get the correct offset for conversion\n        form.setAttribute(\"method\", \"POST\");\n        form.setAttribute(\"id\", \"exportForm\");\n        form.setAttribute(\"target\", \"_blank\");\n        if (template === null) {\n            for (const key in requestData) {\n                let v = requestData[key];\n                if (v === undefined || v === null) {\n                    continue;\n                } else if (typeof v !== 'string') {\n                    v = JSON.stringify(v);\n                }\n                const hiddenTag = document.createElement('input');\n                hiddenTag.type = \"hidden\";\n                hiddenTag.name = key;\n                hiddenTag.value = v;\n                form.append(hiddenTag);\n            }\n        }\n        form.setAttribute('action', url);\n        document.body.appendChild(form);\n        form.submit();\n        setTimeout(() => {\n            document.getElementById(\"exportForm\").remove();\n        }, 3000);\n        return;\n    }\n    try {\n        setIsLoading(true);\n        const params = {\n            url,\n            method: 'POST',\n            data: requestData,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                ...headers\n            },\n            credentials: 'include'\n        };\n        setData(prevData => ({\n            ...prevData,\n            records: [] // reset records to empty array before fetching new data\n        }));\n        const response = await transport(params);\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            const { records } = response.data;\n            if (records) {\n                records.forEach(record => {\n                    dateColumns.forEach(column => {\n                        const { field, keepLocal, keepLocalDate } = column;\n                        if (record[field]) {\n                            record[field] = new Date(record[field]);\n                            if (keepLocalDate) {\n                                const userTimezoneOffset = record[field].getTimezoneOffset() * 60000;\n                                record[field] = new Date(record[field].getTime() + userTimezoneOffset);\n                            }\n                            if (keepLocal && !isLocalTime(record[field])) {\n                                const userTimezoneOffset = record[field].getTimezoneOffset() * 60000;\n                                record[field] = new Date(record[field].getTime() + userTimezoneOffset);\n                            }\n                        }\n                    });\n                    model.columns.forEach(({ field, displayIndex }) => {\n                        if (!displayIndex) return;\n                        record[field] = record[displayIndex];\n                    });\n                });\n            }\n            setData(response.data);\n        } else if (!handleCommonErrors(response, setError)) {\n            setError(response.statusText);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not list record', error.message || error.toString());\n        } else{\n            setError('Network failure or server unreachable. Please try again.');\n        }\n    } finally {\n        setIsLoading(false);\n        if (!contentType && showFullScreenLoader) {\n            dispatchData({ type: actionsStateProvider.UPDATE_LOADER_STATE, payload: false });\n        }\n    }\n};\n\nconst getRecord = async ({ api, id, setIsLoading, setActiveRecord, model, parentFilters, where = {}, setError }) => {\n    api = api || model.api;\n    setIsLoading(true);\n    const searchParams = new URLSearchParams();\n    const url = `${api}/${id === undefined || id === null ? '-' : id}`;\n    const lookupsToFetch = [];\n    const fields = model.formDef || model.columns;\n    fields?.forEach(field => {\n        if (field.lookup && !lookupsToFetch.includes(field.lookup) && !field.dependsOn) {\n            lookupsToFetch.push(field.lookup);\n        }\n    });\n    searchParams.set(\"lookups\", lookupsToFetch);\n    if (where && Object.keys(where)?.length) {\n        searchParams.set(\"where\", JSON.stringify(where));\n    }\n    try {\n        const response = await transport({\n            url: `${url}?${searchParams.toString()}`,\n            method: 'GET',\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            const { data: record, lookups } = response.data;\n            let title = record[model.linkColumn];\n            const columnConfig = model.columns.find(a => a.field === model.linkColumn);\n            if (columnConfig && columnConfig.lookup) {\n                if (lookups && lookups[columnConfig.lookup] && lookups[columnConfig.lookup]?.length) {\n                    const lookupValue = lookups[columnConfig.lookup].find(a => a.value === title);\n                    if (lookupValue) {\n                        title = lookupValue.label;\n                    }\n                }\n            }\n            const defaultValues = { ...model.defaultValues };\n            setActiveRecord({ id, title: title, record: { ...defaultValues, ...record, ...parentFilters }, lookups });\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Could not load record', response.body.toString());\n        }\n    } catch (error) {\n        if (error.response && handleCommonErrors(error.response, setError)) {\n            setError('Could not load record', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n};\n\nconst deleteRecord = async function ({ id, api, setIsLoading, setError }) {\n    const result = { success: false, error: '' };\n    if (!id) {\n        setError('Deleted failed. No active record.');\n        return;\n    }\n    setIsLoading(true);\n    try {\n        const response = await transport({\n            url: `${api}/${id}`,\n            method: 'DELETE',\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            if (response.data && !response.data.success) {\n                result.success = false;\n                setError('Delete failed', response.data.message);\n                return false;\n            }\n            result.success = true;\n            return true;\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Delete failed', response.body);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not delete record', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n    return result;\n};\n\nconst saveRecord = async function ({ id, api, values, setIsLoading, setError }) {\n    let url, method;\n\n    if (id !== 0) {\n        url = `${api}/${id}`;\n        method = 'PUT';\n    } else {\n        url = api;\n        method = 'POST';\n    }\n\n\n    try {\n        setIsLoading(true);\n        const response = await transport({\n            url,\n            method,\n            data: values,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            const data = response.data;\n            if (data.success) {\n                return data;\n            }\n            setError('Save failed', data.err || data.message);\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Save failed', response.body);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not save record', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n\n    return false;\n};\n\nconst getLookups = async ({ api, setIsLoading, setActiveRecord, model, setError, lookups, scopeId }) => {\n    api = api || model.api;\n    setIsLoading(true);\n    const searchParams = new URLSearchParams();\n    const url = `${api}/lookups`;\n    searchParams.set(\"lookups\", lookups);\n    searchParams.set(\"scopeId\", scopeId);\n    try {\n        const response = await transport({\n            url: `${url}?${searchParams.toString()}`,\n            method: 'GET',\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            setActiveRecord(response.data);\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Could not load lookups', response.statusText);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not load lookups', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n};\nexport {\n    getList,\n    getRecord,\n    deleteRecord,\n    saveRecord,\n    getLookups\n};\n","import {\n    GridFooterContainer,\n    GridFooter\n} from '@mui/x-data-grid-premium';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport TextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport { useTranslation } from 'react-i18next';\nimport React, { useEffect, useState } from 'react';\nconst Footer = ({ pagination, apiRef, tTranslate = (key) => key }) => {\n    const page = apiRef.current.state.pagination.paginationModel.page;\n    const rowsPerPage = apiRef.current.state.pagination.paginationModel.pageSize;\n    const totalRows = apiRef.current.state.rows.totalRowCount;\n    const totalPages = Math.ceil(totalRows / rowsPerPage);\n    const { t: translate, i18n } = useTranslation();\n    const tOpts = { t: translate, i18n };\n    const [pageNumber, setPageNumber] = useState(page + 1);\n\n    const handleChange = function (e) {\n        let value = e.target?.value;\n\n        if (value === '') {\n            setPageNumber('');\n        } else {\n            value = parseInt(value);\n            value = isNaN(value) || value < 1 ? 1 : value;\n            setPageNumber(value);\n        }\n    };\n\n    useEffect(() => {\n        setPageNumber(page + 1);\n    }, [page, rowsPerPage]);\n\n    const onPageChange = function () {\n        let targetPage = pageNumber === '' ? 1 : pageNumber;\n        targetPage = Math.max(targetPage, 1);\n        targetPage = Math.min(targetPage, totalPages);\n        apiRef.current.setPage(targetPage - 1);\n        setPageNumber(targetPage);\n        if (pageNumber === '') {\n            setPageNumber(1);\n        }\n    };\n    const handleKeyPress = (event) => {\n        const keyCode = event.which || event.keyCode;\n        const keyValue = String.fromCharCode(keyCode);\n        if (!/\\d/.test(keyValue)) event.preventDefault();\n    };\n\n    return (\n        <GridFooterContainer>\n            <Box sx={{ pl: 5 }}>\n                {pagination &&\n                    <>\n                        <Typography variant=\"p\">{tTranslate('Jump to page', tOpts)}:</Typography>\n                        <TextField\n                            sx={{\n                                width: 70,\n                                pl: 1,\n                                '& input[type=number]::-webkit-inner-spin-button': {\n                                    cursor: 'pointer'\n                                },\n                                '& input[type=number]::-webkit-outer-spin-button': {\n                                    cursor: 'pointer'\n                                }\n                            }}\n                            variant=\"standard\"\n                            type='number'\n                            min={1}\n                            value={pageNumber}\n                            onChange={handleChange}\n                            onKeyPress={handleKeyPress}\n                            disabled={!totalRows}\n                        />\n                        <Button disabled={!totalRows} size='small' onClick={onPageChange}>{tTranslate('Go', tOpts)}</Button>\n                    </>\n                }\n            </Box>\n            <GridFooter />\n        </GridFooterContainer>\n    );\n};\nexport { Footer };","const defaultTemplate = /\\${((\\w+)\\.)?(\\w+)}/g;\n\n/**\n * @description Replaces the given tags in the given source with the given values.\n * @param {string} source The source to replace the tags in.\n * @param {object} values The values to replace the tags with.\n * @param {object} options template - Regex to use for matching tags, keepMissingTags - Whether to keep tags that are not replaced.\n * @returns {string} The source with the tags replaced.\n * @example\n * // Replaces all tags in the given source with the given values.\n * console.log(template(\"${firstName} ${lastName}\", { firstName: \"John\", lastName: \"Doe\" }));\n * // -> \"John Doe\"\n * // Two level tags are supported.\n * console.log(template(\"${user.firstName} ${user.lastName}\", { user: { firstName: \"John\", lastName: \"Doe\" } }));\n * // -> \"John Doe\"\n **/\nconst replaceTags = function (source, tags, { template = defaultTemplate, keepMissingTags = false } = {}) {\n    if (!source || !tags) {\n        return source;\n    }\n\n    return source.replace(template, function (match, g1, g2, g3) {\n        const container = g2 ? tags[g2] || {} : tags;\n        return container[g3] === undefined ? (keepMissingTags ? match : \"\") : container[g3];\n    });\n};\n\nexport default {\n    replaceTags\n};","import React from 'react';\nimport { Typography } from \"@mui/material\";\n\nexport default function MuiTypography({ variant = \"h2\", component = \"h2\", text = '', name = null, ...rest }) {\n    return (\n        <Typography variant={variant} component={component} {...rest}>\n            {text}\n            {name && ` ${name}`}\n        </Typography>\n    );\n}","import { useState, useEffect } from 'react';\n\nfunction useMobile(onlyMobile = false) {\n  const initialValue = checkDevice();\n  const [view, setView] = useState(initialValue);\n\n  function handleWindowSizeChange() {\n    setTimeout(() => {\n      setView(checkDevice())\n    }, 10);\n  }\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowSizeChange);\n    return () => {\n      window.removeEventListener('resize', handleWindowSizeChange);\n    }\n  }, []);\n\n\n  function checkDevice() {\n    let userAgent = typeof window.navigator === \"undefined\" ? \"\" : navigator.userAgent;\n    const mobile = Boolean(userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i));\n    userAgent = userAgent.toLowerCase();\n    const tablet = /(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(userAgent);\n    let currentOrientation = null;\n    if (window.innerWidth <= window.innerHeight) {\n      currentOrientation = \"portrait\";\n    } else {\n      currentOrientation = \"landscape\";\n    }\n    return { mobile, tablet, portrait: currentOrientation === 'portrait', landscape: currentOrientation === 'landscape' };\n  }\n\n  return onlyMobile ? view.mobile : view;\n}\n\nexport default useMobile;","import actionsStateProvider from \"./actions\";\nconst stateReducer = (state, action) => {\n    switch (action.type) {\n        case actionsStateProvider.UPDATE_LOCALIZATION:\n            return { ...state, dataLocalization: action.payload };\n        case actionsStateProvider.UPDATE_DATE_TIME:\n            return { ...state, dateTime: action.payload };\n        case actionsStateProvider.UPDATE_FORM_MODE:\n            return { ...state, dataForm: action.payload };\n        case actionsStateProvider.PAGE_TITLE_DETAILS:\n            return { ...state, pageTitleDetails: action.payload };\n        case actionsStateProvider.OPEN_MODAL:\n            return { ...state, modal: action.payload };\n        case actionsStateProvider.SET_PAGE_BACK_BUTTON:\n            return { ...state, pageBackButton: action.payload };\n        case actionsStateProvider.SET_GRID_SETTINGS:\n            return { ...state, gridSettings: action.payload };\n        case actionsStateProvider.SET_LOCAL_LOCALIZATION:\n            return { ...state, getLocal: action.payload };\n        case actionsStateProvider.USER_DATA:\n            return { ...state, getUserData: action.payload };\n        case actionsStateProvider.UDPATE_PREFERENCES:\n            return { ...state, preferences: action.payload };\n        case actionsStateProvider.SET_CURRENT_PREFERENCE_NAME:\n            return { ...state, currentPreference: action.payload };\n        case actionsStateProvider.TOTAL_PREFERENCES:\n            return { ...state, totalPreferences: action.payload };\n        case actionsStateProvider.UPDATE_LOADER_STATE:\n            return { ...state, loaderOpen: action.payload };\n        case actionsStateProvider.PASS_FILTERS_TO_HEADER:\n            return { ...state, filtersInHeader: action.payload };\n        case actionsStateProvider.SET_TIMEZONE:\n            return { ...state, timeZone: action.payload };\n        default:\n            return state;\n    }\n};\nexport default stateReducer;","const initialState = {\n    dataLocalization: 'en',\n    dateTime: 'MM/DD/YYYY hh:mm:ss A',\n    dataForm: '',\n    pageTitleDetails:null,\n    modal:null,\n    pageBackButton:null,\n    gridSettings:{},\n    getLocal:{},\n    getUserData:null,\n    preferences: [],\n    currentPreference: null,\n    totalPreferences: null,\n    loaderOpen: false,\n    filtersInHeader: {},\n    timeZone: \"\"\n  };\n\n  export default initialState;","import * as locales from '@mui/x-data-grid-premium';\nexport const daDKGrid = {\n\n    Jumptopage: 'Gå til side',\n    Go: 'Gå',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'I dette rum vil vi snart bringe dig et dashboard med hovedoversigt KPIer for nem adgang',\n    Pages: 'sider',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Rækker pr. side',\n    }\n};\nconst mergedLocalizationDatadaDK = {\n    ...locales['daDK'],\n    ...daDKGrid,\n};\nexport default mergedLocalizationDatadaDK;\n","import * as locales from '@mui/x-data-grid-premium';\nexport const deDEGrid = {\n    Jumptopage: 'Zur Seite springen',\n    Go: 'Gehen',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'In diesem Bereich werden wir Ihnen in Kürze ein Dashboard mit den wichtigsten Übersichts-KPIs für einen einfachen Zugriff bereitstellen',\n    Pages: 'Seiten',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Zeilen pro Seite',\n    }\n};\nconst mergedLocalizationDatadeDE= {\n    ...locales['deDE'],\n    ...deDEGrid,\n};\n\nexport default mergedLocalizationDatadeDE;","import * as locales from '@mui/x-data-grid-premium';\nexport const elGRGrid = {\n    Jumptopage: 'Μετάβαση στη σελίδα',\n    Go: 'Πηγαίνω',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'Σε αυτόν τον χώρο θα σας φέρουμε σύντομα έναν πίνακα ελέγχου βασικών επισκόπησης KPI για εύκολη πρόσβαση',\n    Pages: 'Σελίδες',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Σειρές ανά σελίδα',\n    }\n};\nconst mergedLocalizationDataelGR = {\n    ...locales['elGR'],\n    ...elGRGrid,\n};\n\nexport default mergedLocalizationDataelGR;","import * as locales from '@mui/x-data-grid-premium';\nexport const esESGrid = {\n    Jumptopage: 'Saltar a la página',\n    Go: 'Ir',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'En este espacio pronto le ofreceremos un panel con los principales KPI generales para un fácil acceso.',\n    Pages: 'paginas',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Filas por página',\n    }\n};\nconst mergedLocalizationDataesES = {\n    ...locales['esES'],\n    ...esESGrid,\n};\n\nexport default mergedLocalizationDataesES;","\n\nimport * as locales from '@mui/x-data-grid-premium';\nexport const frFRGrid = {\n    Jumptopage: 'Aller à la page',\n    Go: 'Aller',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'Dans cet espace, nous vous proposerons bientôt un tableau de bord des principaux KPI pour un accès facile.',\n    Pages: 'Pages',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Lignes par page',\n    }\n};\nconst mergedLocalizationDatafrFR = {\n    ...locales['frFR'],\n    ...frFRGrid,\n};\nexport default mergedLocalizationDatafrFR;","\nimport * as locales from '@mui/x-data-grid-premium';\nexport const itITGrid = {\n    Jumptopage: 'Vai alla pagina',\n    Go: 'Andare',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'In questo spazio presto ti forniremo una dashboard con i principali KPI generali per un facile accesso',\n    Pages: 'Pagine',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Righe per pagina',\n    }\n};\nconst mergedLocalizationDataitIT = {\n    ...locales['itIT'],\n    ...itITGrid,\n};\n\nexport default mergedLocalizationDataitIT;","\nimport * as locales from '@mui/x-data-grid-premium';\nexport const trTRGrid = {\n  Jumptopage: 'Sayfaya atla',\n  Go: 'Gitmek',\n  InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'Bu alanda yakında size kolay erişim için ana genel bakış KPI larının bir kontrol panelini sunacağız',\n  Pages: 'Sayfalar',\n  MuiTablePagination: {\n    labelRowsPerPage: 'Sayfa başına satır',\n  },\n};\nconst mergedLocalizationDatatrTR = {\n  ...locales['trTR'],\n  ...trTRGrid,\n};\nexport default mergedLocalizationDatatrTR;\n","export default {\n  components: {\n    MuiDataGrid: {\n      defaultProps: {\n        localeText: {\n          Add: \"createew\",\n          noRowsLabel: 'Sem resultados',\n          noResultsOverlayLabel: 'Nenhum resultado encontrado.',\n\n          // Density selector toolbar button text\n          toolbarDensity: 'Densidade',\n          toolbarDensityLabel: 'Densidade',\n          toolbarDensityCompact: 'Compacto',\n          toolbarDensityStandard: 'Padrão',\n          toolbarDensityComfortable: 'Confortável',\n\n          // Columns selector toolbar button text\n          toolbarColumns: 'Colunas',\n          toolbarColumnsLabel: 'Selecionar colunas',\n\n          // Filters toolbar button text\n          toolbarFilters: 'Filtros',\n          toolbarFiltersLabel: 'Mostrar filtros',\n          toolbarFiltersTooltipHide: 'Esconder filtros',\n          toolbarFiltersTooltipShow: 'Mostrar filtros',\n          toolbarFiltersTooltipActive: (count) =>\n            count !== 1 ? `${count} filtros ativos` : `${count} filtro ativo`,\n\n          // Quick filter toolbar field\n          toolbarQuickFilterPlaceholder: 'Pesquisar...',\n          toolbarQuickFilterLabel: 'Pesquisar',\n          toolbarQuickFilterDeleteIconLabel: 'Limpar',\n\n          // Export selector toolbar button text\n          toolbarExport: 'Exportar',\n          toolbarExportLabel: 'Exportar',\n          toolbarExportCSV: 'Baixar como CSV',\n          toolbarExportPrint: 'Imprimir',\n          toolbarExportExcel: 'Baixar como Excel',\n\n          // Columns panel text\n          columnsPanelTextFieldLabel: 'Encontrar coluna',\n          columnsPanelTextFieldPlaceholder: 'Título da coluna',\n          columnsPanelDragIconLabel: 'Reorganizar coluna',\n          columnsPanelShowAllButton: 'Mostrar todas',\n          columnsPanelHideAllButton: 'Esconder todas',\n\n          // Filter panel text\n          filterPanelAddFilter: 'Adicionar filtro',\n          filterPanelRemoveAll: 'Remover todos',\n          filterPanelDeleteIconLabel: 'Excluir',\n          filterPanelLogicOperator: 'Operador lógico',\n          filterPanelOperator: 'Operador',\n          filterPanelOperatorAnd: 'E',\n          filterPanelOperatorOr: 'Ou',\n          filterPanelColumns: 'Colunas',\n          filterPanelInputLabel: 'Valor',\n          filterPanelInputPlaceholder: 'Valor do filtro',\n\n          // Filter operators text\n          filterOperatorContains: 'contém',\n          filterOperatorEquals: 'é igual a',\n          filterOperatorStartsWith: 'começa com',\n          filterOperatorEndsWith: 'termina com',\n          filterOperatorIs: 'é',\n          filterOperatorNot: 'não é',\n          filterOperatorAfter: 'é posterior a',\n          filterOperatorOnOrAfter: 'é em ou depois de',\n          filterOperatorBefore: 'é anterior a',\n          filterOperatorOnOrBefore: 'é em ou antes de',\n          filterOperatorIsEmpty: 'está vazio',\n          filterOperatorIsNotEmpty: 'não está vazio',\n          filterOperatorIsAnyOf: 'é algum de',\n          'filterOperator=': '=',\n          'filterOperator!=': '!=',\n          'filterOperator>': '>',\n          'filterOperator>=': '>=',\n          'filterOperator<': '<',\n          'filterOperator<=': '<=',\n\n          // Header filter operators text\n          headerFilterOperatorContains: 'Contém',\n          headerFilterOperatorEquals: 'É igual a',\n          headerFilterOperatorStartsWith: 'Começa com',\n          headerFilterOperatorEndsWith: 'Termina com',\n          headerFilterOperatorIs: 'É',\n          headerFilterOperatorNot: 'Não é',\n          headerFilterOperatorAfter: 'É depois de',\n          headerFilterOperatorOnOrAfter: 'É em ou depois de',\n          headerFilterOperatorBefore: 'É antes de',\n          headerFilterOperatorOnOrBefore: 'É em ou antes de',\n          headerFilterOperatorIsEmpty: 'Está vazio',\n          headerFilterOperatorIsNotEmpty: 'Não está vazio',\n          headerFilterOperatorIsAnyOf: 'É algum de',\n          'headerFilterOperator=': 'É igual a',\n          'headerFilterOperator!=': 'Não é igual a',\n          'headerFilterOperator>': 'Maior que',\n          'headerFilterOperator>=': 'Maior ou igual a',\n          'headerFilterOperator<': 'Menor que',\n          'headerFilterOperator<=': 'Menor ou igual a',\n\n          // Filter values text\n          filterValueAny: 'qualquer',\n          filterValueTrue: 'verdadeiro',\n          filterValueFalse: 'falso',\n\n          // Column menu text\n          columnMenuLabel: 'Menu',\n          columnMenuShowColumns: 'Mostrar colunas',\n          columnMenuManageColumns: 'Gerenciar colunas',\n          columnMenuFilter: 'Filtro',\n          columnMenuHideColumn: 'Esconder coluna',\n          columnMenuUnsort: 'Desfazer ordenação',\n          columnMenuSortAsc: 'Ordenar por ASC',\n          columnMenuSortDesc: 'Ordenar por DESC',\n\n          // Column header text\n          columnHeaderFiltersTooltipActive: (count) =>\n            count !== 1 ? `${count} filtros ativos` : `${count} filtro ativo`,\n          columnHeaderFiltersLabel: 'Mostrar filtros',\n          columnHeaderSortIconLabel: 'Ordenar',\n\n          // Rows selected footer text\n          footerRowSelected: (count) =>\n            count !== 1\n              ? `${count.toLocaleString()} linhas selecionadas`\n              : `${count.toLocaleString()} linha selecionada`,\n\n          // Total row amount footer text\n          footerTotalRows: 'Total de linhas:',\n\n          // Total visible row amount footer text\n          footerTotalVisibleRows: (visibleCount, totalCount) =>\n            `${visibleCount.toLocaleString()} de ${totalCount.toLocaleString()}`,\n\n          // Checkbox selection text\n          checkboxSelectionHeaderName: 'Seleção de caixa de seleção',\n          checkboxSelectionSelectAllRows: 'Selecionar todas as linhas',\n          checkboxSelectionUnselectAllRows: 'Desselecionar todas as linhas',\n          checkboxSelectionSelectRow: 'Selecionar linha',\n          checkboxSelectionUnselectRow: 'Desselecionar linha',\n\n          // Boolean cell text\n          booleanCellTrueLabel: 'sim',\n          booleanCellFalseLabel: 'não',\n\n          // Actions cell more text\n          actionsCellMore: 'mais',\n\n          // Column pinning text\n          pinToLeft: 'Fixar à esquerda',\n          pinToRight: 'Fixar à direita',\n          unpin: 'Desafixar',\n\n          // Tree Data\n          treeDataGroupingHeaderName: 'Agrupar',\n          treeDataExpand: 'ver filhos',\n          treeDataCollapse: 'esconder filhos',\n\n          // Grouping columns\n          groupingColumnHeaderName: 'Agrupar',\n          groupColumn: (name) => `Agrupar por ${name}`,\n          unGroupColumn: (name) => `Parar de agrupar por ${name}`,\n\n          // Master/detail\n          detailPanelToggle: 'Alternar painel de detalhes',\n          expandDetailPanel: 'Expandir',\n          collapseDetailPanel: 'Recolher',\n\n          // Used core components translation keys\n          MuiTablePagination: {},\n\n          // Row reordering text\n          rowReorderingHeaderName: 'Reorganização de linhas',\n\n          // Aggregation\n          aggregationMenuItemHeader: 'Agregação',\n          aggregationFunctionLabelSum: 'soma',\n          aggregationFunctionLabelAvg: 'média',\n          aggregationFunctionLabelMin: 'mínimo',\n          aggregationFunctionLabelMax: 'máximo',\n          aggregationFunctionLabelSize: 'tamanho',\n          //footer\n          Jumptopage: 'Ir para a página',\n          Go: 'Ir',\n          InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess:'Neste espaço em breve traremos para você um dashboard com os principais KPIs de visão geral para fácil acesso',\n          Pages:'Páginas',\n          MuiTablePagination: {\n            labelRowsPerPage: 'Linhas por página',\n          }\n        }\n      },\n    },\n  },\n};","\nimport * as locales from '@mui/x-data-grid-premium';\n\nexport const enUSGrid = {\n    Jumptopage: 'Jump to page',\n    Go: 'Go',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'In this space we will soon bring you a dashboard of main overview KPIs for easy access',\n    Pages: 'Pages',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Rows per page',\n    },\n};\nconst mergedLocalizationDataenUS = {\n    ...locales['enUS'],\n    ...enUSGrid,\n};\nexport default mergedLocalizationDataenUS;","// localization.js\nimport mergedLocalizationDatadaDK from './data-grid/daDK';\nimport mergedLocalizationDatadeDE from './data-grid/deDE';\nimport mergedLocalizationDataelGR from './data-grid/elGR';\nimport mergedLocalizationDataesES from './data-grid/esES';\nimport mergedLocalizationDatafrFR from './data-grid/frFR';\nimport mergedLocalizationDataitIT from './data-grid/itIT';\nimport mergedLocalizationDatatrTR from './data-grid/trTR';\nimport ptPT from './data-grid/ptPT';\nimport mergedLocalizationDataenUS from './data-grid/enUS';\nimport * as React from 'react';\nexport const locales = {\n  'en': mergedLocalizationDataenUS,\n  'tr-TR': mergedLocalizationDatatrTR,\n  'es-ES': mergedLocalizationDataesES,\n  'da-DK': mergedLocalizationDatadaDK,\n  'de-DE': mergedLocalizationDatadeDE,\n  'el-GR': mergedLocalizationDataelGR,\n  'fr-FR': mergedLocalizationDatafrFR,\n  'pt-PT': ptPT,\n  'it-IT': mergedLocalizationDataitIT\n};","import React, { createContext, useReducer, useContext } from 'react';\nimport stateReducer from './stateReducer';\nimport initialState from './initialState';\nimport request from '../Grid/httpRequest';\nimport { locales } from '../mui/locale/localization';\nimport dayjs from 'dayjs';\nimport actionsStateProvider from './actions';\nimport utc from 'dayjs/plugin/utc';\nimport timezone from 'dayjs/plugin/timezone';\n\n// Extend dayjs with the plugins\ndayjs.extend(utc);\ndayjs.extend(timezone);\n\nconst StateContext = createContext();\nconst RouterContext = createContext(null);\n\nconst StateProvider = ({ children }) => {\n\n  const [stateData, dispatchData] = useReducer(stateReducer, initialState);\n\n  /**\n   * Returns the system date and/or time format string based on user preferences and options.\n   *\n   * @param {boolean} isDateFormatOnly - If true, returns only the date format; otherwise, returns date and time format.\n   * @param {boolean} showOnlyDate - If true and isDateFormatOnly is false, returns only the date part in uppercase.\n   * @param {string|null|undefined} state - The user-defined date/time format string (e.g., \"dd-mm-yyyy hh:mm A\").\n   * @returns {string} The formatted date/time format string.\n   */\n  function systemDateTimeFormat(isDateFormatOnly, showOnlyDate, state) {\n    if (state !== undefined && state !== null) {\n      const userData = state; // Access 'state' \n      let userDateFormat = isDateFormatOnly ? 'DD-MM-YYYY' : 'DD-MM-YYYY hh:mm:ss A';\n      if (userData) {\n        userDateFormat = userData.split(' ');\n        userDateFormat[0] = userDateFormat[0].toUpperCase();\n        if (!isDateFormatOnly) {\n          if (showOnlyDate) {\n            userDateFormat = userDateFormat[0].toUpperCase();\n          } else {\n            userDateFormat[1] += !userDateFormat[1].includes(':ss') ? ':ss' : '';\n            userDateFormat = userDateFormat.join(\" \");\n          }\n        } else {\n          userDateFormat = userDateFormat[0];\n        }\n      };\n      return userDateFormat;\n    }\n    return isDateFormatOnly ? 'DD-MM-YYYY' : 'DD-MM-YYYY hh:mm:ss A';\n  }\n\n  /**\n   * Fetches all saved preferences for a given grid and user, and updates the state.\n   * Optionally adds a default preference to the list.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {string} params.preferenceName - The name of the grid or preference.\n   * @param {string} params.Username - The username for which to fetch preferences.\n   * @param {object} params.history - The history object for navigation.\n   * @param {function} params.dispatchData - The dispatch function to update state.\n   * @param {string} params.preferenceApi - The API endpoint for preferences.\n   * @param {Object} [params.defaultPreferenceEnums={}] - Default preferences mapping.\n   * @param {boolean} [params.addDefaultPreference=false] - Whether to add a default preference.\n   */\n  async function getAllSavedPreferences({ preferenceName, Username, history, dispatchData, preferenceApi, defaultPreferenceEnums = {}, addDefaultPreference = false }) {\n    const response = await request({ url: preferenceApi, params: { action: 'list', id: preferenceName, Username }, history, dispatchData }) || {};\n    let responseData = {};\n    if (typeof response === 'string') {\n      try {\n        responseData = JSON.parse(response);\n      } catch (error) {\n        console.error('Failed to parse preferences response as JSON:', error);\n        responseData = {};\n      }\n    } else if (response && typeof response === 'object') {\n      responseData = response;\n    }\n    const preferences = responseData.preferences || [];\n    if (addDefaultPreference) {\n      preferences.unshift({\n        prefName: \"Default\",\n        prefId: 0,\n        GridId: preferenceName,\n        GridPreferenceId: 0,\n        prefValue: defaultPreferenceEnums[preferenceName]\n      });\n    }\n    dispatchData({ type: actionsStateProvider.UDPATE_PREFERENCES, payload: preferences });\n    dispatchData({ type: actionsStateProvider.TOTAL_PREFERENCES, payload: preferences.length });\n    return preferences;\n  }\n\n  /**\n   * Filters out data elements whose fields do not exist in the grid's columns.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {Object} params.gridRef - A reference to the grid component.\n   * @param {Array} params.data - The data array to filter.\n   * @returns {Array} The filtered array containing only elements with existing columns in the grid.\n   */\n  const filterNonExistingColumns = ({ gridRef, data }) => {\n    return data.filter(ele => gridRef.current.getColumnIndex(ele.field) !== -1);\n  };\n\n  /**\n   * Applies the default grid preference if it exists for the user, otherwise applies the default enum.\n   * Updates the grid and state accordingly.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {Object} params.gridRef - Reference to the grid component.\n   * @param {Object} params.history - History object for navigation.\n   * @param {Function} params.dispatchData - Dispatch function to update state.\n   * @param {string} params.Username - Username for which to fetch preferences.\n   * @param {string} params.preferenceName - Name of the grid or preference.\n   * @param {Function} params.setIsGridPreferenceFetched - Callback to set grid preference fetched state.\n   * @param {string} params.preferenceApi - API endpoint for preferences.\n   * @param {Object} [params.defaultPreferenceEnums={}] - Default preferences mapping.\n   */\n  async function applyDefaultPreferenceIfExists({ preferences = [], gridRef, dispatchData, preferenceName, setIsGridPreferenceFetched, defaultPreferenceEnums = {} }) {\n    const defaultPreference = preferences.find(pref => pref.isDefault && pref.GridId === preferenceName);\n    const userPreferenceCharts = defaultPreference ? JSON.parse(defaultPreference.prefValue) : defaultPreferenceEnums[preferenceName];\n    if (userPreferenceCharts && Object.keys(userPreferenceCharts).length) {\n      userPreferenceCharts.gridColumn = filterNonExistingColumns({ gridRef, data: userPreferenceCharts.gridColumn });\n      userPreferenceCharts.sortModel = filterNonExistingColumns({ gridRef, data: userPreferenceCharts.sortModel });\n      userPreferenceCharts.filterModel.items = filterNonExistingColumns({ gridRef, data: userPreferenceCharts.filterModel.items });\n      gridRef.current.setColumnVisibilityModel(userPreferenceCharts.columnVisibilityModel);\n      gridRef.current.setPinnedColumns(userPreferenceCharts.pinnedColumns);\n      gridRef.current.setSortModel(userPreferenceCharts.sortModel || []);\n      gridRef.current.setFilterModel(userPreferenceCharts?.filterModel);\n      dispatchData({ type: actionsStateProvider.SET_CURRENT_PREFERENCE_NAME, payload: defaultPreference ? defaultPreference.prefName : 'Default' });\n    }\n    if (setIsGridPreferenceFetched) {\n      setIsGridPreferenceFetched(true);\n    }\n  }\n\n  /**\n   * Removes the current preference name from the state.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {Function} params.dispatchData - Dispatch function to update state.\n   */\n  function removeCurrentPreferenceName({ dispatchData }) {\n    dispatchData({ type: actionsStateProvider.SET_CURRENT_PREFERENCE_NAME, payload: null });\n  }\n\n  /**\n   * Formats a date value using the system or user-defined format and optional timezone.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {string|Date} params.value - The date value to format.\n   * @param {boolean} params.useSystemFormat - Whether to use the system date format.\n   * @param {boolean} [params.showOnlyDate=false] - Whether to show only the date part.\n   * @param {string|null|undefined} params.state - The user-defined date/time format string.\n   * @param {string} [params.timeZone] - The timezone to use for formatting.\n   * @returns {string} The formatted date string or '-' if value is falsy.\n   */\n  function formatDate({ value, useSystemFormat, showOnlyDate = false, state, timeZone }) {\n    if (!value) return '-';\n    const format = systemDateTimeFormat(useSystemFormat, showOnlyDate, state); // Pass 'state' as an argument\n    if (!timeZone) {\n      return dayjs(value).format(format);\n    }\n    return dayjs(value).tz(timeZone).format(format);\n  }\n\n  /**\n   * Provides localization utilities for the current locale.\n   *\n   * @returns {Object} An object with a getLocalizedString function.\n   */\n  function useLocalization() {\n    const currentLocaleData = stateData.dataLocalization;\n    const localeData = locales[currentLocaleData];\n    function getLocalizedString(key) {\n      return currentLocaleData === 'pt-PT' || currentLocaleData === 'ptPT' ? localeData.components.MuiDataGrid.defaultProps.localeText[key] || key : localeData[key] || key;\n    }\n    return { getLocalizedString };\n  }\n\n  return (\n    <StateContext.Provider value={{ stateData, dispatchData, systemDateTimeFormat, formatDate, removeCurrentPreferenceName, getAllSavedPreferences, applyDefaultPreferenceIfExists, useLocalization }}>\n      {children}\n    </StateContext.Provider>\n  );\n};\n\nconst RouterProvider = RouterContext.Provider;\n\nconst useRouter = () => {\n  return useContext(RouterContext);\n};\n\nconst useStateContext = () => {\n  const context = useContext(StateContext);\n  if (context === undefined) {\n    throw new Error('useStateContext must be used within a StateProvider');\n  }\n  return context;\n};\n\nexport { StateProvider, useStateContext, useRouter, RouterProvider };\n","import React, { useEffect, useState } from 'react';\nimport {\n    Grid, Typography,\n    Dialog, DialogContent, DialogTitle,\n} from '@mui/material';\nimport { Replay, Close } from '@mui/icons-material';\nimport { useStateContext } from '../useRouter/StateProvider';\nimport actionsStateProvider from '../useRouter/actions';\n\nconst HelpModal = () => {\n    const [height, setHeight] = useState();\n    const [loading, setLoading] = useState(false);\n    const { stateData, dispatchData } = useStateContext()\n    const openModal = stateData.modal; //useSelector(state => state.appReducer.modal);\n    const ratio = 16 / 9;\n    let zoom = ((window.outerWidth - 10) / window.innerWidth) * 100;\n    const updateHeight = () => {\n        let widthPercentage = document.getElementById('tutorial-iframe');\n        if (widthPercentage) {\n            widthPercentage = widthPercentage.offsetWidth;\n            widthPercentage = widthPercentage / window.innerWidth;\n        } else {\n            widthPercentage = 0.9;\n        }\n        const calculatedHeight = window.innerWidth * widthPercentage * (1 / ratio);\n        const maxHeight = window.innerHeight - 180;\n        setHeight(Math.min(calculatedHeight, maxHeight));\n    };\n    useEffect(() => {\n        if (openModal?.status) {\n            setLoading(true);\n            updateHeight();\n        }\n    }, [openModal, zoom])\n\n    useEffect(() => {\n        window.addEventListener(\"resize\", updateHeight);\n\n        return () => {\n            window.removeEventListener(\"resize\", updateHeight);\n        }\n    }, [])\n\n    function resetIframe() {\n        const iframe = document.getElementById('tutorial-iframe');\n        iframe.src = openModal?.data?.url;\n    }\n\n    return (\n        <div>\n            {openModal?.status &&\n                <Dialog fullWidth={true} maxWidth={\"lg\"} open={openModal.status} onClose={() => {\n                    dispatchData({\n                        type: actionsStateProvider.OPEN_MODAL, payload: { status: false, data: {}, }\n                    })\n                }} >\n                    <DialogTitle className='pt-2 pb-0'>\n                        <Grid container spacing={1}>\n                            <Grid size={11} >\n                                <Typography variant=\"h7\" component='div'> {openModal?.data?.title || ''}</Typography>\n                                <Typography variant=\"caption\" component='div'>{openModal?.data?.subTitle || <>&nbsp;</>}</Typography>\n                            </Grid>\n                            <Grid className=\"text-right\" size={1} >\n                                <Replay className='cursor_pointer mt-2 mr-2' onClick={resetIframe} />\n                                <Close className='cursor_pointer mt-2' onClick={() => {\n                                    dispatchData({\n                                        type: actionsStateProvider.OPEN_MODAL, payload: { status: false, data: {} }\n                                    })\n                                }} />\n                            </Grid>\n                        </Grid>\n                    </DialogTitle>\n                    <DialogContent dividers>\n                        {loading && <div>{\"Loading...\"}</div>}\n                        {openModal?.data?.url && <iframe\n                            id='tutorial-iframe'\n                            style={{ width: '100%', height: `${height}px` }}\n                            title={openModal?.data?.title || ''}\n                            src={openModal?.data?.url}\n                            allowfullscreen\n                            frameborder=\"0\"\n                            loading=\"lazy\"\n                            onLoad={() => setLoading(false)}\n                        />}\n                    </DialogContent>\n                </Dialog>}\n        </div>\n    )\n}\n\nexport default HelpModal","import React, { useEffect } from \"react\";\n\nimport { Box } from \"@mui/material\";\nimport { withTranslation } from \"react-i18next\";\nimport MuiTypography from \"../Typography\";\nimport useMobile from \"../useMobile\";\nimport { Breadcrumbs, Typography, Link as MuiLink, Button, IconButton, Grid } from \"@mui/material\";\nimport HelpIcon from '@mui/icons-material/Help';\nimport HelpModal from \"../HelpModal\";\nimport { Card, CardContent } from '@mui/material';\n\nfunction PageTitle({\n  titleHeading,\n  navigate,\n  name = null,\n  RightComponent = null,\n  mobileRightComponent,\n  title = \"\",\n  titleClass = \"text-theme-blue text-max-width\",\n  showBreadcrumbs,\n  breadcrumbs = [],\n  enableBackButton = false,\n  breadcrumbColor,\n  showHelpButton = false\n}) {\n  const isMobile = useMobile(true);\n  const breadcrumbsLasIndex = breadcrumbs.length - 1;\n  const needToShowBreadcrumbs = showBreadcrumbs && breadcrumbs.length;\n  const handleBack = () => {\n    navigate(-1);\n  };\n\n  // Update document title when title prop changes\n  useEffect(() => {\n    if (title) {\n      document.title = title;\n    }\n  }, [title]);\n\n  return (\n    <>\n      <MuiTypography className=\"print-only\" text={titleHeading} />\n      {needToShowBreadcrumbs && (<>\n        <Card sx={{ mb: 3 }}>\n          <CardContent sx={{ backgroundColor: breadcrumbColor || '#fff' }}>\n            {/* Add BreadCrumbs  */}\n            <Grid container>\n              <Grid sx={{ display: 'flex', alignItems: 'center', flex: 1 }}>\n                <Breadcrumbs variant=\"h5\" aria-label=\"breadcrumb\" separator=\">\" className={`${titleClass} breadcrumbs-text-title text-max-width`}>\n                  {breadcrumbs.map((breadcrumb, index) => index < breadcrumbsLasIndex ? (\n                    <MuiLink onClick={handleBack} key={index} className={`${titleClass} breadcrumbs-text-title text-max-width`} variant=\"inherit\" sx={{ textDecoration: 'none', color: '#1976d2' }}>\n                      {breadcrumb.text}\n                    </MuiLink>\n                  ) : <Typography key={index} className={`${titleClass} breadcrumbs-text-title text-max-width`} variant=\"inherit\">\n                    {breadcrumb.text}\n                  </Typography>)}\n                </Breadcrumbs>\n              </Grid>\n              {(breadcrumbs.length > 1 || enableBackButton) && <Grid sx={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\n                <Button variant=\"contained\" onClick={handleBack}>Back</Button>\n              </Grid>}\n              {showHelpButton && <Grid sx={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\n                <IconButton color=\"primary\" title='Help' size=\"large\">\n                  <HelpIcon fontSize=\"inherit\" />\n                </IconButton>\n              </Grid>}\n            </Grid>\n            {/* Title render */}\n            <Box className=\"app-page-title--first\">\n              <div>\n                <div style={{ display: isMobile ? 'block' : \"flex\", alignItems: \"center\" }}>\n                  <div style={{ flex: \"1 0 auto\" }}>\n                    <MuiTypography\n                      className={`${titleClass} page-text-title`}\n                      variant=\"p\"\n                      text={titleHeading}\n                      name={name}\n                    />\n                  </div>\n                </div>\n              </div>\n            </Box>\n            {/* For Mobile */}\n            {!isMobile && (\n              <>\n                <Box> {RightComponent && <RightComponent />} </Box>\n                <Box> {mobileRightComponent} </Box>\n              </>\n            )}\n          </CardContent>\n        </Card>\n        <HelpModal />\n      </>)}\n    </>\n  );\n}\n\nexport default withTranslation()(PageTitle);\n","import React from 'react';\nimport dayjs from 'dayjs';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport { DateTimePicker } from '@mui/x-date-pickers/DateTimePicker';\nimport { getGridDateOperators } from '@mui/x-data-grid-premium';\nimport utcPlugin from 'dayjs/plugin/utc.js';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport { useStateContext } from '../useRouter/StateProvider';\nimport utils from '../utils';\n\ndayjs.extend(utcPlugin);\nconst componentMap = {\n    date: DatePicker,\n    datetime: DateTimePicker,\n    dateTimeLocal: DateTimePicker\n};\nconst DATEPICKER_MARGIN_TOP = '-10px';\nconst DATEPICKER_MARGIN_BOTTOM = '-16px';\n\nconst LocalizedDatePicker = (props) => {\n    const { fixedFilterFormat } = utils;\n    const { item, applyValue, convert } = props;\n    const { systemDateTimeFormat, stateData } = useStateContext();\n    const columnType = props?.type || 'date';\n    const filterFormat = fixedFilterFormat[columnType];\n    const isValidDate = (date) => {\n        const parsedDate = dayjs(date);\n        return parsedDate.isValid() && parsedDate.year() > 1900;\n    };\n    const format = (systemDateTimeFormat((columnType !== \"datetime\" && columnType !== \"dateTimeLocal\", false, stateData.dateTime)));\n\n    const handleFilterChange = (newValue) => {\n        if (columnType !== \"date\" && columnType !== \"datetime\" && columnType !== \"dateTimeLocal\") return;\n        const isPartialDate = (value) => {\n            if (typeof value !== 'string') return false;\n            return !dayjs(value, format, true).isValid();\n        };\n        if (isPartialDate(newValue)) {\n            return;\n        }\n        if (convert) {\n            newValue = dayjs(newValue).utc();\n            applyValue({ ...item, value: newValue });\n            return;\n        }\n        if (!isValidDate(newValue)) {\n            applyValue({ ...item, value: null });\n            return;\n        }\n        applyValue({ ...item, value: newValue.format(filterFormat) });\n    };\n    const getMonthAbbreviation = (format) => {\n        if (format && format === fixedFilterFormat.OverrideDateFormat) {\n            const parts = format.split('-');\n            return parts.length === 3 ? parts[1] : null;\n        }\n    };\n    const ComponentToRender = componentMap[columnType];\n    const Dateformatvalue = columnType === \"dateTimeLocal\"\n        ? item?.value ? dayjs(item?.value.$d) : null\n        : item?.value ? dayjs(item.value) : null;\n    return (\n        <LocalizationProvider dateAdapter={AdapterDayjs}>\n            <ComponentToRender\n                fullWidth\n                format={format}\n                value={Dateformatvalue}\n                onChange={handleFilterChange}\n                slotProps={{\n                    textField: {\n                        variant: \"standard\", label: props.label,\n                        sx: {\n                            marginTop: DATEPICKER_MARGIN_TOP,\n                            marginBottom: DATEPICKER_MARGIN_BOTTOM\n                        }\n                    }\n                }}\n                localeText={{\n                    fieldMonthPlaceholder: () => {\n                        const monthAbbreviation = getMonthAbbreviation(format);\n                        return monthAbbreviation === \"MMM\" ? 'MMM' : 'MM';\n                    }\n                }}\n            />\n        </LocalizationProvider>\n    );\n};\n\nconst localizedDateFormat = (colProps) => getGridDateOperators().map((operator) => ({\n    ...operator,\n    InputComponent: operator.InputComponent\n        ? (props) => <LocalizedDatePicker {...props} {...colProps} />\n        : undefined\n}));\n\nexport default localizedDateFormat;","import React, { useEffect, useMemo, useState } from 'react';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport SaveIcon from '@mui/icons-material/Save';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport { Box, Button, Checkbox, FormControlLabel, Grid, List, ListItem, ListItemButton, ListItemText, Menu, MenuItem, Stack, TextField, Typography, Tooltip, ListItemIcon } from '@mui/material';\nimport { DataGridPremium, GridActionsCellItem, gridFilterModelSelector, gridSortModelSelector, useGridSelector, useGridApiRef } from '@mui/x-data-grid-premium';\nimport { useFormik } from 'formik';\nimport * as yup from 'yup';\nimport { useSnackbar } from '../SnackBar';\nimport { useTranslation } from 'react-i18next';\nimport request from './httpRequest';\nimport { useStateContext, useRouter } from '../useRouter/StateProvider';\nimport actionsStateProvider from '../useRouter/actions';\nimport { DialogComponent } from '../Dialog';\n\nconst actionTypes = {\n    Copy: \"Copy\",\n    Edit: \"Edit\",\n    Delete: \"Delete\"\n};\n\nconst formTypes = {\n    Add: \"Add\",\n    Edit: \"Edit\",\n    Manage: 'Manage'\n};\n\nconst gridColumns = [\n    { field: \"prefName\", type: 'string', width: 300, headerName: \"Preference Name\", sortable: false, filterable: false },\n    { field: \"prefDesc\", type: 'string', width: 300, headerName: \"Preference Description\", sortable: false, filterable: false },\n    { field: \"isDefault\", type: \"boolean\", width: 100, headerName: \"Default\", sortable: false, filterable: false },\n    { field: 'editAction', type: 'actions', headerName: '', width: 20, getActions: () => [<GridActionsCellItem key={1} icon={<Tooltip title={actionTypes.Edit}>   <EditIcon /></Tooltip>} tabIndex={1} data-action={actionTypes.Edit} label=\"Edit\" color=\"primary\" />] },\n    { field: 'deleteAction', type: 'actions', headerName: '', width: 20, getActions: () => [<GridActionsCellItem key={2} icon={<Tooltip title={actionTypes.Delete}><DeleteIcon /> </Tooltip>} tabIndex={2} data-action={actionTypes.Delete} label=\"Delete\" color=\"error\" />] }\n];\n\nconst initialValues = {\n    prefName: '',\n    prefDesc: '',\n    isDefault: false\n};\nconst pageSizeOptions = [5, 10, 20, 50, 100];\nconst GridPreferences = ({ tTranslate = (key) => key, preferenceName, gridRef, columns = [], setIsGridPreferenceFetched }) => {\n    const { stateData, dispatchData, removeCurrentPreferenceName, getAllSavedPreferences } = useStateContext();\n    const { navigate } = useRouter();\n    const apiRef = useGridApiRef();\n    const snackbar = useSnackbar();\n    const { t: translate, i18n } = useTranslation();\n    const tOpts = { t: translate, i18n };\n    const [openDialog, setOpenDialog] = useState(false);\n    const [openForm, setOpenForm] = useState(false);\n    const [filteredPrefs, setFilteredPrefs] = useState([]);\n    const [formType, setFormType] = useState();\n    const [menuAnchorEl, setMenuAnchorEl] = useState();\n    const [openPreferenceExistsModal, setOpenPreferenceExistsModal] = useState(false);\n    const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = useState({});\n    const { Username } = stateData?.getUserData ? stateData.getUserData : {};\n    const preferences = stateData?.preferences;\n    const currentPreference = stateData?.currentPreference;\n    const preferenceApi = stateData?.gridSettings?.permissions?.preferenceApi; // this is the api endpoint used to fetch, save, edit or delete the preferences, passed via redux form application.\n    const defaultPreferenceEnums = stateData?.gridSettings?.permissions?.defaultPreferenceEnums;\n    const filterModel = useGridSelector(gridRef, gridFilterModelSelector);\n    const sortModel = useGridSelector(gridRef, gridSortModelSelector);\n    const validationSchema = useMemo(() => {\n        const schema = yup.object({\n            prefName: yup\n                .string()\n                .trim(true)\n                .required('Preference Name is Required')\n                .max(20, 'Maximum Length is 20'),\n            prefDesc: yup.string().max(100, `Description maximum length is 100`)\n        });\n        return schema;\n    }, []);\n\n    useEffect(() => {\n        setFilteredPrefs(preferences?.filter(pref => pref.prefId !== 0));\n    }, [preferences]);\n\n    const formik = useFormik({\n        initialValues,\n        validationSchema: validationSchema,\n        onSubmit: async (values) => {\n            await savePreference(values);\n        },\n        mode: \"onBlur\"\n    });\n\n    const handleOpen = (event) => {\n        setMenuAnchorEl(event?.currentTarget);\n    };\n\n    const handleClose = () => {\n        setMenuAnchorEl(null);\n    };\n\n    const handleDialogClose = () => {\n        setFormType();\n        handleClose();\n        setOpenDialog(false);\n    };\n\n    const deletePreference = async (id, prefName) => {\n        const params = {\n            action: 'delete',\n            id: preferenceName,\n            Username,\n            prefIdArray: id\n        };\n        const rawResponse = await request({ url: preferenceApi, params, history: navigate, dispatchData });\n        let response = rawResponse;\n        if (typeof rawResponse === 'string') {\n            try {\n                response = JSON.parse(rawResponse);\n            } catch (error) {\n                if (typeof console !== 'undefined' && typeof console.error === 'function') {\n                    console.error('Failed to parse deletePreference response:', error, rawResponse);\n                }\n                snackbar.showMessage('An error occurred while processing the server response.');\n                return;\n            }\n        }\n        if (response === true || response?.success) {\n            if (prefName === currentPreference) {\n                removeCurrentPreferenceName({ dispatchData });\n            }\n            snackbar.showMessage('Preference Deleted Successfully.');\n        }\n    };\n\n    const applySelectedPreference = async (prefId) => {\n        if (setIsGridPreferenceFetched) {\n            setIsGridPreferenceFetched(false);\n        }\n        await applyPreference(prefId);\n    };\n    const savePreference = async (values) => {\n        const presetName = values.prefName.trim();\n        const preferenceAlreadyExists = preferences.findIndex(ele => ele.prefName === presetName);\n        // if any default preferences maintain them inside the preferences array.\n        if (preferenceAlreadyExists > -1 && (formType === formTypes.Add || preferences[preferenceAlreadyExists].prefId !== values.prefId)) {\n            setOpenPreferenceExistsModal(true);\n            return;\n        }\n        const { pinnedColumns } = gridRef.current.state;\n        const { orderedFields, columnVisibilityModel, lookup } = gridRef.current.state.columns;\n        const gridColumn = [];\n        orderedFields?.forEach(ele => {\n            const { field } = lookup[ele];\n            const col = columns.find(ele => ele.field === field) || lookup[ele];\n            col.width = lookup[ele].width;\n            gridColumn.push(col);\n        });\n        const filter = filterModel?.items?.map(ele => {\n            const { field, operator, value } = ele;\n            return { field, operator, value };\n        });\n        filterModel.items = filter;\n        const params = {\n            action: 'save',\n            id: preferenceName,\n            prefName: presetName,\n            prefDesc: values.prefDesc,\n            prefValue: { sortModel, filterModel, columnVisibilityModel, gridColumn, pinnedColumns },\n            isDefault: values.isDefault\n        };\n        if (values.prefId) {\n            params[\"prefId\"] = values.prefId;\n        }\n        const rawResponse = await request({ url: preferenceApi, params, history: navigate, dispatchData });\n        const response = typeof rawResponse === 'string' ? JSON.parse(rawResponse) : rawResponse;\n        const action = formType === formTypes.Add ? \"Added\" : \"Saved\";\n        if (response === true || response?.success === true) {\n            snackbar.showMessage(`Preference ${action} Successfully.`);\n            handleDialogClose();\n        }\n        getAllSavedPreferences({ preferenceName, Username, history: navigate, dispatchData, preferenceApi, defaultPreferenceEnums });\n    };\n\n    const applyPreference = async (prefId) => {\n        let userPreferenceCharts;\n        let defaultPreference = 'Default';\n        // Check if prefId is 0, if so, use defaultPreferenceEnums, otherwise fetch from API\n        if (prefId === 0) {\n            userPreferenceCharts = defaultPreferenceEnums[preferenceName] || null;\n        } else {\n            const params = {\n                action: 'load',\n                id: preferenceName,\n                Username,\n                prefId\n            };\n            const rawResponse = await request({ url: preferenceApi, params, history: navigate, dispatchData }) || {};\n            let response = rawResponse;\n            if (typeof rawResponse === 'string') {\n                try {\n                    response = JSON.parse(rawResponse);\n                } catch (error) {\n                    console.error('Failed to parse preference response JSON', { error, rawResponse });\n                    return;\n                }\n            }\n            if (response && response.prefValue) {\n                try {\n                    userPreferenceCharts = JSON.parse(response.prefValue);\n                } catch (error) {\n                    console.error('Failed to parse preference value JSON', { error, prefValue: response.prefValue });\n                    return;\n                }\n            } else {\n                userPreferenceCharts = null;\n            }\n            if (response && response.prefName) {\n                defaultPreference = response.prefName;\n            }\n        }\n\n        // If userPreferenceCharts is available, apply preferences to the grid\n        if (!userPreferenceCharts) return;\n        const { gridColumn, columnVisibilityModel, pinnedColumns, sortModel, filterModel } = userPreferenceCharts;\n        gridColumn.forEach(({ field, width }) => {\n            if (gridRef.current.getColumnIndex(field) !== -1) {\n                gridRef.current.setColumnWidth(field, width);\n            }\n        });\n        gridRef.current.setColumnVisibilityModel(columnVisibilityModel);\n        gridRef.current.state.columns.orderedFields = gridColumn.map(({ field }) => field);\n        gridRef.current.setPinnedColumns(pinnedColumns);\n        gridRef.current.setSortModel(sortModel || []);\n        gridRef.current.setFilterModel(filterModel);\n\n        dispatchData({ type: actionsStateProvider.SET_CURRENT_PREFERENCE_NAME, payload: defaultPreference });\n        setIsGridPreferenceFetched(true);\n    };\n\n    const getGridRowId = (row) => {\n        return row['GridPreferenceId'];\n    };\n\n    const openModal = (params, openFormModal = true) => {\n        setFormType(params);\n        handleClose();\n        setOpenDialog(true);\n        setOpenForm(openFormModal);\n        if (openFormModal) {\n            formik.resetForm();\n        }\n    };\n\n    const confirmDeletePreference = async () => {\n        const { prefId, preferenceName: currentPrefname } = openConfirmDeleteDialog;\n        await deletePreference(prefId, currentPrefname);\n        getAllSavedPreferences({ preferenceName, history: navigate, dispatchData, Username, preferenceApi, defaultPreferenceEnums });\n        setOpenConfirmDeleteDialog({});\n    };\n\n    const onCellClick = async (cellParams) => {\n        const action = cellParams.field === 'editAction' ? actionTypes.Edit : cellParams.field === 'deleteAction' ? actionTypes.Delete : null;\n        if (cellParams.id === 0 && (action === actionTypes.Edit || action === actionTypes.Delete)) {\n            snackbar.showMessage(`Default Preference Can Not Be ${action === actionTypes.Edit ? 'Edited' : 'Deleted'}`);\n            return;\n        }\n        if (action === actionTypes.Edit) {\n            setFormType('Modify');\n            formik.setValues(cellParams?.row);\n            setOpenForm(true);\n        }\n        if (action === actionTypes.Delete) {\n            setOpenConfirmDeleteDialog({\n                prefId: cellParams.id,\n                preferenceName: cellParams.row.prefName\n            });\n        }\n    };\n\n    const prefName = formik.values.prefName.trim();\n    // represent manage preferences form type.\n    const isManageForm = formType === formTypes.Manage;\n    return (\n        <Box>\n            <Button\n                id=\"grid-preferences-btn\"\n                aria-controls={menuAnchorEl ? 'basic-menu' : undefined}\n                aria-haspopup=\"true\"\n                aria-expanded={menuAnchorEl ? 'true' : undefined}\n                onClick={handleOpen}\n                title={tTranslate('Preference', tOpts)}\n                startIcon={<SettingsIcon />}\n            >\n                {tTranslate('Preferences', tOpts)} {currentPreference && `(${currentPreference})`}\n            </Button>\n            <Menu\n                id={`grid-preference-menu`}\n                anchorEl={menuAnchorEl}\n                open={!!menuAnchorEl}\n                onClose={handleClose}\n                component={List}\n                dense\n                MenuListProps={{\n                    'aria-labelledby': 'grid-preferences-btn'\n                }}\n                sx={{\n                    '& .MuiMenu-paper': { minWidth: 240, maxHeight: 320 },\n                    '& .MuiListItemSecondaryAction-root': {\n                        display: 'flex'\n                    },\n                    '& .Mui-selected': {\n                        color: 'text.primary',\n                        '&:hover': {\n                            backgroundColor: 'success.main'\n                        }\n                    }\n                }}\n            >\n                <MenuItem component={ListItemButton} dense onClick={() => openModal(formTypes.Add)}>\n                    {tTranslate('Add Preference', tOpts)}\n                </MenuItem>\n                <MenuItem component={ListItemButton} dense divider={preferences?.length > 0} onClick={() => openModal(formTypes.Manage, false)}>\n                    <ListItemIcon>\n                        <SettingsIcon />\n                    </ListItemIcon>\n                    {tTranslate('Manage Preferences', tOpts)}\n                </MenuItem>\n\n                {preferences?.length > 0 && preferences?.map((ele) => {\n                    const { prefName, prefDesc, prefId } = ele;\n                    return (\n                        <MenuItem\n                            onClick={() => applySelectedPreference(prefId)}\n                            component={ListItem}\n                            selected={currentPreference === prefName}\n                            key={`pref-item-${prefId}`}\n                            title={tTranslate(prefDesc, tOpts)}\n                            dense\n                        >\n                            <ListItemText primary={tTranslate(prefName, tOpts)} />\n                        </MenuItem>\n                    );\n                })}\n            </Menu>\n            <DialogComponent\n                open={openDialog}\n                disableRestoreFocus\n                title={\n                    <Stack direction=\"row\" columnGap={2}>\n                        <Typography variant=\"h5\" >\n                            {formType} {tTranslate(`Preference${(formType === formTypes.Manage ? 's' : '')}`, tOpts)}\n                        </Typography>\n                    </Stack>\n                }\n                maxWidth={isManageForm ? 'md' : 'sm'}\n                fullWidth\n            >\n                {openForm && (\n                    <Grid\n                        component={'form'}\n                        onSubmit={formik.handleSubmit}\n                        rowGap={2}\n                        container\n                        sx={{\n                            '& .MuiFormLabel-root:not(.MuiTypography-root)': {\n                                fontWeight: 400,\n                                display: 'table',\n                                whiteSpace: 'pre-wrap' /* css-3 */,\n                                wordWrap: 'break-word' /* Internet Explorer 5.5+ */\n                            }\n                        }}\n                    >\n                        <Grid size={12}>\n                            <TextField\n                                defaultValue={tTranslate(formik.values.prefName, tOpts)}\n                                variant=\"outlined\"\n                                size=\"small\"\n                                margin=\"dense\"\n                                label={\n                                    <span>\n                                        {tTranslate('Preference Name', tOpts)} <span style={{ color: 'red' }}>*</span>\n                                    </span>\n                                }\n                                autoFocus\n                                name={'prefName'}\n                                onChange={formik.handleChange}\n                                error={!!formik.errors.prefName}\n                                helperText={formik.errors.prefName}\n                                fullWidth\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <TextField\n                                defaultValue={tTranslate(formik.values.prefDesc, tOpts)}\n                                variant=\"outlined\"\n                                multiline\n                                rows={2}\n                                size=\"small\"\n                                margin=\"dense\"\n                                label={tTranslate('Preference Description', tOpts)}\n                                name={'prefDesc'}\n                                onChange={formik.handleChange}\n                                error={!!formik.errors.prefDesc}\n                                helperText={formik.errors.prefDesc}\n                                fullWidth\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <FormControlLabel\n                                control={\n                                    <Checkbox\n                                        checked={formik.values.isDefault}\n                                        name={'isDefault'}\n                                        onChange={formik.handleChange}\n                                    />\n                                }\n                                label={tTranslate('Default', tOpts)}\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <Stack direction=\"row\" columnGap={1} style={{ justifyContent: 'end' }}>\n                                <Button\n                                    type=\"submit\"\n                                    size=\"small\"\n                                    startIcon={<SaveIcon />}\n                                    color=\"primary\"\n                                    variant=\"contained\"\n                                    disableElevation\n                                >\n                                    {tTranslate('Save', tOpts)}\n                                </Button>\n                                <Button\n                                    type=\"button\"\n                                    startIcon={<CloseIcon />}\n                                    color=\"error\"\n                                    variant=\"contained\"\n                                    size=\"small\"\n                                    onClick={handleDialogClose}\n                                    disableElevation\n                                >\n                                    {tTranslate('Close', tOpts)}\n                                </Button>\n                            </Stack>\n                        </Grid>\n                    </Grid>\n                )}\n\n                {(openDialog && formType === formTypes.Manage) && (\n                    <Grid container rowGap={2}>\n                        <Grid size={12}>\n                            <DataGridPremium\n                                sx={{\n                                    \"& .MuiTablePagination-selectLabel\": {\n                                        marginTop: 2\n                                    },\n                                    \"& .MuiTablePagination-displayedRows\": {\n                                        marginTop: 2\n                                    },\n                                    \"& .MuiDataGrid-columnHeader .MuiInputLabel-shrink\": {\n                                        display: \"none\"\n                                    }\n                                }}\n                                className=\"pagination-fix\"\n                                onCellClick={onCellClick}\n                                columns={gridColumns}\n                                pageSizeOptions={pageSizeOptions}\n                                pagination\n                                rowCount={filteredPrefs.length}\n                                rows={filteredPrefs}\n                                getRowId={getGridRowId}\n                                slots={{\n                                    headerFilterMenu: false\n                                }}\n                                density=\"compact\"\n                                disableDensitySelector={true}\n                                apiRef={apiRef}\n                                disableAggregation={true}\n                                disableRowGrouping={true}\n                                disableRowSelectionOnClick={true}\n                                autoHeight\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <Stack direction=\"row\" columnGap={1} style={{ justifyContent: 'end' }}>\n                                <Button\n                                    type=\"button\"\n                                    startIcon={<CloseIcon />}\n                                    color=\"error\"\n                                    variant=\"contained\"\n                                    size=\"small\"\n                                    onClick={handleDialogClose}\n                                    disableElevation\n                                >\n                                    {tTranslate('Close', tOpts)}\n                                </Button>\n                            </Stack>\n                        </Grid>\n                    </Grid>\n                )}\n            </DialogComponent>\n            <DialogComponent\n                open={openPreferenceExistsModal}\n                onConfirm={() => setOpenPreferenceExistsModal(false)}\n                title=\"\"\n                okText={tTranslate('Ok', tOpts)}\n                cancelText=\"\"\n            >\n                \"{prefName}\" {tTranslate('name already in use, please use another name.', tOpts)}\n            </DialogComponent>\n            <DialogComponent\n                open={openConfirmDeleteDialog.preferenceName}\n                onConfirm={confirmDeletePreference}\n                onCancel={() => setOpenConfirmDeleteDialog({})}\n                title=\"Confirm delete\"\n                yesNo={true}\n            >\n                Are you sure you wish to delete \"{openConfirmDeleteDialog.preferenceName}\"\n            </DialogComponent>\n        </Box>\n    );\n};\n\n\nexport default GridPreferences;","import React, { useMemo, useCallback } from 'react';\nimport {\n    useGridSelector,\n    gridFilterModelSelector\n} from '@mui/x-data-grid-premium';\n\nimport { FormControl, InputLabel, MenuItem, Select } from '@mui/material';\n\nconst GridOperators = {\n    IsAnyOf: 'isAnyOf'\n};\n\nconst CustomDropdownMenu = (props) => {\n    const { column, item, applyValue, apiRef } = props;\n    const lookupData = column?.dataRef?.current?.lookups;\n    let options = column.customLookup || lookupData[column.lookup] || [];\n\n    if (typeof column.lookup === 'string') {\n        options = options.map(({ label, value }) => ({\n            label,\n            value\n        }));\n    }\n\n    const filterModel = useGridSelector(apiRef, gridFilterModelSelector);\n    const currentFieldFilters = useMemo(\n        () =>\n            filterModel.items?.filter((value) => {\n                return value.field === column.field;\n            }),\n        [column.field, filterModel.items]\n    );\n\n    const handleFilterChange = useCallback(\n        (event) => {\n            let inputValue = event.target.value;\n            if (filterModel.items.length >= 1) {\n                inputValue = inputValue.length === 1 ? inputValue[0] : inputValue;\n\n                for (const element of filterModel.items) {\n                    if (element.field !== item.field) {\n                        continue;\n                    }\n                    if (element.operator === GridOperators.IsAnyOf) {\n                        inputValue = Array.isArray(inputValue) ? inputValue : [inputValue];\n                    } else {\n                        inputValue = inputValue === 0 ? '0' : inputValue;\n                    }\n                }\n            }\n\n            if (inputValue.length === 0 && currentFieldFilters[0]) {\n                apiRef.current.deleteFilterItem(currentFieldFilters[0]);\n                return;\n            }\n\n            const newValue = inputValue;\n            const newitem = currentFieldFilters[0] ? currentFieldFilters[0] : item;\n            applyValue({ ...newitem, value: newValue });\n        },\n        [apiRef, column.applyZeroFilter, currentFieldFilters, item, applyValue]\n    );\n\n    const value = currentFieldFilters[0]?.value ?? '';\n\n    return (\n        <FormControl variant=\"standard\" className=\"w-100\">\n            <Select\n                label={column.field}\n                variant=\"standard\"\n                value={value}\n                onChange={(e) => handleFilterChange(e)}\n                multiple={Array.isArray(value)}\n                MenuProps={{\n                    PaperProps: {\n                        style: {\n                            height: 'fit-content',\n                            overflow: 'hidden'\n                        }\n                    }\n                }}\n            >\n                {options?.map((option, index) => (\n                    <MenuItem key={index} value={option.value}>\n                        {option.label}\n                    </MenuItem>\n                ))}\n            </Select>\n        </FormControl>\n    );\n};\n\nexport default CustomDropdownMenu;\n","import MenuItem from '@mui/material/MenuItem';\nimport { GridToolbarExportContainer } from '@mui/x-data-grid-premium';\nimport React from 'react';\n\n// Helper to convert default sort string to array\nexport const convertDefaultSort = (defaultSort, constants, sortRegex) => {\n    if (typeof defaultSort !== constants.string) return [];\n    return defaultSort.split(',').map(sortField => {\n        sortRegex.lastIndex = 0;\n        const sortInfo = sortRegex.exec(sortField);\n        if (!sortInfo) return null;\n        const [, field, direction = 'ASC'] = sortInfo;\n        return {\n            field: field.trim(),\n            sort: direction.trim().toLowerCase()\n        };\n    }).filter(Boolean);\n};\n\n// Export menu item component\nexport const ExportMenuItem = ({ tTranslate, tOpts, handleExport, contentType, type, isPivotExport = false }) => (\n    <MenuItem\n        onClick={handleExport}\n        data-type={type}\n        data-content-type={contentType}\n        data-is-pivot-export={isPivotExport}\n    >\n        {tTranslate(\"Export\", tOpts)} {type.charAt(0).toUpperCase() + type.slice(1).toLowerCase()}\n    </MenuItem>\n);\n\n// Custom export button component\nexport const CustomExportButton = ({ exportFormats, ...props }) => (\n    <GridToolbarExportContainer {...props}>\n        {exportFormats.csv !== false && <ExportMenuItem {...props} type=\"csv\" contentType=\"text/csv\" />}\n        {exportFormats.excel !== false && <ExportMenuItem {...props} type=\"excel\" contentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" />}\n        {props.showPivotExportBtn && <ExportMenuItem {...props} type=\"excel With Pivot\" contentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" isPivotExport={true} />}\n        {exportFormats.xml !== false && <ExportMenuItem {...props} type=\"xml\" contentType=\"text/xml\" />}\n        {exportFormats.html !== false && <ExportMenuItem {...props} type=\"html\" contentType=\"text/html\" />}\n        {exportFormats.json !== false && <ExportMenuItem {...props} type=\"json\" contentType=\"application/json\" />}\n    </GridToolbarExportContainer>\n);\n\n// Shallow props comparison\nexport const areEqual = (prevProps = {}, nextProps = {}) => {\n    let equal = true;\n    for (const o in prevProps) {\n        if (prevProps[o] !== nextProps[o]) {\n            equal = false;\n        }\n    }\n    for (const o in nextProps) {\n        if (!(o in prevProps)) {\n            equal = false;\n        }\n    }\n    return equal;\n};","import Button from '@mui/material/Button';\nimport {\n    DataGridPremium,\n    Toolbar,\n    ColumnsPanelTrigger,\n    FilterPanelTrigger,\n    getGridDateOperators,\n    GRID_CHECKBOX_SELECTION_COL_DEF,\n    getGridStringOperators,\n    getGridBooleanOperators,\n    GridActionsCellItem,\n    useGridApiRef\n} from '@mui/x-data-grid-premium';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CopyIcon from '@mui/icons-material/FileCopy';\nimport ArticleIcon from '@mui/icons-material/Article';\nimport EditIcon from '@mui/icons-material/Edit';\nimport FilterListOffIcon from '@mui/icons-material/FilterListOff';\nimport React, { useMemo, useEffect, memo, useRef, useState, useCallback } from 'react';\nimport AddIcon from '@mui/icons-material/Add';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport Typography from '@mui/material/Typography';\nimport { useSnackbar } from '../SnackBar/index';\nimport { DialogComponent } from '../Dialog/index';\nimport { getList, getRecord, deleteRecord, saveRecord } from './crud-helper';\nimport { Footer } from './footer';\nimport template from './template';\nimport { Tooltip, Box, Badge } from \"@mui/material\";\nimport CheckIcon from '@mui/icons-material/Check';\nimport CloseIcon from '@mui/icons-material/Close';\nimport PageTitle from '../PageTitle';\nimport { useStateContext, useRouter } from '../useRouter/StateProvider';\nimport LocalizedDatePicker from './LocalizedDatePicker';\nimport actionsStateProvider from '../useRouter/actions';\nimport GridPreferences from './GridPreference';\nimport CustomDropdownMenu from './CustomDropdownMenu';\nimport { getPermissions } from '../utils';\nimport HistoryIcon from '@mui/icons-material/History';\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\nimport Checkbox from '@mui/material/Checkbox';\nimport { useTranslation } from 'react-i18next';\nimport { convertDefaultSort, CustomExportButton, areEqual } from './helper';\nimport { styled } from '@mui/material/styles';\nimport ViewColumnIcon from '@mui/icons-material/ViewColumn';\nimport FilterListIcon from '@mui/icons-material/FilterList';\n\nconst defaultPageSize = 10;\nconst sortRegex = /(\\w+)( ASC| DESC)?/i;\nconst recordCounts = 60000;\nconst actionTypes = {\n    Copy: \"Copy\",\n    Edit: \"Edit\",\n    Delete: \"Delete\",\n    History: \"History\",\n    Download: \"Download\"\n};\nconst iconMapper = {\n    'article': <ArticleIcon />\n};\nconst constants = {\n    gridFilterModel: { items: [], logicOperator: 'and', quickFilterValues: Array(0), quickFilterLogicOperator: 'and' },\n    permissions: { edit: true, add: true, export: true, delete: true, showColumnsOrder: true, filter: true },\n    client: 'client',\n    server: 'server',\n    object: 'object',\n    startDate: 'startDate',\n    endDate: 'endDate',\n    oneToMany: 'oneToMany',\n    lookup: 'lookup',\n    Number: 'number',\n    string: 'string',\n    boolean: 'boolean',\n    right: 'right',\n    left: 'left',\n    dateTime: 'dateTime',\n    actions: 'actions',\n    function: 'function',\n    pageSizeOptions: [5, 10, 20, 50, 100]\n};\nconst auditColumnMappings = [\n    { key: 'addCreatedOnColumn', field: 'CreatedOn', type: 'dateTime', header: 'Created On' },\n    { key: 'addCreatedByColumn', field: 'CreatedByUser', type: 'string', header: 'Created By' },\n    { key: 'addModifiedOnColumn', field: 'ModifiedOn', type: 'dateTime', header: 'Modified On' },\n    { key: 'addModifiedByColumn', field: 'ModifiedByUser', type: 'string', header: 'Modified By' }\n];\nconst booleanIconRenderer = (params) => {\n    if (params.value) {\n        return <CheckIcon style={{ color: 'green' }} />;\n    } else {\n        return <CloseIcon style={{ color: 'gray' }} />;\n    }\n};\n\nconst DeleteContentText = styled('span')({\n    width: '100%',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n});\n\nconst ButtonWithMargin = styled(Button)({\n    margin: '6px'\n});\n\nconst GridToolBar = styled(Toolbar)({\n    display: 'flex',\n    alignItems: 'center',\n    gap: '1.5rem',\n    flexWrap: 'nowrap',\n    whiteSpace: 'nowrap',\n    minHeight: 'auto',\n    borderBottom: 'none'\n});\n\nconst CustomToolbar = function (props) {\n    const {\n        model,\n        data,\n        currentPreference,\n        isReadOnly,\n        canAdd,\n        forAssignment,\n        showAddIcon,\n        onAdd,\n        selectionApi,\n        selectedSet,\n        selectAll,\n        available,\n        onAssign,\n        assigned,\n        onUnassign,\n        effectivePermissions,\n        clearFilters,\n        handleExport,\n        preferenceName,\n        apiRef,\n        gridColumns,\n        setIsGridPreferenceFetched,\n        tTranslate,\n        tOpts,\n        filterModel\n    } = props;\n\n    const addText = model.customAddText || (model.title ? `Add ${model.title}` : 'Add');\n    const activeFilterCount = filterModel?.items?.length || 0;\n\n    return (\n        <div\n            style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                padding: '10px'\n            }}\n        >\n            <div>\n                {model.gridSubTitle && <Typography variant=\"h6\" component=\"h3\" textAlign=\"center\" sx={{ ml: 1 }}> {tTranslate(model.gridSubTitle, tOpts)}</Typography>}\n                {currentPreference && model.showPreferenceInHeader && <Typography className=\"preference-name-text\" variant=\"h6\" component=\"h6\" textAlign=\"center\" sx={{ ml: 1 }} >{tTranslate('Applied Preference', tOpts)} - {currentPreference}</Typography>}\n                {(isReadOnly || (!canAdd && !forAssignment)) && <Typography variant=\"h6\" component=\"h3\" textAlign=\"center\" sx={{ ml: 1 }} > {!canAdd || isReadOnly ? \"\" : model.title}</Typography>}\n                {!forAssignment && canAdd && !isReadOnly && <ButtonWithMargin startIcon={!showAddIcon ? null : <AddIcon />} onClick={onAdd} size=\"medium\" variant=\"contained\" >{addText}</ButtonWithMargin>}\n                {(selectionApi.length && data.records.length) ? (\n                    <ButtonWithMargin\n                        onClick={selectAll}\n                        size=\"medium\"\n                        variant=\"contained\"\n                    >\n                        {selectedSet.current.size === data.records.length ? tTranslate(\"Deselect All\", tOpts) : tTranslate(\"Select All\", tOpts)}\n                    </ButtonWithMargin>) :\n                    <></>\n                }\n                {available && <ButtonWithMargin startIcon={!showAddIcon ? null : <AddIcon />} onClick={onAssign} size=\"medium\" variant=\"contained\"  >{tTranslate(\"Assign\", tOpts)}</ButtonWithMargin>}\n                {assigned && <ButtonWithMargin startIcon={!showAddIcon ? null : <RemoveIcon />} onClick={onUnassign} size=\"medium\" variant=\"contained\"  >{tTranslate(\"Remove\", tOpts)}</ButtonWithMargin>}\n            </div>\n            <GridToolBar {...props}>\n                {effectivePermissions.showColumnsOrder && (\n                    <ColumnsPanelTrigger\n                        render={(triggerProps) => (\n                            <Button\n                                {...triggerProps}\n                                startIcon={<ViewColumnIcon />}\n                                size=\"small\"\n                                variant=\"text\"\n                            >\n                                {tTranslate(\"COLUMNS\", tOpts)}\n                            </Button>\n                        )}\n                    />\n                )}\n                {effectivePermissions.filter && (<>\n                    <FilterPanelTrigger\n                        render={(triggerProps) => (\n                            <Button\n                                {...triggerProps}\n                                startIcon={\n                                    <Badge badgeContent={activeFilterCount} color=\"primary\">\n                                        <FilterListIcon />\n                                    </Badge>\n                                }\n                                size=\"small\"\n                                variant=\"text\"\n                            >\n                                {tTranslate(\"FILTERS\", tOpts)}\n                            </Button>\n                        )}\n                    />\n                    <Button startIcon={<FilterListOffIcon />} onClick={clearFilters} size=\"small\">{tTranslate(\"CLEAR FILTER\", tOpts)}</Button>\n                </>)}\n\n                {effectivePermissions.export && (\n                    <CustomExportButton handleExport={handleExport} showPivotExportBtn={model.pivotApi} exportFormats={model.exportFormats || {}} tTranslate={tTranslate} tOpts={tOpts} />\n                )}\n                {preferenceName &&\n                    <GridPreferences preferenceName={preferenceName} gridRef={apiRef} columns={gridColumns} setIsGridPreferenceFetched={setIsGridPreferenceFetched} />\n                }\n            </GridToolBar>\n        </div >\n    );\n};\n\nconst GridBase = memo(({\n    model,\n    columns,\n    api,\n    defaultSort,\n    setActiveRecord,\n    parentFilters,\n    parent,\n    where,\n    title,\n    permissions,\n    selected,\n    assigned,\n    available,\n    disableCellRedirect = false,\n    onAssignChange,\n    customStyle,\n    onCellClick,\n    showRowsSelected,\n    chartFilters,\n    clearChartFilter,\n    showFullScreenLoader,\n    customFilters,\n    onRowDoubleClick,\n    onRowClick = () => { },\n    gridStyle,\n    reRenderKey,\n    additionalFilters,\n    onCellDoubleClickOverride,\n    onAddOverride,\n    dynamicColumns,\n    readOnly = false,\n    baseFilters = [],\n    ...props\n}) => {\n    const [paginationModel, setPaginationModel] = useState({ pageSize: defaultPageSize, page: 0 });\n    const [data, setData] = useState({ recordCount: 0, records: [], lookups: {} });\n    const [isLoading, setIsLoading] = useState(true);\n    const forAssignment = !!onAssignChange;\n    const rowsSelected = showRowsSelected;\n    const [selection, setSelection] = useState([]);\n    const [isDeleting, setIsDeleting] = useState(false);\n    const [record, setRecord] = useState(null);\n    const visibilityModel = { CreatedOn: false, CreatedByUser: false, ...model.columnVisibilityModel };\n    const [showAddConfirmation, setShowAddConfirmation] = useState(false);\n    const snackbar = useSnackbar();\n    const paginationMode = model.paginationMode === constants.client ? constants.client : constants.server;\n    const { t: translate, i18n } = useTranslation();\n    const tOpts = { t: translate, i18n };\n    const [errorMessage, setErrorMessage] = useState('');\n    const [sortModel, setSortModel] = useState(convertDefaultSort(defaultSort || model.defaultSort, constants, sortRegex));\n    const initialFilterModel = { items: [], logicOperator: 'and', quickFilterValues: Array(0), quickFilterLogicOperator: 'and' };\n    if (model.defaultFilters) {\n        initialFilterModel.items = [];\n        model.defaultFilters.forEach((ele) => {\n            initialFilterModel.items.push(ele);\n        });\n    }\n    const [filterModel, setFilterModel] = useState({ ...initialFilterModel });\n    const { navigate, getParams, useParams, pathname } = useRouter();\n    const { id: idWithOptions } = useParams() || getParams;\n    const id = idWithOptions?.split('-')[0];\n    const apiRef = useGridApiRef();\n    const { idProperty = \"id\", showHeaderFilters = true, disableRowSelectionOnClick = true, hideBackButton = false, hideTopFilters = true, updatePageTitle = true, isElasticScreen = false, navigateBack = false, selectionApi = {} } = model;\n    const isReadOnly = model.readOnly === true || readOnly;\n    const isDoubleClicked = model.allowDoubleClick === false;\n    const dataRef = useRef(data);\n    const showAddIcon = model.showAddIcon === true;\n    const toLink = model.columns.filter(({ link }) => Boolean(link)).map(item => item.link);\n    const [isGridPreferenceFetched, setIsGridPreferenceFetched] = useState(false);\n    const { stateData, dispatchData, formatDate, removeCurrentPreferenceName, getAllSavedPreferences, applyDefaultPreferenceIfExists } = useStateContext();\n    const { timeZone } = stateData;\n    const effectivePermissions = { ...constants.permissions, ...stateData.gridSettings.permissions, ...model.permissions, ...permissions };\n    const { Username } = stateData?.getUserData ? stateData.getUserData : {};\n    const {\n        gridSettings: {\n            permissions: {\n                routesWithNoChildRoute = [],\n                Url: url,\n                withControllersUrl,\n                defaultPreferenceEnums,\n                preferenceApi,\n                historyScreenName = \"historyScreen\",\n                showPageTitle = true\n            } = {}\n        } = {},\n        currentPreference\n    } = stateData;\n    const emptyIsAnyOfOperatorFilters = [\"isEmpty\", \"isNotEmpty\", \"isAnyOf\"];\n    const userData = stateData.getUserData || {};\n    const documentField = model.columns.find(ele => ele.type === 'fileUpload')?.field || \"\";\n    const userDefinedPermissions = { add: effectivePermissions.add, edit: effectivePermissions.edit, delete: effectivePermissions.delete };\n    const { canAdd, canEdit, canDelete } = getPermissions({ userData, model, userDefinedPermissions });\n    const tTranslate = model.tTranslate ?? ((key) => key);\n    const { addUrlParamKey, searchParamKey, hideBreadcrumb = false, tableName, showHistory = true, hideBreadcrumbInGrid = false, breadcrumbColor, disablePivoting = false, columnHeaderHeight = 70 } = model;\n    const gridTitle = model.gridTitle || model.title;\n    const preferenceName = model.preferenceId || model.module?.preferenceId;\n    const searchParams = new URLSearchParams(window.location.search);\n\n    const baseDataFromParams = searchParams.has('baseData') && searchParams.get('baseData');\n    const baseSaveData = (() => {\n        if (baseDataFromParams) {\n            const parsedData = JSON.parse(baseDataFromParams);\n            if (typeof parsedData === constants.object && parsedData !== null) {\n                return parsedData;\n            }\n        }\n        return {};\n    })();\n    const selectedSet = useRef(new Set());\n\n    const handleSelectRow = ({ row }) => {\n        const rowId = row[idProperty];\n        const isSelected = selectedSet.current.has(rowId);\n        if (isSelected) {\n            selectedSet.current.delete(rowId);\n        } else {\n            selectedSet.current.add(rowId);\n        }\n        setSelection(Array.from(selectedSet.current));\n    };\n\n    const CustomCheckBox = (params) => {\n        const rowId = params.row[idProperty];\n        const [isCheckedLocal, setIsCheckedLocal] = useState(selectedSet.current.has(rowId));\n\n        useEffect(() => {\n            setIsCheckedLocal(selectedSet.current.has(rowId));\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, [params.row, selectedSet.current.size]);\n\n        const handleCheckboxClick = (event) => {\n            event.stopPropagation();\n            handleSelectRow(params);\n        };\n\n        return (\n            <Checkbox\n                onClick={handleCheckboxClick}\n                checked={isCheckedLocal}\n                color=\"primary\"\n                inputProps={{ 'aria-label': 'checkbox' }}\n            />\n        );\n    };\n\n    const gridColumnTypes = {\n        \"radio\": {\n            \"type\": \"singleSelect\",\n            \"valueOptions\": \"lookup\"\n        },\n        \"date\": {\n            \"valueFormatter\": (value) => (\n                formatDate({ value, useSystemFormat: true, showOnlyDate: false, state: stateData.dateTime, timeZone })\n            ),\n            \"filterOperators\": LocalizedDatePicker({ columnType: \"date\", label: tTranslate('Value', tOpts) })\n        },\n        \"dateTime\": {\n            \"valueFormatter\": (value) => (\n                formatDate({ value, useSystemFormat: false, showOnlyDate: false, state: stateData.dateTime, timeZone })\n            ),\n            \"filterOperators\": LocalizedDatePicker({ columnType: \"datetime\", label: tTranslate('Value', tOpts) })\n        },\n        \"dateTimeLocal\": {\n            \"valueFormatter\": (value) => (\n                formatDate({ value, useSystemFormat: false, showOnlyDate: false, state: stateData.dateTime, timeZone })\n            ),\n            \"filterOperators\": LocalizedDatePicker({ type: \"dateTimeLocal\", convert: true })\n        },\n        \"boolean\": {\n            renderCell: booleanIconRenderer\n        },\n        \"select\": {\n            \"type\": \"singleSelect\",\n            \"valueOptions\": \"lookup\"\n        },\n        \"selection\": {\n            renderCell: (params) => <CustomCheckBox {...params} />\n        }\n    };\n\n    useEffect(() => {\n        dataRef.current = data;\n    }, [data]);\n\n    useEffect(() => {\n        if (!customFilters || !Object.keys(customFilters).length) return;\n        if (customFilters.clear) {\n            setFilterModel({ items: [], logicOperator: \"and\", quickFilterValues: [], quickFilterLogicOperator: \"and\" });\n            return;\n        }\n        const items = Object.entries(customFilters).reduce((acc, [key, value]) => {\n            if (key === constants.startDate || key === constants.endDate) {\n                acc.push(value);\n            } else if (key in customFilters) {\n                acc.push({ field: key, value, operator: \"equals\", type: \"string\" });\n            }\n            return acc;\n        }, []);\n        setFilterModel({ items, logicOperator: \"and\", quickFilterValues: [], quickFilterLogicOperator: \"and\" });\n    }, [customFilters]);\n\n    const lookupOptions = ({ field }) => {\n        const lookupData = dataRef.current.lookups || {};\n        return lookupData[lookupMap[field].lookup] || [];\n    };\n\n    useEffect(() => {\n        if (props.isChildGrid || !hideTopFilters) {\n            return;\n        }\n        dispatchData({\n            type: actionsStateProvider.PASS_FILTERS_TO_HEADER, payload: {\n                filterButton: null,\n                hidden: { search: true, operation: true, export: true, print: true, filter: true }\n            }\n        });\n    }, []);\n    const { customActions = [] } = model;\n    const { gridColumns, pinnedColumns, lookupMap } = useMemo(() => {\n        let baseColumnList = columns || model.gridColumns || model.columns;\n        if (dynamicColumns) {\n            baseColumnList = [...dynamicColumns, ...baseColumnList];\n        }\n        const pinnedColumns = { left: [GRID_CHECKBOX_SELECTION_COL_DEF.field], right: [] };\n        const finalColumns = [];\n        const lookupMap = {};\n        for (const column of baseColumnList) {\n            if (column.gridLabel === null || (parent && column.lookup === parent) || (column.type === constants.oneToMany && column.countInList === false)) continue;\n            const overrides = {};\n            if (column.type === constants.oneToMany) {\n                overrides.type = 'number';\n                overrides.field = column.field.replace(/s$/, 'Count');\n            }\n            if (gridColumnTypes[column.type]) {\n                Object.assign(overrides, gridColumnTypes[column.type]);\n            }\n            // Common filter operator pattern\n            if (overrides.valueOptions === constants.lookup || column.type === constants.boolean) {\n                let operators = [];\n\n                if (overrides.valueOptions === constants.lookup) {\n                    overrides.valueOptions = lookupOptions;\n                    const lookupFilters = [...getGridDateOperators(), ...getGridStringOperators()]\n                        .filter((op) => ['is', 'not', 'isAnyOf'].includes(op.value));\n                    operators = lookupFilters;\n                }\n\n                if (column.type === constants.boolean) {\n                    operators = getGridBooleanOperators();\n                }\n\n                overrides.filterOperators = operators.map((operator) => ({\n                    ...operator,\n                    InputComponent: operator.InputComponent\n                        ? (params) => (\n                            <CustomDropdownMenu\n                                column={{\n                                    ...column,\n                                    ...(column.type === constants.boolean\n                                        ? {\n                                            customLookup: [\n                                                { value: true, label: 'Yes' },\n                                                { value: false, label: 'No' }\n                                            ]\n                                        }\n                                        : {}),\n                                    dataRef\n                                }}\n                                {...params}\n                                autoHighlight\n                            />\n                        )\n                        : undefined\n                }));\n            }\n            if (column.linkTo || column.link) {\n                overrides.cellClassName = 'mui-grid-linkColumn';\n            }\n            const headerName = tTranslate(column.gridLabel || column.label, tOpts);\n            finalColumns.push({ headerName, description: headerName, ...column, ...overrides });\n            if (column.pinned) {\n                pinnedColumns[column.pinned === constants.right ? constants.right : constants.left].push(column.field);\n            }\n            lookupMap[column.field] = column;\n        }\n        let auditColumns = model.standard;\n        if (auditColumns === true) {\n            auditColumns = { addCreatedOnColumn: true, addCreatedByColumn: true, addModifiedOnColumn: true, addModifiedByColumn: true };\n        }\n        if (auditColumns && typeof auditColumns === constants.object) {\n            auditColumnMappings.forEach(({ key, field, type, header }) => {\n                if (auditColumns[key] === true) {\n                    const column = { field, type, headerName: header, width: 200 };\n                    if (type === constants.dateTime) {\n                        column.filterOperators = LocalizedDatePicker({ columnType: 'date' });\n                        column.valueFormatter = gridColumnTypes.dateTime.valueFormatter;\n                        column.keepLocal = true;\n                    }\n                    finalColumns.push(column);\n                }\n            });\n        }\n        const actions = [];\n        if (!forAssignment && !isReadOnly) {\n            if (canEdit) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"Edit\"><EditIcon /></Tooltip>} data-action={actionTypes.Edit} label=\"Edit\" color=\"primary\" />);\n            }\n            if (effectivePermissions.copy) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"Copy\"><CopyIcon /> </Tooltip>} data-action={actionTypes.Copy} label=\"Copy\" color=\"primary\" />);\n            }\n            if (canDelete) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"Delete\"><DeleteIcon /> </Tooltip>} data-action={actionTypes.Delete} label=\"Delete\" color=\"error\" />);\n            }\n            if (showHistory) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"History\"><HistoryIcon /> </Tooltip>} data-action={actionTypes.History} label=\"History\" color=\"primary\" />);\n            }\n            if (customActions.length) {\n                customActions.forEach(({ icon, action, color }) => {\n                    actions.push(\n                        <GridActionsCellItem\n                            icon={<Tooltip title={action}>{iconMapper[icon] || <CopyIcon />}</Tooltip>}\n                            data-action={action}\n                            label={action}\n                            color={color || \"primary\"}\n                        />\n                    );\n                });\n            }\n        }\n        if (documentField.length) {\n            actions.push(<GridActionsCellItem icon={<Tooltip title=\"Download document\"><FileDownloadIcon /> </Tooltip>} data-action={actionTypes.Download} label=\"Download document\" color=\"primary\" />);\n        }\n        if (actions.length) {\n            finalColumns.push({\n                field: 'actions',\n                type: 'actions',\n                label: '',\n                width: actions.length * 50,\n                hidable: false,\n                getActions: (params) => {\n                    const rowActions = [...actions];\n                    if (canEdit && !isReadOnly) {\n                        const isDisabled = params.row.canEdit === false;\n                        rowActions[0] = (\n                            <GridActionsCellItem\n                                icon={\n                                    <Tooltip title=\"Edit\">\n                                        <EditIcon />\n                                    </Tooltip>\n                                }\n                                data-action={actionTypes.Edit}\n                                label=\"Edit\"\n                                color=\"primary\"\n                                disabled={isDisabled}\n                            />\n                        );\n                    }\n                    return rowActions;\n                }\n            });\n        }\n        pinnedColumns.right.push('actions');\n        return { gridColumns: finalColumns, pinnedColumns, lookupMap };\n    }, [columns, model, parent, permissions, forAssignment, dynamicColumns]);\n\n    const fetchData = (action = \"list\", extraParams = {}, contentType, columns, isPivotExport, isElasticExport) => {\n        const { pageSize, page } = paginationModel;\n\n        let controllerType = model.controllerType;\n        let gridApi = `${controllerType === \"cs\" ? withControllersUrl : url || \"\"}${model.api || api}`;\n\n        if (isPivotExport) {\n            gridApi = `${withControllersUrl}${model.pivotApi}`;\n            controllerType = \"cs\";\n        }\n\n        if (assigned || available) {\n            extraParams[assigned ? \"include\" : \"exclude\"] = Array.isArray(selected) ? selected.join(\",\") : selected;\n        }\n\n        const filters = { ...filterModel };\n        if (chartFilters?.items?.length > 0) {\n            const { columnField, operatorValue } = chartFilters.items[0] || {};\n            const chartField = constants.chartFilterFields[columnField];\n            filters.items = [{ field: chartField, operator: operatorValue, isChartFilter: false }];\n            if (JSON.stringify(filterModel) !== JSON.stringify(filters)) {\n                setFilterModel({ ...filters });\n                chartFilters.items.length = 0;\n            }\n        }\n        if (model.joinColumn && id) {\n            baseFilters.push({ field: model.joinColumn, operator: \"is\", type: \"number\", value: Number(id) });\n        }\n\n        if (additionalFilters) {\n            filters.items = [...(filters.items || []), ...additionalFilters];\n        }\n        extraParams = { ...extraParams, ...props.extraParams }; // Merge any custom params passed via component props into extraParams\n        const isValidFilters = !filters.items.length || filters.items.every(item => \"value\" in item && item.value !== undefined);\n        if (!isValidFilters) return;\n\n        getList({\n            action,\n            page: !contentType ? page : 0,\n            pageSize: !contentType ? pageSize : 1000000,\n            sortModel,\n            filterModel: filters,\n            controllerType,\n            api: gridApi,\n            setIsLoading,\n            setData,\n            gridColumns,\n            model,\n            parentFilters,\n            extraParams,\n            setError: snackbar.showError,\n            contentType,\n            columns,\n            template: isPivotExport ? model.exportTemplate : null,\n            configFileName: isPivotExport ? model.configFileName : null,\n            dispatchData,\n            showFullScreenLoader,\n            history: navigate,\n            baseFilters,\n            isElasticExport\n        });\n    };\n\n    const openForm = ({ id, record = {}, mode }) => {\n        if (setActiveRecord) {\n            getRecord({ id, api: api || model.api, setIsLoading, setActiveRecord, model, parentFilters, where });\n            return;\n        }\n        let path = pathname;\n        if (!path.endsWith(\"/\")) {\n            path += \"/\";\n        }\n        if (mode === \"copy\") {\n            path += \"0-\" + id;\n            dispatchData({ type: 'UPDATE_FORM_MODE', payload: 'copy' });\n\n        } else {\n            path += id;\n            dispatchData({ type: 'UPDATE_FORM_MODE', payload: '' });\n        }\n        if (addUrlParamKey) {\n            searchParams.set(addUrlParamKey, record[addUrlParamKey]);\n            path += `?${searchParams.toString()}`;\n        }\n        navigate(path);\n    };\n\n    const handleDownload = async ({ documentLink, fileName }) => {\n        if (!documentLink) return;\n        try {\n            const response = await fetch(documentLink);\n            if (!response.ok) {\n                throw new Error(`Failed to fetch the file: ${response.statusText}`);\n            }\n\n            const blob = await response.blob();\n            const url = window.URL.createObjectURL(blob);\n\n            const link = document.createElement(\"a\");\n            link.href = url;\n\n            // Derive a file name from the URL or fall back to default\n            const fileNameFromLink = documentLink.split(\"/\").pop() || `downloaded-file.${blob.type.split(\"/\")[1] || \"txt\"}`;\n            link.download = fileName || fileNameFromLink;\n\n            // Append the link to the DOM and trigger a click\n            document.body.appendChild(link);\n            link.click();\n\n            // Cleanup after the download\n            document.body.removeChild(link);\n            window.URL.revokeObjectURL(url);\n        } catch (error) {\n            window.open(documentLink);\n        }\n    };\n    const onCellClickHandler = async (cellParams, event, details) => {\n        let action = cellParams.field === model.linkColumn ? actionTypes.Edit : null;\n        if (!action && cellParams.field === constants.actions) {\n            action = details?.action;\n            if (!action) {\n                const el = event.target.closest('button');\n                if (el) {\n                    action = el.dataset.action;\n                }\n            }\n        }\n        const { row: record } = cellParams;\n        if (!isReadOnly) {\n            if (onCellClick) {\n                const result = await onCellClick({ cellParams, event, details });\n                if (typeof result !== constants.boolean) {\n                    return;\n                }\n            }\n            const columnConfig = lookupMap[cellParams.field] || {};\n            if (columnConfig.linkTo) {\n                navigate({\n                    pathname: template.replaceTags(columnConfig.linkTo, record)\n                });\n                return;\n            }\n            switch (action) {\n                case actionTypes.Edit:\n                    return openForm({ id: record[idProperty], record });\n                case actionTypes.Copy:\n                    return openForm({ id: record[idProperty], mode: 'copy' });\n                case actionTypes.Delete:\n                    setIsDeleting(true);\n                    setRecord({ name: record[model.linkColumn], id: record[idProperty] });\n                    break;\n                case actionTypes.History:\n                    // navigates to history screen, specifying the tablename, id of record and breadcrumb to render title on history screen.\n                    return navigate(`${historyScreenName}?tableName=${tableName}&id=${record[idProperty]}&breadCrumb=${searchParamKey ? searchParams.get(searchParamKey) : gridTitle}`);\n                default:\n                    // Check if action matches any customAction and call its onClick if found\n                    const foundCustomAction = customActions.find(ca => ca.action === action && typeof ca.onClick === constants.function);\n                    if (foundCustomAction) {\n                        foundCustomAction.onClick({ row: record, navigate });\n                        return;\n                    }\n                    break;\n            }\n        }\n        if (action === actionTypes.Download) {\n            handleDownload({ documentLink: record[documentField], fileName: record.FileName });\n        }\n        if (!toLink.length) {\n            return;\n        }\n        const { row } = cellParams;\n        const columnConfig = lookupMap[cellParams.field] || {};\n        const historyObject = {\n            pathname: template.replaceTags(columnConfig.linkTo, row)\n        };\n        if (model.addRecordToState) {\n            historyObject.state = row;\n        }\n        navigate(historyObject);\n    };\n\n    const handleDelete = async function () {\n        const result = await deleteRecord({ id: record.id, api: `${model.controllerType === 'cs' ? withControllersUrl : url}${model.api || api}`, setIsLoading, setError: snackbar.showError, setErrorMessage });\n        if (result === true) {\n            setIsDeleting(false);\n            snackbar.showMessage('Record Deleted Successfully.');\n            fetchData();\n        } else {\n            setIsDeleting(false);\n        }\n    };\n    const clearError = () => {\n        setErrorMessage(null);\n        setIsDeleting(false);\n    };\n\n    const processRowUpdate = (updatedRow) => {\n        if (typeof props.processRowUpdate === \"function\") {\n            props.processRowUpdate(updatedRow, data);\n        }\n        return updatedRow;\n    };\n\n    const onCellDoubleClick = (event) => {\n        if (event.row.canEdit === false) {\n            return;\n        }\n        const { row: record } = event;\n        if (typeof onCellDoubleClickOverride === constants.function) {\n            onCellDoubleClickOverride(event);\n            return;\n        }\n        if (!isReadOnly && !isDoubleClicked && !disableCellRedirect) {\n            openForm({ id: record[idProperty], record });\n        }\n        if (isReadOnly && model.rowRedirectLink) {\n            const historyObject = {\n                pathname: template.replaceTags(model.rowRedirectLink, record)\n            };\n            if (model.addRecordToState) {\n                historyObject.state = record;\n            }\n            navigate(historyObject);\n        }\n        if (typeof onRowDoubleClick === constants.function) {\n            onRowDoubleClick(event);\n        }\n    };\n\n    const handleAddRecords = async () => {\n        if (selectedSet.current.size < 1) {\n            snackbar.showError(\"Please select at least one record to proceed\");\n            return;\n        }\n\n        const selectedIds = Array.from(selectedSet.current);\n        const recordMap = new Map(data.records.map(record => [record[idProperty], record]));\n        let selectedRecords = selectedIds.map(id => ({ ...baseSaveData, ...recordMap.get(id) }));\n\n        // If selectionUpdateKeys is defined, filter each record to only those keys\n        if (Array.isArray(model.selectionUpdateKeys) && model.selectionUpdateKeys.length) {\n            selectedRecords = selectedRecords.map(item =>\n                Object.fromEntries(model.selectionUpdateKeys.map(key => [key, item[key]]))\n            );\n        }\n\n        try {\n            const result = await saveRecord({\n                id: 0,\n                api: `${url}${selectionApi || api}/updateMany`,\n                values: { items: selectedRecords },\n                setIsLoading,\n                setError: snackbar.showError\n            });\n\n            if (result) {\n                fetchData();\n                const message = result.info ? result.info : \"Record Added Successfully.\";\n                snackbar.showMessage(message);\n            }\n        } catch (err) {\n            snackbar.showError(err.message || \"An error occurred, please try again later.\");\n        } finally {\n            selectedSet.current.clear();\n            setIsLoading(false);\n            setShowAddConfirmation(false);\n        }\n    };\n\n    const onAdd = () => {\n        if (selectionApi.length > 0) {\n            if (selectedSet.current.size) {\n                setShowAddConfirmation(true);\n                return;\n            }\n            snackbar.showError(\n                \"Please select at least one record to proceed\"\n            );\n            setIsLoading(false);\n            return;\n        }\n        if (typeof onAddOverride === constants.function) {\n            onAddOverride();\n        } else {\n            openForm({ id: 0 });\n        }\n    };\n\n    const clearFilters = () => {\n        if (!filterModel?.items?.length) return;\n        const filters = JSON.parse(JSON.stringify(constants.gridFilterModel));\n        setFilterModel(filters);\n        if (clearChartFilter) {\n            clearChartFilter();\n        }\n    };\n    const updateAssignment = ({ unassign, assign }) => {\n        const assignedValues = Array.isArray(selected) ? selected : (selected.length ? selected.split(',') : []);\n        const finalValues = unassign ? assignedValues.filter(id => !unassign.includes(parseInt(id))) : [...assignedValues, ...assign];\n        onAssignChange(typeof selected === constants.string ? finalValues.join(',') : finalValues);\n    };\n\n    const onAssign = () => {\n        updateAssignment({ assign: selection });\n    };\n\n    const onUnassign = () => {\n        updateAssignment({ unassign: selection });\n    };\n\n    const selectAll = () => {\n        if (selectedSet.current.size === data.records.length) {\n            // If all records are selected, deselect all\n            selectedSet.current.clear();\n            setSelection([]);\n        } else {\n            // Select all records\n            data.records.forEach(record => {\n                selectedSet.current.add(record[idProperty]);\n            });\n            setSelection(data.records.map(record => record[idProperty]));\n        }\n    };\n\n    const setupGridPreference = async ({ preferenceName, Username, preferenceApi, defaultPreferenceEnums }) => {\n        removeCurrentPreferenceName({ dispatchData });\n        const preferences = await getAllSavedPreferences({ preferenceName, history: navigate, dispatchData, Username, preferenceApi, defaultPreferenceEnums });\n        applyDefaultPreferenceIfExists({ preferenceName, dispatchData, gridRef: apiRef, setIsGridPreferenceFetched, defaultPreferenceEnums, preferences });\n    }\n\n    useEffect(() => {\n        if (!preferenceName || !preferenceApi) {\n            return;\n        }\n        setupGridPreference({ preferenceName, Username, preferenceApi, defaultPreferenceEnums });\n    }, [preferenceApi]);\n\n    const getGridRowId = (row) => {\n        return row[idProperty];\n    };\n    const handleExport = (e) => {\n        if (data?.recordCount > recordCounts) {\n            snackbar.showMessage('Cannot export more than 60k records, please apply filters or reduce your results using filters');\n            return;\n        }\n        const { orderedFields, columnVisibilityModel, lookup } = apiRef.current.state.columns;\n        const isPivotExport = e.target.dataset.isPivotExport === 'true';\n        const hiddenColumns = Object.keys(columnVisibilityModel).filter(key => columnVisibilityModel[key] === false);\n\n        const nonExportColumns = new Set(gridColumns.filter(col => col.exportable === false).map(col => col.field));\n\n        const visibleColumns = orderedFields.filter(\n            field => !nonExportColumns.has(field) && !hiddenColumns.includes(field) && field !== '__check__' && field !== 'actions'\n        );\n\n        if (visibleColumns.length === 0) {\n            snackbar.showMessage('You cannot export while all columns are hidden... please show at least 1 column before exporting');\n            return;\n        }\n\n        const columns = {};\n        visibleColumns.forEach(field => {\n            const col = lookup[field];\n            columns[field] = { field, width: col.width, headerName: col.headerName || col.field, type: col.type, keepLocal: col.keepLocal === true, isParsable: col.isParsable, lookup: col.lookup };\n        });\n        fetchData(\n            isPivotExport ? 'export' : undefined,\n            undefined,\n            e.target.dataset.contentType,\n            columns,\n            isPivotExport,\n            isElasticScreen\n        );\n    };\n\n    useEffect(() => {\n        if (!url || (preferenceName && !isGridPreferenceFetched)) return;\n        fetchData();\n    }, [paginationModel, sortModel, filterModel, api, gridColumns, model, parentFilters, assigned, selected, available, chartFilters, isGridPreferenceFetched, reRenderKey, url]);\n\n    useEffect(() => {\n        if (props.isChildGrid || forAssignment || !updatePageTitle) {\n            return;\n        }\n        dispatchData({ type: actionsStateProvider.PAGE_TITLE_DETAILS, payload: { icon: \"\", titleHeading: model.pageTitle || model.title, title: model.title } });\n        return () => {\n            dispatchData({\n                type: actionsStateProvider.PAGE_TITLE_DETAILS, payload: null\n            });\n        };\n    }, []);\n\n    useEffect(() => {\n        if (props.isChildGrid) {\n            return;\n        }\n        let backRoute = pathname;\n\n        // we do not need to show the back button for these routes\n        if (hideBackButton || routesWithNoChildRoute.includes(backRoute)) {\n            dispatchData({\n                type: actionsStateProvider.SET_PAGE_BACK_BUTTON,\n                payload: { status: false, backRoute: '' }\n            });\n            return;\n        }\n        backRoute = backRoute.split(\"/\");\n        backRoute.pop();\n        backRoute = backRoute.join(\"/\");\n        dispatchData({\n            type: actionsStateProvider.SET_PAGE_BACK_BUTTON,\n            payload: { status: true, backRoute: backRoute }\n        });\n    }, [isLoading]);\n\n    const updateFilters = (e) => {\n        const { items } = e;\n        const updatedItems = items.map(item => {\n            const { field, operator, type, value } = item;\n            const column = gridColumns.find(col => col.field === field) || {};\n            const isNumber = column.type === constants.number;\n\n            if (isNumber && value < 0) {\n                return { ...item, value: null };\n            }\n\n            if ((emptyIsAnyOfOperatorFilters.includes(operator)) || (isNumber && !isNaN(value)) || ((!isNumber))) {\n                const isKeywordField = isElasticScreen && gridColumns.filter(element => element.field === field)[0]?.isKeywordField;\n                if (isKeywordField) {\n                    item.filterField = `${item.field}.keyword`;\n                }\n                item.value = ['isEmpty', 'isNotEmpty'].includes(operator) ? null : value;\n                return { ...item, type: column.type };\n            }\n            const updatedValue = isNumber ? null : value;\n            return { field, operator, type, value: updatedValue };\n        });\n        e.items = updatedItems;\n        setFilterModel(e);\n        const shouldClearChartFilter =\n            (e.items.findIndex(ele => ele.isChartFilter && !(['isEmpty', 'isNotEmpty'].includes(ele.operator))) === -1) ||\n            (\n                chartFilters?.items?.length &&\n                (\n                    (!e.items.length) ||\n                    (chartFilters.items.findIndex(ele => ele.columnField === e.items[0]?.field) > -1)\n                )\n            );\n\n        if (shouldClearChartFilter && clearChartFilter) {\n            clearChartFilter();\n        }\n    };\n\n    const updateSort = (e) => {\n        const sort = e.map((ele) => {\n            const field = gridColumns.filter(element => element.field === ele.field)[0] || {};\n            const isKeywordField = isElasticScreen && field.isKeywordField;\n            const obj = { ...ele, filterField: isKeywordField ? `${ele.field}.keyword` : ele.field };\n            if (field.dataIndex) {\n                obj.filterField = field.dataIndex;\n            }\n            return obj;\n        });\n        setSortModel(sort);\n    };\n    const pageTitle = title || model.gridTitle || model.title;\n    const breadCrumbs = searchParamKey\n        ? [{ text: searchParams.get(searchParamKey) || pageTitle }]\n        : [{ text: pageTitle }];\n    return (\n        <>\n            {showPageTitle && <PageTitle navigate={navigate} showBreadcrumbs={!hideBreadcrumb && !hideBreadcrumbInGrid}\n                breadcrumbs={breadCrumbs} enableBackButton={navigateBack} breadcrumbColor={breadcrumbColor} />}\n            <Box style={gridStyle || customStyle}>\n                <Box sx={{ display: 'flex', maxHeight: '80vh', flexDirection: 'column' }}>\n                    <DataGridPremium\n                        sx={{\n                            \"& .MuiTablePagination-selectLabel\": {\n                                marginTop: 2\n                            },\n                            \"& .MuiTablePagination-displayedRows\": {\n                                marginTop: 2\n                            },\n                            \"& .MuiDataGrid-virtualScroller \": {\n                                zIndex: 2,\n                            }\n                        }}\n                        headerFilters={showHeaderFilters}\n                        unstable_headerFilters={showHeaderFilters} //for older versions of mui\n                        checkboxSelection={forAssignment}\n                        loading={isLoading}\n                        className=\"pagination-fix\"\n                        onCellClick={onCellClickHandler}\n                        onCellDoubleClick={onCellDoubleClick}\n                        columns={gridColumns}\n                        paginationModel={paginationModel}\n                        pageSizeOptions={constants.pageSizeOptions}\n                        onPaginationModelChange={setPaginationModel}\n                        pagination\n                        rowCount={data.recordCount}\n                        rows={data.records}\n                        sortModel={sortModel}\n                        paginationMode={paginationMode}\n                        sortingMode={paginationMode}\n                        filterMode={paginationMode}\n                        processRowUpdate={processRowUpdate}\n                        keepNonExistentRowsSelected\n                        onSortModelChange={updateSort}\n                        onFilterModelChange={updateFilters}\n                        rowSelection={selection}\n                        onRowSelectionModelChange={setSelection}\n                        filterModel={filterModel}\n                        getRowId={getGridRowId}\n                        onRowClick={onRowClick}\n                        slots={{\n                            headerFilterMenu: false,\n                            toolbar: CustomToolbar,\n                            footer: Footer\n                        }}\n                        slotProps={{\n                            toolbar: {\n                                model,\n                                data,\n                                currentPreference,\n                                isReadOnly,\n                                canAdd,\n                                forAssignment,\n                                showAddIcon,\n                                onAdd,\n                                selectionApi,\n                                selectedSet,\n                                selectAll,\n                                available,\n                                onAssign,\n                                assigned,\n                                onUnassign,\n                                effectivePermissions,\n                                clearFilters,\n                                handleExport,\n                                preferenceName,\n                                apiRef,\n                                gridColumns,\n                                setIsGridPreferenceFetched,\n                                tTranslate,\n                                tOpts,\n                                idProperty,\n                                filterModel\n                            },\n                            footer: {\n                                pagination: true,\n                                apiRef\n                            },\n                            panel: {\n                                placement: \"bottom-end\"\n                            }\n                        }}\n                        hideFooterSelectedRowCount={rowsSelected}\n                        density=\"compact\"\n                        disableDensitySelector={true}\n                        apiRef={apiRef}\n                        disableAggregation={true}\n                        disableRowGrouping={true}\n                        disableRowSelectionOnClick={disableRowSelectionOnClick}\n                        disablePivoting={disablePivoting}\n                        initialState={{\n                            columns: {\n                                columnVisibilityModel: visibilityModel\n                            },\n                            pinnedColumns: pinnedColumns\n                        }}\n                        localeText={{\n                            filterValueTrue: tTranslate('Yes', tOpts),\n                            filterValueFalse: tTranslate('No', tOpts),\n                            noRowsLabel: tTranslate('No data', tOpts),\n                            footerTotalRows: `${tTranslate('Total rows', tOpts)}:`,\n                            MuiTablePagination: {\n                                labelRowsPerPage: tTranslate('Rows per page', tOpts),\n                                labelDisplayedRows: ({ from, to, count }) => `${from}–${to} ${tTranslate('of', tOpts)} ${count}`,\n                            },\n                            toolbarQuickFilterPlaceholder: tTranslate(model?.searchPlaceholder || 'Search...', tOpts),\n                            toolbarColumns: tTranslate('Columns', tOpts),\n                            toolbarFilters: tTranslate('Filters', tOpts),\n                            toolbarExport: tTranslate('Export', tOpts),\n                            filterPanelAddFilter: tTranslate('Add filter', tOpts),\n                            filterPanelRemoveAll: tTranslate('Remove all', tOpts),\n                            filterPanelDeleteIconLabel: tTranslate('Delete', tOpts),\n                            filterPanelColumns: tTranslate('Columns', tOpts),\n                            filterPanelOperator: tTranslate('Operator', tOpts),\n                            filterPanelValue: tTranslate('Value', tOpts),\n                            filterPanelInputLabel: tTranslate('Value', tOpts),\n                            filterPanelInputPlaceholder: tTranslate('Filter value', tOpts),\n                            columnMenuLabel: tTranslate('Menu', tOpts),\n                            columnMenuShowColumns: tTranslate('Show columns', tOpts),\n                            columnMenuManageColumns: tTranslate('Manage columns', tOpts),\n                            columnMenuFilter: tTranslate('Filter', tOpts),\n                            columnMenuHideColumn: tTranslate('Hide column', tOpts),\n                            columnMenuManagePivot: tTranslate('Manage pivot', tOpts),\n                            toolbarColumnsLabel: tTranslate('Select columns', tOpts),\n                            toolbarExportLabel: tTranslate('Export', tOpts),\n                            pivotDragToColumns: tTranslate('Drag here to pivot by', tOpts),\n                            pivotDragToRows: tTranslate('Drag here to group by', tOpts),\n                            pivotDragToValues: tTranslate('Drag here to create values', tOpts),\n                            pivotColumns: tTranslate('Pivot columns', tOpts),\n                            pivotRows: tTranslate('Row groups', tOpts),\n                            pivotValues: tTranslate('Values', tOpts),\n                            pivotMenuRows: tTranslate('Rows', tOpts),\n                            pivotMenuColumns: tTranslate('Columns', tOpts),\n                            pivotMenuValues: tTranslate('Values', tOpts),\n                            pivotToggleLabel: tTranslate('Pivot', tOpts),\n                            pivotSearchControlPlaceholder: tTranslate('Search pivot columns', tOpts),\n                            columnMenuUnsort: tTranslate('Unsort', tOpts),\n                            columnMenuSortAsc: tTranslate('Sort by ascending', tOpts),\n                            columnMenuSortDesc: tTranslate('Sort by descending', tOpts),\n                            columnMenuUnpin: tTranslate('Unpin', tOpts),\n                            columnsPanelTextFieldLabel: tTranslate('Find column', tOpts),\n                            columnsPanelTextFieldPlaceholder: tTranslate('Column title', tOpts),\n                            columnsPanelHideAllButton: tTranslate('Hide all', tOpts),\n                            columnsPanelShowAllButton: tTranslate('Show all', tOpts),\n                            pinToLeft: tTranslate('Pin to left', tOpts),\n                            pinToRight: tTranslate('Pin to right', tOpts),\n                            unpin: tTranslate('Unpin', tOpts),\n                            filterValueAny: tTranslate('any', tOpts),\n                            filterOperatorIs: tTranslate('is', tOpts),\n                            filterOperatorNot: tTranslate('is not', tOpts),\n                            filterOperatorIsAnyOf: tTranslate('is any of', tOpts),\n                            filterOperatorContains: tTranslate('contains', tOpts),\n                            filterOperatorDoesNotContain: tTranslate('does not contain', tOpts),\n                            filterOperatorEquals: tTranslate('equals', tOpts),\n                            filterOperatorDoesNotEqual: tTranslate('does not equal', tOpts),\n                            filterOperatorStartsWith: tTranslate('starts with', tOpts),\n                            filterOperatorEndsWith: tTranslate('ends with', tOpts),\n                            filterOperatorIsEmpty: tTranslate('is empty', tOpts),\n                            filterOperatorIsNotEmpty: tTranslate('is not empty', tOpts),\n                            filterOperatorAfter: tTranslate('is after', tOpts),\n                            filterOperatorOnOrAfter: tTranslate('is on or after', tOpts),\n                            filterOperatorBefore: tTranslate('is before', tOpts),\n                            filterOperatorOnOrBefore: tTranslate('is on or before', tOpts),\n                            toolbarFiltersTooltipHide: tTranslate('Hide filters', tOpts),\n                            toolbarFiltersTooltipShow: tTranslate('Show filters', tOpts),\n\n                            //filter textfield labels\n                            headerFilterOperatorContains: tTranslate('contains', tOpts),\n                            headerFilterOperatorEquals: tTranslate('equals', tOpts),\n                            headerFilterOperatorStartsWith: tTranslate('starts with', tOpts),\n                            headerFilterOperatorEndsWith: tTranslate('ends with', tOpts),\n                            headerFilterOperatorIsEmpty: tTranslate('is empty', tOpts),\n                            headerFilterOperatorIsNotEmpty: tTranslate('is not empty', tOpts),\n                            headerFilterOperatorAfter: tTranslate('is after', tOpts),\n                            headerFilterOperatorOnOrAfter: tTranslate('is on or after', tOpts),\n                            headerFilterOperatorBefore: tTranslate('is before', tOpts),\n                            headerFilterOperatorOnOrBefore: tTranslate('is on or before', tOpts),\n                            headerFilterOperatorIs: tTranslate('is', tOpts),\n                            'headerFilterOperator=': tTranslate('equals', tOpts),\n                            'headerFilterOperator!=': tTranslate('does not equal', tOpts),\n                            'headerFilterOperator>': tTranslate('greater than', tOpts),\n                            'headerFilterOperator>=': tTranslate('greater than or equal to', tOpts),\n                            'headerFilterOperator<': tTranslate('less than', tOpts),\n                            'headerFilterOperator<=': tTranslate('less than or equal to', tOpts),\n                            columnsManagementSearchTitle: tTranslate('Search', tOpts),\n                            columnsManagementNoColumns: tTranslate('No columns', tOpts),\n                            paginationRowsPerPage: tTranslate('Rows per page', tOpts),\n                            paginationDisplayedRows: ({ from, to, count }) => `${from}–${to} ${tTranslate('of', tOpts)} ${count}`,\n                            toolbarQuickFilterLabel: tTranslate('Search', tOpts),\n                            toolbarFiltersTooltipActive: (count) => {\n                                const key = count === 1 ? 'active filter' : 'active filters';\n                                return `${count} ${tTranslate(key, tOpts)}`;\n                            },\n                            columnHeaderSortIconLabel: tTranslate('Sort', tOpts),\n                            filterPanelOperatorAnd: tTranslate('And', tOpts),\n                            filterPanelOperatorOr: tTranslate('Or', tOpts),\n                            noResultsOverlayLabel: tTranslate('No results found', tOpts),\n                            columnHeaderFiltersTooltipActive: (count) => {\n                                const key = count === 1 ? 'active filter' : 'active filters';\n                                return `${count} ${tTranslate(key, tOpts)}`;\n                            },\n                            detailPanelToggle: tTranslate('Detail panel toggle', tOpts),\n                            checkboxSelectionHeaderName: tTranslate('Checkbox selection', tOpts),\n                            columnsManagementShowHideAllText: tTranslate('Show/Hide all', tOpts),\n                            noColumnsOverlayLabel: tTranslate('No columns', tOpts),\n                            noColumnsOverlayManageColumns: tTranslate('Manage columns', tOpts),\n                            columnsManagementReset: tTranslate('Reset', tOpts),\n                            groupColumn: (name) => `${tTranslate('Group by', tOpts)} ${name}`,\n                            unGroupColumn: (name) => `${tTranslate('Ungroup', tOpts)} ${name}`,\n                            footerRowSelected: (count) => {\n                                const key = count === 1 ? 'item selected' : 'items selected';\n                                return `${count.toLocaleString()} ${tTranslate(key, tOpts)}`;\n                            }\n                        }}\n                        showToolbar={true}\n                        columnHeaderHeight={columnHeaderHeight}\n                    />\n                </Box>\n                {errorMessage && (<DialogComponent open={!!errorMessage} onConfirm={clearError} onCancel={clearError} title=\"Info\" hideCancelButton={true} > {errorMessage}</DialogComponent>)\n                }\n                {isDeleting && !errorMessage && (\n                    <DialogComponent open={isDeleting} onConfirm={handleDelete} onCancel={() => setIsDeleting(false)} title=\"Confirm Delete\">\n                        <DeleteContentText>\n                            {tTranslate(\"Are you sure you want to delete\", tOpts)} {record.name && <Tooltip style={{ display: \"inline\" }} title={record.name} arrow>\n                                {record.name.length > 30 ? `${record.name.slice(0, 30)}...` : record.name}\n                            </Tooltip>} ?\n                        </DeleteContentText>\n                    </DialogComponent>)}\n                {showAddConfirmation && (\n                    <DialogComponent\n                        open={showAddConfirmation}\n                        onConfirm={handleAddRecords}\n                        onCancel={() => setShowAddConfirmation(false)}\n                        title=\"Confirm Add\"\n                    >\n                        <DeleteContentText>\n                            {tTranslate(\"Are you sure you want to add\", tOpts)} {selectedSet.current.size} {tTranslate(\"records\", { count: selectedSet.current.size, ...tOpts })}?\n                        </DeleteContentText>\n                    </DialogComponent>\n                )}\n            </Box >\n        </>\n    );\n}, areEqual);\n\nexport default GridBase;","import React, { useMemo } from 'react';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport { FormHelperText } from '@mui/material';\nimport Checkbox from '@mui/material/Checkbox';\n\nconst Field = ({ column, field, formik, otherProps }) => {\n    const handleChange = (event) => {\n        formik.setFieldValue(field, event.target.checked);\n    }\n    const checked = useMemo(()=> formik.values[field] ?? !!column.defaultValue, [formik, column]);\n    const isDisabled = typeof column.readOnly === 'function' ? column.readOnly(formik) : column.readOnly; \n    return <div key={field}>\n        <FormControlLabel\n            control={\n                <Checkbox\n                    {...otherProps}\n                    name={field}\n                    disabled={isDisabled || column.disabled === true}\n                    checked={checked}\n                    onChange={handleChange}\n                    onBlur={formik.handleBlur}\n                    defaultChecked={column.defaultValue}\n                />\n            }\n        />\n        <FormHelperText error={formik.touched[field] && Boolean(formik.errors[field])} >{formik.touched[field] && formik.errors[field]}</FormHelperText>\n    </div>\n}\n\nexport default Field;","import TextField from '@mui/material/TextField';\nimport React from 'react';\nimport { useTheme } from '@mui/material';\n\nconst field = ({ column, field, formik, otherProps }) => {\n    const theme = useTheme();\n    const rows = column.rows || (column.multiline ? 5 : 1);\n    return <TextField\n        type=\"text\"\n        variant={column.variant || \"standard\"}\n        InputProps={{\n            readOnly: column.readOnly === true,\n            sx: column.readOnly\n                ? { backgroundColor: theme.palette?.action?.disabled } // Light grey background for read-only inputs\n                : undefined\n        }}\n        key={field}\n        required={column.required}\n        multiline={column.multiline}\n        rows={rows}\n        fullWidth\n        name={field}\n        value={formik.values[field]}\n        onChange={formik.handleChange}\n        onBlur={formik.handleBlur}\n        error={formik.touched[field] && Boolean(formik.errors[field])}\n        helperText={formik.touched[field] && formik.errors[field]}\n        autoComplete={column.autoComplete}\n        {...otherProps}\n        defaultValue={column.defaultValue}\n    />;\n};\n\nexport default field;","import { useEffect, useState } from 'react';\n\nfunction useDebounce(value, delay) {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(() => {\n        // Set a timer to update the debounced value\n        const timer = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        // Cleanup function to cancel the timer if the value changes again before the delay\n        return () => {\n            clearTimeout(timer);\n        };\n    }, [value, delay]); // Rerun effect only if value or delay changes\n\n    return debouncedValue;\n}\n\nexport default useDebounce;\n","import React, { useCallback, useMemo, useState, useEffect } from 'react';\nimport StringField from './string';\nimport useDebounce from '../../../hooks/useDebounce';\nimport { useTheme } from '@mui/material';\n\n// Key code constants\nconst DIGIT_START = 47;\nconst DIGIT_END = 58;\nconst ARROW_LEFT = 37;\nconst ARROW_RIGHT = 40;\n\n// Control key codes\nconst CONTROL_KEYS = [8, 46, 9, 27, 13]; // backspace, delete, tab, escape, enter\nconst resolveValue = ({ value, state }) => {\n    if (typeof value === 'string' && value.startsWith('{') && value.endsWith('}')) {\n        const key = value.slice(1, -1); // Extract key inside the braces\n        return state[key] !== undefined ? state[key] : value;\n    }\n    return value;\n};\nconst Field = ({ column, otherProps, formik, field, ...props }) => {\n    const { min, max } = column;\n    const theme = useTheme();\n    const [inputValue, setInputValue] = useState(formik.values[field]);\n    const debouncedValue = useDebounce(inputValue, 400);\n\n    const resolvedMin = useMemo(\n        () => Math.max(0, resolveValue({ value: min, state: formik.values })),\n        [min, formik.values]\n    );\n    const resolvedMax = useMemo(\n        () => resolveValue({ value: max, state: formik.values }),\n        [max, formik.values]\n    );\n\n    // Update formik when debounced value changes\n    useEffect(() => {\n        if (debouncedValue !== formik.values[field]) {\n            const numValue = Number(debouncedValue);\n            if (isNaN(numValue)) {\n                return;\n            }\n            if (numValue < resolvedMin) {\n                formik.setFieldValue(field, resolvedMin);\n            } else if (resolvedMax && numValue > resolvedMax) {\n                formik.setFieldValue(field, resolvedMax);\n            } else {\n                formik.setFieldValue(field, numValue);\n            }\n        }\n    }, [debouncedValue, field, resolvedMin, resolvedMax]);\n\n    const { onBlur } = props;\n    otherProps = {\n        InputProps: {\n            inputProps: {\n                min: resolvedMin,\n                max: resolvedMax,\n                readOnly: column.readOnly === true,\n                onKeyDown: (event) => {\n                    const keyCode = event.which ? event.which : event.keyCode;\n                    // Allow: backspace, delete, tab, escape, enter, arrows\n                    if (CONTROL_KEYS.includes(keyCode) || (keyCode >= ARROW_LEFT && keyCode <= ARROW_RIGHT)) {\n                        return;\n                    }\n                    // Allow number keys (0-9)\n                    if (!(keyCode > DIGIT_START && keyCode < DIGIT_END)) {\n                        event.preventDefault();\n                    }\n                },\n                sx: column.readOnly\n                    ? { backgroundColor: theme.palette?.action?.disabled } // Light grey background for read-only inputs\n                    : undefined,\n            }\n        },\n        type: 'number',\n        ...otherProps,\n        onChange: (event) => {\n            setInputValue(event.target.value);\n            if (typeof onBlur === \"function\") {\n                onBlur(event);\n            }\n        },\n    };\n\n    return <StringField column={column} otherProps={otherProps} formik={formik} field={field} {...props} />;\n};\n\nexport default Field;\n","import React from 'react';\nimport StringField from './string';\nimport { IconButton, InputAdornment } from '@mui/material';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\n\nconst Field = ({ otherProps, ...props }) => {\n\tconst [showPassword, setShowPassword] = React.useState(false);\n\tconst handleClickShowPassword = () => setShowPassword((show) => !show);\n\n\tconst handleMouseDownPassword = (event) => {\n\t\tevent.preventDefault();\n\t};\n    const { readOnly = false, disabled = false } = props.column || {};\n    otherProps = {\n\t\ttype: showPassword ? 'text' : 'password',\n\t\tInputProps: {\n\t\t\treadOnly,\n\t\t\tdisabled,\n\t\t\tendAdornment: (\n\t\t\t\t<InputAdornment position=\"end\">\n\t\t\t\t\t<IconButton\n                        aria-label=\"toggle password visibility\"\n                        onClick={handleClickShowPassword}\n                        onMouseDown={handleMouseDownPassword}\n                        edge=\"end\"\n                        disabled={disabled}\n                        readOnly={readOnly}\n                        size=\"large\">\n\t\t\t\t\t\t{showPassword ? <VisibilityOffIcon /> : <VisibilityIcon />}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</InputAdornment>\n\t\t\t)\n\t\t},\n        ...otherProps\n    }\n    return <StringField otherProps={otherProps} {...props} />\n}\n\nexport default Field;","import React from 'react';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport dayjs from 'dayjs';\nimport { useStateContext } from '../../useRouter/StateProvider';\n\nconst Field = ({ column, field, formik, otherProps, fieldConfigs = {}, mode }) => {\n    const isDisabled = mode !== 'copy' && fieldConfigs.disabled;\n    const { systemDateTimeFormat, stateData } = useStateContext(); //provider\n    return <DatePicker\n        {...otherProps}\n        variant=\"standard\"\n        readOnly={column?.readOnly === true}\n        key={field}\n        fullWidth\n        format={systemDateTimeFormat(true, false, stateData.dateTime)}\n        name={field}\n        value={dayjs(formik.values[field])}\n        onChange={(value) => {\n            const adjustedDate = dayjs(value).hour(12);\n            const isoString = adjustedDate.toISOString();\n            formik.setFieldValue(field, isoString);\n        }}\n        onBlur={formik.handleBlur}\n        helperText={formik.touched[field] && formik.errors[field]}\n        minDate={(column.min ? dayjs(column.min) : null)}\n        maxDate={(column.max ? dayjs(column.max) : null)}\n        disabled={isDisabled}\n        slotProps={{ textField: { fullWidth: true, helperText: formik.errors[field], variant: \"standard\" } }}\n    />\n\n}\n\nexport default Field;","import React from 'react';\nimport { DateTimePicker } from '@mui/x-date-pickers/DateTimePicker';\nimport dayjs from 'dayjs';\nimport { useStateContext } from '../../useRouter/StateProvider'\n\nconst Field = ({ column, field, formik, otherProps }) => {\n    const { systemDateTimeFormat, stateData } = useStateContext();\n    return <DateTimePicker\n        {...otherProps}\n        variant=\"standard\"\n        readOnly={column?.readOnly === true}\n        key={field}\n        fullWidth\n        format={systemDateTimeFormat(false, false, stateData.dateTime)}\n        name={field}\n        value={dayjs(formik.values[field])}\n        onChange={(value) => formik.setFieldValue(field, value)}\n        onBlur={formik.handleBlur}\n        helperText={formik.touched[field] && formik.errors[field]}\n        minDateTime={(column.min ? dayjs(column.min) : null)}\n        maxDateTime={(column.max ? dayjs(column.max) : null)}\n        slotProps={{ textField: { fullWidth: true, helperText: formik.errors[field], variant: \"standard\" } }}\n    />\n\n}\n\nexport default Field;","import React from 'react';\nimport { TimePicker } from '@mui/x-date-pickers/TimePicker';\nimport dayjs from 'dayjs';\n\nconst field = ({ column, field, formik, otherProps }) => {\n    let inputValue = formik.values[field];\n    if (column.isUtc) {\n        inputValue = dayjs.utc(inputValue).utcOffset(dayjs().utcOffset(), true).format();\n    }\n    return <TimePicker\n        {...otherProps}\n        variant=\"standard\"\n        readOnly={column.readOnly === true}\n        key={field}\n        fullWidth\n        name={field}\n        value={dayjs(inputValue)}\n        onChange={(value) => {\n            if (column.isUtc) {\n                value = (value && value.isValid()) ? value.format('YYYY-MM-DDTHH:mm:ss') + '.000Z' : null;\n            }\n            return formik.setFieldValue(field, value);\n        }}\n        onBlur={formik.handleBlur}\n        helperText={formik.touched[field] && formik.errors[field]}\n        slotProps={{ textField: { fullWidth: true, helperText: formik.errors[field], variant: \"standard\" } }}\n    />\n}\n\nexport default field;","import { useEffect, useMemo, useState } from 'react';\nimport request from \"../components/Grid/httpRequest\";\nimport { useStateContext } from \"../components/useRouter/StateProvider\";\n\nconst emptyValues = [null, undefined, ''];\n\nexport default function useCascadingLookup({ column, formik, lookups, dependsOn = [], isAutoComplete = false, userSelected, model }) {\n    const [options, setOptions] = useState([]);\n    const { stateData } = useStateContext();\n    const url = stateData?.gridSettings?.permissions?.Url || '';\n    const api = useMemo(() => `${url}${model?.api || ''}`, [url, model?.api]);\n    \n    // Memoize dependency values\n    const dependencyValues = useMemo(() => {\n        const toReturn = {};\n        if (!dependsOn.length) return toReturn;\n        for (const dependency of dependsOn) {\n            toReturn[dependency] = formik.values[dependency];\n        }\n        return toReturn;\n    }, dependsOn.map(dep => formik.values[dep]));\n\n    // Initial options for non-cascading\n    const initialOptions = useMemo(() => {\n        if (dependsOn.length) return [];\n        return typeof column.lookup === 'string' ? lookups[column.lookup] : column.lookup;\n    }, [column.lookup, lookups, dependsOn]);\n\n    const fetchOptions = async () => {\n        if (!column.lookup) return;\n        // Only fetch if all dependencies have values\n        const allDependenciesHaveValues = Object.values(dependencyValues).every(\n            value => !emptyValues.includes(value)\n        );\n        if (!allDependenciesHaveValues) {\n            setOptions([]);\n            return;\n        }\n        let newOptions = [];\n        const requestBody = {\n            lookups: [{ lookup: column.lookup, where: dependencyValues }]\n        };\n        try {\n            const response = await request({ url: `${api}/combo`, params: requestBody, disableLoader: true, jsonPayload: true });\n            if (response && response.success && response.lookups) {\n                newOptions = response.lookups[column.lookup] || [];\n            } else {\n                newOptions = [];\n            }\n        } catch {\n            newOptions = [];\n        } finally {\n            setOptions(newOptions);\n        }\n    };\n\n    // Fetch cascading options\n    useEffect(() => {\n        if (dependsOn.length) {\n            fetchOptions();\n        } else if (isAutoComplete || !userSelected.current) {\n            setOptions(initialOptions);\n        }\n    }, [dependencyValues, initialOptions, api, column.lookup]);\n\n    return options;\n}\n","import React, { useEffect, useMemo, useCallback } from 'react';\nimport { FormHelperText, useTheme } from '@mui/material';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport FormControl from '@mui/material/FormControl';\nimport InputLabel from '@mui/material/InputLabel';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport useCascadingLookup from '../../../hooks/useCascadingLookup';\n\nconst SelectField = React.memo(({ column, field, formik, lookups, dependsOn = [], model, ...otherProps }) => {\n    const userSelected = React.useRef(false);\n    const { placeHolder } = column;\n    const options = useCascadingLookup({ column, formik, lookups, dependsOn, userSelected, model });\n    const theme = useTheme();\n\n    // Memoize input value processing to avoid recalculation on each render\n    const inputValue = useMemo(() => {\n        let value = formik.values[field];\n        \n        // Handle default value selection\n        if (options?.length && !value && !column.multiSelect && \"IsDefault\" in options[0]) {\n            const isDefaultOption = options.find(e => e.IsDefault);\n            if (isDefaultOption) {\n                value = isDefaultOption.value;\n                formik.setFieldValue(field, isDefaultOption.value);\n            }\n        }\n        \n        // Handle multi-select values\n        if (column.multiSelect) {\n            if (!value || value.length === 0) {\n                value = [];\n            } else if (!Array.isArray(value)) {\n                value = value.split(',').map((e) => parseInt(e));\n            }\n        }\n        \n        return value;\n    }, [formik.values[field], options, column.multiSelect, field]);\n\n    // Memoize event handlers to prevent unnecessary re-renders of child components\n    const handleChange = useCallback((event) => {\n        formik.handleChange(event);\n        userSelected.current = true;\n    }, [formik]);\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            error={formik.touched[field] && formik.errors[field]}\n            variant=\"standard\">\n            <InputLabel>{placeHolder ? placeHolder : \"\"}</InputLabel> \n            <Select\n                IconComponent={KeyboardArrowDownIcon}\n                {...otherProps}\n                name={field}\n                multiple={column.multiSelect === true}\n                readOnly={column.readOnly === true}\n                value={`${inputValue}`}\n                onChange={handleChange}\n                onBlur={formik.handleBlur}\n                sx={{\n                    backgroundColor: column.readOnly ? theme.palette?.action?.disabled : ''\n                }}\n            >\n                {Array.isArray(options) && options.map(option => (\n                    <MenuItem key={option.value} value={option.value} disabled={option.isDisabled}>\n                        {option.label}\n                    </MenuItem>\n                ))}\n            </Select>\n            <FormHelperText>{formik.touched[field] && formik.errors[field]}</FormHelperText>\n        </FormControl>\n    );\n});\n\nexport default SelectField;","import { useCallback } from \"react\";\nimport { styled } from \"@mui/material/styles\";\n\nconst DivSpacing = styled('div')({\n    marginTop: '10px',\n    marginBottom: '10px',\n    fontSize: '20px'\n});\nconst TransferField = ({ component, name, formik, field, column }) => {\n    const { value } = formik.getFieldProps(name || field);\n    const { setFieldValue } = formik;\n    const Component = component || column.relation;\n    const onAssignChange = useCallback((value) => {\n        setFieldValue(name || field, value);\n    }, [setFieldValue, name, field]);\n    return (\n        <div>\n            <DivSpacing>{`${\"Available\"} ${column.label}`}</DivSpacing>\n            <Component selected={value} available={true} onAssignChange={onAssignChange} disableCellRedirect={column.disableCellRedirect} readOnly={column.readOnly} />\n            <DivSpacing>{`${\"Assigned\"} ${column.label}`}</DivSpacing>\n            <Component selected={value} assigned={true} onAssignChange={onAssignChange} disableCellRedirect={column.disableCellRedirect} readOnly={column.readOnly} />\n        </div>\n    );\n}\n\nexport default TransferField;","import React from \"react\";\nimport { FormControl, FormControlLabel, FormLabel, Radio, RadioGroup, FormHelperText, useTheme } from \"@mui/material\";\n\nconst Field = ({ field, formik, orientation = \"row\", label, lookups, fieldConfigs={}, mode, ...otherProps }) => {\n    const handleChange = (event) => {\n        formik.setFieldValue(field, event.target.value);\n    }\n\n    const options = lookups ? lookups[otherProps.column.lookup] : [];\n    const theme = useTheme();\n    const isError = formik.touched[field] && Boolean(formik.errors[field]);\n    const isDisabled = mode !== 'copy' && fieldConfigs.disabled;\n    return (\n        <>\n            <FormControl component=\"fieldset\" error={isError}>\n                <FormLabel component=\"legend\">{label}</FormLabel>\n                <RadioGroup\n                    row={orientation === \"row\"}\n                    aria-label={label}\n                    name={field}\n                    value={formik.values[field]}\n                    onChange={handleChange}\n                >\n                    {options?.map((option, index) => (\n                        <FormControlLabel\n                            key={index}\n                            value={option.value}\n                            control={<Radio />}\n                            label={option.label}\n                            disabled={isDisabled}\n                        />\n                    ))}\n                </RadioGroup>\n            </FormControl>\n            {isError && <FormHelperText style={{ color: theme.palette.error.main }}>{formik.errors[field]}</FormHelperText>}\n        </>\n    );\n};\n\nexport default Field;\n","import * as React from 'react';\nimport { FormHelperText } from '@mui/material';\nimport FormControl from '@mui/material/FormControl';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport TextField from '@mui/material/TextField';\nimport useCascadingLookup from '../../../hooks/useCascadingLookup';\n\nconst consts = {\n    limitTags: 5\n}\n\nconst Field = React.memo(({ column, field, formik, lookups, dependsOn = [], fieldConfigs = {}, mode, model, ...otherProps }) => {\n    const options = useCascadingLookup({ column, formik, lookups, dependsOn, model, isAutoComplete: true });\n    let inputValue = formik.values[field] || [];\n    if (!Array.isArray(inputValue)) {\n        inputValue = inputValue.split(\", \").map(Number);\n    }\n    const filteredCombos = options.filter(option => inputValue.includes(option.value)) || [];\n    const isDisabled = mode !== 'copy' && fieldConfigs.disabled;\n    const handleAutoCompleteChange = (_, newValue) => {\n        let toSave = newValue?.map(val => val.value) || [];\n        // multi-select values are stored as array or as comma-separated-string based on dataFormat\n        if (column.dataFormat !== 'array') {\n            toSave = toSave.length ? toSave.join(', ') : '';\n        }\n        formik.setFieldValue(field, toSave);\n    };\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            variant=\"standard\"\n            error={formik.touched[field] && Boolean(formik.errors[field])}\n        >\n            <Autocomplete\n                {...otherProps}\n                multiple\n                id={field}\n                limitTags={column.limitTags || consts.limitTags}\n                options={options || []}\n                getOptionLabel={(option) => option.label || ''}\n                defaultValue={filteredCombos}\n                renderInput={(params) => <TextField {...params} variant=\"standard\" />}\n                onChange={handleAutoCompleteChange}\n                value={filteredCombos}\n                size=\"small\"\n                disabled={isDisabled}\n            />\n            {formik.touched[field] && formik.errors[field] && <FormHelperText>{formik.errors[field]}</FormHelperText>}\n        </FormControl>\n    )\n});\n\nexport default Field;\n\n","import { Avatar, useTheme } from \"@mui/material\";\n\nexport const brandBackgroundColor = '#182eb5';\nexport const brandColor = '#ffffff';\nfunction RenderDayCell({ value }) {\n    const days = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];\n    const dayValues = value.split('');\n\n    const theme = useTheme();\n    return (\n        <div style={{ display: 'flex' }}>\n            {dayValues.map((val, index) => (\n                <Avatar\n                    key={index}\n                    sx={{\n                        backgroundColor: val === '1' ? theme.palette.success.main : brandColor,\n                        color: val === '1' ? 'white' : 'black',\n                        marginRight: '5px',\n                        width: '25px',\n                        height: '25px',\n                        fontSize: '0.65rem',\n                        lineHeight: '25px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        border: \"1px solid grey\"\n                    }}\n                >\n                    {days[index]}\n                </Avatar>\n            ))}\n        </div>\n    );\n}\n\nexport {\n    RenderDayCell\n}","import React from 'react';\nimport { useCallback, useState } from 'react';\nimport { Avatar, FormControl, FormControlLabel, FormHelperText, Radio, RadioGroup, styled, useTheme } from '@mui/material';\nimport {  grey } from '@mui/material/colors';\nimport { brandBackgroundColor } from './CustomRenderCell';\n\n\nconst days = [\n    { label: 'Sunday', value: 0, display: 'S' },\n    { label: 'Monday', value: 1, display: 'M' },\n    { label: 'Tuesday', value: 2, display: 'T' },\n    { label: 'Wednesday', value: 3, display: 'W' },\n    { label: 'Thursday', value: 4, display: 'T' },\n    { label: 'Friday', value: 5, display: 'F' },\n    { label: 'Saturday', value: 6, display: 'S' },\n];\n\nconst CustomAvator = styled(Avatar)(({ theme, isSelected }) => ({\n    width: 34,\n    height: 34,\n    padding: 1,\n    margin: 1,\n    backgroundColor: isSelected ? brandBackgroundColor : '#ffffff',\n    border: `1px solid ${grey[500]}`,\n    color: isSelected ? 'white' : 'black',\n}));\n\nconst DayAvatar = ({ day, onClick, isSelected }) => {\n    return (\n        <CustomAvator\n            key={day.value}\n            onClick={() => onClick(day.value)}\n            isSelected={isSelected}\n            style={{ margin: '4px' }}\n        >\n            {day.display}\n        </CustomAvator>\n    );\n};\nconst DaySelection = ({ name, field, formik, expired }) => {\n    const { setFieldValue } = formik;\n    const { value } = formik.getFieldProps(name || field);\n\n    const isWeekend = '1000001';\n    const isWeekdays = '0111110';\n    const defaultVal = \"0\".repeat(7);\n\n    const [selectedDays, setSelectedDays] = useState(value || defaultVal);\n    const [radioValue, setRadioValue] = useState(() => {\n        if (!value) return '';\n        if (value === isWeekend) return isWeekend;\n        if (value === isWeekdays) return isWeekdays;\n        return 'Custom';\n    });\n    const [presetSelected, setPresetSelected] = useState(false);\n    const onAssignChange = useCallback((newValue) => {\n        if (Array.isArray(newValue)) {\n            let finalValue = defaultVal;\n            for (const val of newValue) {\n                finalValue = finalValue.substring(0, val) + \"1\" + finalValue.substring(val + 1);\n            }\n            setSelectedDays(finalValue);\n            setFieldValue(name || field, finalValue);\n            setPresetSelected(true);\n        } else {\n            let baseValue = presetSelected ? defaultVal : selectedDays;\n            const finalValue = baseValue.slice(0, newValue) + (baseValue[newValue] === \"1\" ? \"0\" : \"1\") + baseValue.slice(newValue + 1);\n            setSelectedDays(finalValue);\n            setFieldValue(name || field, finalValue);\n            setRadioValue('Custom');\n            setPresetSelected(false);\n        }\n    }, [presetSelected, defaultVal, selectedDays, name, field, setFieldValue]);\n    const theme = useTheme();\n    const isError = formik.touched[field] && Boolean(formik.errors[field]);\n    return (\n        <>\n            <FormControl component=\"fieldset\" error={isError}>\n                <RadioGroup\n                    row\n                    name={name || field}\n                    value={radioValue}\n                    onChange={event => {\n                        const val = event.target.value;\n                        setRadioValue(val);\n                        if (val !== 'Custom') {\n                            setSelectedDays(val);\n                            setFieldValue(name || field, val);\n                            setPresetSelected(true);\n                        } else {\n                            setSelectedDays(defaultVal);\n                            setFieldValue(name || field, defaultVal);\n                            setPresetSelected(false);\n                        }\n                    }}\n                >\n                    <FormControlLabel value={isWeekend} control={<Radio />} label={\"Weekends (Sat - Sun)\"} onClick={() => onAssignChange([0, 6])} />\n                    <FormControlLabel value={isWeekdays} control={<Radio />} label={\"Weekdays (Mon - Fri)\"} onClick={() => onAssignChange([1, 2, 3, 4, 5])} />\n                    <FormControlLabel value={'Custom'} control={<Radio />} label={\"Specific days\"} />\n                    {days.map((day, index) => (\n                        <DayAvatar\n                            key={day.value}\n                            day={day}\n                            onClick={() => onAssignChange(index)}\n                            isSelected={radioValue === 'Custom' && selectedDays[index] === \"1\"}\n                            disabled={expired}\n                        />\n                    ))}\n                </RadioGroup>\n            </FormControl>\n            {isError && <FormHelperText style={{ color: theme.palette.error.main }}>{formik.errors[field]}</FormHelperText>}\n        </>\n    );\n};\n\nexport default DaySelection;","import * as React from 'react';\nimport { FormHelperText, useTheme } from '@mui/material';\nimport FormControl from '@mui/material/FormControl';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport TextField from '@mui/material/TextField';\nimport Chip from '@mui/material/Chip';\nimport { useCallback } from 'react';\n\nconst Field = ({ isAdd, column, field, formik, otherProps, fieldConfigs = {}, mode }) => {\n    const theme = useTheme();\n    let inputValue = formik.values[field] || [];\n    if (!Array.isArray(inputValue)) {\n        inputValue = inputValue.split(',').map(item => item.trim());\n    }\n    const isDisabled = React.useMemo(() => {\n        if (mode === 'copy') return true;\n        if (typeof fieldConfigs.disabled !== 'undefined') return fieldConfigs.disabled;\n        if (typeof column.disabled === 'function') return column.disabled({ isAdd, formik });\n        return Boolean(column.disabled);\n    }, [mode, fieldConfigs.disabled, column.disabled]);\n    const fixedOptions = column.hasDefault && !isAdd ? [inputValue[0]] : [];\n\n    const handleAutoCompleteChange = useCallback((e, newValue, action, item = {}) => {\n        const lastElement = newValue.pop()?.trim();\n        if (!newValue.includes(lastElement)) {\n            newValue.push(lastElement);\n        }\n        if (fixedOptions && fixedOptions.includes(item.option) && action === \"removeOption\") {\n            newValue = [item.option];\n        }\n        // multi-select values are stored as array or as comma-separated-string based on dataFormat\n        if (column.dataFormat !== 'array') {\n            newValue = newValue.length ? newValue.join(',') : '';\n        }\n        formik.setFieldValue(field, newValue);\n    },[formik, field]);\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            variant=\"standard\"\n            error={formik.touched[field] && Boolean(formik.errors[field])}\n        >\n            <Autocomplete\n                {...otherProps}\n                multiple\n                id={field}\n                freeSolo={true}\n                value={inputValue}\n                options={[]}\n                renderInput={(params) => (\n                    <TextField \n                        {...params} \n                        variant=\"standard\"\n                        InputProps={{\n                            ...params.InputProps,\n                            sx: {\n                                ...params.InputProps?.sx,\n                                ...(isDisabled && { backgroundColor: theme.palette?.action?.disabled })\n                            }\n                        }}\n                    />\n                )}\n                onChange={handleAutoCompleteChange}\n                size=\"small\"\n                renderTags={(tagValue, getTagProps) =>\n                    tagValue.map((option, index) => {\n                        const { key, ...tagProps } = getTagProps({ index });\n                        return (\n                            <Chip\n                                key={key}\n                                label={option}\n                                {...tagProps}\n                                disabled={fixedOptions.includes(option)}\n                            />\n                        );\n                    })\n                }\n                disabled={isDisabled}\n            />\n            {formik.touched[field] && formik.errors[field] && <FormHelperText>{formik.errors[field]}</FormHelperText>}\n        </FormControl>\n    )\n}\n\nexport default Field;\n\n","import React from 'react';\nimport Box from '@mui/material/Box';\nimport { SimpleTreeView } from '@mui/x-tree-view/SimpleTreeView';\nimport { TreeItem } from '@mui/x-tree-view/TreeItem';\n\n/**\n * Builds a tree structure from a flat array of data.\n * \n * @param {Array<Object>} data - The array of items to build the tree from.\n * @param {string|number} data[].ParentId - The ID of the parent item.\n * @param {string} data[].ParentName - The label for the parent item.\n * @param {string|number} data[].value - The unique value of the item.\n * @param {string} data[].label - The label for the item.\n * @returns {Array<Object>} The tree structure containing parent and child nodes.\n */\nconst buildTree = (data = []) => {\n  const tree = {};\n  data.forEach((item) => {\n    if (item.ParentId && tree[item.ParentId]) {\n      tree[item.ParentId].children.push({\n        value: item.value?.toString(),\n        label: item.label\n      });\n    } else {\n      tree[item.ParentId] = {\n        label: item.ParentName,\n        value: \"Parent\" + item.ParentId.toString(),\n        children: [{\n          value: item.value?.toString(),\n          label: item.label\n        }]\n      };\n    }\n  });\n  return Object.values(tree);\n};\n\n/**\n * Renders a tree view component with checkboxes for selection.\n * \n * @param {Object} props - The properties passed to the component.\n * @param {Object} props.column - The column metadata, including lookup information.\n * @param {string} props.field - The name of the field in the form to bind.\n * @param {Object} props.formik - The Formik instance for managing form state.\n * @param {Object} props.lookups - The lookup data for populating tree items.\n * @param {Array<Object>} props.data - Additional data for the tree.\n * @param {Object} props.otherProps - Other props for customization.\n * @param {Object} props.model - The model configuration.\n * @param {Object} props.fieldConfigs - Configuration for the field, including disabled state.\n * @param {string} props.mode - The mode of the form, such as 'edit' or 'copy'.\n * @returns {JSX.Element} The rendered tree view component.\n */\nexport default function treeCheckBox({ column, field, formik, lookups, fieldConfigs, mode }) {\n  const options = lookups ? lookups[column.lookup] : [];\n  const tree = buildTree(options);\n  const inputValue = formik.values[field]?.length ? formik.values[field].split(\", \") : [];\n  let isDisabled;\n  if (mode !== 'copy') {\n    isDisabled = fieldConfigs?.disabled;\n  }\n  const handleChange = (_, newValue) => {\n    formik.setFieldValue(field, newValue?.join(', ') || '');\n  };\n  return (\n    <Box sx={{ minHeight: 350 }}>\n      <SimpleTreeView\n        selectedItems={inputValue}\n        onSelectedItemsChange={handleChange}\n        disabled={isDisabled}\n        multiSelect\n        checkboxSelection\n      >\n        {tree.map((node) => (\n          <TreeItem key={node.value} itemId={node.value} label={node.label}>\n            {node.children.map((child) => (\n              <TreeItem key={child.value} itemId={child.value} label={child.label} />\n            ))}\n          </TreeItem>\n        ))}\n      </SimpleTreeView>\n    </Box>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Box, RadioGroup, FormControlLabel, Radio, TextField, Button, Typography, Tooltip, CircularProgress } from \"@mui/material\";\nimport { useRouter, useStateContext } from \"../../useRouter/StateProvider\";\nimport { transport } from \"../../Grid/httpRequest\";\nimport { useSnackbar } from \"../../SnackBar\";\nimport utils from \"../../utils\";\n\nconst consts = { maxLength: 500 }; // Default max length for document link\nconst { errorMapping } = utils;\nconst MB = 1024 * 1024;\nfunction FileUpload({ column, field, formik }) {\n    const inputValue = formik.values[field] || \"\";\n    const { stateData } = useStateContext();\n    const { maxSize, formats } = column;\n    const { uploadApi, mediaApi, Url } = stateData?.gridSettings?.permissions;\n    const [formState, setFormState] = useState({\n        isExternal: \"no\",\n        selectedFile: null\n    });\n    const [loading, setLoading] = useState(false); // Add loading state\n    const snackbar = useSnackbar();\n    const { getParams, useParams } = useRouter();\n    const { associationId } = useParams() || getParams;\n    const id = associationId?.split(\"-\")[0] || 1;\n\n    const handleRadioChange = (event) => {\n        const isExternal = event.target.value;\n        setFormState({\n            ...formState,\n            isExternal,\n            selectedFile: null\n        });\n        formik.setFieldValue(field, formik.values[field]); // Reset form field value\n    };\n\n    const handleInputChange = (e) => {\n        formik.setFieldValue(field, e.target.value);\n    };\n\n    const handleFileChange = (event) => {\n        const selectedFile = event.target.files[0];\n        if (!selectedFile) return;\n        if (maxSize && selectedFile.size > maxSize * MB) {\n            snackbar.showError(`File size exceeds the maximum limit of ${maxSize} MB.`);\n            return;\n        }\n        if (Array.isArray(formats) && !formats.includes(selectedFile.type)) {\n            snackbar.showError(`Invalid file format. Allowed formats: ${formats.join(\", \")}.`);\n            return;\n        }\n        setFormState((prev) => ({ ...prev, selectedFile }));\n    };\n\n    const handleFileUpload = async () => {\n        if (!formState.selectedFile) return;\n\n        setLoading(true); // Start loading\n        try {\n            const formData = new FormData();\n            formData.append(\"file\", formState.selectedFile);\n            formData.append(\"DocumentGroupId\", formik.values.DocumentGroupId); // Doc group ID\n            formData.append(\"AssociationId\", id); // Association ID\n            const response = await transport({\n                method: 'POST',\n                url: uploadApi,\n                data: formData,\n                headers: { 'Content-Type': 'multipart/form-data' },\n                credentials: 'include'\n            });\n            const data = response.data || {};\n            if (!data.success) {\n                snackbar.showError(data.message || \"Upload failed\");\n                return;\n            }\n            const fileUrl = mediaApi + '/' + data.filePath;\n            formik.setFieldValue(field, fileUrl);\n        } catch (error) {\n            const statusCode = (error.message.match(/status code (\\d{3})/) || [])[1];\n            snackbar.showError(errorMapping[statusCode]);\n        } finally {\n            setLoading(false); // Stop loading\n        }\n    };\n\n    const host = new URL(Url, window.location.origin).hostname.toLowerCase();\n    React.useEffect(() => {\n        setFormState({\n            ...formState,\n            isExternal: !inputValue.toLowerCase().includes(host) ? \"yes\" : \"no\"\n        });\n    }, [inputValue, setFormState]);\n\n    const isLengthExceeded = formik.values[field]?.length > (column.max || consts.maxLength);\n    const colorScheme = isLengthExceeded ? 'red' : '';\n\n    return (\n        <Box>\n            {/* Radio group */}\n            <Box sx={{ display: \"flex\", alignItems: \"center\", marginBottom: 2 }}>\n                <Typography variant=\"body1\" sx={{ width: \"150px\", marginRight: 2 }}>\n                    External Link?\n                </Typography>\n                <RadioGroup\n                    row\n                    value={formState.isExternal}\n                    onChange={handleRadioChange}\n                    aria-label=\"is-external-link\"\n                    name=\"is-external-link\"\n                >\n                    <FormControlLabel value=\"yes\" control={<Radio />} label=\"Yes\" />\n                    <FormControlLabel value=\"no\" control={<Radio />} label=\"No\" />\n                </RadioGroup>\n            </Box>\n\n            {/* Document link */}\n            <Box sx={{ display: \"flex\", alignItems: \"center\", marginBottom: 2 }}>\n                <Typography variant=\"body1\" sx={{ width: \"150px\", marginRight: 2 }}>\n                    Document Link\n                </Typography>\n                <Box sx={{ flex: 1, display: \"flex\", flexDirection: \"column\" }}>\n                    {formState.isExternal === \"yes\" ? (\n                        <TextField\n                            fullWidth\n                            value={inputValue}\n                            sx={{\n                                \"& .MuiOutlinedInput-root\": {\n                                    \"& fieldset\": { borderColor: colorScheme },\n                                    \"&.Mui-focused fieldset\": { borderColor: colorScheme },\n                                    \"&:hover fieldset\": { borderColor: colorScheme }\n                                }\n                            }}\n                            onChange={handleInputChange}\n                            placeholder=\"Enter external link\"\n                        />\n                    ) : (\n                        <TextField\n                            fullWidth\n                            value={inputValue}\n                            placeholder=\"Link autopopulated once uploaded\"\n                            InputProps={{ readOnly: true }}\n                        />\n                    )}\n                    {isLengthExceeded && <Typography sx={{ color: 'red' }}>Maximum allowed length for the document link is {column.max} characters.</Typography>}\n                </Box>\n            </Box>\n\n            {/* File upload */}\n            {formState.isExternal === \"no\" && (\n                <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 2 }}>\n                    <Button\n                        variant=\"outlined\"\n                        component=\"label\"\n                        disabled={loading} // Disable while loading\n                    >\n                        Choose File\n                        <input type=\"file\" hidden onChange={handleFileChange} />\n                    </Button>\n                    {formState.selectedFile && (\n                        <Tooltip title={formState.selectedFile.name} arrow>\n                            <Typography variant=\"body2\">\n                                {formState.selectedFile.name.length > 20\n                                    ? `${formState.selectedFile.name.substring(0, 20)}...`\n                                    : formState.selectedFile.name}\n                            </Typography>\n                        </Tooltip>\n                    )}\n\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={handleFileUpload}\n                        disabled={!formState.selectedFile || loading} // Disable while loading\n                    >\n                        {loading ? <CircularProgress size={24} color=\"inherit\" /> : \"Upload File\"}\n                    </Button>\n                </Box>\n            )}\n        </Box>\n    );\n}\n\nexport default FileUpload;\n","import * as React from 'react';\nimport FormControl from '@mui/material/FormControl';\nimport Input from '@mui/material/Input';\nimport Typography from '@mui/material/Typography';\nimport useDebounce from '../../../hooks/useDebounce';\n\nconst Field = ({ field, formik }) => {\n    const [state, setState] = React.useState({});\n    const debouncedState = useDebounce(state, 300);\n\n    React.useEffect(() => {\n        if (!formik.values[field]) return;\n        try {\n            const inputJSON = JSON.parse(formik.values[field]);\n            setState(inputJSON);\n        } catch (e) {\n            setState({});\n        }\n    }, [formik.values[field]]);\n\n    // Update formik when debounced state changes\n    React.useEffect(() => {\n        const nextValue = JSON.stringify(debouncedState);\n        if (formik.values[field] !== nextValue) {\n            formik.setFieldValue(field, nextValue);\n        }\n    }, [debouncedState, field, formik, formik.values[field]]);\n\n    const handleChange = (key, value) => {\n        const updatedState = { ...state, [key]: value };\n        setState(updatedState);\n    };\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            variant=\"standard\"\n            error={formik.touched[field] && Boolean(formik.errors[field])}\n            style={{ marginBottom: '1rem' }}\n        >\n            {Object.keys(state).map((key) => (\n                <div\n                    key={key}\n                    style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        marginBottom: '0.5rem'\n                    }}\n                >\n                    <Typography variant=\"body1\" sx={{ width: \"180px\", marginRight: 2 }}>\n                        {key}:\n                    </Typography>\n                    <Input\n                        id={key}\n                        name={key}\n                        value={state[key]}\n                        onChange={(e) => handleChange(key, e.target.value)}\n                        fullWidth\n                        style={{ flex: 2 }}\n                    />\n                </div>\n            ))}\n        </FormControl>\n    );\n};\n\nexport default Field;\n","import * as React from 'react';\nimport Box from '@mui/material/Box';\nimport BooleanField from './fields/boolean';\nimport StringField from './fields/string';\nimport NumberField from './fields/number';\nimport PasswordField from './fields/password';\nimport DateField from './fields/date';\nimport DateTimeField from './fields/dateTime';\nimport TimeField from './fields/time';\nimport SelectField from './fields/select';\nimport GridTransfer from './fields/grid-transfer';\nimport Grid from '@mui/material/Grid';\nimport RadioField from './fields/radio';\nimport AutocompleteField from './fields/autocomplete';\nimport Stepper from '@mui/material/Stepper';\nimport Step from '@mui/material/Step';\nimport StepLabel from '@mui/material/StepLabel';\nimport Button from '@mui/material/Button';\nimport DaySelection from './fields/dayRadio';\nimport { Typography } from '@mui/material';\nimport { ActiveStepContext } from './Form';\nimport styled from '@emotion/styled';\nimport ChipInput from './fields/chipInput';\nimport TreeCheckbox from './fields/treeCheckBox';\nimport FileUpload from './fields/fileUpload';\nimport JSONInput from './fields/jsonInput';\nimport utils from '../utils';\n\nconst fieldMappers = {\n    \"boolean\": BooleanField,\n    \"select\": SelectField,\n    \"string\": StringField,\n    \"number\": NumberField,\n    \"password\": PasswordField,\n    \"date\": DateField,\n    \"dateTime\": DateTimeField,\n    \"time\": TimeField,\n    \"oneToMany\": GridTransfer,\n    \"radio\": RadioField,\n    \"autocomplete\": AutocompleteField,\n    \"dayRadio\": DaySelection,\n    \"email\": StringField,\n    \"chipInput\": ChipInput,\n    \"treeCheckbox\": TreeCheckbox,\n    \"fileUpload\": FileUpload,\n    \"json\": JSONInput\n};\n\nconst gridContainerStyle = { paddingTop: \"2.5px\", paddingBottom: \"2.5px\" };\n\nconst ImportantSpan = styled('span')({\n  color: 'red !important',\n});\n\nconst RenderSteps = ({ tabColumns, model, formik, data, onChange, combos, lookups, fieldConfigs, mode, handleSubmit }) => {\n    const [skipped, setSkipped] = React.useState(new Set());\n\n    const { activeStep, setActiveStep } = React.useContext(ActiveStepContext);\n\n    const skipSteps = {};\n    for (let index = 0, len = model.columns.length; index < len; index++) {\n        const { field, skip } = model.columns[index];\n        if (skip) {\n            skipSteps[skip.step] = formik.values[field];\n        }\n    }\n\n    const isStepSkipped = (step) => {\n        return skipped.has(step) || skipSteps[step];\n    };\n\n    const isLastStep = () => {\n        for (let nextStep = activeStep + 1; nextStep < tabColumns.length; nextStep++) {\n            if (!isStepSkipped(nextStep)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    const handleNext = () => {\n        let nextStep = activeStep + 1;\n        while (skipSteps[nextStep]) {\n            nextStep++;\n        }\n\n        setSkipped((prevSkipped) => new Set(prevSkipped).add(activeStep));\n\n        if (nextStep >= tabColumns.length || isLastStep()) {\n            handleSubmit();\n        } else {\n            setActiveStep(nextStep);\n        }\n    };\n\n    const handleBack = () => {\n        let prevStep = activeStep - 1;\n\n        while (skipSteps[prevStep] && prevStep > 0) {\n            prevStep--;\n        }\n        setActiveStep(prevStep);\n    };\n\n    if (!tabColumns?.length) {\n        return null;\n    }\n\n    const currentStep = tabColumns[activeStep];\n    return (\n        <>\n            <Stepper activeStep={activeStep} sx={{ marginBottom: '20px' }}>\n                {tabColumns.map(({ title, key }, index) => {\n                    return (\n                        <Step key={key} completed={isStepSkipped(index)}>\n                            <StepLabel>\n                                <Typography sx={{ fontSize: '20px' }}>{title}</Typography>\n                            </StepLabel>\n                        </Step>\n                    );\n                })}\n            </Stepper>\n            <React.Fragment>\n                <RenderColumns formElements={currentStep.items} model={model} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} fieldConfigs={fieldConfigs} mode={mode} />\n                <Box sx={{ display: 'flex', flexDirection: 'row', pt: 2, mr: 2 }}>\n                    {activeStep !== 0 ? <Button color=\"inherit\" disabled={activeStep === 0} onClick={handleBack} variant=\"contained\" sx={{ mr: 2 }}> {'Back'}</Button> : null}\n                    <Button onClick={handleNext} variant=\"contained\">{isLastStep() ? \"Finish\" : \"Next\"}</Button>\n                </Box>\n            </React.Fragment>\n        </>\n    );\n};\n\nconst RenderColumns = ({ formElements, model, formik, data, onChange, combos, lookups, fieldConfigs, mode, isAdd }) => {\n    if (!formElements?.length) {\n        return null;\n    }\n    return (\n        <>\n            {\n                formElements.map(({ Component, column, field, label, otherProps }, key) => {\n                    const isGridComponent = typeof column.relation === 'function';\n                    return (\n                        <Grid container spacing={2} key={key} sx={{ marginTop: \"1rem\", marginBottom: \"1rem\" }} alignItems={isGridComponent ? \"flex-start\" : \"center\"}>\n                            {column?.showLabel !== false ?\n                                <Grid size={{ xs: 3 }} sx={gridContainerStyle}>\n                                    <Typography sx={{ fontSize: \"16px\", fontWeight: \"bold\" }}>{column.label || field}: {column.required && <ImportantSpan>*</ImportantSpan>}</Typography>\n                                </Grid>\n                                : null\n                            }\n                            <Grid size={{ xs: isGridComponent ? 12 : 9 }} sx={gridContainerStyle}>\n                                <Component isAdd={isAdd} model={model} fieldConfigs={fieldConfigs[field]} mode={mode} column={column} field={field} label={label} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} {...otherProps} />\n                            </Grid>\n                        </Grid >\n                    );\n                })\n            }\n        </>\n    );\n};\n\nconst getFormConfig = function ({ columns, tabs = {}, id, searchParams }) {\n    const formElements = [], tabColumns = {};\n    for (const tab in tabs) {\n        tabColumns[tab] = [];\n    }\n    for (const column of columns) {\n        const fieldType = column.type;\n        if (column.label === null) { /* If the field should not be shown in form mode, specify label as null */\n            continue;\n        }\n        const { field, label, tab } = column;\n        const otherProps = {};\n        if (column.options) {\n            otherProps.options = column.options;\n        }\n        if (column.dependsOn) {\n            otherProps.dependsOn = column.dependsOn;\n        }\n        const Component = fieldMappers[fieldType];\n        if (!Component || (column.hideInAddGrid && id === '0')) {\n            continue;\n        }\n\n        const target = tab && tabs[tab] ? tabColumns[tab] : formElements;\n        target.push({ Component, field, label, column: { ...column, readOnly: searchParams.has('showRelation') || column.readOnly }, otherProps });\n    }\n    const tabsData = [];\n    for (const tabColumn in tabColumns) {\n        tabsData.push({ key: tabColumn, title: tabs[tabColumn], items: tabColumns[tabColumn] });\n    }\n    return { formElements, tabColumns: tabsData };\n};\n\nconst FormLayout = ({ model, formik, data, combos, onChange, lookups, id: displayId, fieldConfigs, mode, handleSubmit }) => {\n    const isAdd = utils.emptyIdValues.includes(displayId);\n    const { formElements, tabColumns } = React.useMemo(() => {\n        const showTabs = model.formConfig?.showTabbed;\n        const searchParams = new URLSearchParams(window.location.search);\n        const { formElements, tabColumns } = getFormConfig({ columns: model.columns, tabs: showTabs ? model.tabs : {}, id: displayId, searchParams });\n        return { formElements, tabColumns, showTabs: showTabs && tabColumns.length > 0 };\n    }, [model]);\n    return (\n        <div>\n            <RenderColumns isAdd={isAdd} formElements={formElements} model={model} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} fieldConfigs={fieldConfigs} mode={mode} />\n            <div style={{ marginTop: '20px' }}>\n                <RenderSteps tabColumns={tabColumns} model={model} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} fieldConfigs={fieldConfigs} mode={mode} handleSubmit={handleSubmit} />\n            </div>\n        </div>\n    );\n};\n\nexport {\n    BooleanField,\n    StringField,\n    NumberField,\n    PasswordField,\n    DateField,\n    TimeField,\n    SelectField,\n    GridTransfer,\n    fieldMappers\n};\n\nexport default FormLayout;\n","import React, {\n  memo,\n  useState\n} from \"react\";\nimport Tab from \"@mui/material/Tab\";\nimport Box from \"@mui/material/Box\";\nimport Tabs from '@mui/material/Tabs';\nimport { UiModel } from \"../Grid/ui-models\";\n\nfunction CustomTabPanel(props) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`\n  };\n}\n\n/**\n * Memoized ChildGrid Component\n * @param {Object} params - Parameters for rendering the child grid\n * @param {string} params.relation - Name of the related model\n * @param {Object} params.parentFilters - Filters to apply to the parent\n * @param {Object} params.parent - Parent data\n * @param {Object} params.where - Conditions for the grid\n * @param {Array} params.models - List of available models\n */\nconst ChildGrid = memo(({ relation, parentFilters, parent, where, models, readOnly }) => {\n  const modelConfigOfChildGrid = models.find(({ name }) => name === relation);\n  if (!modelConfigOfChildGrid) return null;\n  const config = { ...modelConfigOfChildGrid, hideBreadcrumb: true };\n  const ChildModel = config instanceof UiModel ? config : new UiModel(config);\n  if (!ChildModel) return null;\n\n  return (\n    <ChildModel.ChildGrid\n      readOnly={readOnly}\n      parentFilters={parentFilters}\n      parent={parent}\n      model={config}\n      where={where}\n      isChildGrid={true}\n    />\n  );\n});\n\n/**\n * Relations component using MUI Tabs\n * Renders a tab for each relation, and a ChildGrid in each panel\n */\nconst Relations = React.memo(({ relations, parent, where = [], models, relationFilters, readOnly }) => {\n  const [tabIndex, setTabIndex] = useState(0);\n\n  const handleChange = (_, newValue) => {\n    setTabIndex(newValue);\n  };\n\n  return (\n    <Box sx={{ width: '100%' }}>\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={tabIndex} onChange={handleChange} aria-label=\"relations tabs\">\n          {relations.map((relation, idx) => {\n            const modelConfigOfChildGrid = models.find(({ name }) => name === relation) || {};\n            const label = modelConfigOfChildGrid.listTitle || modelConfigOfChildGrid.title || relation;\n            return (\n              <Tab\n                key={relation}\n                label={label}\n                {...a11yProps(idx)}\n              />\n            );\n          })}\n        </Tabs>\n      </Box>\n      {relations.map((relation, idx) => (\n        <CustomTabPanel value={tabIndex} index={idx} key={relation}>\n          <ChildGrid\n            readOnly={readOnly}\n            relation={relation}\n            key={relation}\n            models={models}\n            parentFilters={relationFilters[relation] || []}\n            parent={parent}\n            where={where}\n          />\n        </CustomTabPanel>\n      ))}\n    </Box>\n  );\n});\n\nexport default Relations;\n","import React from \"react\";\nimport { useFormik } from \"formik\";\nimport { useState, useEffect, createContext, useMemo } from \"react\";\nimport {\n  getRecord,\n  saveRecord,\n  deleteRecord\n} from \"../Grid/crud-helper\";\nimport Button from \"@mui/material/Button\";\nimport Paper from \"@mui/material/Paper\";\nimport Stack from \"@mui/material/Stack\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport Box from \"@mui/material/Box\";\nimport FormLayout from \"./field-mapper\";\nimport { useSnackbar } from \"../SnackBar\";\nimport { DialogComponent } from \"../Dialog\";\nimport { useStateContext, useRouter } from \"../useRouter/StateProvider\";\nimport actionsStateProvider from \"../useRouter/actions\";\nimport PageTitle from \"../PageTitle\";\nimport utils, { getPermissions } from \"../utils\";\nimport Relations from \"./relations\";\nexport const ActiveStepContext = createContext(1);\nconst defaultFieldConfigs = {};\nconst consts = {\n  object: \"object\",\n  function: \"function\",\n  baseData: \"baseData\",\n  string: \"string\",\n  create: \"Create\",\n  copy: \"Copy\",\n  edit: \"Edit\",\n  number: \"number\"\n};\n\nconst Form = ({\n  model,\n  api,\n  models,\n  relationFilters = {},\n  permissions = {},\n  Layout = FormLayout,\n  baseSaveData = {},\n  sx,\n  readOnly,\n  beforeSubmit,\n  deletePromptText\n}) => {\n  const formTitle = model.formTitle || model.title;\n  const { navigate, getParams, useParams, pathname } = useRouter();\n  const { relations = [] } = model;\n  const { dispatchData, stateData } = useStateContext();\n  const params = useParams() || getParams;\n  const { id: idWithOptions = \"\" } = params;\n  const id = idWithOptions.split(\"-\")[0];\n  const searchParams = new URLSearchParams(window.location.search);\n  const baseDataFromParams = searchParams.has(consts.baseData) && searchParams.get(consts.baseData);\n  if (baseDataFromParams) {\n    const parsedData = JSON.parse(baseDataFromParams);\n    if (typeof parsedData === consts.object && parsedData !== null) {\n      baseSaveData = { ...baseSaveData, ...parsedData };\n    }\n  }\n  const [isLoading, setIsLoading] = useState(true);\n  const [data, setData] = useState({});\n  const [lookups, setLookups] = useState(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const snackbar = useSnackbar();\n  const [validationSchema, setValidationSchema] = useState(null);\n  const [activeStep, setActiveStep] = useState(0);\n  const [isDiscardDialogOpen, setIsDiscardDialogOpen] = useState(false);\n  const [deleteError, setDeleteError] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const url = stateData?.gridSettings?.permissions?.Url || '';\n  const fieldConfigs = typeof model.applyFieldConfig === consts.function\n    ? model.applyFieldConfig({ data, lookups })\n    : defaultFieldConfigs;\n  const gridApi = useMemo(() => `${url}${model.api || api || ''}`, [url, model.api, api]);\n  const { mode } = stateData.dataForm;\n  const userData = stateData.getUserData || {};\n  const userDefinedPermissions = {\n    add: true,\n    edit: true,\n    delete: true,\n    ...model.permissions,\n    ...permissions\n  };\n  const { canEdit } = getPermissions({\n    userData,\n    model,\n    userDefinedPermissions\n  });\n  const { hideBreadcrumb = false, navigateBack } = model;\n\n  const handleNavigation = () => {\n    let navigatePath;\n    switch (typeof navigateBack) {\n      case consts.function:\n        navigatePath = navigateBack({ params, searchParams, data });\n        break;\n      case consts.number:\n      case consts.string:\n        navigatePath = navigateBack;\n        break;\n      default:\n        navigatePath = pathname.substring(0, pathname.lastIndexOf(\"/\"));\n        break;\n    }\n    navigate(navigatePath);\n  };\n\n  const isNew = useMemo(() => utils.emptyIdValues.includes(id), [id]);\n\n  const initialValues = useMemo(() => isNew\n    ? { ...model.initialValues, ...data, ...baseSaveData }\n    : { ...baseSaveData, ...model.initialValues, ...data }, [model.initialValues, data, id]);\n\n  useEffect(() => {\n    if (!url) return;\n    setValidationSchema(model.getValidationSchema({ id, snackbar }));\n    const options = idWithOptions.split(\"-\");\n    const params = {\n      api: api || gridApi,\n      model,\n      setError: errorOnLoad\n    };\n    getRecord({\n      ...params,\n      id: options.length > 1 ? options[1] : options[0],\n      setIsLoading,\n      setActiveRecord\n    });\n\n  }, [id, idWithOptions, model, url]);\n\n  const formik = useFormik({\n    enableReinitialize: true,\n    initialValues,\n    validationSchema: validationSchema,\n    validateOnBlur: false,\n    onSubmit: async (values, { resetForm }) => {\n      Object.keys(values).forEach(key => {\n        if (typeof values[key] === consts.string) {\n          values[key] = values[key].trim();\n        }\n      });\n      setIsLoading(true);\n      saveRecord({\n        id,\n        api: gridApi,\n        values: values,\n        setIsLoading,\n        setError: snackbar.showError,\n      })\n        .then((success) => {\n          if (!success) return;\n          if (model.reloadOnSave) {\n            return window.location.reload();\n          }\n          const message = success.info ? success.info : `Record ${id === 0 ? \"Added\" : \"Updated\"} Successfully.`;\n          snackbar.showMessage(message);\n          /**\n          * Handle navigation after form operations\n          * By default, the form navigates back to the grid after save/cancel operations.\n          * This behavior can be controlled by setting navigateBack \"false\" / false in model config which disables navigation completely.\n          */\n          navigateBack !== false && handleNavigation();\n        })\n        .catch((err) => {\n          snackbar.showError(\n            \"An error occured.\",\n            err\n          );\n          if (model.reloadOnSave) {\n            resetForm();\n          }\n        })\n        .finally(() => setIsLoading(false));\n    }\n  });\n\n  const handleDiscardChanges = () => {\n    formik.resetForm();\n    setIsDiscardDialogOpen(false);\n    navigateBack !== false && handleNavigation();\n  };\n\n  const errorOnLoad = function (title, error) {\n    snackbar.showError(title, error);\n    handleNavigation();\n  };\n\n  const setActiveRecord = function ({ id, title, record, lookups }) {\n    const isCopy = idWithOptions.indexOf(\"-\") > -1;\n    const isNew = !id || id === \"0\";\n    const pageTitle = isNew ? consts.create : isCopy ? consts.copy : consts.edit;\n    const linkColumn = isNew ? \"\" : record[model.linkColumn];\n    const breadcrumbs = [{ text: model.breadCrumbs }, { text: pageTitle }];\n    if (isCopy) {\n      record[model.linkColumn] = \"\";\n    }\n    model.columns.forEach((item) => {\n      if (item.skipCopy && isCopy) {\n        record[item.field] = \"\";\n      }\n    });\n    setData(record);\n    setLookups(lookups);\n    if (linkColumn !== \"\") {\n      breadcrumbs.push({ text: linkColumn });\n    }\n    dispatchData({\n      type: actionsStateProvider.PAGE_TITLE_DETAILS,\n      payload: {\n        showBreadcrumbs: true,\n        breadcrumbs: breadcrumbs\n      }\n    });\n  };\n  const handleFormCancel = function (event) {\n    if (formik.dirty && recordEditable) {\n      setIsDiscardDialogOpen(true);\n    } else {\n      navigateBack !== false && handleNavigation();\n    }\n    event.preventDefault();\n  };\n  const handleDelete = async function () {\n    try {\n      setIsDeleting(true);\n      const response = await deleteRecord({\n        id,\n        api: api || model.api,\n        setIsLoading,\n        setError: snackbar.showError,\n        setErrorMessage\n      });\n      if (response === true) {\n        snackbar.showMessage(\"Record Deleted Successfully.\");\n        navigateBack !== false && handleNavigation();\n      }\n    } catch (error) {\n      snackbar.showError(\"An error occured, please try after some time.\");\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n  const clearError = () => {\n    setErrorMessage(null)\n    setIsDeleting(false);\n  };\n  if (isLoading) {\n    return (\n      <Box sx={{ display: \"flex\", pt: \"20%\", justifyContent: \"center\" }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n  const handleChange = function (e) {\n    const { name, value } = e.target;\n    setData({ ...data, [name]: value });\n  };\n\n  const handleSubmit = async function (e) {\n    if (e) e.preventDefault();\n    if (typeof beforeSubmit === consts.function) {\n      await beforeSubmit({ formik });\n    }\n    const { errors } = formik;\n    formik.handleSubmit();\n    const fieldName = Object.keys(errors)[0];\n    const errorMessage = errors[fieldName];\n    if (errorMessage) {\n      snackbar.showError(errorMessage, null, \"error\");\n    }\n    const fieldConfig = model.columns.find(\n      (column) => column.field === fieldName\n    ) || {};\n    if (fieldConfig.tab) {\n      setActiveStep(Object.keys(model.tabs).indexOf(fieldConfig.tab));\n    }\n  };\n\n  const breadcrumbs = [\n    { text: formTitle },\n    { text: id === \"0\" ? \"New\" : \"Update\" }\n  ];\n  const showRelations = Number(id) !== 0 && Boolean(relations.length);\n  const showSaveButton = searchParams.has(\"showRelation\");\n  const recordEditable = !(\"canEdit\" in data) || data.canEdit;\n  const readOnlyRelations = !recordEditable || data.readOnlyRelations;\n  deletePromptText = deletePromptText || \"Are you sure you want to delete ?\";\n  return (\n    <>\n      <PageTitle\n        navigate={navigate}\n        title={formTitle}\n        showBreadcrumbs={!hideBreadcrumb}\n        breadcrumbs={breadcrumbs}\n        model={model}\n      />\n      <ActiveStepContext.Provider value={{ activeStep, setActiveStep }}>\n        <Paper sx={{ padding: 2, ...sx }}>\n          <form>\n            <Stack\n              direction=\"row\"\n              spacing={2}\n              justifyContent=\"flex-end\"\n              mb={1}\n            >\n              {canEdit && recordEditable && !showSaveButton && !readOnly && (\n                <Button\n                  variant=\"contained\"\n                  type=\"submit\"\n                  color=\"success\"\n                  onClick={handleSubmit}\n                >{`${\"Save\"}`}</Button>\n              )}\n              <Button\n                variant=\"contained\"\n                type=\"cancel\"\n                color=\"error\"\n                onClick={handleFormCancel}\n              >{`${\"Cancel\"}`}</Button>\n              {permissions.delete && (\n                <Button\n                  variant=\"contained\"\n                  color=\"error\"\n                  onClick={() => setIsDeleting(true)}\n                >{`${\"Delete\"}`}</Button>\n              )}\n            </Stack>\n            <Layout\n              model={model}\n              formik={formik}\n              data={data}\n              fieldConfigs={fieldConfigs}\n              onChange={handleChange}\n              lookups={lookups}\n              id={id}\n              handleSubmit={handleSubmit}\n              mode={mode}\n            />\n          </form>\n          {errorMessage && (\n            <DialogComponent\n              open={!!errorMessage}\n              onConfirm={clearError}\n              onCancel={clearError}\n              title=\"Info\"\n              hideCancelButton={true}\n            >\n              {\" \"}\n              {errorMessage}\n            </DialogComponent>\n          )}\n          <DialogComponent\n            open={isDiscardDialogOpen}\n            onConfirm={handleDiscardChanges}\n            onCancel={() => setIsDiscardDialogOpen(false)}\n            title=\"Changes not saved\"\n            okText=\"Discard\"\n            cancelText=\"Continue\"\n          >\n            {\"Would you like to continue to edit or discard changes?\"}\n          </DialogComponent>\n          <DialogComponent\n            open={isDeleting}\n            onConfirm={handleDelete}\n            onCancel={() => {\n              setIsDeleting(false);\n              setDeleteError(null);\n            }}\n            title={deleteError ? \"Error Deleting Record\" : \"Confirm Delete\"}\n          >{deletePromptText}</DialogComponent>\n          {showRelations ? (\n            <Relations\n              readOnly={readOnlyRelations}\n              models={models}\n              relationFilters={relationFilters}\n              relations={relations}\n              parent={model.name || model.title || \"\"}\n            />\n          ) : null}\n        </Paper>\n      </ActiveStepContext.Provider>\n    </>\n  );\n};\nexport default Form;\n","import GridBase from './index';\nimport React from 'react';\nimport * as yup from 'yup';\nimport { Divider } from '@mui/material';\nimport Form from '../Form/Form';\n\nconst regexConfig = {\n\tpassword: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,50}$/,\n\tnonAlphaNumeric: /[^a-zA-Z0-9]/g,\n\tcompareValidatorRegex: /^compare:(.+)$/,\n\temail: /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$/\n};\n\nconst customStyle = {};\nconst showRowsSelected = true;\nconst defaultValueConfigs = {\n\t\"string\": \"\",\n\t\"boolean\": false,\n\t\"radio\": false,\n\t\"oneToMany\": \"\"\n};\n\nclass UiModel {\n\n\tstatic defaultPermissions = {\n\t\tadd: true,\n\t\tedit: true,\n\t\tdelete: true\n\t};\n\n\tconstructor(modelConfig) {\n\t\tconst { title = \"\", controllerType } = modelConfig;\n\t\tlet { api, idProperty = api + 'Id' } = modelConfig;\n\t\tconst module = \"module\" in modelConfig ? modelConfig.module : title.replace(/[^\\w\\s]/gi, \"\");\n\t\tif (!api) {\n\t\t\tapi = `${title.replaceAll(regexConfig.nonAlphaNumeric, '-').toLowerCase()}`;\n\t\t\tidProperty = title.replaceAll(' ', '') + 'Id';\n\t\t}\n\t\tapi = controllerType === 'cs' ? `${api}.ashx` : `${api}`;\n\t\tconst defaultValues = { ...modelConfig.defaultValues };\n\t\tconst name = module || title;\n\t\tObject.assign(this, {\n\t\t\tstandard: true,\n\t\t\tname,\n\t\t\tpermissions: { ...UiModel.defaultPermissions },\n\t\t\tidProperty,\n\t\t\tlinkColumn: `${name}Name`,\n\t\t\toverrideFileName: title,\n\t\t\tpreferenceId: name,\n\t\t\ttableName: name,\n\t\t\tmodule,\n\t\t\t...modelConfig,\n\t\t\tapi\n\t\t});\n\t\tthis.columnVisibilityModel = this._getColumnVisibilityModel();\n\t\tthis.defaultValues = this._getDefaultValues(defaultValues);\n\t}\n\n\t_getColumnVisibilityModel() {\n\t\tconst columnVisibilityModel = {};\n\t\tfor (const col of this.columns) {\n\t\t\tif (col.hide === true) {\n\t\t\t\tcolumnVisibilityModel[col.id || col.field] = false;\n\t\t\t}\n\t\t}\n\t\treturn columnVisibilityModel;\n\t}\n\n\t_getDefaultValues(defaultValues) {\n\t\tfor (const col of this.columns) {\n\t\t\tconst name = col.field || col.id;\n\t\t\tdefaultValues[name] = col.defaultValue === undefined ? (defaultValueConfigs[col.type] || \"\") : col.defaultValue;\n\t\t}\n\t\treturn defaultValues;\n\t}\n\n\tgetValidationSchema({ id }) {\n\t\tconst { columns } = this;\n\t\tconst validationConfig = {};\n\t\tfor (const column of columns) {\n\t\t\tconst { field, label, header, type = 'string', requiredIfNew = false, required = false, min = '', max = '', validate } = column;\n\t\t\tconst formLabel = label || header || field;\n\t\t\tif (!formLabel) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet config;\n\t\t\tswitch (type) {\n\t\t\t\tcase 'string':\n\t\t\t\t\tconfig = yup.string().nullable().trim().label(formLabel);\n\t\t\t\t\tif (min && !isNaN(Number(min))) {\n\t\t\t\t\t\tconfig = config.min(Number(min), `${formLabel} must be at least ${min} characters long`);\n\t\t\t\t\t}\n\t\t\t\t\tif (max && !isNaN(Number(max))) {\n\t\t\t\t\t\tconfig = config.max(Number(max), `${formLabel} must be at most ${max} characters long`);\n\t\t\t\t\t}\n\t\t\t\t\tif (required) {\n\t\t\t\t\t\tconfig = config.trim().required(`${formLabel} is required`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'boolean':\n\t\t\t\t\tconfig = yup.bool().nullable().transform((value, originalValue) => {\n\t\t\t\t\t\tif (originalValue === '') return null;\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}).label(formLabel);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radio':\n\t\t\t\tcase 'dayRadio':\n\t\t\t\t\tconfig = yup.mixed().label(formLabel).required(`Select at least one option for ${formLabel}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'date':\n\t\t\t\t\tconfig = yup.date().nullable().transform((value, originalValue) => {\n\t\t\t\t\t\tif (originalValue === '' || originalValue === null) return null;\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}).label(formLabel).required(`${formLabel} is required`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dateTime':\n\t\t\t\t\tconfig = yup\n\t\t\t\t\t\t.date()\n\t\t\t\t\t\t.nullable() // Allow null values\n\t\t\t\t\t\t.transform((value, originalValue) => {\n\t\t\t\t\t\t\t// Transform empty strings or null values into null\n\t\t\t\t\t\t\tif (originalValue === '' || originalValue === null) return null;\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.label(formLabel); // Set a label for better error messages\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'select':\n\t\t\t\tcase 'autocomplete':\n\t\t\t\t\tif (required) {\n\t\t\t\t\t\tconfig = yup.string().trim().label(formLabel).required(`Select at least one ${formLabel}`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig = yup.string().nullable();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'password':\n\t\t\t\t\tconfig = yup.string()\n\t\t\t\t\t\t.label(formLabel)\n\t\t\t\t\t\t.test(\"ignore-asterisks\", `${formLabel} must be a valid password.`, (value) => {\n\t\t\t\t\t\t\t// Skip further validations if value is exactly \"******\"\n\t\t\t\t\t\t\tif (value === \"******\") return true;\n\t\t\t\t\t\t\tconst minlength = Number(min) || 8;\n\t\t\t\t\t\t\tconst maxlength = Number(max) || 50;\n\t\t\t\t\t\t\tconst regex = column.regex || regexConfig.password;\n\t\t\t\t\t\t\t// Check minimum length, maximum length, and pattern if not \"******\"\n\t\t\t\t\t\t\treturn yup.string()\n\t\t\t\t\t\t\t\t.min(minlength, `${formLabel} must be at least ${minlength} characters`)\n\t\t\t\t\t\t\t\t.max(maxlength, `${formLabel} must be at most ${maxlength} characters`)\n\t\t\t\t\t\t\t\t.matches(\n\t\t\t\t\t\t\t\t\tregex,\n\t\t\t\t\t\t\t\t\t`${formLabel} must contain at least one lowercase letter, one uppercase letter, one digit, and one special character`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.isValidSync(value);\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'email':\n\t\t\t\t\tconfig = yup\n\t\t\t\t\t\t.string()\n\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t.matches(\n\t\t\t\t\t\t\t(column.regex || regexConfig.email),\n\t\t\t\t\t\t\t'Email must be a valid email'\n\t\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'number':\n\t\t\t\t\tif (required) {\n\t\t\t\t\t\tconfig = yup.number().label(formLabel).required(`${formLabel} is required.`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig = yup.number().nullable();\n\t\t\t\t\t}\n\t\t\t\t\tif (min !== undefined && min !== '' && !isNaN(Number(min))) {\n\t\t\t\t\t\tconfig = config.min(Number(min), `${formLabel} must be greater than or equal to ${min}`);\n\t\t\t\t\t}\n\t\t\t\t\tif (max !== undefined && max !== '' && !isNaN(Number(max))) {\n\t\t\t\t\t\tconfig = config.max(Number(max), `${formLabel} must be less than or equal to ${max}`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'fileUpload':\n\t\t\t\t\tconfig = yup.string().trim().label(formLabel);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconfig = yup.mixed().nullable().label(formLabel);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (required && type !== \"string\") {\n\t\t\t\tconfig = config.required(`${formLabel} is required`);\n\t\t\t}\n\t\t\tif (requiredIfNew && (!id || id === '')) {\n\t\t\t\tconfig = config.trim().required(`${formLabel} is required`);\n\t\t\t}\n\t\t\tif (validate) {\n\t\t\t\tconst compareValidator = regexConfig.compareValidatorRegex.exec(validate);\n\t\t\t\tif (compareValidator) {\n\t\t\t\t\tconst compareFieldName = compareValidator[1];\n\t\t\t\t\tconst compareField = columns.find(\n\t\t\t\t\t\t(f) => (f.formField === compareFieldName || f.field) === compareFieldName\n\t\t\t\t\t);\n\t\t\t\t\tconfig = config.oneOf(\n\t\t\t\t\t\t[yup.ref(compareFieldName)],\n\t\t\t\t\t\t`${formLabel} must match ${compareField.label}`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvalidationConfig[field] = config;\n\t\t}\n\n\t\treturn yup.object({ ...validationConfig, ...this.validationSchema });\n\t}\n\n\tForm = ({ match, ...props }) => {\n\t\treturn <Form model={this} Layout={this.Layout} {...props} />;\n\t};\n\n\tGrid = ({ match, ...props }) => {\n\t\treturn <GridBase model={this} showRowsSelected={showRowsSelected} {...props} />;\n\t};\n\tChildGrid = (props) => {\n\t\treturn <>\n\t\t\t<GridBase model={this} {...props} customStyle={customStyle} showRowsSelected={showRowsSelected} />\n\t\t\t<Divider orientation='horizontal' sx={{ mt: 2 }} />\n\t\t</>;\n\t};\n}\n\nexport {\n\tUiModel\n};\n\n\n"],"names":["SnackbarContext","createContext","vertical","horizontal","Alert","React","props","ref","jsx","MuiAlert","SnackbarProvider","children","message","setMessage","useState","open","setOpen","severity","setSeverity","handleAction","setHandleAction","showMessage","title","onAction","showError","handleClose","jsxs","Fragment","Snackbar","useSnackbar","useContext","DialogComponent","onConfirm","onCancel","okText","cancelText","yesNo","maxWidth","fullWidth","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","actionsStateProvider","pendingRequests","HTTP_STATUS_CODES","getFormData","formData","key","exportRequest","url","query","newURL","value","transport","config","method","data","headers","credentials","rest","fetchOptions","response","contentType","request","params","history","jsonPayload","additionalParams","additionalHeaders","disableLoader","dispatchData","reqParams","ex","utils","getPermissions","userData","model","userDefinedPermissions","permissions","userPermissions","item","dateDataTypes","lookupDataTypes","timeInterval","isLocalTime","dateValue","handleCommonErrors","setError","shouldApplyFilter","filter","operator","type","isUnaryOperator","hasValidValue","getList","gridColumns","setIsLoading","setData","page","pageSize","sortModel","filterModel","api","parentFilters","action","extraParams","columns","controllerType","template","configFileName","showFullScreenLoader","baseFilters","isElasticExport","lookups","lookupWithDeps","dateColumns","lookup","field","keepLocal","keepLocalDate","filterable","dependsOn","where","filterField","e","requestData","sort","form","v","hiddenTag","prevData","records","record","column","userTimezoneOffset","displayIndex","error","getRecord","id","setActiveRecord","searchParams","lookupsToFetch","columnConfig","a","lookupValue","defaultValues","deleteRecord","result","saveRecord","values","Footer","pagination","apiRef","tTranslate","rowsPerPage","totalRows","totalPages","translate","i18n","useTranslation","tOpts","pageNumber","setPageNumber","handleChange","useEffect","onPageChange","targetPage","handleKeyPress","event","keyCode","keyValue","GridFooterContainer","Box","Typography","TextField","GridFooter","defaultTemplate","replaceTags","source","tags","keepMissingTags","match","g1","g2","g3","container","MuiTypography","variant","component","text","name","useMobile","onlyMobile","initialValue","checkDevice","view","setView","handleWindowSizeChange","userAgent","mobile","tablet","currentOrientation","stateReducer","state","initialState","daDKGrid","mergedLocalizationDatadaDK","locales","deDEGrid","mergedLocalizationDatadeDE","elGRGrid","mergedLocalizationDataelGR","esESGrid","mergedLocalizationDataesES","frFRGrid","mergedLocalizationDatafrFR","itITGrid","mergedLocalizationDataitIT","trTRGrid","mergedLocalizationDatatrTR","ptPT","count","visibleCount","totalCount","enUSGrid","mergedLocalizationDataenUS","dayjs","utc","timezone","StateContext","RouterContext","StateProvider","stateData","useReducer","systemDateTimeFormat","isDateFormatOnly","showOnlyDate","userDateFormat","getAllSavedPreferences","preferenceName","Username","preferenceApi","defaultPreferenceEnums","addDefaultPreference","responseData","preferences","filterNonExistingColumns","gridRef","ele","applyDefaultPreferenceIfExists","setIsGridPreferenceFetched","defaultPreference","pref","userPreferenceCharts","removeCurrentPreferenceName","formatDate","useSystemFormat","timeZone","format","useLocalization","currentLocaleData","localeData","getLocalizedString","RouterProvider","useRouter","useStateContext","context","HelpModal","height","setHeight","loading","setLoading","openModal","ratio","zoom","updateHeight","widthPercentage","calculatedHeight","maxHeight","resetIframe","iframe","Grid","Replay","Close","PageTitle","titleHeading","navigate","RightComponent","mobileRightComponent","titleClass","showBreadcrumbs","breadcrumbs","enableBackButton","breadcrumbColor","showHelpButton","isMobile","breadcrumbsLasIndex","needToShowBreadcrumbs","handleBack","Card","CardContent","Breadcrumbs","breadcrumb","index","MuiLink","IconButton","HelpIcon","PageTitle$1","withTranslation","utcPlugin","componentMap","DatePicker","DateTimePicker","DATEPICKER_MARGIN_TOP","DATEPICKER_MARGIN_BOTTOM","LocalizedDatePicker","fixedFilterFormat","applyValue","convert","columnType","filterFormat","isValidDate","date","parsedDate","handleFilterChange","newValue","getMonthAbbreviation","parts","ComponentToRender","Dateformatvalue","LocalizationProvider","AdapterDayjs","localizedDateFormat","colProps","getGridDateOperators","actionTypes","formTypes","GridActionsCellItem","Tooltip","EditIcon","DeleteIcon","initialValues","pageSizeOptions","GridPreferences","useGridApiRef","snackbar","openDialog","setOpenDialog","openForm","setOpenForm","filteredPrefs","setFilteredPrefs","formType","setFormType","menuAnchorEl","setMenuAnchorEl","openPreferenceExistsModal","setOpenPreferenceExistsModal","openConfirmDeleteDialog","setOpenConfirmDeleteDialog","currentPreference","useGridSelector","gridFilterModelSelector","gridSortModelSelector","validationSchema","useMemo","yup","formik","useFormik","savePreference","handleOpen","handleDialogClose","deletePreference","prefName","rawResponse","applySelectedPreference","prefId","applyPreference","presetName","preferenceAlreadyExists","pinnedColumns","orderedFields","columnVisibilityModel","gridColumn","col","width","getGridRowId","row","openFormModal","confirmDeletePreference","currentPrefname","onCellClick","cellParams","isManageForm","SettingsIcon","Menu","List","MenuItem","ListItemButton","ListItemIcon","prefDesc","ListItem","ListItemText","Stack","FormControlLabel","Checkbox","SaveIcon","CloseIcon","DataGridPremium","GridOperators","CustomDropdownMenu","lookupData","options","label","currentFieldFilters","useCallback","inputValue","element","newitem","FormControl","Select","option","convertDefaultSort","defaultSort","constants","sortRegex","sortField","sortInfo","direction","ExportMenuItem","handleExport","isPivotExport","CustomExportButton","exportFormats","GridToolbarExportContainer","areEqual","prevProps","nextProps","equal","defaultPageSize","recordCounts","iconMapper","ArticleIcon","auditColumnMappings","booleanIconRenderer","CheckIcon","DeleteContentText","styled","ButtonWithMargin","GridToolBar","Toolbar","CustomToolbar","isReadOnly","canAdd","forAssignment","showAddIcon","onAdd","selectionApi","selectedSet","selectAll","available","onAssign","assigned","onUnassign","effectivePermissions","clearFilters","addText","activeFilterCount","AddIcon","RemoveIcon","ColumnsPanelTrigger","triggerProps","ViewColumnIcon","FilterPanelTrigger","Badge","FilterListIcon","FilterListOffIcon","GridBase","memo","parent","selected","disableCellRedirect","onAssignChange","customStyle","showRowsSelected","chartFilters","clearChartFilter","customFilters","onRowDoubleClick","onRowClick","gridStyle","reRenderKey","additionalFilters","onCellDoubleClickOverride","onAddOverride","dynamicColumns","readOnly","paginationModel","setPaginationModel","isLoading","rowsSelected","selection","setSelection","isDeleting","setIsDeleting","setRecord","visibilityModel","showAddConfirmation","setShowAddConfirmation","paginationMode","errorMessage","setErrorMessage","setSortModel","initialFilterModel","setFilterModel","getParams","useParams","pathname","idWithOptions","idProperty","showHeaderFilters","disableRowSelectionOnClick","hideBackButton","hideTopFilters","updatePageTitle","isElasticScreen","navigateBack","isDoubleClicked","dataRef","useRef","toLink","link","isGridPreferenceFetched","routesWithNoChildRoute","withControllersUrl","historyScreenName","showPageTitle","emptyIsAnyOfOperatorFilters","documentField","canEdit","canDelete","addUrlParamKey","searchParamKey","hideBreadcrumb","tableName","showHistory","hideBreadcrumbInGrid","disablePivoting","columnHeaderHeight","gridTitle","baseDataFromParams","baseSaveData","parsedData","handleSelectRow","rowId","CustomCheckBox","isCheckedLocal","setIsCheckedLocal","gridColumnTypes","items","acc","lookupOptions","lookupMap","customActions","baseColumnList","GRID_CHECKBOX_SELECTION_COL_DEF","finalColumns","overrides","operators","getGridStringOperators","op","getGridBooleanOperators","headerName","auditColumns","header","actions","CopyIcon","HistoryIcon","icon","color","FileDownloadIcon","rowActions","isDisabled","fetchData","gridApi","filters","columnField","operatorValue","chartField","mode","path","handleDownload","documentLink","fileName","blob","fileNameFromLink","onCellClickHandler","details","el","foundCustomAction","ca","historyObject","handleDelete","clearError","processRowUpdate","updatedRow","onCellDoubleClick","handleAddRecords","selectedIds","recordMap","selectedRecords","err","updateAssignment","unassign","assign","assignedValues","finalValues","setupGridPreference","hiddenColumns","nonExportColumns","visibleColumns","backRoute","updateFilters","updatedItems","isNumber","updateSort","isKeywordField","obj","pageTitle","breadCrumbs","from","to","Field","otherProps","checked","FormHelperText","theme","useTheme","rows","useDebounce","delay","debouncedValue","setDebouncedValue","timer","DIGIT_START","DIGIT_END","ARROW_LEFT","ARROW_RIGHT","CONTROL_KEYS","resolveValue","min","max","setInputValue","resolvedMin","resolvedMax","numValue","onBlur","StringField","showPassword","setShowPassword","handleClickShowPassword","show","handleMouseDownPassword","disabled","InputAdornment","VisibilityOffIcon","VisibilityIcon","fieldConfigs","createElement","isoString","TimePicker","emptyValues","useCascadingLookup","isAutoComplete","userSelected","setOptions","dependencyValues","toReturn","dependency","dep","initialOptions","newOptions","requestBody","SelectField","placeHolder","isDefaultOption","InputLabel","KeyboardArrowDownIcon","DivSpacing","TransferField","setFieldValue","Component","orientation","isError","FormLabel","RadioGroup","Radio","consts","filteredCombos","handleAutoCompleteChange","_","toSave","val","Autocomplete","brandBackgroundColor","days","CustomAvator","Avatar","isSelected","grey","DayAvatar","day","onClick","DaySelection","expired","isWeekend","isWeekdays","defaultVal","selectedDays","setSelectedDays","radioValue","setRadioValue","presetSelected","setPresetSelected","finalValue","baseValue","isAdd","fixedOptions","lastElement","tagValue","getTagProps","tagProps","Chip","buildTree","tree","treeCheckBox","SimpleTreeView","node","TreeItem","child","errorMapping","MB","FileUpload","maxSize","formats","uploadApi","mediaApi","Url","formState","setFormState","associationId","handleRadioChange","isExternal","handleInputChange","handleFileChange","selectedFile","prev","handleFileUpload","fileUrl","statusCode","host","isLengthExceeded","colorScheme","CircularProgress","setState","debouncedState","inputJSON","nextValue","updatedState","Input","fieldMappers","BooleanField","NumberField","PasswordField","DateField","DateTimeField","TimeField","GridTransfer","RadioField","AutocompleteField","ChipInput","TreeCheckbox","JSONInput","gridContainerStyle","ImportantSpan","RenderSteps","tabColumns","onChange","combos","handleSubmit","skipped","setSkipped","activeStep","setActiveStep","ActiveStepContext","skipSteps","len","skip","isStepSkipped","step","isLastStep","nextStep","handleNext","prevSkipped","prevStep","currentStep","Stepper","Step","StepLabel","RenderColumns","formElements","isGridComponent","getFormConfig","tabs","tab","fieldType","tabsData","tabColumn","FormLayout","displayId","showTabs","CustomTabPanel","other","a11yProps","ChildGrid","relation","models","modelConfigOfChildGrid","ChildModel","UiModel","Relations","relations","relationFilters","tabIndex","setTabIndex","Tabs","idx","Tab","defaultFieldConfigs","Form","Layout","sx","beforeSubmit","deletePromptText","formTitle","setLookups","setValidationSchema","isDiscardDialogOpen","setIsDiscardDialogOpen","deleteError","setDeleteError","handleNavigation","navigatePath","isNew","errorOnLoad","resetForm","success","handleDiscardChanges","isCopy","linkColumn","handleFormCancel","recordEditable","errors","fieldName","fieldConfig","showRelations","showSaveButton","readOnlyRelations","Paper","regexConfig","defaultValueConfigs","modelConfig","module","validationConfig","requiredIfNew","required","validate","formLabel","originalValue","minlength","maxlength","regex","compareValidator","compareFieldName","compareField","f","Divider"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,MAAMA,KAAkBC,GAAc,IAAI,GACpCC,KAAW,UACXC,KAAa,UAEbC,KAAQC,GAAM,WAAW,SAAeC,GAAOC,GAAK;AACtD,SAAO,gBAAAC,EAACC,MAAS,WAAW,GAAG,KAAAF,GAAU,SAAQ,UAAU,GAAGD,GAAO;AACzE,CAAC,GACKI,KAAmB,CAAC,EAAE,UAAAC,QAAe;AACvC,QAAM,CAACC,GAASC,CAAU,IAAIC,EAAS,IAAI,GACrC,CAACC,GAAMC,CAAO,IAAIF,EAAS,EAAK,GAChC,CAACG,GAAUC,CAAW,IAAIJ,EAAS,IAAI,GACvC,CAACK,GAAcC,CAAe,IAAIN,EAAS,IAAI,GAE/CO,IAAc,SAAUC,GAAOV,GAASK,IAAW,QAAQM,GAAU;AACvE,IAAI,OAAOD,KAAU,aACjBA,IAAQA,EAAM,SAAA,IAEdV,KAAW,OAAOA,KAAY,aAC9BA,IAAUA,EAAQ,SAAA,IAEtBC,EAAWD,IAAU,GAAGU,CAAK,KAAKV,CAAO,KAAKU,CAAK,GACnDJ,EAAYD,CAAQ,GACpBD,EAAQ,EAAI,GACZI,EAAgBG,CAAQ;AAAA,EAC5B,GAEMC,IAAY,SAAUF,GAAOV,GAASK,IAAW,SAASM,GAAU;AACtE,IAAAF,EAAYC,GAAOV,GAASK,GAAUM,CAAQ;AAAA,EAClD,GAEME,IAAc,WAAY;AAC5B,IAAAT,EAAQ,EAAK,GACbI,EAAgB,IAAI,GAChBD,KACAA,EAAA;AAAA,EAER;AACA,SACI,gBAAAO,EAAAC,IAAA,EACI,UAAA;AAAA,IAAA,gBAAAnB;AAAA,MAACR,GAAgB;AAAA,MAAhB;AAAA,QACG,OAAO,EAAE,aAAAqB,GAAa,WAAAG,EAAA;AAAA,QAErB,UAAAb;AAAA,MAAA;AAAA,IAAA;AAAA,sBAEJiB,IAAA,EAAS,MAAAb,GAAY,kBAAkB,KAAM,SAASU,GAAa,cAAc,EAAE,UAAAvB,IAAU,YAAAC,MAC1F,UAAA,gBAAAK,EAACJ,IAAA,EAAM,UAAAa,GAAqB,aAAQ,EAAA,CACxC;AAAA,EAAA,GACJ;AAER,GACMY,KAAc,WAAY;AAC5B,SAAOC,GAAW9B,EAAe;AACrC,GC9BM+B,KAAkB,CAAC,EAAE,MAAAhB,GAAM,WAAAiB,GAAW,OAAAV,IAAQ,WAAW,UAAAW,GAAU,QAAAC,GAAQ,YAAAC,GAAY,OAAAC,IAAQ,IAAO,UAAAzB,GAAU,UAAA0B,IAAW,MAAM,WAAAC,IAAY,IAAM,GAAGhC,SACxJ4B,IAASA,MAAWE,IAAQ,QAAQ,OACpCD,IAAaA,MAAeC,IAAQ,OAAO,WAEvC,gBAAAV;AAAA,EAACa;AAAA,EAAA;AAAA,IACI,GAAGjC;AAAA,IACJ,MAAAS;AAAA,IACA,SAASkB;AAAA,IACT,mBAAgB;AAAA,IAChB,oBAAiB;AAAA,IACjB,UAAAI;AAAA,IACA,WAAAC;AAAA,IAEA,UAAA;AAAA,MAAA,gBAAA9B,EAACgC,IAAA,EAAY,IAAG,sBAAqB,IAAI,EAAE,UAAU7B,IAAW,YAAY,UAAA,GACvE,UAAAW,EAAA,CACL;AAAA,MACCX,uBACI8B,IAAA,EAAc,UAAQ,IACnB,UAAA,gBAAAjC,EAACkC,IAAA,EAAmB,UAAA/B,GAAS,EAAA,CACjC;AAAA,OAEFsB,KAAYD,MACV,gBAAAN,EAAEiB,IAAA,EACG,UAAA;AAAA,QAAAV,KAAY,gBAAAzB,EAACoC,IAAA,EAAO,SAASX,GAAW,UAAAE,GAAW;AAAA,QACnDH,KAAa,gBAAAxB,EAACoC,IAAA,EAAO,SAASZ,GAAW,WAAS,IAAE,UAAAE,EAAA,CAAO;AAAA,MAAA,EAAA,CAChE;AAAA,IAAA;AAAA,EAAA;AAAA,ICnDVW,IAAuB;AAAA,EACzB,kBAAiB;AAAA,EACjB,kBAAiB;AAAA,EACjB,qBAAqB;AAAA,EACrB,oBAAmB;AAAA,EACnB,YAAW;AAAA,EACX,sBAAqB;AAAA,EACrB,mBAAkB;AAAA,EAClB,wBAAuB;AAAA,EACvB,WAAU;AAAA,EACV,oBAAoB;AAAA,EACpB,mBAAmB;AAAA,EACnB,6BAA6B;AAAA,EAC7B,qBAAqB;AAAA,EACrB,wBAAwB;AAAA,EACxB,cAAc;AAChB;ACfF,IAAIC,KAAkB;AAEtB,MAAMC,KAAoB;AAAA,EACtB,IAAI;AAAA,EACJ,iBAAiB;AAAA,EACjB,WAAW;AAAA,EACX,WAAW;AAAA,EACX,uBAAuB;AAC3B,GAEMC,KAAc,CAAC1C,MAAU;AAC3B,QAAM2C,IAAW,IAAI,SAAA;AACrB,aAAWC,KAAO5C;AACd,IAAI,OAAOA,EAAM4C,CAAG,KAAM,WACtBD,EAAS,OAAOC,GAAK,KAAK,UAAU5C,EAAM4C,CAAG,CAAC,CAAC,IAE/CD,EAAS,OAAOC,GAAK5C,EAAM4C,CAAG,CAAC;AAGvC,SAAOD;AACX,GAEME,KAAgB,CAACC,GAAKC,MAAU;AAClC,QAAMC,IAAS,IAAI,IAAIF,CAAG;AAC1B,aAAWF,KAAOG,GAAO;AACrB,UAAME,IAAQ,OAAOF,EAAMH,CAAG,KAAM,WAAW,KAAK,UAAUG,EAAMH,CAAG,CAAC,IAAIG,EAAMH,CAAG;AACrF,IAAAI,EAAO,aAAa,OAAOJ,GAAKK,CAAK;AAAA,EACzC;AACA,SAAO,KAAKD,GAAQ,QAAQ,EAAE,MAAA;AAClC,GAEME,KAAY,OAAOC,MAAW;AAChC,QAAM;AAAA,IACF,QAAAC,IAAS;AAAA,IACT,KAAAN;AAAA,IACA,MAAAO;AAAA,IACA,SAAAC,IAAU,CAAA;AAAA,IACV,aAAAC,IAAc;AAAA,IACd,GAAGC;AAAA,EAAA,IACHL,GAEEM,IAAe;AAAA,IACjB,QAAAL;AAAA,IACA,aAAAG;AAAA,IACA,SAAS;AAAA,MACL,GAAGD;AAAA,IAAA;AAAA,IAEP,GAAGE;AAAA,EAAA;AAGP,EAAIH,MACIC,EAAQ,cAAc,MAAM,yBAC5B,OAAOG,EAAa,QAAQ,cAAc,GAC1CA,EAAa,OAAOJ,aAAgB,WAAWA,IAAOX,GAAYW,CAAI,MAEtEI,EAAa,QAAQ,cAAc,IAAIH,EAAQ,cAAc,KAAK,oBAClEG,EAAa,OAAO,OAAOJ,KAAS,WAAWA,IAAO,KAAK,UAAUA,CAAI;AAIjF,QAAMK,IAAW,MAAM,MAAMZ,GAAKW,CAAY,GACxCE,IAAcD,EAAS,QAAQ,IAAI,cAAc,KAAK,CAAA;AAO5D,SANoB;AAAA,IAChB,QAAQA,EAAS;AAAA,IACjB,MAAMC,EAAY,SAAS,kBAAkB,IAAI,MAAMD,EAAS,KAAA,IAAS,MAAMA,EAAS,KAAA;AAAA,IACxF,SAAS,OAAO,YAAYA,EAAS,QAAQ,SAAS;AAAA,EAAA;AAI9D,GAEME,KAAU,OAAO,EAAE,KAAAd,GAAK,QAAAe,IAAS,CAAA,GAAI,SAAAC,GAAS,aAAAC,IAAc,IAAO,kBAAAC,IAAmB,CAAA,GAAI,mBAAAC,IAAoB,CAAA,GAAI,eAAAC,IAAgB,IAAO,cAAAC,QAAmB;AAC9J,MAAIN,EAAO;AACP,WAAOhB,GAAcC,GAAKe,CAAM;AAEpC,EAAKK,KACDC,EAAa,EAAE,MAAM5B,EAAqB,qBAAqB,SAAS,IAAM,GAElFC;AAEA,QAAM4B,IAAY;AAAA,IACd,QAAQ;AAAA,IACR,aAAa;AAAA,IACb,KAAAtB;AAAA,IACA,SAASiB,IAAc,EAAE,GAAGE,EAAA,IAAsB,EAAE,gBAAgB,uBAAuB,GAAGA,EAAA;AAAA,IAC9F,GAAGD;AAAA,EAAA;AAGP,EAAIH,MACAO,EAAU,OAAOL,IAAcF,IAASnB,GAAYmB,CAAM;AAG9D,MAAI;AACA,UAAMH,IAAW,MAAMR,GAAUkB,CAAS;AAC1C,IAAA5B;AACA,UAAMa,IAAOK,EAAS;AAOtB,QALIlB,OAAoB,KAAK,CAAC0B,KAC1BC,EAAa,EAAE,MAAM,uBAAuB,YAAY,IAAO,GAI/DT,EAAS,WAAWjB,GAAkB,iBAAiB;AACvD,MAAAqB,EAAQ,QAAQ;AAChB;AAAA,IACJ;AACA,WAAIJ,EAAS,WAAWjB,GAAkB,KAE/B,EAAE,MAAM,EAAE,SAASY,EAAK,WAAW,sBAAoB,IAE3DA;AAAA,EACX,SAASgB,GAAI;AACT,WAAA7B,MACIA,OAAoB,KACpB2B,EAAa,EAAE,MAAM,uBAAuB,YAAY,IAAO,GAG5D,EAAE,MAAM,EAAE,SAASE,EAAG,WAAW,kBAAgB;AAAA,EAC5D;AACJ,GCxHMC,KAAQ;AAAA,EAMV,mBAAmB;AAAA,IACf,MAAM;AAAA,IACN,UAAU;AAAA,IACV,eAAe;AAAA,IACf,oBAAoB;AAAA,EAAA;AAAA,EAExB,cAAc;AAAA,IACV,KAAK;AAAA,EAAA;AAAA,EAET,mBAAmB;AAAA,IACf,KAAK;AAAA,IACL,MAAM;AAAA,IACN,QAAQ;AAAA,EAAA;AAAA,EAEZ,eAAe,CAAC,MAAM,QAAW,IAAI,KAAK,CAAC;AAC/C,GACaC,KAAiB,CAAC,EAAE,UAAAC,IAAW,CAAA,GAAI,OAAAC,GAAO,wBAAAC,QAA6B;AAChF,QAAM,EAAE,aAAAC,IAAc,CAAA,EAAC,IAAMH;AAC7B,EAAAE,IAAyBA,KAA0B,EAAE,KAAK,IAAM,MAAM,IAAM,QAAQ,GAAA;AACpF,QAAME,IAAkBD,EAAY,KAAK,OAAQE,EAAK,WAAWJ,EAAM,MAAM;AAC7E,SAAKG,IAGE;AAAA,IACH,QAAQF,EAAuB,OAAO,EAAQE,EAAgBN,GAAM,kBAAkB,GAAG;AAAA,IACzF,SAASI,EAAuB,QAAQ,EAAQE,EAAgBN,GAAM,kBAAkB,IAAI;AAAA,IAC5F,WAAWI,EAAuB,UAAU,EAAQE,EAAgB,CAACN,GAAM,kBAAkB,MAAM,CAAC;AAAA,EAAC,IAL9F,EAAE,QAAQI,EAAuB,KAAK,SAASA,EAAuB,MAAM,WAAWA,EAAuB,OAAA;AAO7H,GC9BMI,KAAgB,CAAC,QAAQ,UAAU,GACnCC,KAAkB,CAAC,cAAc,GACjCC,KAAe,KAEfC,KAAc,CAACC,OAAc,oBAAI,KAAA,GAAO,kBAAA,MAAwB,IAAI,KAAKA,CAAS,EAAE,kBAAA,GAWpFC,KAAqB,CAACzB,GAAU0B,MAC9B1B,EAAS,WAAWjB,GAAkB,mBACtC2C,EAAS,kBAAkB,GAC3B,WAAW,MAAM;AACb,SAAO,SAAS,OAAO;AAC3B,GAAGJ,EAAY,GACR,MACAtB,EAAS,WAAWjB,GAAkB,aAC7C2C,EAAS,gBAAgB,GACzB,WAAW,MAAM;AACb,SAAO,SAAS,OAAO;AAC3B,GAAGJ,EAAY,GACR,OACAtB,EAAS,WAAWjB,GAAkB,yBAC7C2C,EAAS,uBAAuB,GAE7B;AAGX,SAASC,GAAkBC,GAAQ;AAC/B,QAAM,EAAE,UAAAC,GAAU,OAAAtC,GAAO,MAAAuC,EAAA,IAASF,GAE5BG,IAAkB,CAAC,WAAW,YAAY,EAAE,SAASF,CAAQ,GAC7DG,IACFzC,KAAU,SACTA,MAAU,MAAOuC,MAAS,YAAYvC,MAAU,KAAOuC,MAAS,aAAavC,MAAU;AAE5F,SAAOwC,KAAmBC;AAC9B;AAEA,MAAMC,KAAU,OAAO,EAAE,aAAAC,GAAa,cAAAC,GAAc,SAAAC,GAAS,MAAAC,GAAM,UAAAC,GAAU,WAAAC,GAAW,aAAAC,GAAa,KAAAC,GAAK,eAAAC,GAAe,QAAAC,IAAS,QAAQ,UAAAjB,GAAU,aAAAkB,GAAa,aAAA3C,GAAa,SAAA4C,GAAS,gBAAAC,IAAiB,QAAQ,UAAAC,IAAW,MAAM,gBAAAC,IAAiB,MAAM,cAAAvC,GAAc,sBAAAwC,IAAuB,IAAO,OAAAlC,GAAO,aAAAmC,IAAc,MAAM,iBAAAC,QAAsB;AACjV,EAAKlD,KACGgD,KACAxC,EAAa,EAAE,MAAM5B,EAAqB,qBAAqB,SAAS,IAAM;AAItF,QAAMuE,IAAU,CAAA,GACVC,IAAiB,CAAA,GACjBC,KAAc,CAAA;AACpB,EAAApB,EAAY,QAAQ,CAAC,EAAE,QAAAqB,GAAQ,MAAAzB,GAAM,OAAA0B,GAAO,WAAAC,IAAY,IAAO,eAAAC,GAAe,YAAAC,IAAa,IAAM,WAAAC,EAAA,MAAgB;AAI7G,IAHIxC,GAAc,SAASU,CAAI,KAC3BwB,GAAY,KAAK,EAAE,OAAAE,GAAO,WAAAC,GAAW,eAAAC,GAAe,GAEnDH,KAGD,CAACH,EAAQ,SAASG,CAAM,KAAKlC,GAAgB,SAASS,CAAI,KAAK6B,MAC/DP,EAAQ,KAAKG,CAAM,GACnBF,EAAe,KAAK,EAAE,QAAAE,GAAQ,WAAAK,EAAA,CAAW;AAAA,EAEjD,CAAC;AAED,QAAMC,KAAQ,CAAA;AACd,EAAIrB,GAAa,OAAO,UACpBA,EAAY,MAAM,QAAQ,CAAAZ,MAAU;AAChC,QAAID,GAAkBC,CAAM,GAAG;AAC3B,YAAM,EAAE,OAAA4B,GAAO,UAAA3B,GAAU,aAAAiC,EAAA,IAAgBlC;AACzC,UAAI,EAAE,OAAArC,MAAUqC;AAEhB,YAAME,IADSI,EAAY,OAAO,CAACf,OAASA,IAAM,UAAUS,EAAO,KAAK,EACpD,CAAC,GAAG;AACxB,MAAIE,MAAS,YACTvC,IAASA,MAAU,UAAUA,MAAU,KAAQ,IAAI,IAC5CuC,MAAS,aAChBvC,IAAQ,MAAM,QAAQA,CAAK,IAAIA,EAAM,OAAO,CAAAwE,OAAKA,EAAC,IAAIxE,IAE1DA,IAAQqC,EAAO,gBAAgBrC,GAC/BsE,GAAM,KAAK;AAAA,QACP,OAAOC,KAAeN;AAAA,QACtB,UAAA3B;AAAA,QACA,OAAAtC;AAAA,QACA,MAAAuC;AAAA,MAAA,CACH;AAAA,IACL;AAAA,EACJ,CAAC,GAEDY,KACAmB,GAAM,KAAK,GAAGnB,CAAa,GAG3BQ,KACAW,GAAM,KAAK,GAAGX,CAAW;AAE7B,QAAMc,IAAc;AAAA,IAChB,OAAO3B,IAAOC;AAAA,IACd,OAAOa,IAAkBpC,EAAM,aAAauB;AAAA,IAC5C,GAAGM;AAAA,IACH,iBAAiBJ,EAAY;AAAA,IAC7B,MAAMD,EAAU,IAAI,CAAA0B,OAASA,EAAK,eAAeA,EAAK,SAAS,MAAMA,EAAK,IAAI,EAAE,KAAK,GAAG;AAAA,IACxF,OAAAJ;AAAA,IACA,iBAAAV;AAAA,IACA,OAAOpC,EAAM;AAAA,IACb,UAAUA,EAAM;AAAA,EAAA;AAGpB,EAAIqC,EAAQ,WACRY,EAAY,UAAUZ,EAAQ,KAAK,GAAG,IAGtCC,EAAe,WACfW,EAAY,iBAAiB,KAAK,UAAUX,CAAc,IAG1DtC,GAAO,oBACPiD,EAAY,kBAAkBjD,GAAO;AAGzC,QAAMnB,KAAU,CAAA;AAChB,MAAIR,IAAM0D,MAAmB,OAAO,GAAGL,CAAG,WAAWE,CAAM,eAAe,GAAGF,CAAG,IAAIE,CAAM;AAQ1F,MANII,MAAa,SACb3D,KAAO,aAAa2D,CAAQ,KAE5BC,MAAmB,SACnB5D,KAAO,mBAAmB4D,CAAc,KAExC/C,GAAa;AACb,UAAMiE,IAAO,SAAS,cAAc,MAAM;AAO1C,QANAF,EAAY,eAAe/D,GAC3B+D,EAAY,UAAUnB,GACtBmB,EAAY,qBAAqB,EAAC,oBAAI,KAAA,GAAO,kBAAA,GAC7CE,EAAK,aAAa,UAAU,MAAM,GAClCA,EAAK,aAAa,MAAM,YAAY,GACpCA,EAAK,aAAa,UAAU,QAAQ,GAChCnB,MAAa;AACb,iBAAW7D,KAAO8E,GAAa;AAC3B,YAAIG,IAAIH,EAAY9E,CAAG;AACvB,YAAuBiF,KAAM;AACzB;AACJ,QAAW,OAAOA,KAAM,aACpBA,IAAI,KAAK,UAAUA,CAAC;AAExB,cAAMC,IAAY,SAAS,cAAc,OAAO;AAChD,QAAAA,EAAU,OAAO,UACjBA,EAAU,OAAOlF,GACjBkF,EAAU,QAAQD,GAClBD,EAAK,OAAOE,CAAS;AAAA,MACzB;AAEJ,IAAAF,EAAK,aAAa,UAAU9E,CAAG,GAC/B,SAAS,KAAK,YAAY8E,CAAI,GAC9BA,EAAK,OAAA,GACL,WAAW,MAAM;AACb,eAAS,eAAe,YAAY,EAAE,OAAA;AAAA,IAC1C,GAAG,GAAI;AACP;AAAA,EACJ;AACA,MAAI;AACA,IAAA/B,EAAa,EAAI;AACjB,UAAMhC,IAAS;AAAA,MACX,KAAAf;AAAA,MACA,QAAQ;AAAA,MACR,MAAM4E;AAAA,MACN,SAAS;AAAA,QACL,gBAAgB;AAAA,QAChB,GAAGpE;AAAA,MAAA;AAAA,MAEP,aAAa;AAAA,IAAA;AAEjB,IAAAwC,EAAQ,CAAAiC,OAAa;AAAA,MACjB,GAAGA;AAAA,MACH,SAAS,CAAA;AAAA;AAAA,IAAC,EACZ;AACF,UAAMrE,IAAW,MAAMR,GAAUW,CAAM;AACvC,QAAIH,EAAS,WAAWjB,GAAkB,IAAI;AAC1C,YAAM,EAAE,SAAAuF,MAAYtE,EAAS;AAC7B,MAAIsE,KACAA,EAAQ,QAAQ,CAAAC,MAAU;AACtB,QAAAjB,GAAY,QAAQ,CAAAkB,MAAU;AAC1B,gBAAM,EAAE,OAAAhB,GAAO,WAAAC,GAAW,eAAAC,GAAA,IAAkBc;AAC5C,cAAID,EAAOf,CAAK,GAAG;AAEf,gBADAe,EAAOf,CAAK,IAAI,IAAI,KAAKe,EAAOf,CAAK,CAAC,GAClCE,IAAe;AACf,oBAAMe,KAAqBF,EAAOf,CAAK,EAAE,sBAAsB;AAC/D,cAAAe,EAAOf,CAAK,IAAI,IAAI,KAAKe,EAAOf,CAAK,EAAE,QAAA,IAAYiB,EAAkB;AAAA,YACzE;AACA,gBAAIhB,KAAa,CAAClC,GAAYgD,EAAOf,CAAK,CAAC,GAAG;AAC1C,oBAAMiB,KAAqBF,EAAOf,CAAK,EAAE,sBAAsB;AAC/D,cAAAe,EAAOf,CAAK,IAAI,IAAI,KAAKe,EAAOf,CAAK,EAAE,QAAA,IAAYiB,EAAkB;AAAA,YACzE;AAAA,UACJ;AAAA,QACJ,CAAC,GACD1D,EAAM,QAAQ,QAAQ,CAAC,EAAE,OAAAyC,GAAO,cAAAkB,QAAmB;AAC/C,UAAKA,MACLH,EAAOf,CAAK,IAAIe,EAAOG,CAAY;AAAA,QACvC,CAAC;AAAA,MACL,CAAC,GAELtC,EAAQpC,EAAS,IAAI;AAAA,IACzB,MAAA,CAAYyB,GAAmBzB,GAAU0B,CAAQ,KAC7CA,EAAS1B,EAAS,UAAU;AAAA,EAEpC,SAAS2E,GAAO;AACZ,IAAIA,EAAM,YAAY,CAAClD,GAAmBkD,EAAM,UAAUjD,CAAQ,IAC9DA,EAAS,yBAAyBiD,EAAM,WAAWA,EAAM,UAAU,IAEnEjD,EAAS,0DAA0D;AAAA,EAE3E,UAAA;AACI,IAAAS,EAAa,EAAK,GACd,CAAClC,KAAegD,KAChBxC,EAAa,EAAE,MAAM5B,EAAqB,qBAAqB,SAAS,IAAO;AAAA,EAEvF;AACJ,GAEM+F,KAAY,OAAO,EAAE,KAAAnC,GAAK,IAAAoC,GAAI,cAAA1C,GAAc,iBAAA2C,GAAiB,OAAA/D,GAAO,eAAA2B,GAAe,OAAAmB,IAAQ,CAAA,GAAI,UAAAnC,QAAe;AAChH,EAAAe,IAAMA,KAAO1B,EAAM,KACnBoB,EAAa,EAAI;AACjB,QAAM4C,IAAe,IAAI,gBAAA,GACnB3F,IAAM,GAAGqD,CAAG,IAAwBoC,KAAc,GAAQ,IAC1DG,IAAiB,CAAA;AAEvB,GADejE,EAAM,WAAWA,EAAM,UAC9B,QAAQ,CAAAyC,MAAS;AACrB,IAAIA,EAAM,UAAU,CAACwB,EAAe,SAASxB,EAAM,MAAM,KAAK,CAACA,EAAM,aACjEwB,EAAe,KAAKxB,EAAM,MAAM;AAAA,EAExC,CAAC,GACDuB,EAAa,IAAI,WAAWC,CAAc,GACtCnB,KAAS,OAAO,KAAKA,CAAK,GAAG,UAC7BkB,EAAa,IAAI,SAAS,KAAK,UAAUlB,CAAK,CAAC;AAEnD,MAAI;AACA,UAAM7D,IAAW,MAAMR,GAAU;AAAA,MAC7B,KAAK,GAAGJ,CAAG,IAAI2F,EAAa,UAAU;AAAA,MACtC,QAAQ;AAAA,MACR,aAAa;AAAA,IAAA,CAChB;AACD,QAAI/E,EAAS,WAAWjB,GAAkB,IAAI;AAC1C,YAAM,EAAE,MAAMwF,GAAQ,SAAAnB,EAAA,IAAYpD,EAAS;AAC3C,UAAI1C,IAAQiH,EAAOxD,EAAM,UAAU;AACnC,YAAMkE,IAAelE,EAAM,QAAQ,KAAK,OAAKmE,EAAE,UAAUnE,EAAM,UAAU;AACzE,UAAIkE,KAAgBA,EAAa,UACzB7B,KAAWA,EAAQ6B,EAAa,MAAM,KAAK7B,EAAQ6B,EAAa,MAAM,GAAG,QAAQ;AACjF,cAAME,IAAc/B,EAAQ6B,EAAa,MAAM,EAAE,KAAK,CAAAC,MAAKA,EAAE,UAAU5H,CAAK;AAC5E,QAAI6H,MACA7H,IAAQ6H,EAAY;AAAA,MAE5B;AAEJ,YAAMC,IAAgB,EAAE,GAAGrE,EAAM,cAAA;AACjC,MAAA+D,EAAgB,EAAE,IAAAD,GAAI,OAAAvH,GAAc,QAAQ,EAAE,GAAG8H,GAAe,GAAGb,GAAQ,GAAG7B,EAAA,GAAiB,SAAAU,GAAS;AAAA,IAC5G,MAAA,CAAY3B,GAAmBzB,GAAU0B,CAAQ,KAC7CA,EAAS,yBAAyB1B,EAAS,KAAK,SAAA,CAAU;AAAA,EAElE,SAAS2E,GAAO;AACZ,IAAIA,EAAM,YAAYlD,GAAmBkD,EAAM,UAAUjD,CAAQ,KAC7DA,EAAS,yBAAyBiD,EAAM,WAAWA,EAAM,UAAU;AAAA,EAE3E,UAAA;AACI,IAAAxC,EAAa,EAAK;AAAA,EACtB;AACJ,GAEMkD,KAAe,eAAgB,EAAE,IAAAR,GAAI,KAAApC,GAAK,cAAAN,GAAc,UAAAT,KAAY;AACtE,QAAM4D,IAAS,EAAE,SAAS,IAAO,OAAO,GAAA;AACxC,MAAI,CAACT,GAAI;AACL,IAAAnD,EAAS,mCAAmC;AAC5C;AAAA,EACJ;AACA,EAAAS,EAAa,EAAI;AACjB,MAAI;AACA,UAAMnC,IAAW,MAAMR,GAAU;AAAA,MAC7B,KAAK,GAAGiD,CAAG,IAAIoC,CAAE;AAAA,MACjB,QAAQ;AAAA,MACR,aAAa;AAAA,IAAA,CAChB;AACD,QAAI7E,EAAS,WAAWjB,GAAkB;AACtC,aAAIiB,EAAS,QAAQ,CAACA,EAAS,KAAK,WAChCsF,EAAO,UAAU,IACjB5D,EAAS,iBAAiB1B,EAAS,KAAK,OAAO,GACxC,OAEXsF,EAAO,UAAU,IACV;AACX,IAAY7D,GAAmBzB,GAAU0B,CAAQ,KAC7CA,EAAS,iBAAiB1B,EAAS,IAAI;AAAA,EAE/C,SAAS2E,GAAO;AACZ,IAAIA,EAAM,YAAY,CAAClD,GAAmBkD,EAAM,UAAUjD,CAAQ,KAC9DA,EAAS,2BAA2BiD,EAAM,WAAWA,EAAM,UAAU;AAAA,EAE7E,UAAA;AACI,IAAAxC,EAAa,EAAK;AAAA,EACtB;AACA,SAAOmD;AACX,GAEMC,KAAa,eAAgB,EAAE,IAAAV,GAAI,KAAApC,GAAK,QAAA+C,GAAQ,cAAArD,GAAc,UAAAT,KAAY;AAC5E,MAAItC,GAAKM;AAET,EAAImF,MAAO,KACPzF,IAAM,GAAGqD,CAAG,IAAIoC,CAAE,IAClBnF,IAAS,UAETN,IAAMqD,GACN/C,IAAS;AAIb,MAAI;AACA,IAAAyC,EAAa,EAAI;AACjB,UAAMnC,IAAW,MAAMR,GAAU;AAAA,MAC7B,KAAAJ;AAAA,MACA,QAAAM;AAAA,MACA,MAAM8F;AAAA,MACN,SAAS;AAAA,QACL,gBAAgB;AAAA,MAAA;AAAA,MAEpB,aAAa;AAAA,IAAA,CAChB;AACD,QAAIxF,EAAS,WAAWjB,GAAkB,IAAI;AAC1C,YAAMY,IAAOK,EAAS;AACtB,UAAIL,EAAK;AACL,eAAOA;AAEX,MAAA+B,EAAS,eAAe/B,EAAK,OAAOA,EAAK,OAAO;AAAA,IACpD,MAAA,CAAY8B,GAAmBzB,GAAU0B,CAAQ,KAC7CA,EAAS,eAAe1B,EAAS,IAAI;AAAA,EAE7C,SAAS2E,GAAO;AACZ,IAAIA,EAAM,YAAY,CAAClD,GAAmBkD,EAAM,UAAUjD,CAAQ,KAC9DA,EAAS,yBAAyBiD,EAAM,WAAWA,EAAM,UAAU;AAAA,EAE3E,UAAA;AACI,IAAAxC,EAAa,EAAK;AAAA,EACtB;AAEA,SAAO;AACX,GClVMsD,KAAS,CAAC,EAAE,YAAAC,GAAY,QAAAC,GAAQ,YAAAC,IAAa,CAAC1G,MAAQA,QAAU;AAClE,QAAMmD,IAAOsD,EAAO,QAAQ,MAAM,WAAW,gBAAgB,MACvDE,IAAcF,EAAO,QAAQ,MAAM,WAAW,gBAAgB,UAC9DG,IAAYH,EAAO,QAAQ,MAAM,KAAK,eACtCI,IAAa,KAAK,KAAKD,IAAYD,CAAW,GAC9C,EAAE,GAAGG,GAAW,MAAAC,EAAA,IAASC,GAAA,GACzBC,IAAQ,EAAE,GAAGH,GAAW,MAAAC,EAAA,GACxB,CAACG,GAAYC,CAAa,IAAIvJ,EAASuF,IAAO,CAAC,GAE/CiE,IAAe,SAAUvC,GAAG;AAC9B,QAAIxE,IAAQwE,EAAE,QAAQ;AAEtB,IAAIxE,MAAU,KACV8G,EAAc,EAAE,KAEhB9G,IAAQ,SAASA,CAAK,GACtBA,IAAQ,MAAMA,CAAK,KAAKA,IAAQ,IAAI,IAAIA,GACxC8G,EAAc9G,CAAK;AAAA,EAE3B;AAEA,EAAAgH,GAAU,MAAM;AACZ,IAAAF,EAAchE,IAAO,CAAC;AAAA,EAC1B,GAAG,CAACA,GAAMwD,CAAW,CAAC;AAEtB,QAAMW,IAAe,WAAY;AAC7B,QAAIC,IAAaL,MAAe,KAAK,IAAIA;AACzC,IAAAK,IAAa,KAAK,IAAIA,GAAY,CAAC,GACnCA,IAAa,KAAK,IAAIA,GAAYV,CAAU,GAC5CJ,EAAO,QAAQ,QAAQc,IAAa,CAAC,GACrCJ,EAAcI,CAAU,GACpBL,MAAe,MACfC,EAAc,CAAC;AAAA,EAEvB,GACMK,IAAiB,CAACC,MAAU;AAC9B,UAAMC,IAAUD,EAAM,SAASA,EAAM,SAC/BE,IAAW,OAAO,aAAaD,CAAO;AAC5C,IAAK,KAAK,KAAKC,CAAQ,OAAS,eAAA;AAAA,EACpC;AAEA,2BACKC,IAAA,EACG,UAAA;AAAA,IAAA,gBAAAtK,EAACuK,MAAI,IAAI,EAAE,IAAI,KACV,eACG,gBAAArJ,EAAAC,IAAA,EACI,UAAA;AAAA,MAAA,gBAAAD,EAACsJ,IAAA,EAAW,SAAQ,KAAK,UAAA;AAAA,QAAApB,EAAW,gBAAgBO,CAAK;AAAA,QAAE;AAAA,MAAA,GAAC;AAAA,MAC5D,gBAAA3J;AAAA,QAACyK;AAAA,QAAA;AAAA,UACG,IAAI;AAAA,YACA,OAAO;AAAA,YACP,IAAI;AAAA,YACJ,mDAAmD;AAAA,cAC/C,QAAQ;AAAA,YAAA;AAAA,YAEZ,mDAAmD;AAAA,cAC/C,QAAQ;AAAA,YAAA;AAAA,UACZ;AAAA,UAEJ,SAAQ;AAAA,UACR,MAAK;AAAA,UACL,KAAK;AAAA,UACL,OAAOb;AAAA,UACP,UAAUE;AAAA,UACV,YAAYI;AAAA,UACZ,UAAU,CAACZ;AAAA,QAAA;AAAA,MAAA;AAAA,MAEf,gBAAAtJ,EAACoC,IAAA,EAAO,UAAU,CAACkH,GAAW,MAAK,SAAQ,SAASU,GAAe,UAAAZ,EAAW,MAAMO,CAAK,EAAA,CAAE;AAAA,IAAA,EAAA,CAC/F,EAAA,CAER;AAAA,sBACCe,IAAA,CAAA,CAAW;AAAA,EAAA,GAChB;AAER,GCnFMC,KAAkB,wBAgBlBC,KAAc,SAAUC,GAAQC,GAAM,EAAE,UAAAvE,IAAWoE,IAAiB,iBAAAI,IAAkB,GAAA,IAAU,IAAI;AACtG,SAAI,CAACF,KAAU,CAACC,IACLD,IAGJA,EAAO,QAAQtE,GAAU,SAAUyE,GAAOC,GAAIC,GAAIC,GAAI;AACzD,UAAMC,IAAYF,IAAKJ,EAAKI,CAAE,KAAK,CAAA,IAAKJ;AACxC,WAAOM,EAAUD,CAAE,MAAM,SAAaJ,IAAkBC,IAAQ,KAAMI,EAAUD,CAAE;AAAA,EACtF,CAAC;AACL,GAEA5E,KAAe;AAAA,EACX,aAAAqE;AACJ;AC1BA,SAAwBS,GAAc,EAAE,SAAAC,IAAU,MAAM,WAAAC,IAAY,MAAM,MAAAC,IAAO,IAAI,MAAAC,IAAO,MAAM,GAAGnI,EAAA,GAAQ;AACzG,SACI,gBAAApC,EAACsJ,IAAA,EAAW,SAAAc,GAAkB,WAAAC,GAAuB,GAAGjI,GACnD,UAAA;AAAA,IAAAkI;AAAA,IACAC,KAAQ,IAAIA,CAAI;AAAA,EAAA,GACrB;AAER;ACRA,SAASC,GAAUC,IAAa,IAAO;AACrC,QAAMC,IAAeC,EAAA,GACf,CAACC,GAAMC,CAAO,IAAIzL,EAASsL,CAAY;AAE7C,WAASI,IAAyB;AAChC,eAAW,MAAM;AACf,MAAAD,EAAQF,GAAa;AAAA,IACvB,GAAG,EAAE;AAAA,EACP;AAEA,EAAA9B,GAAU,OACR,OAAO,iBAAiB,UAAUiC,CAAsB,GACjD,MAAM;AACX,WAAO,oBAAoB,UAAUA,CAAsB;AAAA,EAC7D,IACC,CAAA,CAAE;AAGL,WAASH,IAAc;AACrB,QAAII,IAAY,OAAO,OAAO,YAAc,MAAc,KAAK,UAAU;AACzE,UAAMC,IAAS,EAAQD,EAAU,MAAM,oEAAoE;AAC3G,IAAAA,IAAYA,EAAU,YAAA;AACtB,UAAME,IAAS,kHAAkH,KAAKF,CAAS;AAC/I,QAAIG,IAAqB;AACzB,WAAI,OAAO,cAAc,OAAO,cAC9BA,IAAqB,aAErBA,IAAqB,aAEhB,EAAE,QAAAF,GAAQ,QAAAC,GAAQ,UAAUC,MAAuB,YAAY,WAAWA,MAAuB,YAAA;AAAA,EAC1G;AAEA,SAAOT,IAAaG,EAAK,SAASA;AACpC;AClCA,MAAMO,KAAe,CAACC,GAAOnG,MAAW;AACpC,UAAQA,EAAO,MAAA;AAAA,IACX,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,kBAAkBnG,EAAO,QAAA;AAAA,IAChD,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,UAAUnG,EAAO,QAAA;AAAA,IACxC,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,UAAUnG,EAAO,QAAA;AAAA,IACxC,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,kBAAkBnG,EAAO,QAAA;AAAA,IAChD,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,OAAOnG,EAAO,QAAA;AAAA,IACrC,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,gBAAgBnG,EAAO,QAAA;AAAA,IAC9C,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,cAAcnG,EAAO,QAAA;AAAA,IAC5C,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,UAAUnG,EAAO,QAAA;AAAA,IACxC,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,aAAanG,EAAO,QAAA;AAAA,IAC3C,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,aAAanG,EAAO,QAAA;AAAA,IAC3C,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,mBAAmBnG,EAAO,QAAA;AAAA,IACjD,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,kBAAkBnG,EAAO,QAAA;AAAA,IAChD,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,YAAYnG,EAAO,QAAA;AAAA,IAC1C,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,iBAAiBnG,EAAO,QAAA;AAAA,IAC/C,KAAK9D,EAAqB;AACtB,aAAO,EAAE,GAAGiK,GAAO,UAAUnG,EAAO,QAAA;AAAA,IACxC;AACI,aAAOmG;AAAA,EAAA;AAEnB,GCpCMC,KAAe;AAAA,EACjB,kBAAkB;AAAA,EAClB,UAAU;AAAA,EACV,UAAU;AAAA,EACV,kBAAiB;AAAA,EACjB,OAAM;AAAA,EACN,gBAAe;AAAA,EACf,cAAa,CAAA;AAAA,EACb,UAAS,CAAA;AAAA,EACT,aAAY;AAAA,EACZ,aAAa,CAAA;AAAA,EACb,mBAAmB;AAAA,EACnB,kBAAkB;AAAA,EAClB,YAAY;AAAA,EACZ,iBAAiB,CAAA;AAAA,EACjB,UAAU;AACZ,GCfWC,KAAW;AAAA,EAEpB,YAAY;AAAA,EACZ,IAAI;AAAA,EACJ,wEAAwE;AAAA,EACxE,OAAO;AAAA,EACP,oBAAoB;AAAA,IAChB,kBAAkB;AAAA,EAAA;AAE1B,GACMC,KAA6B;AAAA,EAC/B,GAAGC,GAAQ;AAAA,EACX,GAAGF;AACP,GCbaG,KAAW;AAAA,EACpB,YAAY;AAAA,EACZ,IAAI;AAAA,EACJ,wEAAwE;AAAA,EACxE,OAAO;AAAA,EACP,oBAAoB;AAAA,IAChB,kBAAkB;AAAA,EAAA;AAE1B,GACMC,KAA4B;AAAA,EAC9B,GAAGF,GAAQ;AAAA,EACX,GAAGC;AACP,GCZaE,KAAW;AAAA,EACpB,YAAY;AAAA,EACZ,IAAI;AAAA,EACJ,wEAAwE;AAAA,EACxE,OAAO;AAAA,EACP,oBAAoB;AAAA,IAChB,kBAAkB;AAAA,EAAA;AAE1B,GACMC,KAA6B;AAAA,EAC/B,GAAGJ,GAAQ;AAAA,EACX,GAAGG;AACP,GCZaE,KAAW;AAAA,EACpB,YAAY;AAAA,EACZ,IAAI;AAAA,EACJ,wEAAwE;AAAA,EACxE,OAAO;AAAA,EACP,oBAAoB;AAAA,IAChB,kBAAkB;AAAA,EAAA;AAE1B,GACMC,KAA6B;AAAA,EAC/B,GAAGN,GAAQ;AAAA,EACX,GAAGK;AACP,GCVaE,KAAW;AAAA,EACpB,YAAY;AAAA,EACZ,IAAI;AAAA,EACJ,wEAAwE;AAAA,EACxE,OAAO;AAAA,EACP,oBAAoB;AAAA,IAChB,kBAAkB;AAAA,EAAA;AAE1B,GACMC,KAA6B;AAAA,EAC/B,GAAGR,GAAQ;AAAA,EACX,GAAGO;AACP,GCbaE,KAAW;AAAA,EACpB,YAAY;AAAA,EACZ,IAAI;AAAA,EACJ,wEAAwE;AAAA,EACxE,OAAO;AAAA,EACP,oBAAoB;AAAA,IAChB,kBAAkB;AAAA,EAAA;AAE1B,GACMC,KAA6B;AAAA,EAC/B,GAAGV,GAAQ;AAAA,EACX,GAAGS;AACP,GCZaE,KAAW;AAAA,EACtB,YAAY;AAAA,EACZ,IAAI;AAAA,EACJ,wEAAwE;AAAA,EACxE,OAAO;AAAA,EACP,oBAAoB;AAAA,IAClB,kBAAkB;AAAA,EAAA;AAEtB,GACMC,KAA6B;AAAA,EACjC,GAAGZ,GAAQ;AAAA,EACX,GAAGW;AACL,GCdAE,KAAe;AAAA,EACb,YAAY;AAAA,IACV,aAAa;AAAA,MACX,cAAc;AAAA,QACZ,YAAY;AAAA,UACV,KAAK;AAAA,UACL,aAAa;AAAA,UACb,uBAAuB;AAAA;AAAA,UAGvB,gBAAgB;AAAA,UAChB,qBAAqB;AAAA,UACrB,uBAAuB;AAAA,UACvB,wBAAwB;AAAA,UACxB,2BAA2B;AAAA;AAAA,UAG3B,gBAAgB;AAAA,UAChB,qBAAqB;AAAA;AAAA,UAGrB,gBAAgB;AAAA,UAChB,qBAAqB;AAAA,UACrB,2BAA2B;AAAA,UAC3B,2BAA2B;AAAA,UAC3B,6BAA6B,CAACC,MAC5BA,MAAU,IAAI,GAAGA,CAAK,oBAAoB,GAAGA,CAAK;AAAA;AAAA,UAGpD,+BAA+B;AAAA,UAC/B,yBAAyB;AAAA,UACzB,mCAAmC;AAAA;AAAA,UAGnC,eAAe;AAAA,UACf,oBAAoB;AAAA,UACpB,kBAAkB;AAAA,UAClB,oBAAoB;AAAA,UACpB,oBAAoB;AAAA;AAAA,UAGpB,4BAA4B;AAAA,UAC5B,kCAAkC;AAAA,UAClC,2BAA2B;AAAA,UAC3B,2BAA2B;AAAA,UAC3B,2BAA2B;AAAA;AAAA,UAG3B,sBAAsB;AAAA,UACtB,sBAAsB;AAAA,UACtB,4BAA4B;AAAA,UAC5B,0BAA0B;AAAA,UAC1B,qBAAqB;AAAA,UACrB,wBAAwB;AAAA,UACxB,uBAAuB;AAAA,UACvB,oBAAoB;AAAA,UACpB,uBAAuB;AAAA,UACvB,6BAA6B;AAAA;AAAA,UAG7B,wBAAwB;AAAA,UACxB,sBAAsB;AAAA,UACtB,0BAA0B;AAAA,UAC1B,wBAAwB;AAAA,UACxB,kBAAkB;AAAA,UAClB,mBAAmB;AAAA,UACnB,qBAAqB;AAAA,UACrB,yBAAyB;AAAA,UACzB,sBAAsB;AAAA,UACtB,0BAA0B;AAAA,UAC1B,uBAAuB;AAAA,UACvB,0BAA0B;AAAA,UAC1B,uBAAuB;AAAA,UACvB,mBAAmB;AAAA,UACnB,oBAAoB;AAAA,UACpB,mBAAmB;AAAA,UACnB,oBAAoB;AAAA,UACpB,mBAAmB;AAAA,UACnB,oBAAoB;AAAA;AAAA,UAGpB,8BAA8B;AAAA,UAC9B,4BAA4B;AAAA,UAC5B,gCAAgC;AAAA,UAChC,8BAA8B;AAAA,UAC9B,wBAAwB;AAAA,UACxB,yBAAyB;AAAA,UACzB,2BAA2B;AAAA,UAC3B,+BAA+B;AAAA,UAC/B,4BAA4B;AAAA,UAC5B,gCAAgC;AAAA,UAChC,6BAA6B;AAAA,UAC7B,gCAAgC;AAAA,UAChC,6BAA6B;AAAA,UAC7B,yBAAyB;AAAA,UACzB,0BAA0B;AAAA,UAC1B,yBAAyB;AAAA,UACzB,0BAA0B;AAAA,UAC1B,yBAAyB;AAAA,UACzB,0BAA0B;AAAA;AAAA,UAG1B,gBAAgB;AAAA,UAChB,iBAAiB;AAAA,UACjB,kBAAkB;AAAA;AAAA,UAGlB,iBAAiB;AAAA,UACjB,uBAAuB;AAAA,UACvB,yBAAyB;AAAA,UACzB,kBAAkB;AAAA,UAClB,sBAAsB;AAAA,UACtB,kBAAkB;AAAA,UAClB,mBAAmB;AAAA,UACnB,oBAAoB;AAAA;AAAA,UAGpB,kCAAkC,CAACA,MACjCA,MAAU,IAAI,GAAGA,CAAK,oBAAoB,GAAGA,CAAK;AAAA,UACpD,0BAA0B;AAAA,UAC1B,2BAA2B;AAAA;AAAA,UAG3B,mBAAmB,CAACA,MAClBA,MAAU,IACN,GAAGA,EAAM,eAAA,CAAgB,yBACzB,GAAGA,EAAM,gBAAgB;AAAA;AAAA,UAG/B,iBAAiB;AAAA;AAAA,UAGjB,wBAAwB,CAACC,GAAcC,MACrC,GAAGD,EAAa,eAAA,CAAgB,OAAOC,EAAW,eAAA,CAAgB;AAAA;AAAA,UAGpE,6BAA6B;AAAA,UAC7B,gCAAgC;AAAA,UAChC,kCAAkC;AAAA,UAClC,4BAA4B;AAAA,UAC5B,8BAA8B;AAAA;AAAA,UAG9B,sBAAsB;AAAA,UACtB,uBAAuB;AAAA;AAAA,UAGvB,iBAAiB;AAAA;AAAA,UAGjB,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,OAAO;AAAA;AAAA,UAGP,4BAA4B;AAAA,UAC5B,gBAAgB;AAAA,UAChB,kBAAkB;AAAA;AAAA,UAGlB,0BAA0B;AAAA,UAC1B,aAAa,CAACjC,MAAS,eAAeA,CAAI;AAAA,UAC1C,eAAe,CAACA,MAAS,wBAAwBA,CAAI;AAAA;AAAA,UAGrD,mBAAmB;AAAA,UACnB,mBAAmB;AAAA,UACnB,qBAAqB;AAAA;AAAA,UAGrB,oBAAoB,CAAA;AAAA;AAAA,UAGpB,yBAAyB;AAAA;AAAA,UAGzB,2BAA2B;AAAA,UAC3B,6BAA6B;AAAA,UAC7B,6BAA6B;AAAA,UAC7B,6BAA6B;AAAA,UAC7B,6BAA6B;AAAA,UAC7B,8BAA8B;AAAA;AAAA,UAE9B,YAAY;AAAA,UACZ,IAAI;AAAA,UACJ,wEAAuE;AAAA,UACvE,OAAM;AAAA,UACN,oBAAoB;AAAA,YAClB,kBAAkB;AAAA,UAAA;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEJ,GC/LakC,KAAW;AAAA,EACpB,YAAY;AAAA,EACZ,IAAI;AAAA,EACJ,wEAAwE;AAAA,EACxE,OAAO;AAAA,EACP,oBAAoB;AAAA,IAChB,kBAAkB;AAAA,EAAA;AAE1B,GACMC,KAA6B;AAAA,EAC/B,GAAGlB,GAAQ;AAAA,EACX,GAAGiB;AACP,GCJajB,KAAU;AAAA,EACrB,IAAMkB;AAAA,EACN,SAASN;AAAA,EACT,SAASN;AAAA,EACT,SAASP;AAAA,EACT,SAASG;AAAA,EACT,SAASE;AAAA,EACT,SAASI;AAAA,EACT,SAASK;AAAA,EACT,SAASH;AACX;ACVAS,GAAM,OAAOC,EAAG;AAChBD,GAAM,OAAOE,EAAQ;AAErB,MAAMC,KAAevO,GAAA,GACfwO,KAAgBxO,GAAc,IAAI,GAElCyO,KAAgB,CAAC,EAAE,UAAA/N,QAAe;AAEtC,QAAM,CAACgO,GAAWlK,CAAY,IAAImK,GAAW/B,IAAcE,EAAY;AAUvE,WAAS8B,EAAqBC,GAAkBC,GAAcjC,GAAO;AACnE,QAA2BA,KAAU,MAAM;AACzC,YAAMhI,IAAWgI;AACjB,UAAIkC,IAAiBF,IAAmB,eAAe;AACvD,aAAIhK,MACFkK,IAAiBlK,EAAS,MAAM,GAAG,GACnCkK,EAAe,CAAC,IAAIA,EAAe,CAAC,EAAE,YAAA,GACjCF,IAQHE,IAAiBA,EAAe,CAAC,IAP7BD,IACFC,IAAiBA,EAAe,CAAC,EAAE,YAAA,KAEnCA,EAAe,CAAC,KAAMA,EAAe,CAAC,EAAE,SAAS,KAAK,IAAY,KAAR,OAC1DA,IAAiBA,EAAe,KAAK,GAAG,KAMvCA;AAAA,IACT;AACA,WAAOF,IAAmB,eAAe;AAAA,EAC3C;AAeA,iBAAeG,EAAuB,EAAE,gBAAAC,GAAgB,UAAAC,GAAU,SAAA/K,GAAS,cAAAK,GAAc,eAAA2K,GAAe,wBAAAC,IAAyB,CAAA,GAAI,sBAAAC,IAAuB,MAAS;AACnK,UAAMtL,IAAW,MAAME,GAAQ,EAAE,KAAKkL,GAAe,QAAQ,EAAE,QAAQ,QAAQ,IAAIF,GAAgB,UAAAC,KAAY,SAAA/K,GAAS,cAAAK,EAAAA,CAAc,KAAK,CAAA;AAC3I,QAAI8K,IAAe,CAAA;AACnB,QAAI,OAAOvL,KAAa;AACtB,UAAI;AACF,QAAAuL,IAAe,KAAK,MAAMvL,CAAQ;AAAA,MACpC,SAAS2E,GAAO;AACd,gBAAQ,MAAM,iDAAiDA,CAAK,GACpE4G,IAAe,CAAA;AAAA,MACjB;AAAA,QACF,CAAWvL,KAAY,OAAOA,KAAa,aACzCuL,IAAevL;AAEjB,UAAMwL,IAAcD,EAAa,eAAe,CAAA;AAChD,WAAID,KACFE,EAAY,QAAQ;AAAA,MAClB,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,QAAQN;AAAA,MACR,kBAAkB;AAAA,MAClB,WAAWG,EAAuBH,CAAc;AAAA,IAAA,CACjD,GAEHzK,EAAa,EAAE,MAAM5B,EAAqB,oBAAoB,SAAS2M,GAAa,GACpF/K,EAAa,EAAE,MAAM5B,EAAqB,mBAAmB,SAAS2M,EAAY,QAAQ,GACnFA;AAAA,EACT;AAUA,QAAMC,IAA2B,CAAC,EAAE,SAAAC,GAAS,MAAA/L,QACpCA,EAAK,OAAO,CAAAgM,MAAOD,EAAQ,QAAQ,eAAeC,EAAI,KAAK,MAAM,EAAE;AAiB5E,iBAAeC,EAA+B,EAAE,aAAAJ,IAAc,CAAA,GAAI,SAAAE,GAAS,cAAAjL,GAAc,gBAAAyK,GAAgB,4BAAAW,GAA4B,wBAAAR,IAAyB,CAAA,KAAM;AAClK,UAAMS,IAAoBN,EAAY,KAAK,CAAAO,MAAQA,EAAK,aAAaA,EAAK,WAAWb,CAAc,GAC7Fc,IAAuBF,IAAoB,KAAK,MAAMA,EAAkB,SAAS,IAAIT,EAAuBH,CAAc;AAChI,IAAIc,KAAwB,OAAO,KAAKA,CAAoB,EAAE,WAC5DA,EAAqB,aAAaP,EAAyB,EAAE,SAAAC,GAAS,MAAMM,EAAqB,YAAY,GAC7GA,EAAqB,YAAYP,EAAyB,EAAE,SAAAC,GAAS,MAAMM,EAAqB,WAAW,GAC3GA,EAAqB,YAAY,QAAQP,EAAyB,EAAE,SAAAC,GAAS,MAAMM,EAAqB,YAAY,OAAO,GAC3HN,EAAQ,QAAQ,yBAAyBM,EAAqB,qBAAqB,GACnFN,EAAQ,QAAQ,iBAAiBM,EAAqB,aAAa,GACnEN,EAAQ,QAAQ,aAAaM,EAAqB,aAAa,CAAA,CAAE,GACjEN,EAAQ,QAAQ,eAAeM,GAAsB,WAAW,GAChEvL,EAAa,EAAE,MAAM5B,EAAqB,6BAA6B,SAASiN,IAAoBA,EAAkB,WAAW,WAAW,IAE1ID,KACFA,EAA2B,EAAI;AAAA,EAEnC;AAQA,WAASI,EAA4B,EAAE,cAAAxL,KAAgB;AACrDA,IAAAA,EAAa,EAAE,MAAM5B,EAAqB,6BAA6B,SAAS,MAAM;AAAA,EACxF;AAaA,WAASqN,EAAW,EAAE,OAAA3M,GAAO,iBAAA4M,GAAiB,cAAApB,IAAe,IAAO,OAAAjC,GAAO,UAAAsD,KAAY;AACrF,QAAI,CAAC7M,EAAO,QAAO;AACnB,UAAM8M,IAASxB,EAAqBsB,GAAiBpB,GAAcjC,CAAK;AACxE,WAAKsD,IAGE/B,GAAM9K,CAAK,EAAE,GAAG6M,CAAQ,EAAE,OAAOC,CAAM,IAFrChC,GAAM9K,CAAK,EAAE,OAAO8M,CAAM;AAAA,EAGrC;AAOA,WAASC,IAAkB;AACzB,UAAMC,IAAoB5B,EAAU,kBAC9B6B,IAAatD,GAAQqD,CAAiB;AAC5C,aAASE,EAAmBvN,GAAK;AAC/B,aAAOqN,MAAsB,WAAWA,MAAsB,SAASC,EAAW,WAAW,YAAY,aAAa,WAAWtN,CAAG,KAAKA,IAAMsN,EAAWtN,CAAG,KAAKA;AAAA,IACpK;AACA,WAAO,EAAE,oBAAAuN,EAAA;AAAA,EACX;AAEA,SACE,gBAAAjQ,EAACgO,GAAa,UAAb,EAAsB,OAAO,EAAE,WAAAG,GAAW,cAAAlK,GAAc,sBAAAoK,GAAsB,YAAAqB,GAAY,6BAAAD,GAA6B,wBAAAhB,GAAwB,gCAAAW,GAAgC,iBAAAU,EAAA,GAC7K,UAAA3P,GACH;AAEJ,GAEM+P,KAAiBjC,GAAc,UAE/BkC,KAAY,MACT7O,GAAW2M,EAAa,GAG3BmC,KAAkB,MAAM;AAC5B,QAAMC,IAAU/O,GAAW0M,EAAY;AACvC,MAAIqC,MAAY;AACd,UAAM,IAAI,MAAM,qDAAqD;AAEvE,SAAOA;AACT,GC/LMC,KAAY,MAAM;AACpB,QAAM,CAACC,GAAQC,CAAS,IAAIlQ,EAAA,GACtB,CAACmQ,GAASC,CAAU,IAAIpQ,EAAS,EAAK,GACtC,EAAE,WAAA6N,GAAW,cAAAlK,EAAA,IAAiBmM,GAAA,GAC9BO,IAAYxC,EAAU,OACtByC,IAAQ,KAAK;AACnB,MAAIC,KAAS,OAAO,aAAa,MAAM,OAAO,aAAc;AAC5D,QAAMC,IAAe,MAAM;AACvB,QAAIC,IAAkB,SAAS,eAAe,iBAAiB;AAC/D,IAAIA,KACAA,IAAkBA,EAAgB,aAClCA,IAAkBA,IAAkB,OAAO,cAE3CA,IAAkB;AAEtB,UAAMC,IAAmB,OAAO,aAAaD,KAAmB,IAAIH,IAC9DK,IAAY,OAAO,cAAc;AACvC,IAAAT,EAAU,KAAK,IAAIQ,GAAkBC,CAAS,CAAC;AAAA,EACnD;AACA,EAAAlH,GAAU,MAAM;AACZ,IAAI4G,GAAW,WACXD,EAAW,EAAI,GACfI,EAAA;AAAA,EAER,GAAG,CAACH,GAAWE,CAAI,CAAC,GAEpB9G,GAAU,OACN,OAAO,iBAAiB,UAAU+G,CAAY,GAEvC,MAAM;AACT,WAAO,oBAAoB,UAAUA,CAAY;AAAA,EACrD,IACD,CAAA,CAAE;AAEL,WAASI,IAAc;AACnB,UAAMC,IAAS,SAAS,eAAe,iBAAiB;AACxD,IAAAA,EAAO,MAAMR,GAAW,MAAM;AAAA,EAClC;AAEA,SACI,gBAAA3Q,EAAC,OAAA,EACI,UAAA2Q,GAAW,4BACP5O,IAAA,EAAO,WAAW,IAAM,UAAU,MAAM,MAAM4O,EAAU,QAAQ,SAAS,MAAM;AAC5E,IAAA1M,EAAa;AAAA,MACT,MAAM5B,EAAqB;AAAA,MAAY,SAAS,EAAE,QAAQ,IAAO,MAAM,CAAA,EAAC;AAAA,IAAG,CAC9E;AAAA,EACL,GACI,UAAA;AAAA,IAAA,gBAAArC,EAACgC,IAAA,EAAY,WAAU,aACnB,UAAA,gBAAAd,EAACkQ,MAAK,WAAS,IAAC,SAAS,GACrB,UAAA;AAAA,MAAA,gBAAAlQ,EAACkQ,IAAA,EAAK,MAAM,IACR,UAAA;AAAA,QAAA,gBAAAlQ,EAACsJ,IAAA,EAAW,SAAQ,MAAK,WAAU,OAAM,UAAA;AAAA,UAAA;AAAA,UAAEmG,GAAW,MAAM,SAAS;AAAA,QAAA,GAAG;AAAA,QACxE,gBAAA3Q,EAACwK,IAAA,EAAW,SAAQ,WAAU,WAAU,OAAO,UAAAmG,GAAW,MAAM,YAAY,gBAAA3Q,EAAAmB,IAAA,EAAE,UAAA,IAAA,CAAM,EAAA,CAAI;AAAA,MAAA,GAC5F;AAAA,MACA,gBAAAD,EAACkQ,IAAA,EAAK,WAAU,cAAa,MAAM,GAC/B,UAAA;AAAA,QAAA,gBAAApR,EAACqR,IAAA,EAAO,WAAU,4BAA2B,SAASH,GAAa;AAAA,QACnE,gBAAAlR,EAACsR,IAAA,EAAM,WAAU,uBAAsB,SAAS,MAAM;AAClD,UAAArN,EAAa;AAAA,YACT,MAAM5B,EAAqB;AAAA,YAAY,SAAS,EAAE,QAAQ,IAAO,MAAM,CAAA,EAAC;AAAA,UAAE,CAC7E;AAAA,QACL,EAAA,CAAG;AAAA,MAAA,EAAA,CACP;AAAA,IAAA,EAAA,CACJ,EAAA,CACJ;AAAA,IACA,gBAAAnB,EAACe,IAAA,EAAc,UAAQ,IAClB,UAAA;AAAA,MAAAwO,KAAW,gBAAAzQ,EAAC,SAAK,UAAA,aAAA,CAAa;AAAA,MAC9B2Q,GAAW,MAAM,OAAO,gBAAA3Q;AAAA,QAAC;AAAA,QAAA;AAAA,UACtB,IAAG;AAAA,UACH,OAAO,EAAE,OAAO,QAAQ,QAAQ,GAAGuQ,CAAM,KAAA;AAAA,UACzC,OAAOI,GAAW,MAAM,SAAS;AAAA,UACjC,KAAKA,GAAW,MAAM;AAAA,UACtB,iBAAe;AAAA,UACf,aAAY;AAAA,UACZ,SAAQ;AAAA,UACR,QAAQ,MAAMD,EAAW,EAAK;AAAA,QAAA;AAAA,MAAA;AAAA,IAClC,EAAA,CACJ;AAAA,EAAA,EAAA,CACJ,EAAA,CACR;AAER;AC7EA,SAASa,GAAU;AAAA,EACjB,cAAAC;AAAA,EACA,UAAAC;AAAA,EACA,MAAAhG,IAAO;AAAA,EACP,gBAAAiG,IAAiB;AAAA,EACjB,sBAAAC;AAAA,EACA,OAAA7Q,IAAQ;AAAA,EACR,YAAA8Q,IAAa;AAAA,EACb,iBAAAC;AAAA,EACA,aAAAC,IAAc,CAAA;AAAA,EACd,kBAAAC,IAAmB;AAAA,EACnB,iBAAAC;AAAA,EACA,gBAAAC,IAAiB;AACnB,GAAG;AACD,QAAMC,IAAWxG,GAAU,EAAI,GACzByG,IAAsBL,EAAY,SAAS,GAC3CM,IAAwBP,KAAmBC,EAAY,QACvDO,IAAa,MAAM;AACvB,IAAAZ,EAAS,EAAE;AAAA,EACb;AAGA,SAAA1H,GAAU,MAAM;AACd,IAAIjJ,MACF,SAAS,QAAQA;AAAA,EAErB,GAAG,CAACA,CAAK,CAAC,GAGR,gBAAAI,EAAAC,IAAA,EACE,UAAA;AAAA,IAAA,gBAAAnB,EAACqL,IAAA,EAAc,WAAU,cAAa,MAAMmG,GAAc;AAAA,IACzDY,KAA0B,gBAAAlR,EAAAC,IAAA,EACzB,UAAA;AAAA,MAAA,gBAAAnB,EAACsS,IAAA,EAAK,IAAI,EAAE,IAAI,EAAA,GACd,UAAA,gBAAApR,EAACqR,IAAA,EAAY,IAAI,EAAE,iBAAiBP,KAAmB,UAErD,UAAA;AAAA,QAAA,gBAAA9Q,EAACkQ,IAAA,EAAK,WAAS,IACb,UAAA;AAAA,UAAA,gBAAApR,EAACoR,IAAA,EAAK,IAAI,EAAE,SAAS,QAAQ,YAAY,UAAU,MAAM,EAAA,GACvD,UAAA,gBAAApR,EAACwS,IAAA,EAAY,SAAQ,MAAK,cAAW,cAAa,WAAU,KAAI,WAAW,GAAGZ,CAAU,0CACrF,UAAAE,EAAY,IAAI,CAACW,GAAYC,MAAUA,IAAQP,IAC9C,gBAAAnS,EAAC2S,IAAA,EAAQ,SAASN,GAAwB,WAAW,GAAGT,CAAU,0CAA0C,SAAQ,WAAU,IAAI,EAAE,gBAAgB,QAAQ,OAAO,UAAA,GAChK,UAAAa,EAAW,KAAA,GADqBC,CAEnC,IACE,gBAAA1S,EAACwK,IAAA,EAAuB,WAAW,GAAGoH,CAAU,0CAA0C,SAAQ,WACnG,UAAAa,EAAW,KAAA,GADOC,CAErB,CAAa,GACf,GACF;AAAA,WACEZ,EAAY,SAAS,KAAKC,wBAAsBX,IAAA,EAAK,IAAI,EAAE,SAAS,QAAQ,YAAY,UAAU,gBAAgB,WAAA,GAClH,UAAA,gBAAApR,EAACoC,IAAA,EAAO,SAAQ,aAAY,SAASiQ,GAAY,UAAA,OAAA,CAAI,EAAA,CACvD;AAAA,UACCJ,KAAkB,gBAAAjS,EAACoR,IAAA,EAAK,IAAI,EAAE,SAAS,QAAQ,YAAY,UAAU,gBAAgB,WAAA,GACpF,4BAACwB,IAAA,EAAW,OAAM,WAAU,OAAM,QAAO,MAAK,SAC5C,UAAA,gBAAA5S,EAAC6S,IAAA,EAAS,UAAS,UAAA,CAAU,EAAA,CAC/B,EAAA,CACF;AAAA,QAAA,GACF;AAAA,QAEA,gBAAA7S,EAACuK,MAAI,WAAU,yBACb,4BAAC,OAAA,EACC,UAAA,gBAAAvK,EAAC,OAAA,EAAI,OAAO,EAAE,SAASkS,IAAW,UAAU,QAAQ,YAAY,SAAA,GAC9D,UAAA,gBAAAlS,EAAC,SAAI,OAAO,EAAE,MAAM,WAAA,GAClB,UAAA,gBAAAA;AAAA,UAACqL;AAAA,UAAA;AAAA,YACC,WAAW,GAAGuG,CAAU;AAAA,YACxB,SAAQ;AAAA,YACR,MAAMJ;AAAA,YACN,MAAA/F;AAAA,UAAA;AAAA,QAAA,GAEJ,EAAA,CACF,EAAA,CACF,GACF;AAAA,QAEC,CAACyG,KACA,gBAAAhR,EAAAC,IAAA,EACE,UAAA;AAAA,UAAA,gBAAAD,EAACqJ,IAAA,EAAI,UAAA;AAAA,YAAA;AAAA,YAAEmH,uBAAmBA,GAAA,EAAe;AAAA,YAAG;AAAA,UAAA,GAAC;AAAA,4BAC5CnH,IAAA,EAAI,UAAA;AAAA,YAAA;AAAA,YAAEoH;AAAA,YAAqB;AAAA,UAAA,EAAA,CAAC;AAAA,QAAA,EAAA,CAC/B;AAAA,MAAA,EAAA,CAEJ,EAAA,CACF;AAAA,wBACCrB,IAAA,CAAA,CAAU;AAAA,IAAA,EAAA,CACb;AAAA,EAAA,GACF;AAEJ;AAEA,MAAAwC,KAAeC,GAAA,EAAkBxB,EAAS;ACtF1C1D,GAAM,OAAOmF,EAAS;AACtB,MAAMC,KAAe;AAAA,EACjB,MAAMC;AAAA,EACN,UAAUC;AAAA,EACV,eAAeA;AACnB,GACMC,KAAwB,SACxBC,KAA2B,SAE3BC,KAAsB,CAACxT,MAAU;AACnC,QAAM,EAAE,mBAAAyT,MAAsBnP,IACxB,EAAE,MAAAO,GAAM,YAAA6O,GAAY,SAAAC,EAAA,IAAY3T,GAChC,EAAE,sBAAAuO,GAAsB,WAAAF,EAAA,IAAciC,GAAA,GACtCsD,IAAa5T,GAAO,QAAQ,QAC5B6T,IAAeJ,EAAkBG,CAAU,GAC3CE,IAAc,CAACC,MAAS;AAC1B,UAAMC,IAAajG,GAAMgG,CAAI;AAC7B,WAAOC,EAAW,QAAA,KAAaA,EAAW,SAAS;AAAA,EACvD,GACMjE,IAAUxB,EAA0FF,EAAU,QAAA,GAE9G4F,IAAqB,CAACC,MAAa;AAMrC,QALI,EAAAN,MAAe,UAAUA,MAAe,cAAcA,MAAe,oBACnD,CAAC3Q,MACf,OAAOA,KAAU,WAAiB,KAC/B,CAAC8K,GAAM9K,GAAO8M,GAAQ,EAAI,EAAE,QAAA,GAErBmE,CAAQ,IAG1B;AAAA,UAAIP,GAAS;AACT,QAAAO,IAAWnG,GAAMmG,CAAQ,EAAE,IAAA,GAC3BR,EAAW,EAAE,GAAG7O,GAAM,OAAOqP,GAAU;AACvC;AAAA,MACJ;AACA,UAAI,CAACJ,EAAYI,CAAQ,GAAG;AACxB,QAAAR,EAAW,EAAE,GAAG7O,GAAM,OAAO,MAAM;AACnC;AAAA,MACJ;AACA,MAAA6O,EAAW,EAAE,GAAG7O,GAAM,OAAOqP,EAAS,OAAOL,CAAY,GAAG;AAAA;AAAA,EAChE,GACMM,IAAuB,CAACpE,MAAW;AACrC,QAAIA,KAAUA,MAAW0D,EAAkB,oBAAoB;AAC3D,YAAMW,IAAQrE,EAAO,MAAM,GAAG;AAC9B,aAAOqE,EAAM,WAAW,IAAIA,EAAM,CAAC,IAAI;AAAA,IAC3C;AAAA,EACJ,GACMC,IAAoBlB,GAAaS,CAAU,GAC3CU,IAAkBV,MAAe,kBACjC/O,GAAM,QAAQkJ,GAAMlJ,GAAM,MAAM,EAAE,IAAI,OACtCA,GAAM,QAAQkJ,GAAMlJ,EAAK,KAAK,IAAI;AACxC,SACI,gBAAA3E,EAACqU,IAAA,EAAqB,aAAaC,IAC/B,UAAA,gBAAAtU;AAAA,IAACmU;AAAA,IAAA;AAAA,MACG,WAAS;AAAA,MACT,QAAAtE;AAAA,MACA,OAAOuE;AAAA,MACP,UAAUL;AAAA,MACV,WAAW;AAAA,QACP,WAAW;AAAA,UACP,SAAS;AAAA,UAAY,OAAOjU,EAAM;AAAA,UAClC,IAAI;AAAA,YACA,WAAWsT;AAAA,YACX,cAAcC;AAAA,UAAA;AAAA,QAClB;AAAA,MACJ;AAAA,MAEJ,YAAY;AAAA,QACR,uBAAuB,MACOY,EAAqBpE,CAAM,MACxB,QAAQ,QAAQ;AAAA,MACjD;AAAA,IACJ;AAAA,EAAA,GAER;AAER,GAEM0E,KAAsB,CAACC,MAAaC,KAAuB,IAAI,CAACpP,OAAc;AAAA,EAChF,GAAGA;AAAA,EACH,gBAAgBA,EAAS,iBACnB,CAACvF,MAAU,gBAAAE,EAACsT,IAAA,EAAqB,GAAGxT,GAAQ,GAAG0U,EAAA,CAAU,IACzD;AACV,EAAE,GC7EIE,KAAc;AAAA,EAEhB,MAAM;AAAA,EACN,QAAQ;AACZ,GAEMC,KAAY;AAAA,EACd,KAAK;AAAA,EAEL,QAAQ;AACZ,GAEMjP,KAAc;AAAA,EAChB,EAAE,OAAO,YAAY,MAAM,UAAU,OAAO,KAAK,YAAY,mBAAmB,UAAU,IAAO,YAAY,GAAA;AAAA,EAC7G,EAAE,OAAO,YAAY,MAAM,UAAU,OAAO,KAAK,YAAY,0BAA0B,UAAU,IAAO,YAAY,GAAA;AAAA,EACpH,EAAE,OAAO,aAAa,MAAM,WAAW,OAAO,KAAK,YAAY,WAAW,UAAU,IAAO,YAAY,GAAA;AAAA,EACvG,EAAE,OAAO,cAAc,MAAM,WAAW,YAAY,IAAI,OAAO,IAAI,YAAY,MAAM,mBAAEkP,IAAA,EAA4B,wBAAOC,IAAA,EAAQ,OAAOH,GAAY,MAAM,UAAA;AAAA,IAAA;AAAA,sBAAII,IAAA,CAAA,CAAS;AAAA,EAAA,EAAA,CAAE,GAAY,UAAU,GAAG,eAAaJ,GAAY,MAAM,OAAM,QAAO,OAAM,UAAA,GAArI,CAA+I,CAAE,EAAA;AAAA,EACjQ,EAAE,OAAO,gBAAgB,MAAM,WAAW,YAAY,IAAI,OAAO,IAAI,YAAY,MAAM,mBAAEE,IAAA,EAA4B,wBAAOC,IAAA,EAAQ,OAAOH,GAAY,QAAQ,UAAA;AAAA,IAAA,gBAAA1U,EAAC+U,IAAA,EAAW;AAAA,IAAE;AAAA,EAAA,EAAA,CAAC,GAAY,UAAU,GAAG,eAAaL,GAAY,QAAQ,OAAM,UAAS,OAAM,QAAA,GAA3I,CAAmJ,CAAE,EAAA;AAC3Q,GAEMM,KAAgB;AAAA,EAClB,UAAU;AAAA,EACV,UAAU;AAAA,EACV,WAAW;AACf,GACMC,KAAkB,CAAC,GAAG,IAAI,IAAI,IAAI,GAAG,GACrCC,KAAkB,CAAC,EAAE,YAAA9L,IAAa,CAAC1G,MAAQA,GAAK,gBAAAgM,GAAgB,SAAAQ,GAAS,SAAA7I,IAAU,CAAA,GAAI,4BAAAgJ,QAAiC;AAC1H,QAAM,EAAE,WAAAlB,GAAW,cAAAlK,GAAc,6BAAAwL,GAA6B,wBAAAhB,EAAA,IAA2B2B,GAAA,GACnF,EAAE,UAAAqB,EAAA,IAAatB,GAAA,GACfhH,IAASgM,GAAA,GACTC,IAAW/T,GAAA,GACX,EAAE,GAAGmI,GAAW,MAAAC,EAAA,IAASC,GAAA,GACzBC,IAAQ,EAAE,GAAGH,GAAW,MAAAC,EAAA,GACxB,CAAC4L,GAAYC,CAAa,IAAIhV,EAAS,EAAK,GAC5C,CAACiV,GAAUC,CAAW,IAAIlV,EAAS,EAAK,GACxC,CAACmV,GAAeC,CAAgB,IAAIpV,EAAS,CAAA,CAAE,GAC/C,CAACqV,GAAUC,CAAW,IAAItV,EAAA,GAC1B,CAACuV,GAAcC,EAAe,IAAIxV,EAAA,GAClC,CAACyV,IAA2BC,CAA4B,IAAI1V,EAAS,EAAK,GAC1E,CAAC2V,IAAyBC,CAA0B,IAAI5V,EAAS,CAAA,CAAE,GACnE,EAAE,UAAAqO,EAAA,IAAaR,GAAW,cAAcA,EAAU,cAAc,CAAA,GAChEa,IAAcb,GAAW,aACzBgI,IAAoBhI,GAAW,mBAC/BS,IAAgBT,GAAW,cAAc,aAAa,eACtDU,IAAyBV,GAAW,cAAc,aAAa,wBAC/DnI,IAAcoQ,GAAgBlH,GAASmH,EAAuB,GAC9DtQ,IAAYqQ,GAAgBlH,GAASoH,EAAqB,GAC1DC,KAAmBC,GAAQ,MACdC,GAAI,OAAO;AAAA,IACtB,UAAUA,GACL,OAAA,EACA,KAAK,EAAI,EACT,SAAS,6BAA6B,EACtC,IAAI,IAAI,sBAAsB;AAAA,IACnC,UAAUA,GAAI,OAAA,EAAS,IAAI,KAAK,mCAAmC;AAAA,EAAA,CACtE,GAEF,CAAA,CAAE;AAEL,EAAA1M,GAAU,MAAM;AACZ,IAAA2L,EAAiB1G,GAAa,OAAO,CAAAO,MAAQA,EAAK,WAAW,CAAC,CAAC;AAAA,EACnE,GAAG,CAACP,CAAW,CAAC;AAEhB,QAAM0H,KAASC,GAAU;AAAA,IACrB,eAAA3B;AAAA,IACA,kBAAAuB;AAAA,IACA,UAAU,OAAOvN,MAAW;AACxB,YAAM4N,GAAe5N,CAAM;AAAA,IAC/B;AAAA,IACA,MAAM;AAAA,EAAA,CACT,GAEK6N,KAAa,CAAC1M,MAAU;AAC1B,IAAA2L,GAAgB3L,GAAO,aAAa;AAAA,EACxC,GAEMlJ,KAAc,MAAM;AACtB,IAAA6U,GAAgB,IAAI;AAAA,EACxB,GAEMgB,KAAoB,MAAM;AAC5B,IAAAlB,EAAA,GACA3U,GAAA,GACAqU,EAAc,EAAK;AAAA,EACvB,GAEMyB,KAAmB,OAAO1O,GAAI2O,MAAa;AAO7C,UAAMC,IAAc,MAAMvT,GAAQ,EAAE,KAAKkL,GAAe,QANzC;AAAA,MACX,QAAQ;AAAA,MACR,IAAIF;AAAA,MACJ,UAAAC;AAAA,MACA,aAAatG;AAAA,IAAA,GAE+C,SAASoJ,GAAU,cAAAxN,GAAc;AACjG,QAAIT,KAAWyT;AACf,QAAI,OAAOA,KAAgB;AACvB,UAAI;AACA,QAAAzT,KAAW,KAAK,MAAMyT,CAAW;AAAA,MACrC,SAAS9O,IAAO;AACZ,QAAI,OAAO,UAAY,OAAe,OAAO,QAAQ,SAAU,cAC3D,QAAQ,MAAM,8CAA8CA,IAAO8O,CAAW,GAElF7B,EAAS,YAAY,yDAAyD;AAC9E;AAAA,MACJ;AAEJ,KAAI5R,OAAa,MAAQA,IAAU,aAC3BwT,MAAab,KACb1G,EAA4B,EAAE,cAAAxL,GAAc,GAEhDmR,EAAS,YAAY,kCAAkC;AAAA,EAE/D,GAEM8B,KAA0B,OAAOC,MAAW;AAC9C,IAAI9H,KACAA,EAA2B,EAAK,GAEpC,MAAM+H,GAAgBD,CAAM;AAAA,EAChC,GACMP,KAAiB,OAAO5N,MAAW;AACrC,UAAMqO,IAAarO,EAAO,SAAS,KAAA,GAC7BsO,KAA0BtI,EAAY,UAAU,CAAAG,OAAOA,GAAI,aAAakI,CAAU;AAExF,QAAIC,KAA0B,OAAO3B,MAAahB,GAAU,OAAO3F,EAAYsI,EAAuB,EAAE,WAAWtO,EAAO,SAAS;AAC/H,MAAAgN,EAA6B,EAAI;AACjC;AAAA,IACJ;AACA,UAAM,EAAE,eAAAuB,EAAA,IAAkBrI,EAAQ,QAAQ,OACpC,EAAE,eAAAsI,IAAe,uBAAAC,IAAuB,QAAA1Q,OAAWmI,EAAQ,QAAQ,MAAM,SACzEwI,KAAa,CAAA;AACnB,IAAAF,IAAe,QAAQ,CAAArI,OAAO;AAC1B,YAAM,EAAE,OAAAnI,GAAA,IAAUD,GAAOoI,EAAG,GACtBwI,KAAMtR,EAAQ,KAAK,CAAA8I,OAAOA,GAAI,UAAUnI,EAAK,KAAKD,GAAOoI,EAAG;AAClE,MAAAwI,GAAI,QAAQ5Q,GAAOoI,EAAG,EAAE,OACxBuI,GAAW,KAAKC,EAAG;AAAA,IACvB,CAAC;AACD,UAAMvS,KAASY,GAAa,OAAO,IAAI,CAAAmJ,OAAO;AAC1C,YAAM,EAAE,OAAAnI,IAAO,UAAA3B,IAAU,OAAAtC,GAAA,IAAUoM;AACnC,aAAO,EAAE,OAAAnI,IAAO,UAAA3B,IAAU,OAAAtC,GAAA;AAAA,IAC9B,CAAC;AACD,IAAAiD,EAAY,QAAQZ;AACpB,UAAMzB,KAAS;AAAA,MACX,QAAQ;AAAA,MACR,IAAI+K;AAAA,MACJ,UAAU2I;AAAA,MACV,UAAUrO,EAAO;AAAA,MACjB,WAAW,EAAE,WAAAjD,GAAW,aAAAC,GAAa,uBAAAyR,IAAuB,YAAAC,IAAY,eAAAH,EAAA;AAAA,MACxE,WAAWvO,EAAO;AAAA,IAAA;AAEtB,IAAIA,EAAO,WACPrF,GAAO,SAAYqF,EAAO;AAE9B,UAAMiO,KAAc,MAAMvT,GAAQ,EAAE,KAAKkL,GAAe,QAAAjL,IAAQ,SAAS8N,GAAU,cAAAxN,GAAc,GAC3FT,KAAW,OAAOyT,MAAgB,WAAW,KAAK,MAAMA,EAAW,IAAIA,IACvE9Q,KAASwP,MAAahB,GAAU,MAAM,UAAU;AACtD,KAAInR,OAAa,MAAQA,IAAU,YAAY,QAC3C4R,EAAS,YAAY,cAAcjP,EAAM,gBAAgB,GACzD2Q,GAAA,IAEJrI,EAAuB,EAAE,gBAAAC,GAAgB,UAAAC,GAAU,SAAS8C,GAAU,cAAAxN,GAAc,eAAA2K,GAAe,wBAAAC,GAAwB;AAAA,EAC/H,GAEMuI,KAAkB,OAAOD,MAAW;AACtC,QAAI3H,GACAF,KAAoB;AAExB,QAAI6H,MAAW;AACX,MAAA3H,IAAuBX,EAAuBH,CAAc,KAAK;AAAA,SAC9D;AAOH,YAAMuI,KAAc,MAAMvT,GAAQ,EAAE,KAAKkL,GAAe,QANzC;AAAA,QACX,QAAQ;AAAA,QACR,IAAIF;AAAA,QACJ,UAAAC;AAAA,QACA,QAAAwI;AAAA,MAAA,GAE4D,SAAS1F,GAAU,cAAAxN,EAAA,CAAc,KAAK,CAAA;AACtG,UAAIT,KAAWyT;AACf,UAAI,OAAOA,MAAgB;AACvB,YAAI;AACA,UAAAzT,KAAW,KAAK,MAAMyT,EAAW;AAAA,QACrC,SAAS9O,IAAO;AACZ,kBAAQ,MAAM,4CAA4C,EAAE,OAAAA,IAAO,aAAA8O,IAAa;AAChF;AAAA,QACJ;AAEJ,UAAIzT,MAAYA,GAAS;AACrB,YAAI;AACA,UAAAgM,IAAuB,KAAK,MAAMhM,GAAS,SAAS;AAAA,QACxD,SAAS2E,IAAO;AACZ,kBAAQ,MAAM,yCAAyC,EAAE,OAAAA,IAAO,WAAW3E,GAAS,WAAW;AAC/F;AAAA,QACJ;AAAA;AAEA,QAAAgM,IAAuB;AAE3B,MAAIhM,MAAYA,GAAS,aACrB8L,KAAoB9L,GAAS;AAAA,IAErC;AAGA,QAAI,CAACgM,EAAsB;AAC3B,UAAM,EAAE,YAAAkI,GAAY,uBAAAD,IAAuB,eAAAF,IAAe,WAAAxR,IAAW,aAAAC,OAAgBwJ;AACrF,IAAAkI,EAAW,QAAQ,CAAC,EAAE,OAAA1Q,IAAO,OAAA4Q,SAAY;AACrC,MAAI1I,EAAQ,QAAQ,eAAelI,EAAK,MAAM,MAC1CkI,EAAQ,QAAQ,eAAelI,IAAO4Q,EAAK;AAAA,IAEnD,CAAC,GACD1I,EAAQ,QAAQ,yBAAyBuI,EAAqB,GAC9DvI,EAAQ,QAAQ,MAAM,QAAQ,gBAAgBwI,EAAW,IAAI,CAAC,EAAE,OAAA1Q,GAAA,MAAYA,EAAK,GACjFkI,EAAQ,QAAQ,iBAAiBqI,EAAa,GAC9CrI,EAAQ,QAAQ,aAAanJ,MAAa,CAAA,CAAE,GAC5CmJ,EAAQ,QAAQ,eAAelJ,EAAW,GAE1C/B,EAAa,EAAE,MAAM5B,EAAqB,6BAA6B,SAASiN,IAAmB,GACnGD,EAA2B,EAAI;AAAA,EACnC,GAEMwI,KAAe,CAACC,MACXA,EAAI,kBAGTnH,KAAY,CAAChN,GAAQoU,IAAgB,OAAS;AAChD,IAAAnC,EAAYjS,CAAM,GAClB1C,GAAA,GACAqU,EAAc,EAAI,GAClBE,EAAYuC,CAAa,GACrBA,KACArB,GAAO,UAAA;AAAA,EAEf,GAEMsB,KAA0B,YAAY;AACxC,UAAM,EAAE,QAAAb,GAAQ,gBAAgBc,EAAA,IAAoBhC;AACpD,UAAMc,GAAiBI,GAAQc,CAAe,GAC9CxJ,EAAuB,EAAE,gBAAAC,GAAgB,SAAS+C,GAAU,cAAAxN,GAAc,UAAA0K,GAAU,eAAAC,GAAe,wBAAAC,GAAwB,GAC3HqH,EAA2B,CAAA,CAAE;AAAA,EACjC,GAEMgC,KAAc,OAAOC,MAAe;AACtC,UAAMhS,IAASgS,EAAW,UAAU,eAAezD,GAAY,OAAOyD,EAAW,UAAU,iBAAiBzD,GAAY,SAAS;AACjI,QAAIyD,EAAW,OAAO,MAAMhS,MAAWuO,GAAY,QAAQvO,MAAWuO,GAAY,SAAS;AACvF,MAAAU,EAAS,YAAY,iCAAiCjP,MAAWuO,GAAY,OAAO,WAAW,SAAS,EAAE;AAC1G;AAAA,IACJ;AACA,IAAIvO,MAAWuO,GAAY,SACvBkB,EAAY,QAAQ,GACpBc,GAAO,UAAUyB,GAAY,GAAG,GAChC3C,EAAY,EAAI,IAEhBrP,MAAWuO,GAAY,UACvBwB,EAA2B;AAAA,MACvB,QAAQiC,EAAW;AAAA,MACnB,gBAAgBA,EAAW,IAAI;AAAA,IAAA,CAClC;AAAA,EAET,GAEMnB,KAAWN,GAAO,OAAO,SAAS,KAAA,GAElC0B,KAAezC,MAAahB,GAAU;AAC5C,2BACKpK,IAAA,EACG,UAAA;AAAA,IAAA,gBAAArJ;AAAA,MAACkB;AAAAA,MAAA;AAAA,QACG,IAAG;AAAA,QACH,iBAAeyT,IAAe,eAAe;AAAA,QAC7C,iBAAc;AAAA,QACd,iBAAeA,IAAe,SAAS;AAAA,QACvC,SAASgB;AAAA,QACT,OAAOzN,EAAW,cAAcO,CAAK;AAAA,QACrC,6BAAY0O,IAAA,EAAa;AAAA,QAExB,UAAA;AAAA,UAAAjP,EAAW,eAAeO,CAAK;AAAA,UAAE;AAAA,UAAEwM,KAAqB,IAAIA,CAAiB;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,IAElF,gBAAAjV;AAAA,MAACoX;AAAA,MAAA;AAAA,QACG,IAAI;AAAA,QACJ,UAAUzC;AAAA,QACV,MAAM,CAAC,CAACA;AAAA,QACR,SAAS5U;AAAA,QACT,WAAWsX;AAAA,QACX,OAAK;AAAA,QACL,eAAe;AAAA,UACX,mBAAmB;AAAA,QAAA;AAAA,QAEvB,IAAI;AAAA,UACA,oBAAoB,EAAE,UAAU,KAAK,WAAW,IAAA;AAAA,UAChD,sCAAsC;AAAA,YAClC,SAAS;AAAA,UAAA;AAAA,UAEb,mBAAmB;AAAA,YACf,OAAO;AAAA,YACP,WAAW;AAAA,cACP,iBAAiB;AAAA,YAAA;AAAA,UACrB;AAAA,QACJ;AAAA,QAGJ,UAAA;AAAA,UAAA,gBAAAvY,EAACwY,IAAA,EAAS,WAAWC,IAAgB,OAAK,IAAC,SAAS,MAAM9H,GAAUgE,GAAU,GAAG,GAC5E,UAAAvL,EAAW,kBAAkBO,CAAK,GACvC;AAAA,4BACC6O,IAAA,EAAS,WAAWC,IAAgB,OAAK,IAAC,SAASzJ,GAAa,SAAS,GAAG,SAAS,MAAM2B,GAAUgE,GAAU,QAAQ,EAAK,GACzH,UAAA;AAAA,YAAA,gBAAA3U,EAAC0Y,IAAA,EACG,UAAA,gBAAA1Y,EAACqY,IAAA,CAAA,CAAa,GAClB;AAAA,YACCjP,EAAW,sBAAsBO,CAAK;AAAA,UAAA,GAC3C;AAAA,UAECqF,GAAa,SAAS,KAAKA,GAAa,IAAI,CAACG,MAAQ;AAClD,kBAAM,EAAE,UAAA6H,GAAU,UAAA2B,IAAU,QAAAxB,MAAWhI;AACvC,mBACI,gBAAAnP;AAAA,cAACwY;AAAA,cAAA;AAAA,gBACG,SAAS,MAAMtB,GAAwBC,CAAM;AAAA,gBAC7C,WAAWyB;AAAA,gBACX,UAAUzC,MAAsBa;AAAAA,gBAEhC,OAAO5N,EAAWuP,IAAUhP,CAAK;AAAA,gBACjC,OAAK;AAAA,gBAEL,4BAACkP,IAAA,EAAa,SAASzP,EAAW4N,GAAUrN,CAAK,EAAA,CAAG;AAAA,cAAA;AAAA,cAJ/C,aAAawN,CAAM;AAAA,YAAA;AAAA,UAOpC,CAAC;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,IAEL,gBAAAjW;AAAA,MAACK;AAAA,MAAA;AAAA,QACG,MAAM8T;AAAA,QACN,qBAAmB;AAAA,QACnB,OACI,gBAAArV,EAAC8Y,IAAA,EAAM,WAAU,OAAM,WAAW,GAC9B,UAAA,gBAAA5X,EAACsJ,IAAA,EAAW,SAAQ,MACf,UAAA;AAAA,UAAAmL;AAAA,UAAS;AAAA,UAAEvM,EAAW,aAAcuM,MAAahB,GAAU,SAAS,MAAM,EAAG,IAAIhL,CAAK;AAAA,QAAA,EAAA,CAC3F,EAAA,CACJ;AAAA,QAEJ,UAAUyO,KAAe,OAAO;AAAA,QAChC,WAAS;AAAA,QAER,UAAA;AAAA,UAAA7C,KACG,gBAAArU;AAAA,YAACkQ;AAAA,YAAA;AAAA,cACG,WAAW;AAAA,cACX,UAAUsF,GAAO;AAAA,cACjB,QAAQ;AAAA,cACR,WAAS;AAAA,cACT,IAAI;AAAA,gBACA,iDAAiD;AAAA,kBAC7C,YAAY;AAAA,kBACZ,SAAS;AAAA,kBACT,YAAY;AAAA,kBACZ,UAAU;AAAA;AAAA,gBAAA;AAAA,cACd;AAAA,cAGJ,UAAA;AAAA,gBAAA,gBAAA1W,EAACoR,IAAA,EAAK,MAAM,IACR,UAAA,gBAAApR;AAAA,kBAACyK;AAAAA,kBAAA;AAAA,oBACG,cAAcrB,EAAWsN,GAAO,OAAO,UAAU/M,CAAK;AAAA,oBACtD,SAAQ;AAAA,oBACR,MAAK;AAAA,oBACL,QAAO;AAAA,oBACP,yBACK,QAAA,EACI,UAAA;AAAA,sBAAAP,EAAW,mBAAmBO,CAAK;AAAA,sBAAE;AAAA,wCAAE,QAAA,EAAK,OAAO,EAAE,OAAO,MAAA,GAAS,UAAA,IAAA,CAAC;AAAA,oBAAA,GAC3E;AAAA,oBAEJ,WAAS;AAAA,oBACT,MAAM;AAAA,oBACN,UAAU+M,GAAO;AAAA,oBACjB,OAAO,CAAC,CAACA,GAAO,OAAO;AAAA,oBACvB,YAAYA,GAAO,OAAO;AAAA,oBAC1B,WAAS;AAAA,kBAAA;AAAA,gBAAA,GAEjB;AAAA,gBACA,gBAAA1W,EAACoR,IAAA,EAAK,MAAM,IACR,UAAA,gBAAApR;AAAA,kBAACyK;AAAAA,kBAAA;AAAA,oBACG,cAAcrB,EAAWsN,GAAO,OAAO,UAAU/M,CAAK;AAAA,oBACtD,SAAQ;AAAA,oBACR,WAAS;AAAA,oBACT,MAAM;AAAA,oBACN,MAAK;AAAA,oBACL,QAAO;AAAA,oBACP,OAAOP,EAAW,0BAA0BO,CAAK;AAAA,oBACjD,MAAM;AAAA,oBACN,UAAU+M,GAAO;AAAA,oBACjB,OAAO,CAAC,CAACA,GAAO,OAAO;AAAA,oBACvB,YAAYA,GAAO,OAAO;AAAA,oBAC1B,WAAS;AAAA,kBAAA;AAAA,gBAAA,GAEjB;AAAA,gBACA,gBAAA1W,EAACoR,IAAA,EAAK,MAAM,IACR,UAAA,gBAAApR;AAAA,kBAAC+Y;AAAA,kBAAA;AAAA,oBACG,SACI,gBAAA/Y;AAAA,sBAACgZ;AAAA,sBAAA;AAAA,wBACG,SAAStC,GAAO,OAAO;AAAA,wBACvB,MAAM;AAAA,wBACN,UAAUA,GAAO;AAAA,sBAAA;AAAA,oBAAA;AAAA,oBAGzB,OAAOtN,EAAW,WAAWO,CAAK;AAAA,kBAAA;AAAA,gBAAA,GAE1C;AAAA,gBACA,gBAAA3J,EAACoR,IAAA,EAAK,MAAM,IACR,4BAAC0H,IAAA,EAAM,WAAU,OAAM,WAAW,GAAG,OAAO,EAAE,gBAAgB,SAC1D,UAAA;AAAA,kBAAA,gBAAA9Y;AAAA,oBAACoC;AAAAA,oBAAA;AAAA,sBACG,MAAK;AAAA,sBACL,MAAK;AAAA,sBACL,6BAAY6W,IAAA,EAAS;AAAA,sBACrB,OAAM;AAAA,sBACN,SAAQ;AAAA,sBACR,kBAAgB;AAAA,sBAEf,UAAA7P,EAAW,QAAQO,CAAK;AAAA,oBAAA;AAAA,kBAAA;AAAA,kBAE7B,gBAAA3J;AAAA,oBAACoC;AAAAA,oBAAA;AAAA,sBACG,MAAK;AAAA,sBACL,6BAAY8W,IAAA,EAAU;AAAA,sBACtB,OAAM;AAAA,sBACN,SAAQ;AAAA,sBACR,MAAK;AAAA,sBACL,SAASpC;AAAA,sBACT,kBAAgB;AAAA,sBAEf,UAAA1N,EAAW,SAASO,CAAK;AAAA,oBAAA;AAAA,kBAAA;AAAA,gBAC9B,EAAA,CACJ,EAAA,CACJ;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA;AAAA,UAIN0L,KAAcM,MAAahB,GAAU,4BAClCvD,IAAA,EAAK,WAAS,IAAC,QAAQ,GACpB,UAAA;AAAA,YAAA,gBAAApR,EAACoR,IAAA,EAAK,MAAM,IACR,UAAA,gBAAApR;AAAA,cAACmZ;AAAA,cAAA;AAAA,gBACG,IAAI;AAAA,kBACA,qCAAqC;AAAA,oBACjC,WAAW;AAAA,kBAAA;AAAA,kBAEf,uCAAuC;AAAA,oBACnC,WAAW;AAAA,kBAAA;AAAA,kBAEf,qDAAqD;AAAA,oBACjD,SAAS;AAAA,kBAAA;AAAA,gBACb;AAAA,gBAEJ,WAAU;AAAA,gBACV,aAAAjB;AAAA,gBACA,SAASxS;AAAA,gBACT,iBAAAuP;AAAA,gBACA,YAAU;AAAA,gBACV,UAAUQ,EAAc;AAAA,gBACxB,MAAMA;AAAA,gBACN,UAAUoC;AAAA,gBACV,OAAO;AAAA,kBACH,kBAAkB;AAAA,gBAAA;AAAA,gBAEtB,SAAQ;AAAA,gBACR,wBAAwB;AAAA,gBACxB,QAAA1O;AAAA,gBACA,oBAAoB;AAAA,gBACpB,oBAAoB;AAAA,gBACpB,4BAA4B;AAAA,gBAC5B,YAAU;AAAA,cAAA;AAAA,YAAA,GAElB;AAAA,YACA,gBAAAnJ,EAACoR,IAAA,EAAK,MAAM,IACR,4BAAC0H,IAAA,EAAM,WAAU,OAAM,WAAW,GAAG,OAAO,EAAE,gBAAgB,SAC1D,UAAA,gBAAA9Y;AAAA,cAACoC;AAAAA,cAAA;AAAA,gBACG,MAAK;AAAA,gBACL,6BAAY8W,IAAA,EAAU;AAAA,gBACtB,OAAM;AAAA,gBACN,SAAQ;AAAA,gBACR,MAAK;AAAA,gBACL,SAASpC;AAAA,gBACT,kBAAgB;AAAA,gBAEf,UAAA1N,EAAW,SAASO,CAAK;AAAA,cAAA;AAAA,YAAA,GAElC,EAAA,CACJ;AAAA,UAAA,EAAA,CACJ;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,IAGR,gBAAAzI;AAAA,MAACK;AAAA,MAAA;AAAA,QACG,MAAMwU;AAAA,QACN,WAAW,MAAMC,EAA6B,EAAK;AAAA,QACnD,OAAM;AAAA,QACN,QAAQ5M,EAAW,MAAMO,CAAK;AAAA,QAC9B,YAAW;AAAA,QACd,UAAA;AAAA,UAAA;AAAA,UACKqN;AAAA,UAAS;AAAA,UAAG5N,EAAW,iDAAiDO,CAAK;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,IAEnF,gBAAAzI;AAAA,MAACK;AAAA,MAAA;AAAA,QACG,MAAM0U,GAAwB;AAAA,QAC9B,WAAW+B;AAAA,QACX,UAAU,MAAM9B,EAA2B,EAAE;AAAA,QAC7C,OAAM;AAAA,QACN,OAAO;AAAA,QACV,UAAA;AAAA,UAAA;AAAA,UACqCD,GAAwB;AAAA,UAAe;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAC7E,GACJ;AAER,GC7fMmD,KAAgB;AAAA,EAClB,SAAS;AACb,GAEMC,KAAqB,CAACvZ,MAAU;AAClC,QAAM,EAAE,QAAAkI,GAAQ,MAAArD,GAAM,YAAA6O,GAAY,QAAArK,MAAWrJ,GACvCwZ,IAAatR,GAAQ,SAAS,SAAS;AAC7C,MAAIuR,IAAUvR,EAAO,gBAAgBsR,EAAWtR,EAAO,MAAM,KAAK,CAAA;AAElE,EAAI,OAAOA,EAAO,UAAW,aACzBuR,IAAUA,EAAQ,IAAI,CAAC,EAAE,OAAAC,GAAO,OAAAzW,SAAa;AAAA,IACzC,OAAAyW;AAAA,IACA,OAAAzW;AAAAA,EAAA,EACF;AAGN,QAAMiD,IAAcoQ,GAAgBjN,GAAQkN,EAAuB,GAC7DoD,IAAsBjD;AAAA,IACxB,MACIxQ,EAAY,OAAO,OAAO,CAACjD,MAChBA,EAAM,UAAUiF,EAAO,KACjC;AAAA,IACL,CAACA,EAAO,OAAOhC,EAAY,KAAK;AAAA,EAAA,GAG9B+N,IAAqB2F;AAAA,IACvB,CAACvP,MAAU;AACP,UAAIwP,IAAaxP,EAAM,OAAO;AAC9B,UAAInE,EAAY,MAAM,UAAU,GAAG;AAC/B,QAAA2T,IAAaA,EAAW,WAAW,IAAIA,EAAW,CAAC,IAAIA;AAEvD,mBAAWC,KAAW5T,EAAY;AAC9B,UAAI4T,EAAQ,UAAUjV,EAAK,UAGvBiV,EAAQ,aAAaR,GAAc,UACnCO,IAAa,MAAM,QAAQA,CAAU,IAAIA,IAAa,CAACA,CAAU,IAEjEA,IAAaA,MAAe,IAAI,MAAMA;AAAA,MAGlD;AAEA,UAAIA,EAAW,WAAW,KAAKF,EAAoB,CAAC,GAAG;AACnD,QAAAtQ,EAAO,QAAQ,iBAAiBsQ,EAAoB,CAAC,CAAC;AACtD;AAAA,MACJ;AAEA,YAAMzF,IAAW2F,GACXE,IAAUJ,EAAoB,CAAC,IAAIA,EAAoB,CAAC,IAAI9U;AAClE,MAAA6O,EAAW,EAAE,GAAGqG,GAAS,OAAO7F,GAAU;AAAA,IAC9C;AAAA,IACA,CAAC7K,GAAQnB,EAAO,iBAAiByR,GAAqB9U,GAAM6O,CAAU;AAAA,EAAA,GAGpEzQ,IAAQ0W,EAAoB,CAAC,GAAG,SAAS;AAE/C,SACI,gBAAAzZ,EAAC8Z,IAAA,EAAY,SAAQ,YAAW,WAAU,SACtC,UAAA,gBAAA9Z;AAAA,IAAC+Z;AAAA,IAAA;AAAA,MACG,OAAO/R,EAAO;AAAA,MACd,SAAQ;AAAA,MACR,OAAAjF;AAAA,MACA,UAAU,CAACwE,MAAMwM,EAAmBxM,CAAC;AAAA,MACrC,UAAU,MAAM,QAAQxE,CAAK;AAAA,MAC7B,WAAW;AAAA,QACP,YAAY;AAAA,UACR,OAAO;AAAA,YACH,QAAQ;AAAA,YACR,UAAU;AAAA,UAAA;AAAA,QACd;AAAA,MACJ;AAAA,MAGH,UAAAwW,GAAS,IAAI,CAACS,GAAQtH,MACnB,gBAAA1S,EAACwY,IAAA,EAAqB,OAAOwB,EAAO,OAC/B,UAAAA,EAAO,MAAA,GADGtH,CAEf,CACH;AAAA,IAAA;AAAA,EAAA,GAET;AAER,GCrFauH,KAAqB,CAACC,GAAaC,GAAWC,MACnD,OAAOF,MAAgBC,EAAU,SAAe,CAAA,IAC7CD,EAAY,MAAM,GAAG,EAAE,IAAI,CAAAG,MAAa;AAC3C,EAAAD,EAAU,YAAY;AACtB,QAAME,IAAWF,EAAU,KAAKC,CAAS;AACzC,MAAI,CAACC,EAAU,QAAO;AACtB,QAAM,GAAGtT,GAAOuT,IAAY,KAAK,IAAID;AACrC,SAAO;AAAA,IACH,OAAOtT,EAAM,KAAA;AAAA,IACb,MAAMuT,EAAU,KAAA,EAAO,YAAA;AAAA,EAAY;AAE3C,CAAC,EAAE,OAAO,OAAO,GAIRC,KAAiB,CAAC,EAAE,YAAApR,GAAY,OAAAO,GAAO,cAAA8Q,GAAc,aAAAhX,GAAa,MAAA6B,GAAM,eAAAoV,IAAgB,GAAA,MACjG,gBAAAxZ;AAAA,EAACsX;AAAAA,EAAA;AAAA,IACG,SAASiC;AAAA,IACT,aAAWnV;AAAA,IACX,qBAAmB7B;AAAA,IACnB,wBAAsBiX;AAAA,IAErB,UAAA;AAAA,MAAAtR,EAAW,UAAUO,CAAK;AAAA,MAAE;AAAA,MAAErE,EAAK,OAAO,CAAC,EAAE,YAAA,IAAgBA,EAAK,MAAM,CAAC,EAAE,YAAA;AAAA,IAAY;AAAA,EAAA;AAC5F,GAISqV,KAAqB,CAAC,EAAE,eAAAC,GAAe,GAAG9a,QACnD,gBAAAoB,EAAC2Z,IAAA,EAA4B,GAAG/a,GAC3B,UAAA;AAAA,EAAA8a,EAAc,QAAQ,MAAS,gBAAA5a,EAACwa,IAAA,EAAgB,GAAG1a,GAAO,MAAK,OAAM,aAAY,WAAA,CAAW;AAAA,EAC5F8a,EAAc,UAAU,MAAS,gBAAA5a,EAACwa,IAAA,EAAgB,GAAG1a,GAAO,MAAK,SAAQ,aAAY,oEAAA,CAAoE;AAAA,EACzJA,EAAM,sBAAsB,gBAAAE,EAACwa,IAAA,EAAgB,GAAG1a,GAAO,MAAK,oBAAmB,aAAY,qEAAoE,eAAe,GAAA,CAAM;AAAA,EACpL8a,EAAc,QAAQ,MAAS,gBAAA5a,EAACwa,IAAA,EAAgB,GAAG1a,GAAO,MAAK,OAAM,aAAY,WAAA,CAAW;AAAA,EAC5F8a,EAAc,SAAS,MAAS,gBAAA5a,EAACwa,IAAA,EAAgB,GAAG1a,GAAO,MAAK,QAAO,aAAY,YAAA,CAAY;AAAA,EAC/F8a,EAAc,SAAS,MAAS,gBAAA5a,EAACwa,IAAA,EAAgB,GAAG1a,GAAO,MAAK,QAAO,aAAY,mBAAA,CAAmB;AAAA,GAC3G,GAISgb,KAAW,CAACC,IAAY,IAAIC,IAAY,CAAA,MAAO;AACxD,MAAIC,IAAQ;AACZ,aAAW,KAAKF;AACZ,IAAIA,EAAU,CAAC,MAAMC,EAAU,CAAC,MAC5BC,IAAQ;AAGhB,aAAW,KAAKD;AACZ,IAAM,KAAKD,MACPE,IAAQ;AAGhB,SAAOA;AACX,GCXMC,KAAkB,IAClBd,KAAY,uBACZe,KAAe,KACfzG,KAAc;AAAA,EAChB,MAAM;AAAA,EACN,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,SAAS;AAAA,EACT,UAAU;AACd,GACM0G,KAAa;AAAA,EACf,2BAAYC,IAAA,CAAA,CAAY;AAC5B,GACMlB,IAAY;AAAA,EACd,iBAAiB,EAAE,OAAO,CAAA,GAAI,eAAe,OAAO,mBAAmB,MAAM,CAAC,GAAG,0BAA0B,MAAA;AAAA,EAC3G,aAAa,EAAE,MAAM,IAAM,KAAK,IAAM,QAAQ,IAAM,QAAQ,IAAM,kBAAkB,IAAM,QAAQ,GAAA;AAAA,EAClG,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,SAAS;AAAA,EACT,WAAW;AAAA,EACX,QAAQ;AAAA,EAER,QAAQ;AAAA,EACR,SAAS;AAAA,EACT,OAAO;AAAA,EACP,MAAM;AAAA,EACN,UAAU;AAAA,EACV,SAAS;AAAA,EACT,UAAU;AAAA,EACV,iBAAiB,CAAC,GAAG,IAAI,IAAI,IAAI,GAAG;AACxC,GACMmB,KAAsB;AAAA,EACxB,EAAE,KAAK,sBAAsB,OAAO,aAAa,MAAM,YAAY,QAAQ,aAAA;AAAA,EAC3E,EAAE,KAAK,sBAAsB,OAAO,iBAAiB,MAAM,UAAU,QAAQ,aAAA;AAAA,EAC7E,EAAE,KAAK,uBAAuB,OAAO,cAAc,MAAM,YAAY,QAAQ,cAAA;AAAA,EAC7E,EAAE,KAAK,uBAAuB,OAAO,kBAAkB,MAAM,UAAU,QAAQ,cAAA;AACnF,GACMC,KAAsB,CAAC5X,MACrBA,EAAO,0BACC6X,IAAA,EAAU,OAAO,EAAE,OAAO,WAAW,sBAErCtC,IAAA,EAAU,OAAO,EAAE,OAAO,UAAU,GAI9CuC,KAAoBC,GAAO,MAAM,EAAE;AAAA,EACrC,OAAO;AAAA,EACP,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,cAAc;AAClB,CAAC,GAEKC,KAAmBD,GAAOtZ,EAAM,EAAE;AAAA,EACpC,QAAQ;AACZ,CAAC,GAEKwZ,KAAcF,GAAOG,EAAO,EAAE;AAAA,EAChC,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,KAAK;AAAA,EACL,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,cAAc;AAClB,CAAC,GAEKC,KAAgB,SAAUhc,GAAO;AACnC,QAAM;AAAA,IACF,OAAAyE;AAAA,IACA,MAAApB;AAAA,IACA,mBAAAgT;AAAA,IACA,YAAA4F;AAAA,IACA,QAAAC;AAAA,IACA,eAAAC;AAAA,IACA,aAAAC;AAAA,IACA,OAAAC;AAAA,IACA,cAAAC;AAAA,IACA,aAAAC;AAAA,IACA,WAAAC;AAAA,IACA,WAAAC;AAAA,IACA,UAAAC;AAAA,IACA,UAAAC;AAAA,IACA,YAAAC;AAAA,IACA,sBAAAC;AAAA,IACA,cAAAC;AAAA,IACA,cAAAnC;AAAA,IACA,gBAAA/L;AAAA,IACA,QAAAvF;AAAA,IACA,aAAAzD;AAAA,IACA,4BAAA2J;AAAA,IACA,YAAAjG;AAAA,IACA,OAAAO;AAAA,IACA,aAAA3D;AAAA,EAAA,IACAlG,GAEE+c,IAAUtY,EAAM,kBAAkBA,EAAM,QAAQ,OAAOA,EAAM,KAAK,KAAK,QACvEuY,KAAoB9W,IAAa,OAAO,UAAU;AAExD,SACI,gBAAA9E;AAAA,IAAC;AAAA,IAAA;AAAA,MACG,OAAO;AAAA,QACH,SAAS;AAAA,QACT,gBAAgB;AAAA,QAChB,SAAS;AAAA,MAAA;AAAA,MAGb,UAAA;AAAA,QAAA,gBAAAA,EAAC,OAAA,EACI,UAAA;AAAA,UAAAqD,EAAM,gBAAgB,gBAAArD,EAACsJ,IAAA,EAAW,SAAQ,MAAK,WAAU,MAAK,WAAU,UAAS,IAAI,EAAE,IAAI,KAAK,UAAA;AAAA,YAAA;AAAA,YAAEpB,EAAW7E,EAAM,cAAcoF,EAAK;AAAA,UAAA,GAAE;AAAA,UACxIwM,KAAqB5R,EAAM,0BAA0B,gBAAArD,EAACsJ,IAAA,EAAW,WAAU,wBAAuB,SAAQ,MAAK,WAAU,MAAK,WAAU,UAAS,IAAI,EAAE,IAAI,KAAO,UAAA;AAAA,YAAApB,EAAW,sBAAsBO,EAAK;AAAA,YAAE;AAAA,YAAIwM;AAAA,UAAA,GAAkB;AAAA,WAC/N4F,KAAe,CAACC,KAAU,CAACC,wBAAoBzR,IAAA,EAAW,SAAQ,MAAK,WAAU,MAAK,WAAU,UAAS,IAAI,EAAE,IAAI,KAAM,UAAA;AAAA,YAAA;AAAA,YAAE,CAACwR,KAAUD,IAAa,KAAKxX,EAAM;AAAA,UAAA,GAAM;AAAA,UACrK,CAAC0X,KAAiBD,KAAU,CAACD,KAAc,gBAAA/b,EAAC2b,IAAA,EAAiB,WAAYO,IAAqB,gBAAAlc,EAAC+c,IAAA,EAAQ,IAAhB,MAAoB,SAASZ,GAAO,MAAK,UAAS,SAAQ,aAAc,UAAAU,GAAQ;AAAA,UACtKT,EAAa,UAAUjZ,EAAK,QAAQ,SAClC,gBAAAnD;AAAA,YAAC2b;AAAA,YAAA;AAAA,cACG,SAASW;AAAA,cACT,MAAK;AAAA,cACL,SAAQ;AAAA,cAEP,UAAAD,EAAY,QAAQ,SAASlZ,EAAK,QAAQ,SAASiG,EAAW,gBAAgBO,EAAK,IAAIP,EAAW,cAAcO,EAAK;AAAA,YAAA;AAAA,UAAA,IAE1H,gBAAA3J,EAAAmB,IAAA,EAAE;AAAA,UAELob,KAAa,gBAAAvc,EAAC2b,IAAA,EAAiB,WAAYO,IAAqB,gBAAAlc,EAAC+c,IAAA,EAAQ,IAAhB,MAAoB,SAASP,GAAU,MAAK,UAAS,SAAQ,aAAe,UAAApT,EAAW,UAAUO,EAAK,GAAE;AAAA,UACjK8S,KAAY,gBAAAzc,EAAC2b,IAAA,EAAiB,WAAYO,IAAqB,gBAAAlc,EAACgd,IAAA,CAAA,CAAW,IAAnB,MAAuB,SAASN,GAAY,MAAK,UAAS,SAAQ,aAAe,UAAAtT,EAAW,UAAUO,EAAK,EAAA,CAAE;AAAA,QAAA,GAC1K;AAAA,QACA,gBAAAzI,EAAC0a,IAAA,EAAa,GAAG9b,GACZ,UAAA;AAAA,UAAA6c,EAAqB,oBAClB,gBAAA3c;AAAA,YAACid;AAAA,YAAA;AAAA,cACG,QAAQ,CAACC,MACL,gBAAAld;AAAA,gBAACoC;AAAA,gBAAA;AAAA,kBACI,GAAG8a;AAAA,kBACJ,6BAAYC,IAAA,EAAe;AAAA,kBAC3B,MAAK;AAAA,kBACL,SAAQ;AAAA,kBAEP,UAAA/T,EAAW,WAAWO,EAAK;AAAA,gBAAA;AAAA,cAAA;AAAA,YAChC;AAAA,UAAA;AAAA,UAIXgT,EAAqB,UAAW,gBAAAzb,EAAAC,IAAA,EAC7B,UAAA;AAAA,YAAA,gBAAAnB;AAAA,cAACod;AAAA,cAAA;AAAA,gBACG,QAAQ,CAACF,MACL,gBAAAld;AAAA,kBAACoC;AAAA,kBAAA;AAAA,oBACI,GAAG8a;AAAA,oBACJ,6BACKG,IAAA,EAAM,cAAcP,IAAmB,OAAM,WAC1C,UAAA,gBAAA9c,EAACsd,IAAA,CAAA,CAAe,EAAA,CACpB;AAAA,oBAEJ,MAAK;AAAA,oBACL,SAAQ;AAAA,oBAEP,UAAAlU,EAAW,WAAWO,EAAK;AAAA,kBAAA;AAAA,gBAAA;AAAA,cAChC;AAAA,YAAA;AAAA,YAGR,gBAAA3J,EAACoC,IAAA,EAAO,WAAW,gBAAApC,EAACud,IAAA,CAAA,CAAkB,GAAI,SAASX,GAAc,MAAK,SAAS,UAAAxT,EAAW,gBAAgBO,EAAK,EAAA,CAAE;AAAA,UAAA,GACrH;AAAA,UAECgT,EAAqB,UAClB,gBAAA3c,EAAC2a,IAAA,EAAmB,cAAAF,GAA4B,oBAAoBlW,EAAM,UAAU,eAAeA,EAAM,iBAAiB,CAAA,GAAI,YAAA6E,GAAwB,OAAAO,IAAc;AAAA,UAEvK+E,uBACIwG,IAAA,EAAgB,gBAAAxG,GAAgC,SAASvF,GAAQ,SAASzD,GAAa,4BAAA2J,EAAA,CAAwD;AAAA,QAAA,EAAA,CAExJ;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAGZ,GAEMmO,KAAWC,GAAK,CAAC;AAAA,EACnB,OAAAlZ;AAAA,EACA,SAAA8B;AAAA,EACA,KAAAJ;AAAA,EACA,aAAAiU;AAAA,EACA,iBAAA5R;AAAA,EACA,eAAApC;AAAA,EACA,QAAAwX;AAAA,EACA,OAAArW;AAAA,EACA,OAAAvG;AAAA,EACA,aAAA2D;AAAA,EACA,UAAAkZ;AAAA,EACA,UAAAlB;AAAA,EACA,WAAAF;AAAA,EACA,qBAAAqB,IAAsB;AAAA,EACtB,gBAAAC;AAAA,EACA,aAAAC;AAAA,EACA,aAAA5F;AAAA,EACA,kBAAA6F;AAAA,EACA,cAAAC;AAAA,EACA,kBAAAC;AAAA,EACA,sBAAAxX;AAAA,EACA,eAAAyX;AAAA,EACA,kBAAAC;AAAA,EACA,YAAAC,IAAa,MAAM;AAAA,EAAE;AAAA,EACrB,WAAAC;AAAA,EACA,aAAAC;AAAA,EACA,mBAAAC;AAAA,EACA,2BAAAC;AAAA,EACA,eAAAC;AAAA,EACA,gBAAAC;AAAA,EACA,UAAAC,IAAW;AAAA,EACX,aAAAjY,IAAc,CAAA;AAAA,EACd,GAAG5G;AACP,MAAM;AACF,QAAM,CAAC8e,GAAiBC,CAAkB,IAAIve,EAAS,EAAE,UAAU4a,IAAiB,MAAM,GAAG,GACvF,CAAC/X,GAAMyC,EAAO,IAAItF,EAAS,EAAE,aAAa,GAAG,SAAS,CAAA,GAAI,SAAS,CAAA,GAAI,GACvE,CAACwe,IAAWnZ,EAAY,IAAIrF,EAAS,EAAI,GACzC2b,KAAgB,CAAC,CAAC4B,GAClBkB,KAAehB,GACf,CAACiB,IAAWC,EAAY,IAAI3e,EAAS,CAAA,CAAE,GACvC,CAAC4e,IAAYC,EAAa,IAAI7e,EAAS,EAAK,GAC5C,CAACyH,IAAQqX,EAAS,IAAI9e,EAAS,IAAI,GACnC+e,KAAkB,EAAE,WAAW,IAAO,eAAe,IAAO,GAAG9a,EAAM,sBAAA,GACrE,CAAC+a,IAAqBC,EAAsB,IAAIjf,EAAS,EAAK,GAC9D8U,KAAW/T,GAAA,GACXme,IAAiBjb,EAAM,mBAAmB4V,EAAU,SAASA,EAAU,SAASA,EAAU,QAC1F,EAAE,GAAG3Q,GAAW,MAAAC,GAAA,IAASC,GAAA,GACzBC,IAAQ,EAAE,GAAGH,GAAW,MAAAC,GAAA,GACxB,CAACgW,IAAcC,EAAe,IAAIpf,EAAS,EAAE,GAC7C,CAACyF,IAAW4Z,EAAY,IAAIrf,EAAS2Z,GAAmBC,KAAe3V,EAAM,aAAa4V,GAAWC,EAAS,CAAC,GAC/GwF,KAAqB,EAAE,OAAO,CAAA,GAAI,eAAe,OAAO,mBAAmB,MAAM,CAAC,GAAG,0BAA0B,MAAA;AACrH,EAAIrb,EAAM,mBACNqb,GAAmB,QAAQ,CAAA,GAC3Brb,EAAM,eAAe,QAAQ,CAAC4K,MAAQ;AAClC,IAAAyQ,GAAmB,MAAM,KAAKzQ,CAAG;AAAA,EACrC,CAAC;AAEL,QAAM,CAACnJ,IAAa6Z,EAAc,IAAIvf,EAAS,EAAE,GAAGsf,IAAoB,GAClE,EAAE,UAAAnO,IAAU,WAAAqO,IAAW,WAAAC,IAAW,UAAAC,GAAA,IAAa7P,GAAA,GAC/C,EAAE,IAAI8P,OAAkBF,QAAeD,IACvCzX,KAAK4X,IAAe,MAAM,GAAG,EAAE,CAAC,GAChC9W,KAASgM,GAAA,GACT,EAAE,YAAA+K,IAAa,MAAM,mBAAAC,KAAoB,IAAM,4BAAAC,KAA6B,IAAM,gBAAAC,KAAiB,IAAO,gBAAAC,KAAiB,IAAM,iBAAAC,KAAkB,IAAM,iBAAAC,KAAkB,IAAO,cAAAC,KAAe,IAAO,cAAArE,KAAe,CAAA,MAAO7X,GAC9NwX,KAAaxX,EAAM,aAAa,MAAQoa,GACxC+B,KAAkBnc,EAAM,qBAAqB,IAC7Coc,KAAUC,GAAOzd,CAAI,GACrB+Y,KAAc3X,EAAM,gBAAgB,IACpCsc,KAAStc,EAAM,QAAQ,OAAO,CAAC,EAAE,MAAAuc,EAAA,MAAW,EAAQA,CAAK,EAAE,IAAI,CAAAnc,MAAQA,EAAK,IAAI,GAChF,CAACoc,IAAyB1R,EAA0B,IAAI/O,EAAS,EAAK,GACtE,EAAE,WAAA6N,IAAW,cAAAlK,IAAc,YAAAyL,IAAY,6BAAAD,IAA6B,wBAAAhB,IAAwB,gCAAAW,GAAA,IAAmCgB,GAAA,GAC/H,EAAE,UAAAR,OAAazB,IACfwO,KAAuB,EAAE,GAAGxC,EAAU,aAAa,GAAGhM,GAAU,aAAa,aAAa,GAAG5J,EAAM,aAAa,GAAGE,EAAA,GACnH,EAAE,UAAAkK,GAAA,IAAaR,IAAW,cAAcA,GAAU,cAAc,CAAA,GAChE;AAAA,IACF,cAAc;AAAA,MACV,aAAa;AAAA,QACT,wBAAA6S,KAAyB,CAAA;AAAA,QACzB,KAAKpe;AAAA,QACL,oBAAAqe;AAAA,QACA,wBAAApS;AAAA,QACA,eAAAD;AAAA,QACA,mBAAAsS,KAAoB;AAAA,QACpB,eAAAC,KAAgB;AAAA,MAAA,IAChB,CAAA;AAAA,IAAC,IACL,CAAA;AAAA,IACJ,mBAAAhL;AAAA,EAAA,IACAhI,IACEiT,KAA8B,CAAC,WAAW,cAAc,SAAS,GACjE9c,KAAW6J,GAAU,eAAe,CAAA,GACpCkT,KAAgB9c,EAAM,QAAQ,KAAK,OAAO4K,EAAI,SAAS,YAAY,GAAG,SAAS,IAC/E3K,KAAyB,EAAE,KAAKmY,GAAqB,KAAK,MAAMA,GAAqB,MAAM,QAAQA,GAAqB,OAAA,GACxH,EAAE,QAAAX,IAAQ,SAAAsF,IAAS,WAAAC,GAAA,IAAcld,GAAe,EAAE,UAAAC,IAAU,OAAAC,GAAO,wBAAAC,IAAwB,GAC3F4E,IAAa7E,EAAM,eAAe,CAAC7B,MAAQA,IAC3C,EAAE,gBAAA8e,IAAgB,gBAAAC,IAAgB,gBAAAC,KAAiB,IAAO,WAAAC,IAAW,aAAAC,KAAc,IAAM,sBAAAC,KAAuB,IAAO,iBAAA7P,IAAiB,iBAAA8P,KAAkB,IAAO,oBAAAC,KAAqB,OAAOxd,GAC7Lyd,KAAYzd,EAAM,aAAaA,EAAM,OACrCmK,KAAiBnK,EAAM,gBAAgBA,EAAM,QAAQ,cACrDgE,KAAe,IAAI,gBAAgB,OAAO,SAAS,MAAM,GAEzD0Z,KAAqB1Z,GAAa,IAAI,UAAU,KAAKA,GAAa,IAAI,UAAU,GAChF2Z,MAAgB,MAAM;AACxB,QAAID,IAAoB;AACpB,YAAME,IAAa,KAAK,MAAMF,EAAkB;AAChD,UAAI,OAAOE,MAAehI,EAAU,UAAUgI,MAAe;AACzD,eAAOA;AAAA,IAEf;AACA,WAAO,CAAA;AAAA,EACX,GAAA,GACM9F,KAAcuE,GAAO,oBAAI,KAAK,GAE9BwB,KAAkB,CAAC,EAAE,KAAAtK,QAAU;AACjC,UAAMuK,IAAQvK,EAAIoI,CAAU;AAE5B,IADmB7D,GAAY,QAAQ,IAAIgG,CAAK,IAE5ChG,GAAY,QAAQ,OAAOgG,CAAK,IAEhChG,GAAY,QAAQ,IAAIgG,CAAK,GAEjCpD,GAAa,MAAM,KAAK5C,GAAY,OAAO,CAAC;AAAA,EAChD,GAEMiG,KAAiB,CAAC3e,MAAW;AAC/B,UAAM0e,IAAQ1e,EAAO,IAAIuc,CAAU,GAC7B,CAACqC,GAAgBC,CAAiB,IAAIliB,EAAS+b,GAAY,QAAQ,IAAIgG,CAAK,CAAC;AAEnF,WAAAtY,GAAU,MAAM;AACZ,MAAAyY,EAAkBnG,GAAY,QAAQ,IAAIgG,CAAK,CAAC;AAAA,IAEpD,GAAG,CAAC1e,EAAO,KAAK0Y,GAAY,QAAQ,IAAI,CAAC,GAQrC,gBAAArc;AAAA,MAACgZ;AAAAA,MAAA;AAAA,QACG,SAPoB,CAAC7O,MAAU;AACnC,UAAAA,EAAM,gBAAA,GACNiY,GAAgBze,CAAM;AAAA,QAC1B;AAAA,QAKQ,SAAS4e;AAAA,QACT,OAAM;AAAA,QACN,YAAY,EAAE,cAAc,WAAA;AAAA,MAAW;AAAA,IAAA;AAAA,EAGnD,GAEME,KAAkB;AAAA,IACpB,OAAS;AAAA,MACL,MAAQ;AAAA,MACR,cAAgB;AAAA,IAAA;AAAA,IAEpB,MAAQ;AAAA,MACJ,gBAAkB,CAAC1f,MACf2M,GAAW,EAAE,OAAA3M,GAAO,iBAAiB,IAAM,cAAc,IAAO,OAAOoL,GAAU,UAAU,UAAAyB,IAAU;AAAA,MAEzG,iBAAmB0D,GAAoB,EAAE,YAAY,QAAQ,OAAOlK,EAAW,SAASO,CAAK,EAAA,CAAG;AAAA,IAAA;AAAA,IAEpG,UAAY;AAAA,MACR,gBAAkB,CAAC5G,MACf2M,GAAW,EAAE,OAAA3M,GAAO,iBAAiB,IAAO,cAAc,IAAO,OAAOoL,GAAU,UAAU,UAAAyB,IAAU;AAAA,MAE1G,iBAAmB0D,GAAoB,EAAE,YAAY,YAAY,OAAOlK,EAAW,SAASO,CAAK,EAAA,CAAG;AAAA,IAAA;AAAA,IAExG,eAAiB;AAAA,MACb,gBAAkB,CAAC5G,MACf2M,GAAW,EAAE,OAAA3M,GAAO,iBAAiB,IAAO,cAAc,IAAO,OAAOoL,GAAU,UAAU,UAAAyB,IAAU;AAAA,MAE1G,iBAAmB0D,GAAoB,EAAE,MAAM,iBAAiB,SAAS,IAAM;AAAA,IAAA;AAAA,IAEnF,SAAW;AAAA,MACP,YAAYiI;AAAA,IAAA;AAAA,IAEhB,QAAU;AAAA,MACN,MAAQ;AAAA,MACR,cAAgB;AAAA,IAAA;AAAA,IAEpB,WAAa;AAAA,MACT,YAAY,CAAC5X,MAAW,gBAAA3D,EAACsiB,IAAA,EAAgB,GAAG3e,EAAA,CAAQ;AAAA,IAAA;AAAA,EACxD;AAGJ,EAAAoG,GAAU,MAAM;AACZ,IAAA4W,GAAQ,UAAUxd;AAAA,EACtB,GAAG,CAACA,CAAI,CAAC,GAET4G,GAAU,MAAM;AACZ,QAAI,CAACmU,KAAiB,CAAC,OAAO,KAAKA,CAAa,EAAE,OAAQ;AAC1D,QAAIA,EAAc,OAAO;AACrB,MAAA2B,GAAe,EAAE,OAAO,CAAA,GAAI,eAAe,OAAO,mBAAmB,CAAA,GAAI,0BAA0B,OAAO;AAC1G;AAAA,IACJ;AACA,UAAM6C,IAAQ,OAAO,QAAQxE,CAAa,EAAE,OAAO,CAACyE,GAAK,CAACjgB,GAAKK,CAAK,OAC5DL,MAAQyX,EAAU,aAAazX,MAAQyX,EAAU,UACjDwI,EAAI,KAAK5f,CAAK,IACPL,KAAOwb,KACdyE,EAAI,KAAK,EAAE,OAAOjgB,GAAK,OAAAK,GAAO,UAAU,UAAU,MAAM,UAAU,GAE/D4f,IACR,CAAA,CAAE;AACL,IAAA9C,GAAe,EAAE,OAAA6C,GAAO,eAAe,OAAO,mBAAmB,CAAA,GAAI,0BAA0B,OAAO;AAAA,EAC1G,GAAG,CAACxE,CAAa,CAAC;AAElB,QAAM0E,KAAgB,CAAC,EAAE,OAAA5b,SACF2Z,GAAQ,QAAQ,WAAW,CAAA,GAC5BkC,GAAU7b,CAAK,EAAE,MAAM,KAAK,CAAA;AAGlD,EAAA+C,GAAU,MAAM;AACZ,IAAIjK,EAAM,eAAe,CAACwgB,MAG1Brc,GAAa;AAAA,MACT,MAAM5B,EAAqB;AAAA,MAAwB,SAAS;AAAA,QACxD,cAAc;AAAA,QACd,QAAQ,EAAE,QAAQ,IAAM,WAAW,IAAM,QAAQ,IAAM,OAAO,IAAM,QAAQ,GAAA;AAAA,MAAK;AAAA,IACrF,CACH;AAAA,EACL,GAAG,CAAA,CAAE;AACL,QAAM,EAAE,eAAAygB,KAAgB,CAAA,EAAC,IAAMve,GACzB,EAAE,aAAAmB,IAAa,eAAA6R,IAAe,WAAAsL,GAAA,IAAcrM,GAAQ,MAAM;AAC5D,QAAIuM,IAAiB1c,KAAW9B,EAAM,eAAeA,EAAM;AAC3D,IAAIma,MACAqE,IAAiB,CAAC,GAAGrE,GAAgB,GAAGqE,CAAc;AAE1D,UAAMxL,IAAgB,EAAE,MAAM,CAACyL,GAAgC,KAAK,GAAG,OAAO,GAAC,GACzEC,IAAe,CAAA,GACfJ,IAAY,CAAA;AAClB,eAAW7a,KAAU+a,GAAgB;AACjC,UAAI/a,EAAO,cAAc,QAAS0V,KAAU1V,EAAO,WAAW0V,KAAY1V,EAAO,SAASmS,EAAU,aAAanS,EAAO,gBAAgB,GAAQ;AAChJ,YAAMkb,IAAY,CAAA;AASlB,UARIlb,EAAO,SAASmS,EAAU,cAC1B+I,EAAU,OAAO,UACjBA,EAAU,QAAQlb,EAAO,MAAM,QAAQ,MAAM,OAAO,IAEpDya,GAAgBza,EAAO,IAAI,KAC3B,OAAO,OAAOkb,GAAWT,GAAgBza,EAAO,IAAI,CAAC,GAGrDkb,EAAU,iBAAiB/I,EAAU,UAAUnS,EAAO,SAASmS,EAAU,SAAS;AAClF,YAAIgJ,IAAY,CAAA;AAEhB,QAAID,EAAU,iBAAiB/I,EAAU,WACrC+I,EAAU,eAAeN,IAGzBO,IAFsB,CAAC,GAAG1O,GAAA,GAAwB,GAAG2O,GAAA,CAAwB,EACxE,OAAO,CAACC,OAAO,CAAC,MAAM,OAAO,SAAS,EAAE,SAASA,GAAG,KAAK,CAAC,IAI/Drb,EAAO,SAASmS,EAAU,YAC1BgJ,IAAYG,GAAA,IAGhBJ,EAAU,kBAAkBC,EAAU,IAAI,CAAC9d,OAAc;AAAA,UACrD,GAAGA;AAAA,UACH,gBAAgBA,EAAS,iBACnB,CAAC1B,OACC,gBAAA3D;AAAA,YAACqZ;AAAA,YAAA;AAAA,cACG,QAAQ;AAAA,gBACJ,GAAGrR;AAAA,gBACH,GAAIA,EAAO,SAASmS,EAAU,UACxB;AAAA,kBACE,cAAc;AAAA,oBACV,EAAE,OAAO,IAAM,OAAO,MAAA;AAAA,oBACtB,EAAE,OAAO,IAAO,OAAO,KAAA;AAAA,kBAAK;AAAA,gBAChC,IAEF,CAAA;AAAA,gBACN,SAAAwG;AAAA,cAAA;AAAA,cAEH,GAAGhd;AAAA,cACJ,eAAa;AAAA,YAAA;AAAA,UAAA,IAGnB;AAAA,QAAA,EACR;AAAA,MACN;AACA,OAAIqE,EAAO,UAAUA,EAAO,UACxBkb,EAAU,gBAAgB;AAE9B,YAAMK,IAAana,EAAWpB,EAAO,aAAaA,EAAO,OAAO2B,CAAK;AACrE,MAAAsZ,EAAa,KAAK,EAAE,YAAAM,GAAY,aAAaA,GAAY,GAAGvb,GAAQ,GAAGkb,GAAW,GAC9Elb,EAAO,UACPuP,EAAcvP,EAAO,WAAWmS,EAAU,QAAQA,EAAU,QAAQA,EAAU,IAAI,EAAE,KAAKnS,EAAO,KAAK,GAEzG6a,EAAU7a,EAAO,KAAK,IAAIA;AAAA,IAC9B;AACA,QAAIwb,IAAejf,EAAM;AACzB,IAAIif,MAAiB,OACjBA,IAAe,EAAE,oBAAoB,IAAM,oBAAoB,IAAM,qBAAqB,IAAM,qBAAqB,GAAA,IAErHA,KAAgB,OAAOA,MAAiBrJ,EAAU,UAClDmB,GAAoB,QAAQ,CAAC,EAAE,KAAA5Y,GAAK,OAAAsE,GAAO,MAAA1B,GAAM,QAAAme,QAAa;AAC1D,UAAID,EAAa9gB,CAAG,MAAM,IAAM;AAC5B,cAAMsF,IAAS,EAAE,OAAAhB,GAAO,MAAA1B,GAAM,YAAYme,GAAQ,OAAO,IAAA;AACzD,QAAIne,MAAS6U,EAAU,aACnBnS,EAAO,kBAAkBsL,GAAoB,EAAE,YAAY,QAAQ,GACnEtL,EAAO,iBAAiBya,GAAgB,SAAS,gBACjDza,EAAO,YAAY,KAEvBib,EAAa,KAAKjb,CAAM;AAAA,MAC5B;AAAA,IACJ,CAAC;AAEL,UAAM0b,IAAU,CAAA;AAChB,WAAI,CAACzH,MAAiB,CAACF,OACfuF,MACAoC,EAAQ,KAAK,gBAAA1jB,EAAC4U,IAAA,EAAoB,MAAM,gBAAA5U,EAAC6U,IAAA,EAAQ,OAAM,QAAO,UAAA,gBAAA7U,EAAC8U,MAAS,EAAA,CAAE,GAAY,eAAaJ,GAAY,MAAM,OAAM,QAAO,OAAM,WAAU,CAAE,GAEpJiI,GAAqB,QACrB+G,EAAQ,KAAK,gBAAA1jB,EAAC4U,IAAA,EAAoB,MAAM,gBAAA1T,EAAC2T,IAAA,EAAQ,OAAM,QAAO,UAAA;AAAA,MAAA,gBAAA7U,EAAC2jB,IAAA,EAAS;AAAA,MAAE;AAAA,IAAA,GAAC,GAAY,eAAajP,GAAY,MAAM,OAAM,QAAO,OAAM,WAAU,CAAE,GAErJ6M,MACAmC,EAAQ,KAAK,gBAAA1jB,EAAC4U,IAAA,EAAoB,MAAM,gBAAA1T,EAAC2T,IAAA,EAAQ,OAAM,UAAS,UAAA;AAAA,MAAA,gBAAA7U,EAAC+U,IAAA,EAAW;AAAA,MAAE;AAAA,IAAA,GAAC,GAAY,eAAaL,GAAY,QAAQ,OAAM,UAAS,OAAM,SAAQ,CAAE,GAE3JkN,MACA8B,EAAQ,KAAK,gBAAA1jB,EAAC4U,IAAA,EAAoB,MAAM,gBAAA1T,EAAC2T,IAAA,EAAQ,OAAM,WAAU,UAAA;AAAA,MAAA,gBAAA7U,EAAC4jB,IAAA,EAAY;AAAA,MAAE;AAAA,IAAA,GAAC,GAAY,eAAalP,GAAY,SAAS,OAAM,WAAU,OAAM,WAAU,CAAE,GAEjKoO,GAAc,UACdA,GAAc,QAAQ,CAAC,EAAE,MAAAe,GAAM,QAAA1d,GAAQ,OAAA2d,QAAY;AAC/C,MAAAJ,EAAQ;AAAA,QACJ,gBAAA1jB;AAAA,UAAC4U;AAAA,UAAA;AAAA,YACG,MAAM,gBAAA5U,EAAC6U,IAAA,EAAQ,OAAO1O,GAAS,aAAW0d,CAAI,KAAK,gBAAA7jB,EAAC2jB,IAAA,CAAA,CAAS,EAAA,CAAG;AAAA,YAChE,eAAaxd;AAAA,YACb,OAAOA;AAAA,YACP,OAAO2d,KAAS;AAAA,UAAA;AAAA,QAAA;AAAA,MACpB;AAAA,IAER,CAAC,IAGLzC,GAAc,UACdqC,EAAQ,KAAK,gBAAA1jB,EAAC4U,IAAA,EAAoB,MAAM,gBAAA1T,EAAC2T,IAAA,EAAQ,OAAM,qBAAoB,UAAA;AAAA,MAAA,gBAAA7U,EAAC+jB,IAAA,EAAiB;AAAA,MAAE;AAAA,IAAA,GAAC,GAAY,eAAarP,GAAY,UAAU,OAAM,qBAAoB,OAAM,WAAU,CAAE,GAE3LgP,EAAQ,UACRT,EAAa,KAAK;AAAA,MACd,OAAO;AAAA,MACP,MAAM;AAAA,MACN,OAAO;AAAA,MACP,OAAOS,EAAQ,SAAS;AAAA,MACxB,SAAS;AAAA,MACT,YAAY,CAAC/f,MAAW;AACpB,cAAMqgB,IAAa,CAAC,GAAGN,CAAO;AAC9B,YAAIpC,MAAW,CAACvF,IAAY;AACxB,gBAAMkI,IAAatgB,EAAO,IAAI,YAAY;AAC1C,UAAAqgB,EAAW,CAAC,IACR,gBAAAhkB;AAAA,YAAC4U;AAAA,YAAA;AAAA,cACG,MACI,gBAAA5U,EAAC6U,IAAA,EAAQ,OAAM,QACX,UAAA,gBAAA7U,EAAC8U,MAAS,GACd;AAAA,cAEJ,eAAaJ,GAAY;AAAA,cACzB,OAAM;AAAA,cACN,OAAM;AAAA,cACN,UAAUuP;AAAA,YAAA;AAAA,UAAA;AAAA,QAGtB;AACA,eAAOD;AAAA,MACX;AAAA,IAAA,CACH,GAELzM,EAAc,MAAM,KAAK,SAAS,GAC3B,EAAE,aAAa0L,GAAc,eAAA1L,GAAe,WAAAsL,EAAAA;AAAAA,EACvD,GAAG,CAACxc,GAAS9B,GAAOmZ,GAAQjZ,GAAawX,IAAeyC,CAAc,CAAC,GAEjEwF,KAAY,CAAC/d,IAAS,QAAQC,IAAc,CAAA,GAAI3C,GAAa4C,GAASqU,GAAe/T,MAAoB;AAC3G,UAAM,EAAE,UAAAb,GAAU,MAAAD,EAAA,IAAS+Y;AAE3B,QAAItY,IAAiB/B,EAAM,gBACvB4f,IAAU,GAAG7d,MAAmB,OAAO2a,KAAqBre,MAAO,EAAE,GAAG2B,EAAM,OAAO0B,CAAG;AAE5F,IAAIyU,MACAyJ,IAAU,GAAGlD,EAAkB,GAAG1c,EAAM,QAAQ,IAChD+B,IAAiB,QAGjBmW,KAAYF,OACZnW,EAAYqW,IAAW,YAAY,SAAS,IAAI,MAAM,QAAQkB,CAAQ,IAAIA,EAAS,KAAK,GAAG,IAAIA;AAGnG,UAAMyG,IAAU,EAAE,GAAGpe,GAAA;AACrB,QAAIgY,GAAc,OAAO,SAAS,GAAG;AACjC,YAAM,EAAE,aAAAqG,IAAa,eAAAC,GAAA,IAAkBtG,EAAa,MAAM,CAAC,KAAK,CAAA,GAC1DuG,KAAapK,EAAU,kBAAkBkK,EAAW;AAC1D,MAAAD,EAAQ,QAAQ,CAAC,EAAE,OAAOG,IAAY,UAAUD,IAAe,eAAe,IAAO,GACjF,KAAK,UAAUte,EAAW,MAAM,KAAK,UAAUoe,CAAO,MACtDvE,GAAe,EAAE,GAAGuE,GAAS,GAC7BpG,EAAa,MAAM,SAAS;AAAA,IAEpC;AAUA,IATIzZ,EAAM,cAAc8D,MACpB3B,EAAY,KAAK,EAAE,OAAOnC,EAAM,YAAY,UAAU,MAAM,MAAM,UAAU,OAAO,OAAO8D,EAAE,GAAG,GAG/FkW,MACA6F,EAAQ,QAAQ,CAAC,GAAIA,EAAQ,SAAS,CAAA,GAAK,GAAG7F,CAAiB,IAEnEnY,IAAc,EAAE,GAAGA,GAAa,GAAGtG,EAAM,YAAA,IAClB,CAACskB,EAAQ,MAAM,UAAUA,EAAQ,MAAM,MAAM,CAAAzf,OAAQ,WAAWA,MAAQA,GAAK,UAAU,MAAS,MAGvHc,GAAQ;AAAA,MACJ,QAAAU;AAAA,MACA,MAAO1C,IAAqB,IAAPoC;AAAA,MACrB,UAAWpC,IAAyB,MAAXqC;AAAA,MACzB,WAAAC;AAAA,MACA,aAAaqe;AAAA,MACb,gBAAA9d;AAAA,MACA,KAAK6d;AAAA,MACL,cAAAxe;AAAA,MACA,SAAAC;AAAA,MACA,aAAAF;AAAA,MACA,OAAAnB;AAAA,MACA,eAAA2B;AAAA,MACA,aAAAE;AAAA,MACA,UAAUgP,GAAS;AAAA,MACnB,aAAA3R;AAAA,MACA,SAAA4C;AAAAA,MACA,UAAUqU,IAAgBnW,EAAM,iBAAiB;AAAA,MACjD,gBAAgBmW,IAAgBnW,EAAM,iBAAiB;AAAA,MACvD,cAAAN;AAAA,MACA,sBAAAwC;AAAA,MACA,SAASgL;AAAA,MACT,aAAA/K;AAAA,MACA,iBAAAC;AAAA,IAAA,CACH;AAAA,EACL,GAEM4O,KAAW,CAAC,EAAE,IAAAlN,GAAI,QAAAN,IAAS,IAAI,MAAAyc,QAAW;AAC5C,QAAIlc,GAAiB;AACjB,MAAAF,GAAU,EAAE,IAAAC,GAAI,KAAKpC,KAAO1B,EAAM,KAAK,cAAAoB,IAAc,iBAAA2C,GAAiB,OAAA/D,GAAO,eAAA2B,GAAe,OAAAmB,EAAA,CAAO;AACnG;AAAA,IACJ;AACA,QAAIod,IAAOzE;AACX,IAAKyE,EAAK,SAAS,GAAG,MAClBA,KAAQ,MAERD,MAAS,UACTC,KAAQ,OAAOpc,GACfpE,GAAa,EAAE,MAAM,oBAAoB,SAAS,QAAQ,MAG1DwgB,KAAQpc,GACRpE,GAAa,EAAE,MAAM,oBAAoB,SAAS,IAAI,IAEtDud,OACAjZ,GAAa,IAAIiZ,IAAgBzZ,EAAOyZ,EAAc,CAAC,GACvDiD,KAAQ,IAAIlc,GAAa,SAAA,CAAU,KAEvCkJ,GAASgT,CAAI;AAAA,EACjB,GAEMC,KAAiB,OAAO,EAAE,cAAAC,GAAc,UAAAC,QAAe;AACzD,QAAKD;AACL,UAAI;AACA,cAAMnhB,IAAW,MAAM,MAAMmhB,CAAY;AACzC,YAAI,CAACnhB,EAAS;AACV,gBAAM,IAAI,MAAM,6BAA6BA,EAAS,UAAU,EAAE;AAGtE,cAAMqhB,IAAO,MAAMrhB,EAAS,KAAA,GACtBZ,IAAM,OAAO,IAAI,gBAAgBiiB,CAAI,GAErC/D,IAAO,SAAS,cAAc,GAAG;AACvC,QAAAA,EAAK,OAAOle;AAGZ,cAAMkiB,IAAmBH,EAAa,MAAM,GAAG,EAAE,IAAA,KAAS,mBAAmBE,EAAK,KAAK,MAAM,GAAG,EAAE,CAAC,KAAK,KAAK;AAC7G,QAAA/D,EAAK,WAAW8D,KAAYE,GAG5B,SAAS,KAAK,YAAYhE,CAAI,GAC9BA,EAAK,MAAA,GAGL,SAAS,KAAK,YAAYA,CAAI,GAC9B,OAAO,IAAI,gBAAgBle,CAAG;AAAA,MAClC,QAAgB;AACZ,eAAO,KAAK+hB,CAAY;AAAA,MAC5B;AAAA,EACJ,GACMI,KAAqB,OAAO5M,GAAYhO,GAAO6a,MAAY;AAC7D,QAAI7e,IAASgS,EAAW,UAAU5T,EAAM,aAAamQ,GAAY,OAAO;AACxE,QAAI,CAACvO,KAAUgS,EAAW,UAAUgC,EAAU,YAC1ChU,IAAS6e,GAAS,QACd,CAAC7e,IAAQ;AACT,YAAM8e,IAAK9a,EAAM,OAAO,QAAQ,QAAQ;AACxC,MAAI8a,MACA9e,IAAS8e,EAAG,QAAQ;AAAA,IAE5B;AAEJ,UAAM,EAAE,KAAKld,EAAAA,IAAWoQ;AACxB,QAAI,CAAC4D,IAAY;AACb,UAAI7D,KAEI,OADW,MAAMA,EAAY,EAAE,YAAAC,GAAY,OAAAhO,GAAO,SAAA6a,GAAS,MACzC7K,EAAU;AAC5B;AAGR,YAAM1R,IAAeoa,GAAU1K,EAAW,KAAK,KAAK,CAAA;AACpD,UAAI1P,EAAa,QAAQ;AACrB,QAAAgJ,GAAS;AAAA,UACL,UAAUlL,GAAS,YAAYkC,EAAa,QAAQV,CAAM;AAAA,QAAA,CAC7D;AACD;AAAA,MACJ;AACA,cAAQ5B,GAAA;AAAA,QACJ,KAAKuO,GAAY;AACb,iBAAOa,GAAS,EAAE,IAAIxN,EAAOmY,CAAU,GAAG,QAAAnY,GAAQ;AAAA,QACtD,KAAK2M,GAAY;AACb,iBAAOa,GAAS,EAAE,IAAIxN,EAAOmY,CAAU,GAAG,MAAM,QAAQ;AAAA,QAC5D,KAAKxL,GAAY;AACb,UAAAyK,GAAc,EAAI,GAClBC,GAAU,EAAE,MAAMrX,EAAOxD,EAAM,UAAU,GAAG,IAAIwD,EAAOmY,CAAU,GAAG;AACpE;AAAA,QACJ,KAAKxL,GAAY;AAEb,iBAAOjD,GAAS,GAAGyP,EAAiB,cAAcS,EAAS,OAAO5Z,EAAOmY,CAAU,CAAC,eAAeuB,KAAiBlZ,GAAa,IAAIkZ,EAAc,IAAIO,EAAS,EAAE;AAAA,QACtK;AAEI,gBAAMkD,IAAoBpC,GAAc,KAAK,CAAAqC,MAAMA,EAAG,WAAWhf,KAAU,OAAOgf,EAAG,YAAYhL,EAAU,QAAQ;AACnH,cAAI+K,GAAmB;AACnB,YAAAA,EAAkB,QAAQ,EAAE,KAAKnd,GAAQ,UAAA0J,IAAU;AACnD;AAAA,UACJ;AACA;AAAA,MAAA;AAAA,IAEZ;AAIA,QAHItL,MAAWuO,GAAY,YACvBgQ,GAAe,EAAE,cAAc3c,EAAOsZ,EAAa,GAAG,UAAUtZ,EAAO,UAAU,GAEjF,CAAC8Y,GAAO;AACR;AAEJ,UAAM,EAAE,KAAA/I,MAAQK,GACV1P,IAAeoa,GAAU1K,EAAW,KAAK,KAAK,CAAA,GAC9CiN,IAAgB;AAAA,MAClB,UAAU7e,GAAS,YAAYkC,EAAa,QAAQqP,CAAG;AAAA,IAAA;AAE3D,IAAIvT,EAAM,qBACN6gB,EAAc,QAAQtN,IAE1BrG,GAAS2T,CAAa;AAAA,EAC1B,GAEMC,KAAe,iBAAkB;AAEnC,IADe,MAAMxc,GAAa,EAAE,IAAId,GAAO,IAAI,KAAK,GAAGxD,EAAM,mBAAmB,OAAO0c,KAAqBre,EAAG,GAAG2B,EAAM,OAAO0B,CAAG,IAAI,cAAAN,IAAc,UAAUyP,GAAS,WAAW,iBAAAsK,GAAA,CAAiB,MACxL,MACXP,GAAc,EAAK,GACnB/J,GAAS,YAAY,8BAA8B,GACnD8O,GAAA,KAEA/E,GAAc,EAAK;AAAA,EAE3B,GACMmG,KAAa,MAAM;AACrB,IAAA5F,GAAgB,IAAI,GACpBP,GAAc,EAAK;AAAA,EACvB,GAEMoG,KAAmB,CAACC,OAClB,OAAO1lB,EAAM,oBAAqB,cAClCA,EAAM,iBAAiB0lB,GAAYriB,CAAI,GAEpCqiB,IAGLC,KAAoB,CAACtb,MAAU;AACjC,QAAIA,EAAM,IAAI,YAAY;AACtB;AAEJ,UAAM,EAAE,KAAKpC,EAAAA,IAAWoC;AACxB,QAAI,OAAOqU,OAA8BrE,EAAU,UAAU;AACzD,MAAAqE,GAA0BrU,CAAK;AAC/B;AAAA,IACJ;AAIA,QAHI,CAAC4R,MAAc,CAAC2E,MAAmB,CAAC9C,KACpCrI,GAAS,EAAE,IAAIxN,EAAOmY,CAAU,GAAG,QAAAnY,GAAQ,GAE3CgU,MAAcxX,EAAM,iBAAiB;AACrC,YAAM6gB,IAAgB;AAAA,QAClB,UAAU7e,GAAS,YAAYhC,EAAM,iBAAiBwD,CAAM;AAAA,MAAA;AAEhE,MAAIxD,EAAM,qBACN6gB,EAAc,QAAQrd,IAE1B0J,GAAS2T,CAAa;AAAA,IAC1B;AACA,IAAI,OAAOjH,MAAqBhE,EAAU,YACtCgE,EAAiBhU,CAAK;AAAA,EAE9B,GAEMub,KAAmB,YAAY;AACjC,QAAIrJ,GAAY,QAAQ,OAAO,GAAG;AAC9B,MAAAjH,GAAS,UAAU,8CAA8C;AACjE;AAAA,IACJ;AAEA,UAAMuQ,IAAc,MAAM,KAAKtJ,GAAY,OAAO,GAC5CuJ,IAAY,IAAI,IAAIziB,EAAK,QAAQ,IAAI,CAAA4E,MAAU,CAACA,EAAOmY,CAAU,GAAGnY,CAAM,CAAC,CAAC;AAClF,QAAI8d,IAAkBF,EAAY,IAAI,CAAAtd,OAAO,EAAE,GAAG6Z,IAAc,GAAG0D,EAAU,IAAIvd,CAAE,IAAI;AAGvF,IAAI,MAAM,QAAQ9D,EAAM,mBAAmB,KAAKA,EAAM,oBAAoB,WACtEshB,IAAkBA,EAAgB;AAAA,MAAI,CAAAlhB,MAClC,OAAO,YAAYJ,EAAM,oBAAoB,IAAI,CAAA7B,MAAO,CAACA,GAAKiC,EAAKjC,CAAG,CAAC,CAAC,CAAC;AAAA,IAAA;AAIjF,QAAI;AACA,YAAMoG,IAAS,MAAMC,GAAW;AAAA,QAC5B,IAAI;AAAA,QACJ,KAAK,GAAGnG,EAAG,GAAGwZ,MAAgBnW,CAAG;AAAA,QACjC,QAAQ,EAAE,OAAO4f,EAAA;AAAA,QACjB,cAAAlgB;AAAA,QACA,UAAUyP,GAAS;AAAA,MAAA,CACtB;AAED,UAAItM,GAAQ;AACR,QAAAob,GAAA;AACA,cAAM9jB,IAAU0I,EAAO,OAAOA,EAAO,OAAO;AAC5C,QAAAsM,GAAS,YAAYhV,CAAO;AAAA,MAChC;AAAA,IACJ,SAAS0lB,GAAK;AACV,MAAA1Q,GAAS,UAAU0Q,EAAI,WAAW,4CAA4C;AAAA,IAClF,UAAA;AACI,MAAAzJ,GAAY,QAAQ,MAAA,GACpB1W,GAAa,EAAK,GAClB4Z,GAAuB,EAAK;AAAA,IAChC;AAAA,EACJ,GAEMpD,KAAQ,MAAM;AAChB,QAAIC,GAAa,SAAS,GAAG;AACzB,UAAIC,GAAY,QAAQ,MAAM;AAC1B,QAAAkD,GAAuB,EAAI;AAC3B;AAAA,MACJ;AACA,MAAAnK,GAAS;AAAA,QACL;AAAA,MAAA,GAEJzP,GAAa,EAAK;AAClB;AAAA,IACJ;AACA,IAAI,OAAO8Y,MAAkBtE,EAAU,WACnCsE,EAAA,IAEAlJ,GAAS,EAAE,IAAI,GAAG;AAAA,EAE1B,GAEMqH,KAAe,MAAM;AACvB,QAAI,CAAC5W,IAAa,OAAO,OAAQ;AACjC,UAAMoe,IAAU,KAAK,MAAM,KAAK,UAAUjK,EAAU,eAAe,CAAC;AACpE,IAAA0F,GAAeuE,CAAO,GAClBnG,KACAA,EAAA;AAAA,EAER,GACM8H,KAAmB,CAAC,EAAE,UAAAC,GAAU,QAAAC,QAAa;AAC/C,UAAMC,IAAiB,MAAM,QAAQvI,CAAQ,IAAIA,IAAYA,EAAS,SAASA,EAAS,MAAM,GAAG,IAAI,CAAA,GAC/FwI,IAAcH,IAAWE,EAAe,OAAO,CAAA7d,MAAM,CAAC2d,EAAS,SAAS,SAAS3d,CAAE,CAAC,CAAC,IAAI,CAAC,GAAG6d,GAAgB,GAAGD,CAAM;AAC5H,IAAApI,EAAe,OAAOF,MAAaxD,EAAU,SAASgM,EAAY,KAAK,GAAG,IAAIA,CAAW;AAAA,EAC7F,GAEM3J,KAAW,MAAM;AACnB,IAAAuJ,GAAiB,EAAE,QAAQ/G,IAAW;AAAA,EAC1C,GAEMtC,KAAa,MAAM;AACrB,IAAAqJ,GAAiB,EAAE,UAAU/G,IAAW;AAAA,EAC5C,GAEM1C,KAAY,MAAM;AACpB,IAAID,GAAY,QAAQ,SAASlZ,EAAK,QAAQ,UAE1CkZ,GAAY,QAAQ,MAAA,GACpB4C,GAAa,CAAA,CAAE,MAGf9b,EAAK,QAAQ,QAAQ,CAAA4E,MAAU;AAC3B,MAAAsU,GAAY,QAAQ,IAAItU,EAAOmY,CAAU,CAAC;AAAA,IAC9C,CAAC,GACDjB,GAAa9b,EAAK,QAAQ,IAAI,CAAA4E,MAAUA,EAAOmY,CAAU,CAAC,CAAC;AAAA,EAEnE,GAEMkG,KAAsB,OAAO,EAAE,gBAAA1X,GAAgB,UAAAC,GAAU,eAAAC,GAAe,wBAAAC,EAAAA,MAA6B;AACvG,IAAAY,GAA4B,EAAE,cAAAxL,IAAc;AAC5C,UAAM+K,IAAc,MAAMP,GAAuB,EAAE,gBAAAC,GAAgB,SAAS+C,IAAU,cAAAxN,IAAc,UAAA0K,GAAU,eAAAC,GAAe,wBAAAC,GAAwB;AACrJ,IAAAO,GAA+B,EAAE,gBAAAV,GAAgB,cAAAzK,IAAc,SAASkF,IAAQ,4BAAAkG,IAA4B,wBAAAR,GAAwB,aAAAG,EAAA,CAAa;AAAA,EACrJ;AAEA,EAAAjF,GAAU,MAAM;AACZ,IAAI,CAAC2E,MAAkB,CAACE,MAGxBwX,GAAoB,EAAE,gBAAA1X,IAAgB,UAAAC,IAAU,eAAAC,IAAe,wBAAAC,IAAwB;AAAA,EAC3F,GAAG,CAACD,EAAa,CAAC;AAElB,QAAMiJ,KAAe,CAACC,MACXA,EAAIoI,CAAU,GAEnBzF,KAAe,CAAClT,MAAM;AACxB,QAAIpE,GAAM,cAAcgY,IAAc;AAClC,MAAA/F,GAAS,YAAY,gGAAgG;AACrH;AAAA,IACJ;AACA,UAAM,EAAE,eAAAoC,GAAe,uBAAAC,GAAuB,QAAA1Q,MAAWoC,GAAO,QAAQ,MAAM,SACxEuR,IAAgBnT,EAAE,OAAO,QAAQ,kBAAkB,QACnD8e,IAAgB,OAAO,KAAK5O,CAAqB,EAAE,OAAO,CAAA/U,MAAO+U,EAAsB/U,CAAG,MAAM,EAAK,GAErG4jB,IAAmB,IAAI,IAAI5gB,GAAY,OAAO,CAAAiS,MAAOA,EAAI,eAAe,EAAK,EAAE,IAAI,CAAAA,MAAOA,EAAI,KAAK,CAAC,GAEpG4O,IAAiB/O,EAAc;AAAA,MACjC,CAAAxQ,MAAS,CAACsf,EAAiB,IAAItf,CAAK,KAAK,CAACqf,EAAc,SAASrf,CAAK,KAAKA,MAAU,eAAeA,MAAU;AAAA,IAAA;AAGlH,QAAIuf,EAAe,WAAW,GAAG;AAC7B,MAAAnR,GAAS,YAAY,kGAAkG;AACvH;AAAA,IACJ;AAEA,UAAM/O,IAAU,CAAA;AAChB,IAAAkgB,EAAe,QAAQ,CAAAvf,MAAS;AAC5B,YAAM2Q,IAAM5Q,EAAOC,CAAK;AACxBX,MAAAA,EAAQW,CAAK,IAAI,EAAE,OAAAA,GAAO,OAAO2Q,EAAI,OAAO,YAAYA,EAAI,cAAcA,EAAI,OAAO,MAAMA,EAAI,MAAM,WAAWA,EAAI,cAAc,IAAM,YAAYA,EAAI,YAAY,QAAQA,EAAI,OAAA;AAAA,IACpL,CAAC,GACDuM;AAAA,MACIxJ,IAAgB,WAAW;AAAA,MAC3B;AAAA,MACAnT,EAAE,OAAO,QAAQ;AAAA,MACjBlB;AAAAA,MACAqU;AAAA,MACA8F;AAAA,IAAA;AAAA,EAER;AAEA,EAAAzW,GAAU,MAAM;AACZ,IAAI,CAACnH,MAAQ8L,MAAkB,CAACqS,MAChCmD,GAAA;AAAA,EACJ,GAAG,CAACtF,GAAiB7Y,IAAWC,IAAaC,GAAKP,IAAanB,GAAO2B,GAAeuW,GAAUkB,GAAUpB,GAAWyB,GAAc+C,IAAyBzC,IAAa1b,EAAG,CAAC,GAE5KmH,GAAU,MAAM;AACZ,QAAI,EAAAjK,EAAM,eAAemc,MAAiB,CAACsE;AAG3C,aAAAtc,GAAa,EAAE,MAAM5B,EAAqB,oBAAoB,SAAS,EAAE,MAAM,IAAI,cAAckC,EAAM,aAAaA,EAAM,OAAO,OAAOA,EAAM,MAAA,GAAS,GAChJ,MAAM;AACT,QAAAN,GAAa;AAAA,UACT,MAAM5B,EAAqB;AAAA,UAAoB,SAAS;AAAA,QAAA,CAC3D;AAAA,MACL;AAAA,EACJ,GAAG,CAAA,CAAE,GAEL0H,GAAU,MAAM;AACZ,QAAIjK,EAAM;AACN;AAEJ,QAAI0mB,IAAYxG;AAGhB,QAAIK,MAAkBW,GAAuB,SAASwF,CAAS,GAAG;AAC9D,MAAAviB,GAAa;AAAA,QACT,MAAM5B,EAAqB;AAAA,QAC3B,SAAS,EAAE,QAAQ,IAAO,WAAW,GAAA;AAAA,MAAG,CAC3C;AACD;AAAA,IACJ;AACA,IAAAmkB,IAAYA,EAAU,MAAM,GAAG,GAC/BA,EAAU,IAAA,GACVA,IAAYA,EAAU,KAAK,GAAG,GAC9BviB,GAAa;AAAA,MACT,MAAM5B,EAAqB;AAAA,MAC3B,SAAS,EAAE,QAAQ,IAAM,WAAAmkB,EAAA;AAAA,IAAqB,CACjD;AAAA,EACL,GAAG,CAAC1H,EAAS,CAAC;AAEd,QAAM2H,KAAgB,CAAClf,MAAM;AACzB,UAAM,EAAE,OAAAmb,MAAUnb,GACZmf,IAAehE,EAAM,IAAI,CAAA/d,MAAQ;AACnC,YAAM,EAAE,OAAAqC,GAAO,UAAA3B,GAAU,MAAAC,GAAM,OAAAvC,MAAU4B,GACnCqD,IAAStC,GAAY,KAAK,CAAAiS,OAAOA,GAAI,UAAU3Q,CAAK,KAAK,CAAA,GACzD2f,IAAW3e,EAAO,SAASmS,EAAU;AAE3C,aAAIwM,KAAY5jB,IAAQ,IACb,EAAE,GAAG4B,GAAM,OAAO,KAAA,IAGxByc,GAA4B,SAAS/b,CAAQ,KAAOshB,KAAY,CAAC,MAAM5jB,CAAK,KAAQ,CAAC4jB,KAC/DnG,MAAmB9a,GAAY,OAAO,CAAAkU,OAAWA,GAAQ,UAAU5S,CAAK,EAAE,CAAC,GAAG,mBAEjGrC,EAAK,cAAc,GAAGA,EAAK,KAAK,aAEpCA,EAAK,QAAQ,CAAC,WAAW,YAAY,EAAE,SAASU,CAAQ,IAAI,OAAOtC,GAC5D,EAAE,GAAG4B,GAAM,MAAMqD,EAAO,KAAA,KAG5B,EAAE,OAAAhB,GAAO,UAAA3B,GAAU,MAAAC,GAAM,OADXqhB,IAAW,OAAO5jB,EACA;AAAA,IAC3C,CAAC;AACD,IAAAwE,EAAE,QAAQmf,GACV7G,GAAetY,CAAC,IAEXA,EAAE,MAAM,UAAU,CAAA4H,MAAOA,EAAI,iBAAiB,CAAE,CAAC,WAAW,YAAY,EAAE,SAASA,EAAI,QAAQ,CAAE,MAAM,MAEpG6O,GAAc,OAAO,WAEhB,CAACzW,EAAE,MAAM,UACTyW,EAAa,MAAM,UAAU,CAAA7O,MAAOA,EAAI,gBAAgB5H,EAAE,MAAM,CAAC,GAAG,KAAK,IAAI,QAI5D0W,KAC1BA,EAAA;AAAA,EAER,GAEM2I,KAAa,CAACrf,MAAM;AACtB,UAAME,IAAOF,EAAE,IAAI,CAAC4H,MAAQ;AACxB,YAAMnI,IAAQtB,GAAY,OAAO,CAAAkU,MAAWA,EAAQ,UAAUzK,EAAI,KAAK,EAAE,CAAC,KAAK,CAAA,GACzE0X,IAAiBrG,MAAmBxZ,EAAM,gBAC1C8f,IAAM,EAAE,GAAG3X,GAAK,aAAa0X,IAAiB,GAAG1X,EAAI,KAAK,aAAaA,EAAI,MAAA;AACjF,aAAInI,EAAM,cACN8f,EAAI,cAAc9f,EAAM,YAErB8f;AAAA,IACX,CAAC;AACD,IAAAnH,GAAalY,CAAI;AAAA,EACrB,GACMsf,KAAYjmB,KAASyD,EAAM,aAAaA,EAAM,OAC9CyiB,KAAcvF,KACd,CAAC,EAAE,MAAMlZ,GAAa,IAAIkZ,EAAc,KAAKsF,GAAA,CAAW,IACxD,CAAC,EAAE,MAAMA,IAAW;AAC1B,SACI,gBAAA7lB,EAAAC,IAAA,EACK,UAAA;AAAA,IAAAggB,MAAiB,gBAAAnhB;AAAA,MAACuR;AAAAA,MAAA;AAAA,QAAU,UAAAE;AAAA,QAAoB,iBAAiB,CAACiQ,MAAkB,CAACG;AAAA,QAClF,aAAamF;AAAA,QAAa,kBAAkBvG;AAAA,QAAc,iBAAAzO;AAAA,MAAA;AAAA,IAAA;AAAA,IAC9D,gBAAA9Q,EAACqJ,IAAA,EAAI,OAAO8T,MAAaP,GACrB,UAAA;AAAA,MAAA,gBAAA9d,EAACuK,IAAA,EAAI,IAAI,EAAE,SAAS,QAAQ,WAAW,QAAQ,eAAe,SAAA,GAC1D,UAAA,gBAAAvK;AAAA,QAACmZ;AAAA,QAAA;AAAA,UACG,IAAI;AAAA,YACA,qCAAqC;AAAA,cACjC,WAAW;AAAA,YAAA;AAAA,YAEf,uCAAuC;AAAA,cACnC,WAAW;AAAA,YAAA;AAAA,YAEf,mCAAmC;AAAA,cAC/B,QAAQ;AAAA,YAAA;AAAA,UACZ;AAAA,UAEJ,eAAegH;AAAA,UACf,wBAAwBA;AAAA,UACxB,mBAAmBlE;AAAA,UACnB,SAAS6C;AAAA,UACT,WAAU;AAAA,UACV,aAAaiG;AAAA,UACb,mBAAAU;AAAA,UACA,SAAS/f;AAAA,UACT,iBAAAkZ;AAAA,UACA,iBAAiBzE,EAAU;AAAA,UAC3B,yBAAyB0E;AAAA,UACzB,YAAU;AAAA,UACV,UAAU1b,EAAK;AAAA,UACf,MAAMA,EAAK;AAAA,UACX,WAAA4C;AAAA,UACA,gBAAAyZ;AAAA,UACA,aAAaA;AAAA,UACb,YAAYA;AAAA,UACZ,kBAAA+F;AAAA,UACA,6BAA2B;AAAA,UAC3B,mBAAmBqB;AAAA,UACnB,qBAAqBH;AAAA,UACrB,cAAczH;AAAA,UACd,2BAA2BC;AAAA,UAC3B,aAAAjZ;AAAA,UACA,UAAU6R;AAAA,UACV,YAAAuG;AAAA,UACA,OAAO;AAAA,YACH,kBAAkB;AAAA,YAClB,SAAStC;AAAA,YACT,QAAQ7S;AAAA,UAAA;AAAA,UAEZ,WAAW;AAAA,YACP,SAAS;AAAA,cACL,OAAA1E;AAAA,cACA,MAAApB;AAAA,cACA,mBAAAgT;AAAA,cACA,YAAA4F;AAAA,cACA,QAAAC;AAAA,cACA,eAAAC;AAAA,cACA,aAAAC;AAAA,cACA,OAAAC;AAAA,cACA,cAAAC;AAAA,cACA,aAAAC;AAAA,cACA,WAAAC;AAAA,cACA,WAAAC;AAAA,cACA,UAAAC;AAAA,cACA,UAAAC;AAAA,cACA,YAAAC;AAAA,cACA,sBAAAC;AAAA,cACA,cAAAC;AAAA,cACA,cAAAnC;AAAA,cACA,gBAAA/L;AAAA,cACA,QAAAvF;AAAA,cACA,aAAAzD;AAAA,cACA,4BAAA2J;AAAA,cACA,YAAAjG;AAAA,cACA,OAAAO;AAAA,cACA,YAAAuW;AAAA,cACA,aAAAla;AAAA,YAAA;AAAA,YAEJ,QAAQ;AAAA,cACJ,YAAY;AAAA,cACZ,QAAAmD;AAAA,YAAA;AAAA,YAEJ,OAAO;AAAA,cACH,WAAW;AAAA,YAAA;AAAA,UACf;AAAA,UAEJ,4BAA4B4V;AAAA,UAC5B,SAAQ;AAAA,UACR,wBAAwB;AAAA,UACxB,QAAA5V;AAAA,UACA,oBAAoB;AAAA,UACpB,oBAAoB;AAAA,UACpB,4BAAAiX;AAAA,UACA,iBAAA0B;AAAA,UACA,cAAc;AAAA,YACV,SAAS;AAAA,cACL,uBAAuBzC;AAAA,YAAA;AAAA,YAE3B,eAAA9H;AAAA,UAAA;AAAA,UAEJ,YAAY;AAAA,YACR,iBAAiBnO,EAAW,OAAOO,CAAK;AAAA,YACxC,kBAAkBP,EAAW,MAAMO,CAAK;AAAA,YACxC,aAAaP,EAAW,WAAWO,CAAK;AAAA,YACxC,iBAAiB,GAAGP,EAAW,cAAcO,CAAK,CAAC;AAAA,YACnD,oBAAoB;AAAA,cAChB,kBAAkBP,EAAW,iBAAiBO,CAAK;AAAA,cACnD,oBAAoB,CAAC,EAAE,MAAAsd,GAAM,IAAAC,GAAI,OAAA1Z,QAAY,GAAGyZ,CAAI,IAAIC,CAAE,IAAI9d,EAAW,MAAMO,CAAK,CAAC,IAAI6D,CAAK;AAAA,YAAA;AAAA,YAElG,+BAA+BpE,EAAW7E,GAAO,qBAAqB,aAAaoF,CAAK;AAAA,YACxF,gBAAgBP,EAAW,WAAWO,CAAK;AAAA,YAC3C,gBAAgBP,EAAW,WAAWO,CAAK;AAAA,YAC3C,eAAeP,EAAW,UAAUO,CAAK;AAAA,YACzC,sBAAsBP,EAAW,cAAcO,CAAK;AAAA,YACpD,sBAAsBP,EAAW,cAAcO,CAAK;AAAA,YACpD,4BAA4BP,EAAW,UAAUO,CAAK;AAAA,YACtD,oBAAoBP,EAAW,WAAWO,CAAK;AAAA,YAC/C,qBAAqBP,EAAW,YAAYO,CAAK;AAAA,YACjD,kBAAkBP,EAAW,SAASO,CAAK;AAAA,YAC3C,uBAAuBP,EAAW,SAASO,CAAK;AAAA,YAChD,6BAA6BP,EAAW,gBAAgBO,CAAK;AAAA,YAC7D,iBAAiBP,EAAW,QAAQO,CAAK;AAAA,YACzC,uBAAuBP,EAAW,gBAAgBO,CAAK;AAAA,YACvD,yBAAyBP,EAAW,kBAAkBO,CAAK;AAAA,YAC3D,kBAAkBP,EAAW,UAAUO,CAAK;AAAA,YAC5C,sBAAsBP,EAAW,eAAeO,CAAK;AAAA,YACrD,uBAAuBP,EAAW,gBAAgBO,CAAK;AAAA,YACvD,qBAAqBP,EAAW,kBAAkBO,CAAK;AAAA,YACvD,oBAAoBP,EAAW,UAAUO,CAAK;AAAA,YAC9C,oBAAoBP,EAAW,yBAAyBO,CAAK;AAAA,YAC7D,iBAAiBP,EAAW,yBAAyBO,CAAK;AAAA,YAC1D,mBAAmBP,EAAW,8BAA8BO,CAAK;AAAA,YACjE,cAAcP,EAAW,iBAAiBO,CAAK;AAAA,YAC/C,WAAWP,EAAW,cAAcO,CAAK;AAAA,YACzC,aAAaP,EAAW,UAAUO,CAAK;AAAA,YACvC,eAAeP,EAAW,QAAQO,CAAK;AAAA,YACvC,kBAAkBP,EAAW,WAAWO,CAAK;AAAA,YAC7C,iBAAiBP,EAAW,UAAUO,CAAK;AAAA,YAC3C,kBAAkBP,EAAW,SAASO,CAAK;AAAA,YAC3C,+BAA+BP,EAAW,wBAAwBO,CAAK;AAAA,YACvE,kBAAkBP,EAAW,UAAUO,CAAK;AAAA,YAC5C,mBAAmBP,EAAW,qBAAqBO,CAAK;AAAA,YACxD,oBAAoBP,EAAW,sBAAsBO,CAAK;AAAA,YAC1D,iBAAiBP,EAAW,SAASO,CAAK;AAAA,YAC1C,4BAA4BP,EAAW,eAAeO,CAAK;AAAA,YAC3D,kCAAkCP,EAAW,gBAAgBO,CAAK;AAAA,YAClE,2BAA2BP,EAAW,YAAYO,CAAK;AAAA,YACvD,2BAA2BP,EAAW,YAAYO,CAAK;AAAA,YACvD,WAAWP,EAAW,eAAeO,CAAK;AAAA,YAC1C,YAAYP,EAAW,gBAAgBO,CAAK;AAAA,YAC5C,OAAOP,EAAW,SAASO,CAAK;AAAA,YAChC,gBAAgBP,EAAW,OAAOO,CAAK;AAAA,YACvC,kBAAkBP,EAAW,MAAMO,CAAK;AAAA,YACxC,mBAAmBP,EAAW,UAAUO,CAAK;AAAA,YAC7C,uBAAuBP,EAAW,aAAaO,CAAK;AAAA,YACpD,wBAAwBP,EAAW,YAAYO,CAAK;AAAA,YACpD,8BAA8BP,EAAW,oBAAoBO,CAAK;AAAA,YAClE,sBAAsBP,EAAW,UAAUO,CAAK;AAAA,YAChD,4BAA4BP,EAAW,kBAAkBO,CAAK;AAAA,YAC9D,0BAA0BP,EAAW,eAAeO,CAAK;AAAA,YACzD,wBAAwBP,EAAW,aAAaO,CAAK;AAAA,YACrD,uBAAuBP,EAAW,YAAYO,CAAK;AAAA,YACnD,0BAA0BP,EAAW,gBAAgBO,CAAK;AAAA,YAC1D,qBAAqBP,EAAW,YAAYO,CAAK;AAAA,YACjD,yBAAyBP,EAAW,kBAAkBO,CAAK;AAAA,YAC3D,sBAAsBP,EAAW,aAAaO,CAAK;AAAA,YACnD,0BAA0BP,EAAW,mBAAmBO,CAAK;AAAA,YAC7D,2BAA2BP,EAAW,gBAAgBO,CAAK;AAAA,YAC3D,2BAA2BP,EAAW,gBAAgBO,CAAK;AAAA;AAAA,YAG3D,8BAA8BP,EAAW,YAAYO,CAAK;AAAA,YAC1D,4BAA4BP,EAAW,UAAUO,CAAK;AAAA,YACtD,gCAAgCP,EAAW,eAAeO,CAAK;AAAA,YAC/D,8BAA8BP,EAAW,aAAaO,CAAK;AAAA,YAC3D,6BAA6BP,EAAW,YAAYO,CAAK;AAAA,YACzD,gCAAgCP,EAAW,gBAAgBO,CAAK;AAAA,YAChE,2BAA2BP,EAAW,YAAYO,CAAK;AAAA,YACvD,+BAA+BP,EAAW,kBAAkBO,CAAK;AAAA,YACjE,4BAA4BP,EAAW,aAAaO,CAAK;AAAA,YACzD,gCAAgCP,EAAW,mBAAmBO,CAAK;AAAA,YACnE,wBAAwBP,EAAW,MAAMO,CAAK;AAAA,YAC9C,yBAAyBP,EAAW,UAAUO,CAAK;AAAA,YACnD,0BAA0BP,EAAW,kBAAkBO,CAAK;AAAA,YAC5D,yBAAyBP,EAAW,gBAAgBO,CAAK;AAAA,YACzD,0BAA0BP,EAAW,4BAA4BO,CAAK;AAAA,YACtE,yBAAyBP,EAAW,aAAaO,CAAK;AAAA,YACtD,0BAA0BP,EAAW,yBAAyBO,CAAK;AAAA,YACnE,8BAA8BP,EAAW,UAAUO,CAAK;AAAA,YACxD,4BAA4BP,EAAW,cAAcO,CAAK;AAAA,YAC1D,uBAAuBP,EAAW,iBAAiBO,CAAK;AAAA,YACxD,yBAAyB,CAAC,EAAE,MAAAsd,GAAM,IAAAC,GAAI,OAAA1Z,QAAY,GAAGyZ,CAAI,IAAIC,CAAE,IAAI9d,EAAW,MAAMO,CAAK,CAAC,IAAI6D,CAAK;AAAA,YACnG,yBAAyBpE,EAAW,UAAUO,CAAK;AAAA,YACnD,6BAA6B,CAAC6D,MAEnB,GAAGA,CAAK,IAAIpE,EADPoE,MAAU,IAAI,kBAAkB,kBACT7D,CAAK,CAAC;AAAA,YAE7C,2BAA2BP,EAAW,QAAQO,CAAK;AAAA,YACnD,wBAAwBP,EAAW,OAAOO,CAAK;AAAA,YAC/C,uBAAuBP,EAAW,MAAMO,CAAK;AAAA,YAC7C,uBAAuBP,EAAW,oBAAoBO,CAAK;AAAA,YAC3D,kCAAkC,CAAC6D,MAExB,GAAGA,CAAK,IAAIpE,EADPoE,MAAU,IAAI,kBAAkB,kBACT7D,CAAK,CAAC;AAAA,YAE7C,mBAAmBP,EAAW,uBAAuBO,CAAK;AAAA,YAC1D,6BAA6BP,EAAW,sBAAsBO,CAAK;AAAA,YACnE,kCAAkCP,EAAW,iBAAiBO,CAAK;AAAA,YACnE,uBAAuBP,EAAW,cAAcO,CAAK;AAAA,YACrD,+BAA+BP,EAAW,kBAAkBO,CAAK;AAAA,YACjE,wBAAwBP,EAAW,SAASO,CAAK;AAAA,YACjD,aAAa,CAAC8B,MAAS,GAAGrC,EAAW,YAAYO,CAAK,CAAC,IAAI8B,CAAI;AAAA,YAC/D,eAAe,CAACA,MAAS,GAAGrC,EAAW,WAAWO,CAAK,CAAC,IAAI8B,CAAI;AAAA,YAChE,mBAAmB,CAAC+B,MAAU;AAC1B,oBAAM9K,IAAM8K,MAAU,IAAI,kBAAkB;AAC5C,qBAAO,GAAGA,EAAM,eAAA,CAAgB,IAAIpE,EAAW1G,GAAKiH,CAAK,CAAC;AAAA,YAC9D;AAAA,UAAA;AAAA,UAEJ,aAAa;AAAA,UACb,oBAAAoY;AAAA,QAAA;AAAA,MAAA,GAER;AAAA,MACCtC,MAAiB,gBAAAve,EAACK,IAAA,EAAgB,MAAM,CAAC,CAACke,IAAc,WAAW6F,IAAY,UAAUA,IAAY,OAAM,QAAO,kBAAkB,IAAO,UAAA;AAAA,QAAA;AAAA,QAAE7F;AAAA,MAAA,GAAa;AAAA,MAE1JP,MAAc,CAACO,MACZ,gBAAAzf,EAACuB,IAAA,EAAgB,MAAM2d,IAAY,WAAWmG,IAAc,UAAU,MAAMlG,GAAc,EAAK,GAAG,OAAM,kBACpG,4BAAC1D,IAAA,EACI,UAAA;AAAA,QAAArS,EAAW,mCAAmCO,CAAK;AAAA,QAAE;AAAA,QAAE5B,GAAO,QAAQ,gBAAA/H,EAAC6U,IAAA,EAAQ,OAAO,EAAE,SAAS,SAAA,GAAY,OAAO9M,GAAO,MAAM,OAAK,IAClI,UAAAA,GAAO,KAAK,SAAS,KAAK,GAAGA,GAAO,KAAK,MAAM,GAAG,EAAE,CAAC,QAAQA,GAAO,KAAA,CACzE;AAAA,QAAW;AAAA,MAAA,EAAA,CACf,EAAA,CACJ;AAAA,MACHuX,MACG,gBAAAtf;AAAA,QAACuB;AAAA,QAAA;AAAA,UACG,MAAM+d;AAAA,UACN,WAAWoG;AAAA,UACX,UAAU,MAAMnG,GAAuB,EAAK;AAAA,UAC5C,OAAM;AAAA,UAEN,4BAAC9D,IAAA,EACI,UAAA;AAAA,YAAArS,EAAW,gCAAgCO,CAAK;AAAA,YAAE;AAAA,YAAE0S,GAAY,QAAQ;AAAA,YAAK;AAAA,YAAEjT,EAAW,WAAW,EAAE,OAAOiT,GAAY,QAAQ,MAAM,GAAG1S,GAAO;AAAA,YAAE;AAAA,UAAA,EAAA,CACzJ;AAAA,QAAA;AAAA,MAAA;AAAA,IACJ,EAAA,CAER;AAAA,EAAA,GACJ;AAER,GAAGmR,EAAQ,GCjxCLqM,KAAQ,CAAC,EAAE,QAAAnf,GAAQ,OAAAhB,GAAO,QAAA0P,GAAQ,YAAA0Q,QAAiB;AACrD,QAAMtd,IAAe,CAACK,MAAU;AAC5B,IAAAuM,EAAO,cAAc1P,GAAOmD,EAAM,OAAO,OAAO;AAAA,EACpD,GACMkd,IAAU7Q,GAAQ,MAAKE,EAAO,OAAO1P,CAAK,KAAK,CAAC,CAACgB,EAAO,cAAc,CAAC0O,GAAQ1O,CAAM,CAAC,GACtFic,IAAa,OAAOjc,EAAO,YAAa,aAAaA,EAAO,SAAS0O,CAAM,IAAI1O,EAAO;AAC5F,2BAAQ,OAAA,EACJ,UAAA;AAAA,IAAA,gBAAAhI;AAAA,MAAC+Y;AAAAA,MAAA;AAAA,QACG,SACI,gBAAA/Y;AAAA,UAACgZ;AAAAA,UAAA;AAAA,YACI,GAAGoO;AAAA,YACJ,MAAMpgB;AAAA,YACN,UAAUid,KAAcjc,EAAO,aAAa;AAAA,YAC5C,SAAAqf;AAAA,YACA,UAAUvd;AAAA,YACV,QAAQ4M,EAAO;AAAA,YACf,gBAAgB1O,EAAO;AAAA,UAAA;AAAA,QAAA;AAAA,MAC3B;AAAA,IAAA;AAAA,IAGR,gBAAAhI,EAACsnB,MAAe,OAAO5Q,EAAO,QAAQ1P,CAAK,KAAK,EAAQ0P,EAAO,OAAO1P,CAAK,GAAM,YAAO,QAAQA,CAAK,KAAK0P,EAAO,OAAO1P,CAAK,EAAA,CAAE;AAAA,EAAA,EAAA,GAdlHA,CAejB;AACJ,GCvBMA,KAAQ,CAAC,EAAE,QAAAgB,GAAQ,OAAAhB,GAAO,QAAA0P,GAAQ,YAAA0Q,QAAiB;AACrD,QAAMG,IAAQC,GAAA,GACRC,IAAOzf,EAAO,SAASA,EAAO,YAAY,IAAI;AACpD,SAAO,gBAAAhI;AAAA,IAACyK;AAAA,IAAA;AAAA,MACJ,MAAK;AAAA,MACL,SAASzC,EAAO,WAAW;AAAA,MAC3B,YAAY;AAAA,QACR,UAAUA,EAAO,aAAa;AAAA,QAC9B,IAAIA,EAAO,WACL,EAAE,iBAAiBuf,EAAM,SAAS,QAAQ,aAC1C;AAAA,MAAA;AAAA,MAGV,UAAUvf,EAAO;AAAA,MACjB,WAAWA,EAAO;AAAA,MAClB,MAAAyf;AAAA,MACA,WAAS;AAAA,MACT,MAAMzgB;AAAAA,MACN,OAAO0P,EAAO,OAAO1P,CAAK;AAAA,MAC1B,UAAU0P,EAAO;AAAA,MACjB,QAAQA,EAAO;AAAA,MACf,OAAOA,EAAO,QAAQ1P,CAAK,KAAK,EAAQ0P,EAAO,OAAO1P,CAAK;AAAA,MAC3D,YAAY0P,EAAO,QAAQ1P,CAAK,KAAK0P,EAAO,OAAO1P,CAAK;AAAA,MACxD,cAAcgB,EAAO;AAAA,MACpB,GAAGof;AAAA,MACJ,cAAcpf,EAAO;AAAA,IAAA;AAAA,IAbhBhB;AAAAA,EAAA;AAeb;AC7BA,SAAS0gB,GAAY3kB,GAAO4kB,GAAO;AAC/B,QAAM,CAACC,GAAgBC,CAAiB,IAAIvnB,EAASyC,CAAK;AAE1D,SAAAgH,GAAU,MAAM;AAEZ,UAAM+d,IAAQ,WAAW,MAAM;AAC3B,MAAAD,EAAkB9kB,CAAK;AAAA,IAC3B,GAAG4kB,CAAK;AAGR,WAAO,MAAM;AACT,mBAAaG,CAAK;AAAA,IACtB;AAAA,EACJ,GAAG,CAAC/kB,GAAO4kB,CAAK,CAAC,GAEVC;AACX;ACZA,MAAMG,KAAc,IACdC,KAAY,IACZC,KAAa,IACbC,KAAc,IAGdC,KAAe,CAAC,GAAG,IAAI,GAAG,IAAI,EAAE,GAChCC,KAAe,CAAC,EAAE,OAAArlB,GAAO,OAAAuJ,QAAY;AACvC,MAAI,OAAOvJ,KAAU,YAAYA,EAAM,WAAW,GAAG,KAAKA,EAAM,SAAS,GAAG,GAAG;AAC3E,UAAML,IAAMK,EAAM,MAAM,GAAG,EAAE;AAC7B,WAAOuJ,EAAM5J,CAAG,MAAM,SAAY4J,EAAM5J,CAAG,IAAIK;AAAA,EACnD;AACA,SAAOA;AACX,GACMokB,KAAQ,CAAC,EAAE,QAAAnf,GAAQ,YAAAof,GAAY,QAAA1Q,GAAQ,OAAA1P,GAAO,GAAGlH,QAAY;AAC/D,QAAM,EAAE,KAAAuoB,GAAK,KAAAC,EAAA,IAAQtgB,GACfuf,IAAQC,GAAA,GACR,CAAC7N,GAAY4O,CAAa,IAAIjoB,EAASoW,EAAO,OAAO1P,CAAK,CAAC,GAC3D4gB,IAAiBF,GAAY/N,GAAY,GAAG,GAE5C6O,IAAchS;AAAA,IAChB,MAAM,KAAK,IAAI,GAAG4R,GAAa,EAAE,OAAOC,GAAK,OAAO3R,EAAO,OAAA,CAAQ,CAAC;AAAA,IACpE,CAAC2R,GAAK3R,EAAO,MAAM;AAAA,EAAA,GAEjB+R,IAAcjS;AAAA,IAChB,MAAM4R,GAAa,EAAE,OAAOE,GAAK,OAAO5R,EAAO,QAAQ;AAAA,IACvD,CAAC4R,GAAK5R,EAAO,MAAM;AAAA,EAAA;AAIvB,EAAA3M,GAAU,MAAM;AACZ,QAAI6d,MAAmBlR,EAAO,OAAO1P,CAAK,GAAG;AACzC,YAAM0hB,IAAW,OAAOd,CAAc;AACtC,UAAI,MAAMc,CAAQ;AACd;AAEJ,MAAIA,IAAWF,IACX9R,EAAO,cAAc1P,GAAOwhB,CAAW,IAChCC,KAAeC,IAAWD,IACjC/R,EAAO,cAAc1P,GAAOyhB,CAAW,IAEvC/R,EAAO,cAAc1P,GAAO0hB,CAAQ;AAAA,IAE5C;AAAA,EACJ,GAAG,CAACd,GAAgB5gB,GAAOwhB,GAAaC,CAAW,CAAC;AAEpD,QAAM,EAAE,QAAAE,MAAW7oB;AACnB,SAAAsnB,IAAa;AAAA,IACT,YAAY;AAAA,MACR,YAAY;AAAA,QACR,KAAKoB;AAAA,QACL,KAAKC;AAAA,QACL,UAAUzgB,EAAO,aAAa;AAAA,QAC9B,WAAW,CAACmC,MAAU;AAClB,gBAAMC,IAAUD,EAAM,QAAQA,EAAM,QAAQA,EAAM;AAElD,UAAIge,GAAa,SAAS/d,CAAO,KAAMA,KAAW6d,MAAc7d,KAAW8d,MAIrE9d,IAAU2d,MAAe3d,IAAU4d,MACrC7d,EAAM,eAAA;AAAA,QAEd;AAAA,QACA,IAAInC,EAAO,WACL,EAAE,iBAAiBuf,EAAM,SAAS,QAAQ,aAC1C;AAAA,MAAA;AAAA,IACV;AAAA,IAEJ,MAAM;AAAA,IACN,GAAGH;AAAA,IACH,UAAU,CAACjd,MAAU;AACjB,MAAAoe,EAAcpe,EAAM,OAAO,KAAK,GAC5B,OAAOwe,KAAW,cAClBA,EAAOxe,CAAK;AAAA,IAEpB;AAAA,EAAA,qBAGIye,IAAA,EAAY,QAAA5gB,GAAgB,YAAAof,GAAwB,QAAA1Q,GAAgB,OAAA1P,GAAe,GAAGlH,GAAO;AACzG,GChFMqnB,KAAQ,CAAC,EAAE,YAAAC,GAAY,GAAGtnB,QAAY;AAC3C,QAAM,CAAC+oB,GAAcC,CAAe,IAAIjpB,GAAM,SAAS,EAAK,GACtDkpB,IAA0B,MAAMD,EAAgB,CAACE,MAAS,CAACA,CAAI,GAE/DC,IAA0B,CAAC9e,MAAU;AAC1C,IAAAA,EAAM,eAAA;AAAA,EACP,GACS,EAAE,UAAAwU,IAAW,IAAO,UAAAuK,IAAW,OAAUppB,EAAM,UAAU,CAAA;AAC/D,SAAAsnB,IAAa;AAAA,IACf,MAAMyB,IAAe,SAAS;AAAA,IAC9B,YAAY;AAAA,MACX,UAAAlK;AAAA,MACA,UAAAuK;AAAA,MACA,cACC,gBAAAlpB,EAACmpB,IAAA,EAAe,UAAS,OACxB,UAAA,gBAAAnpB;AAAA,QAAC4S;AAAA,QAAA;AAAA,UACkB,cAAW;AAAA,UACX,SAASmW;AAAA,UACT,aAAaE;AAAA,UACb,MAAK;AAAA,UACL,UAAAC;AAAA,UACA,UAAAvK;AAAA,UACA,MAAK;AAAA,UACtB,UAAAkK,IAAe,gBAAA7oB,EAACopB,IAAA,CAAA,CAAkB,sBAAMC,IAAA,CAAA,CAAe;AAAA,QAAA;AAAA,MAAA,EACzD,CACD;AAAA,IAAA;AAAA,IAGI,GAAGjC;AAAA,EAAA,GAEA,gBAAApnB,EAAC4oB,IAAA,EAAY,YAAAxB,GAAyB,GAAGtnB,EAAA,CAAO;AAC3D,GChCMqnB,KAAQ,CAAC,EAAE,QAAAnf,GAAQ,OAAAhB,GAAO,QAAA0P,GAAQ,YAAA0Q,GAAY,cAAAkC,IAAe,IAAI,MAAA9E,QAAW;AAC9E,QAAMP,IAAaO,MAAS,UAAU8E,EAAa,UAC7C,EAAE,sBAAAjb,GAAsB,WAAAF,EAAA,IAAciC,GAAA;AAC5C,SAAO,gBAAAmZ;AAAA,IAACrW;AAAA,IAAA;AAAA,MACH,GAAGkU;AAAA,MACJ,SAAQ;AAAA,MACR,UAAUpf,GAAQ,aAAa;AAAA,MAC/B,KAAKhB;AAAA,MACL,WAAS;AAAA,MACT,QAAQqH,EAAqB,IAAM,IAAOF,EAAU,QAAQ;AAAA,MAC5D,MAAMnH;AAAA,MACN,OAAO6G,GAAM6I,EAAO,OAAO1P,CAAK,CAAC;AAAA,MACjC,UAAU,CAACjE,MAAU;AAEjB,cAAMymB,IADe3b,GAAM9K,CAAK,EAAE,KAAK,EAAE,EACV,YAAA;AAC/B,QAAA2T,EAAO,cAAc1P,GAAOwiB,CAAS;AAAA,MACzC;AAAA,MACA,QAAQ9S,EAAO;AAAA,MACf,YAAYA,EAAO,QAAQ1P,CAAK,KAAK0P,EAAO,OAAO1P,CAAK;AAAA,MACxD,SAAUgB,EAAO,MAAM6F,GAAM7F,EAAO,GAAG,IAAI;AAAA,MAC3C,SAAUA,EAAO,MAAM6F,GAAM7F,EAAO,GAAG,IAAI;AAAA,MAC3C,UAAUic;AAAA,MACV,WAAW,EAAE,WAAW,EAAE,WAAW,IAAM,YAAYvN,EAAO,OAAO1P,CAAK,GAAG,SAAS,aAAW;AAAA,IAAE;AAAA,EAAA;AAG3G,GCzBMmgB,KAAQ,CAAC,EAAE,QAAAnf,GAAQ,OAAAhB,GAAO,QAAA0P,GAAQ,YAAA0Q,QAAiB;AACrD,QAAM,EAAE,sBAAA/Y,GAAsB,WAAAF,EAAA,IAAciC,GAAA;AAC5C,SAAO,gBAAAmZ;AAAA,IAACpW;AAAA,IAAA;AAAA,MACH,GAAGiU;AAAA,MACJ,SAAQ;AAAA,MACR,UAAUpf,GAAQ,aAAa;AAAA,MAC/B,KAAKhB;AAAA,MACL,WAAS;AAAA,MACT,QAAQqH,EAAqB,IAAO,IAAOF,EAAU,QAAQ;AAAA,MAC7D,MAAMnH;AAAA,MACN,OAAO6G,GAAM6I,EAAO,OAAO1P,CAAK,CAAC;AAAA,MACjC,UAAU,CAACjE,MAAU2T,EAAO,cAAc1P,GAAOjE,CAAK;AAAA,MACtD,QAAQ2T,EAAO;AAAA,MACf,YAAYA,EAAO,QAAQ1P,CAAK,KAAK0P,EAAO,OAAO1P,CAAK;AAAA,MACxD,aAAcgB,EAAO,MAAM6F,GAAM7F,EAAO,GAAG,IAAI;AAAA,MAC/C,aAAcA,EAAO,MAAM6F,GAAM7F,EAAO,GAAG,IAAI;AAAA,MAC/C,WAAW,EAAE,WAAW,EAAE,WAAW,IAAM,YAAY0O,EAAO,OAAO1P,CAAK,GAAG,SAAS,aAAW;AAAA,IAAE;AAAA,EAAA;AAG3G,GCpBMA,KAAQ,CAAC,EAAE,QAAAgB,GAAQ,OAAAhB,GAAO,QAAA0P,GAAQ,YAAA0Q,QAAiB;AACrD,MAAIzN,IAAajD,EAAO,OAAO1P,CAAK;AACpC,SAAIgB,EAAO,UACP2R,IAAa9L,GAAM,IAAI8L,CAAU,EAAE,UAAU9L,GAAA,EAAQ,UAAA,GAAa,EAAI,EAAE,OAAA,IAErE,gBAAA0b;AAAA,IAACE;AAAA,IAAA;AAAA,MACH,GAAGrC;AAAA,MACJ,SAAQ;AAAA,MACR,UAAUpf,EAAO,aAAa;AAAA,MAC9B,KAAKhB;AAAAA,MACL,WAAS;AAAA,MACT,MAAMA;AAAAA,MACN,OAAO6G,GAAM8L,CAAU;AAAA,MACvB,UAAU,CAAC5W,OACHiF,EAAO,UACPjF,IAASA,KAASA,EAAM,QAAA,IAAaA,EAAM,OAAO,qBAAqB,IAAI,UAAU,OAElF2T,EAAO,cAAc1P,GAAOjE,CAAK;AAAA,MAE5C,QAAQ2T,EAAO;AAAA,MACf,YAAYA,EAAO,QAAQ1P,CAAK,KAAK0P,EAAO,OAAO1P,CAAK;AAAA,MACxD,WAAW,EAAE,WAAW,EAAE,WAAW,IAAM,YAAY0P,EAAO,OAAO1P,CAAK,GAAG,SAAS,aAAW;AAAA,IAAE;AAAA,EAAA;AAE3G,GCvBM0iB,KAAc,CAAC,MAAM,QAAW,EAAE;AAExC,SAAwBC,GAAmB,EAAE,QAAA3hB,GAAQ,QAAA0O,GAAQ,SAAA9P,GAAS,WAAAQ,IAAY,CAAA,GAAI,gBAAAwiB,IAAiB,IAAO,cAAAC,GAAc,OAAAtlB,EAAA,GAAS;AACjI,QAAM,CAACgV,GAASuQ,CAAU,IAAIxpB,EAAS,CAAA,CAAE,GACnC,EAAE,WAAA6N,EAAA,IAAciC,GAAA,GAChBxN,IAAMuL,GAAW,cAAc,aAAa,OAAO,IACnDlI,IAAMuQ,GAAQ,MAAM,GAAG5T,CAAG,GAAG2B,GAAO,OAAO,EAAE,IAAI,CAAC3B,GAAK2B,GAAO,GAAG,CAAC,GAGlEwlB,IAAmBvT,GAAQ,MAAM;AACnC,UAAMwT,IAAW,CAAA;AACjB,QAAI,CAAC5iB,EAAU,OAAQ,QAAO4iB;AAC9B,eAAWC,KAAc7iB;AACrB,MAAA4iB,EAASC,CAAU,IAAIvT,EAAO,OAAOuT,CAAU;AAEnD,WAAOD;AAAA,EACX,GAAG5iB,EAAU,IAAI,CAAA8iB,MAAOxT,EAAO,OAAOwT,CAAG,CAAC,CAAC,GAGrCC,IAAiB3T,GAAQ,MACvBpP,EAAU,SAAe,CAAA,IACtB,OAAOY,EAAO,UAAW,WAAWpB,EAAQoB,EAAO,MAAM,IAAIA,EAAO,QAC5E,CAACA,EAAO,QAAQpB,GAASQ,CAAS,CAAC,GAEhC7D,IAAe,YAAY;AAC7B,QAAI,CAACyE,EAAO,OAAQ;AAKpB,QAAI,CAH8B,OAAO,OAAO+hB,CAAgB,EAAE;AAAA,MAC9D,CAAAhnB,MAAS,CAAC2mB,GAAY,SAAS3mB,CAAK;AAAA,IAAA,GAER;AAC5B,MAAA+mB,EAAW,CAAA,CAAE;AACb;AAAA,IACJ;AACA,QAAIM,IAAa,CAAA;AACjB,UAAMC,IAAc;AAAA,MAChB,SAAS,CAAC,EAAE,QAAQriB,EAAO,QAAQ,OAAO+hB,GAAkB;AAAA,IAAA;AAEhE,QAAI;AACA,YAAMvmB,IAAW,MAAME,GAAQ,EAAE,KAAK,GAAGuC,CAAG,UAAU,QAAQokB,GAAa,eAAe,IAAM,aAAa,IAAM;AACnH,MAAI7mB,KAAYA,EAAS,WAAWA,EAAS,UACzC4mB,IAAa5mB,EAAS,QAAQwE,EAAO,MAAM,KAAK,CAAA,IAEhDoiB,IAAa,CAAA;AAAA,IAErB,QAAQ;AACJ,MAAAA,IAAa,CAAA;AAAA,IACjB,UAAA;AACI,MAAAN,EAAWM,CAAU;AAAA,IACzB;AAAA,EACJ;AAGA,SAAArgB,GAAU,MAAM;AACZ,IAAI3C,EAAU,SACV7D,EAAA,KACOqmB,KAAkB,CAACC,EAAa,YACvCC,EAAWK,CAAc;AAAA,EAEjC,GAAG,CAACJ,GAAkBI,GAAgBlkB,GAAK+B,EAAO,MAAM,CAAC,GAElDuR;AACX;ACzDA,MAAM+Q,KAAczqB,GAAM,KAAK,CAAC,EAAE,QAAAmI,GAAQ,OAAAhB,GAAO,QAAA0P,GAAQ,SAAA9P,GAAS,WAAAQ,IAAY,CAAA,GAAI,OAAA7C,GAAO,GAAG6iB,QAAiB;AACzG,QAAMyC,IAAehqB,GAAM,OAAO,EAAK,GACjC,EAAE,aAAA0qB,MAAgBviB,GAClBuR,IAAUoQ,GAAmB,EAAE,QAAA3hB,GAAQ,QAAA0O,GAAQ,SAAA9P,GAAS,WAAAQ,GAAW,cAAAyiB,GAAc,OAAAtlB,GAAO,GACxFgjB,IAAQC,GAAA,GAGR7N,IAAanD,GAAQ,MAAM;AAC7B,QAAIzT,IAAQ2T,EAAO,OAAO1P,CAAK;AAG/B,QAAIuS,GAAS,UAAU,CAACxW,KAAS,CAACiF,EAAO,eAAe,eAAeuR,EAAQ,CAAC,GAAG;AAC/E,YAAMiR,IAAkBjR,EAAQ,KAAK,CAAAhS,MAAKA,EAAE,SAAS;AACrD,MAAIijB,MACAznB,IAAQynB,EAAgB,OACxB9T,EAAO,cAAc1P,GAAOwjB,EAAgB,KAAK;AAAA,IAEzD;AAGA,WAAIxiB,EAAO,gBACH,CAACjF,KAASA,EAAM,WAAW,IAC3BA,IAAQ,CAAA,IACA,MAAM,QAAQA,CAAK,MAC3BA,IAAQA,EAAM,MAAM,GAAG,EAAE,IAAI,CAACwE,MAAM,SAASA,CAAC,CAAC,KAIhDxE;AAAA,EACX,GAAG,CAAC2T,EAAO,OAAO1P,CAAK,GAAGuS,GAASvR,EAAO,aAAahB,CAAK,CAAC,GAGvD8C,IAAe4P,GAAY,CAACvP,MAAU;AACxC,IAAAuM,EAAO,aAAavM,CAAK,GACzB0f,EAAa,UAAU;AAAA,EAC3B,GAAG,CAACnT,CAAM,CAAC;AAEX,SACI,gBAAAxV;AAAA,IAAC4Y;AAAAA,IAAA;AAAA,MACG,WAAS;AAAA,MAET,OAAOpD,EAAO,QAAQ1P,CAAK,KAAK0P,EAAO,OAAO1P,CAAK;AAAA,MACnD,SAAQ;AAAA,MACR,UAAA;AAAA,QAAA,gBAAAhH,EAACyqB,IAAA,EAAY,UAAAF,KAA4B,IAAG;AAAA,QAC5C,gBAAAvqB;AAAA,UAAC+Z;AAAAA,UAAA;AAAA,YACG,eAAe2Q;AAAA,YACd,GAAGtD;AAAA,YACJ,MAAMpgB;AAAA,YACN,UAAUgB,EAAO,gBAAgB;AAAA,YACjC,UAAUA,EAAO,aAAa;AAAA,YAC9B,OAAO,GAAG2R,CAAU;AAAA,YACpB,UAAU7P;AAAA,YACV,QAAQ4M,EAAO;AAAA,YACf,IAAI;AAAA,cACA,iBAAiB1O,EAAO,WAAWuf,EAAM,SAAS,QAAQ,WAAW;AAAA,YAAA;AAAA,YAGxE,gBAAM,QAAQhO,CAAO,KAAKA,EAAQ,IAAI,OACnC,gBAAAvZ,EAACwY,IAAA,EAA4B,OAAOwB,EAAO,OAAO,UAAUA,EAAO,YAC9D,YAAO,MAAA,GADGA,EAAO,KAEtB,CACH;AAAA,UAAA;AAAA,QAAA;AAAA,QAEL,gBAAAha,EAACsnB,MAAgB,UAAA5Q,EAAO,QAAQ1P,CAAK,KAAK0P,EAAO,OAAO1P,CAAK,EAAA,CAAE;AAAA,MAAA;AAAA,IAAA;AAAA,IAvB1DA;AAAA,EAAA;AA0BjB,CAAC,GCxEK2jB,KAAajP,GAAO,KAAK,EAAE;AAAA,EAC7B,WAAW;AAAA,EACX,cAAc;AAAA,EACd,UAAU;AACd,CAAC,GACKkP,KAAgB,CAAC,EAAE,WAAArf,GAAW,MAAAE,GAAM,QAAAiL,GAAQ,OAAA1P,GAAO,QAAAgB,QAAa;AAClE,QAAM,EAAE,OAAAjF,EAAA,IAAU2T,EAAO,cAAcjL,KAAQzE,CAAK,GAC9C,EAAE,eAAA6jB,MAAkBnU,GACpBoU,IAAYvf,KAAavD,EAAO,UAChC6V,IAAiBnE,GAAY,CAAC3W,MAAU;AAC1C,IAAA8nB,EAAcpf,KAAQzE,GAAOjE,CAAK;AAAA,EACtC,GAAG,CAAC8nB,GAAepf,GAAMzE,CAAK,CAAC;AAC/B,2BACK,OAAA,EACG,UAAA;AAAA,IAAA,gBAAAhH,EAAC2qB,MAAY,UAAA,aAAkB3iB,EAAO,KAAK,IAAG;AAAA,IAC9C,gBAAAhI,EAAC8qB,GAAA,EAAU,UAAU/nB,GAAO,WAAW,IAAM,gBAAA8a,GAAgC,qBAAqB7V,EAAO,qBAAqB,UAAUA,EAAO,SAAA,CAAU;AAAA,sBACxJ2iB,IAAA,EAAY,UAAA,YAAiB3iB,EAAO,KAAK,IAAG;AAAA,IAC7C,gBAAAhI,EAAC8qB,GAAA,EAAU,UAAU/nB,GAAO,UAAU,IAAM,gBAAA8a,GAAgC,qBAAqB7V,EAAO,qBAAqB,UAAUA,EAAO,SAAA,CAAU;AAAA,EAAA,GAC5J;AAER,GCpBMmf,KAAQ,CAAC,EAAE,OAAAngB,GAAO,QAAA0P,GAAQ,aAAAqU,IAAc,OAAO,OAAAvR,GAAO,SAAA5S,GAAS,cAAA0iB,IAAa,CAAA,GAAI,MAAA9E,GAAM,GAAG4C,QAAiB;AAC5G,QAAMtd,IAAe,CAACK,MAAU;AAC5B,IAAAuM,EAAO,cAAc1P,GAAOmD,EAAM,OAAO,KAAK;AAAA,EAClD,GAEMoP,IAAU3S,IAAUA,EAAQwgB,EAAW,OAAO,MAAM,IAAI,CAAA,GACxDG,IAAQC,GAAA,GACRwD,IAAUtU,EAAO,QAAQ1P,CAAK,KAAK,EAAQ0P,EAAO,OAAO1P,CAAK,GAC9Did,IAAaO,MAAS,UAAU8E,EAAa;AACnD,SACI,gBAAApoB,EAAAC,IAAA,EACI,UAAA;AAAA,IAAA,gBAAAD,EAAC4Y,IAAA,EAAY,WAAU,YAAW,OAAOkR,GACrC,UAAA;AAAA,MAAA,gBAAAhrB,EAACirB,IAAA,EAAU,WAAU,UAAU,UAAAzR,GAAM;AAAA,MACrC,gBAAAxZ;AAAA,QAACkrB;AAAA,QAAA;AAAA,UACG,KAAKH,MAAgB;AAAA,UACrB,cAAYvR;AAAA,UACZ,MAAMxS;AAAA,UACN,OAAO0P,EAAO,OAAO1P,CAAK;AAAA,UAC1B,UAAU8C;AAAA,UAET,UAAAyP,GAAS,IAAI,CAACS,GAAQtH,MACnB,gBAAA1S;AAAA,YAAC+Y;AAAA,YAAA;AAAA,cAEG,OAAOiB,EAAO;AAAA,cACd,2BAAUmR,IAAA,EAAM;AAAA,cAChB,OAAOnR,EAAO;AAAA,cACd,UAAUiK;AAAA,YAAA;AAAA,YAJLvR;AAAA,UAAA,CAMZ;AAAA,QAAA;AAAA,MAAA;AAAA,IACL,GACJ;AAAA,IACCsY,KAAW,gBAAAhrB,EAACsnB,IAAA,EAAe,OAAO,EAAE,OAAOC,EAAM,QAAQ,MAAM,KAAA,GAAS,UAAA7Q,EAAO,OAAO1P,CAAK,EAAA,CAAE;AAAA,EAAA,GAClG;AAER,GC9BMokB,KAAS;AAAA,EACX,WAAW;AACf,GAEMjE,KAAQtnB,GAAM,KAAK,CAAC,EAAE,QAAAmI,GAAQ,OAAAhB,GAAO,QAAA0P,GAAQ,SAAA9P,GAAS,WAAAQ,IAAY,CAAA,GAAI,cAAAkiB,IAAe,CAAA,GAAI,MAAA9E,GAAM,OAAAjgB,GAAO,GAAG6iB,QAAiB;AAC5H,QAAM7N,IAAUoQ,GAAmB,EAAE,QAAA3hB,GAAQ,QAAA0O,GAAQ,SAAA9P,GAAS,WAAAQ,GAAW,OAAA7C,GAAO,gBAAgB,IAAM;AACtG,MAAIoV,IAAajD,EAAO,OAAO1P,CAAK,KAAK,CAAA;AACzC,EAAK,MAAM,QAAQ2S,CAAU,MACzBA,IAAaA,EAAW,MAAM,IAAI,EAAE,IAAI,MAAM;AAElD,QAAM0R,IAAiB9R,EAAQ,OAAO,CAAAS,MAAUL,EAAW,SAASK,EAAO,KAAK,CAAC,KAAK,CAAA,GAChFiK,IAAaO,MAAS,UAAU8E,EAAa,UAC7CgC,IAA2B,CAACC,GAAGvX,MAAa;AAC9C,QAAIwX,IAASxX,GAAU,IAAI,OAAOyX,EAAI,KAAK,KAAK,CAAA;AAEhD,IAAIzjB,EAAO,eAAe,YACtBwjB,IAASA,EAAO,SAASA,EAAO,KAAK,IAAI,IAAI,KAEjD9U,EAAO,cAAc1P,GAAOwkB,CAAM;AAAA,EACtC;AAEA,SACI,gBAAAtqB;AAAA,IAAC4Y;AAAAA,IAAA;AAAA,MACG,WAAS;AAAA,MAET,SAAQ;AAAA,MACR,OAAOpD,EAAO,QAAQ1P,CAAK,KAAK,EAAQ0P,EAAO,OAAO1P,CAAK;AAAA,MAE3D,UAAA;AAAA,QAAA,gBAAAhH;AAAA,UAAC0rB;AAAA,UAAA;AAAA,YACI,GAAGtE;AAAA,YACJ,UAAQ;AAAA,YACR,IAAIpgB;AAAA,YACJ,WAAWgB,EAAO,aAAaojB,GAAO;AAAA,YACtC,SAAS7R,KAAW,CAAA;AAAA,YACpB,gBAAgB,CAACS,MAAWA,EAAO,SAAS;AAAA,YAC5C,cAAcqR;AAAA,YACd,aAAa,CAAC1nB,MAAW,gBAAA3D,EAACyK,MAAW,GAAG9G,GAAQ,SAAQ,YAAW;AAAA,YACnE,UAAU2nB;AAAA,YACV,OAAOD;AAAA,YACP,MAAK;AAAA,YACL,UAAUpH;AAAA,UAAA;AAAA,QAAA;AAAA,QAEbvN,EAAO,QAAQ1P,CAAK,KAAK0P,EAAO,OAAO1P,CAAK,KAAK,gBAAAhH,EAACsnB,IAAA,EAAgB,UAAA5Q,EAAO,OAAO1P,CAAK,EAAA,CAAE;AAAA,MAAA;AAAA,IAAA;AAAA,IAlBnFA;AAAA,EAAA;AAqBjB,CAAC,GClDY2kB,KAAuB,WCK9BC,KAAO;AAAA,EACT,EAAE,OAAO,UAAU,OAAO,GAAG,SAAS,IAAA;AAAA,EACtC,EAAE,OAAO,UAAU,OAAO,GAAG,SAAS,IAAA;AAAA,EACtC,EAAE,OAAO,WAAW,OAAO,GAAG,SAAS,IAAA;AAAA,EACvC,EAAE,OAAO,aAAa,OAAO,GAAG,SAAS,IAAA;AAAA,EACzC,EAAE,OAAO,YAAY,OAAO,GAAG,SAAS,IAAA;AAAA,EACxC,EAAE,OAAO,UAAU,OAAO,GAAG,SAAS,IAAA;AAAA,EACtC,EAAE,OAAO,YAAY,OAAO,GAAG,SAAS,IAAA;AAC5C,GAEMC,KAAenQ,GAAOoQ,EAAM,EAAE,CAAC,EAAE,OAAAvE,GAAO,YAAAwE,SAAkB;AAAA,EAC5D,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,iBAAiBA,IAAaJ,KAAuB;AAAA,EACrD,QAAQ,aAAaK,GAAK,GAAG,CAAC;AAAA,EAC9B,OAAOD,IAAa,UAAU;AAClC,EAAE,GAEIE,KAAY,CAAC,EAAE,KAAAC,GAAK,SAAAC,GAAS,YAAAJ,QAE3B,gBAAA/rB;AAAA,EAAC6rB;AAAA,EAAA;AAAA,IAEG,SAAS,MAAMM,EAAQD,EAAI,KAAK;AAAA,IAChC,YAAAH;AAAA,IACA,OAAO,EAAE,QAAQ,MAAA;AAAA,IAEhB,UAAAG,EAAI;AAAA,EAAA;AAAA,EALAA,EAAI;AAAA,GASfE,KAAe,CAAC,EAAE,MAAA3gB,GAAM,OAAAzE,GAAO,QAAA0P,GAAQ,SAAA2V,QAAc;AACvD,QAAM,EAAE,eAAAxB,MAAkBnU,GACpB,EAAE,OAAA3T,EAAA,IAAU2T,EAAO,cAAcjL,KAAQzE,CAAK,GAE9CslB,IAAY,WACZC,IAAa,WACbC,IAAa,IAAI,OAAO,CAAC,GAEzB,CAACC,GAAcC,CAAe,IAAIpsB,EAASyC,KAASypB,CAAU,GAC9D,CAACG,GAAYC,CAAa,IAAItsB,EAAS,MACpCyC,IACDA,MAAUupB,IAAkBA,IAC5BvpB,MAAUwpB,IAAmBA,IAC1B,WAHY,EAItB,GACK,CAACM,GAAgBC,CAAiB,IAAIxsB,EAAS,EAAK,GACpDud,IAAiBnE,GAAY,CAAC1F,MAAa;AAC7C,QAAI,MAAM,QAAQA,CAAQ,GAAG;AACzB,UAAI+Y,IAAaP;AACjB,iBAAWf,KAAOzX;AACd,QAAA+Y,IAAaA,EAAW,UAAU,GAAGtB,CAAG,IAAI,MAAMsB,EAAW,UAAUtB,IAAM,CAAC;AAElF,MAAAiB,EAAgBK,CAAU,GAC1BlC,EAAcpf,KAAQzE,GAAO+lB,CAAU,GACvCD,EAAkB,EAAI;AAAA,IAC1B,OAAO;AACH,UAAIE,IAAYH,IAAiBL,IAAaC;AAC9C,YAAMM,IAAaC,EAAU,MAAM,GAAGhZ,CAAQ,KAAKgZ,EAAUhZ,CAAQ,MAAM,MAAM,MAAM,OAAOgZ,EAAU,MAAMhZ,IAAW,CAAC;AAC1H,MAAA0Y,EAAgBK,CAAU,GAC1BlC,EAAcpf,KAAQzE,GAAO+lB,CAAU,GACvCH,EAAc,QAAQ,GACtBE,EAAkB,EAAK;AAAA,IAC3B;AAAA,EACJ,GAAG,CAACD,GAAgBL,GAAYC,GAAchhB,GAAMzE,GAAO6jB,CAAa,CAAC,GACnEtD,IAAQC,GAAA,GACRwD,IAAUtU,EAAO,QAAQ1P,CAAK,KAAK,EAAQ0P,EAAO,OAAO1P,CAAK;AACpE,SACI,gBAAA9F,EAAAC,IAAA,EACI,UAAA;AAAA,IAAA,gBAAAnB,EAAC8Z,IAAA,EAAY,WAAU,YAAW,OAAOkR,GACrC,UAAA,gBAAA9pB;AAAA,MAACgqB;AAAA,MAAA;AAAA,QACG,KAAG;AAAA,QACH,MAAMzf,KAAQzE;AAAA,QACd,OAAO2lB;AAAA,QACP,UAAU,CAAAxiB,MAAS;AACf,gBAAMshB,IAAMthB,EAAM,OAAO;AACzB,UAAAyiB,EAAcnB,CAAG,GACbA,MAAQ,YACRiB,EAAgBjB,CAAG,GACnBZ,EAAcpf,KAAQzE,GAAOykB,CAAG,GAChCqB,EAAkB,EAAI,MAEtBJ,EAAgBF,CAAU,GAC1B3B,EAAcpf,KAAQzE,GAAOwlB,CAAU,GACvCM,EAAkB,EAAK;AAAA,QAE/B;AAAA,QAEA,UAAA;AAAA,UAAA,gBAAA9sB,EAAC+Y,MAAiB,OAAOuT,GAAW,SAAS,gBAAAtsB,EAACmrB,MAAM,GAAI,OAAO,wBAAwB,SAAS,MAAMtN,EAAe,CAAC,GAAG,CAAC,CAAC,GAAG;AAAA,UAC9H,gBAAA7d,EAAC+Y,MAAiB,OAAOwT,GAAY,SAAS,gBAAAvsB,EAACmrB,IAAA,CAAA,CAAM,GAAI,OAAO,wBAAwB,SAAS,MAAMtN,EAAe,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG;AAAA,UACxI,gBAAA7d,EAAC+Y,MAAiB,OAAO,UAAU,SAAS,gBAAA/Y,EAACmrB,IAAA,CAAA,CAAM,GAAI,OAAO,gBAAA,CAAiB;AAAA,UAC9ES,GAAK,IAAI,CAACM,GAAKxZ,MACZ,gBAAA1S;AAAA,YAACisB;AAAA,YAAA;AAAA,cAEG,KAAAC;AAAA,cACA,SAAS,MAAMrO,EAAenL,CAAK;AAAA,cACnC,YAAYia,MAAe,YAAYF,EAAa/Z,CAAK,MAAM;AAAA,cAC/D,UAAU2Z;AAAA,YAAA;AAAA,YAJLH,EAAI;AAAA,UAAA,CAMhB;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA,GAET;AAAA,IACClB,KAAW,gBAAAhrB,EAACsnB,IAAA,EAAe,OAAO,EAAE,OAAOC,EAAM,QAAQ,MAAM,KAAA,GAAS,UAAA7Q,EAAO,OAAO1P,CAAK,EAAA,CAAE;AAAA,EAAA,GAClG;AAER,GCzGMmgB,KAAQ,CAAC,EAAE,OAAA8F,GAAO,QAAAjlB,GAAQ,OAAAhB,GAAO,QAAA0P,GAAQ,YAAA0Q,GAAY,cAAAkC,IAAe,IAAI,MAAA9E,QAAW;AACrF,QAAM+C,IAAQC,GAAA;AACd,MAAI7N,IAAajD,EAAO,OAAO1P,CAAK,KAAK,CAAA;AACzC,EAAK,MAAM,QAAQ2S,CAAU,MACzBA,IAAaA,EAAW,MAAM,GAAG,EAAE,IAAI,CAAAhV,MAAQA,EAAK,MAAM;AAE9D,QAAMsf,IAAapkB,GAAM,QAAQ,MACzB2kB,MAAS,SAAe,KACxB,OAAO8E,EAAa,WAAa,MAAoBA,EAAa,WAClE,OAAOthB,EAAO,YAAa,aAAmBA,EAAO,SAAS,EAAE,OAAAilB,GAAO,QAAAvW,GAAQ,IAC5E,EAAQ1O,EAAO,UACvB,CAACwc,GAAM8E,EAAa,UAAUthB,EAAO,QAAQ,CAAC,GAC3CklB,IAAellB,EAAO,cAAc,CAACilB,IAAQ,CAACtT,EAAW,CAAC,CAAC,IAAI,CAAA,GAE/D2R,IAA2B5R,GAAY,CAACnS,GAAGyM,GAAU7N,GAAQxB,IAAO,OAAO;AAC7E,UAAMwoB,IAAcnZ,EAAS,IAAA,GAAO,KAAA;AACpC,IAAKA,EAAS,SAASmZ,CAAW,KAC9BnZ,EAAS,KAAKmZ,CAAW,GAEzBD,KAAgBA,EAAa,SAASvoB,EAAK,MAAM,KAAKwB,MAAW,mBACjE6N,IAAW,CAACrP,EAAK,MAAM,IAGvBqD,EAAO,eAAe,YACtBgM,IAAWA,EAAS,SAASA,EAAS,KAAK,GAAG,IAAI,KAEtD0C,EAAO,cAAc1P,GAAOgN,CAAQ;AAAA,EACxC,GAAE,CAAC0C,GAAQ1P,CAAK,CAAC;AAEjB,SACI,gBAAA9F;AAAA,IAAC4Y;AAAAA,IAAA;AAAA,MACG,WAAS;AAAA,MAET,SAAQ;AAAA,MACR,OAAOpD,EAAO,QAAQ1P,CAAK,KAAK,EAAQ0P,EAAO,OAAO1P,CAAK;AAAA,MAE3D,UAAA;AAAA,QAAA,gBAAAhH;AAAA,UAAC0rB;AAAA,UAAA;AAAA,YACI,GAAGtE;AAAA,YACJ,UAAQ;AAAA,YACR,IAAIpgB;AAAA,YACJ,UAAU;AAAA,YACV,OAAO2S;AAAA,YACP,SAAS,CAAA;AAAA,YACT,aAAa,CAAChW,MACV,gBAAA3D;AAAA,cAACyK;AAAA,cAAA;AAAA,gBACI,GAAG9G;AAAA,gBACJ,SAAQ;AAAA,gBACR,YAAY;AAAA,kBACR,GAAGA,EAAO;AAAA,kBACV,IAAI;AAAA,oBACA,GAAGA,EAAO,YAAY;AAAA,oBACtB,GAAIsgB,KAAc,EAAE,iBAAiBsD,EAAM,SAAS,QAAQ,SAAA;AAAA,kBAAS;AAAA,gBACzE;AAAA,cACJ;AAAA,YAAA;AAAA,YAGR,UAAU+D;AAAA,YACV,MAAK;AAAA,YACL,YAAY,CAAC8B,GAAUC,MACnBD,EAAS,IAAI,CAACpT,GAAQtH,MAAU;AAC5B,oBAAM,EAAE,KAAAhQ,GAAK,GAAG4qB,EAAA,IAAaD,EAAY,EAAE,OAAA3a,GAAO;AAClD,qBACI,gBAAA1S;AAAA,gBAACutB;AAAA,gBAAA;AAAA,kBAEG,OAAOvT;AAAA,kBACN,GAAGsT;AAAA,kBACJ,UAAUJ,EAAa,SAASlT,CAAM;AAAA,gBAAA;AAAA,gBAHjCtX;AAAA,cAAA;AAAA,YAMjB,CAAC;AAAA,YAEL,UAAUuhB;AAAA,UAAA;AAAA,QAAA;AAAA,QAEbvN,EAAO,QAAQ1P,CAAK,KAAK0P,EAAO,OAAO1P,CAAK,KAAK,gBAAAhH,EAACsnB,IAAA,EAAgB,UAAA5Q,EAAO,OAAO1P,CAAK,EAAA,CAAE;AAAA,MAAA;AAAA,IAAA;AAAA,IAzCnFA;AAAA,EAAA;AA4CjB,GCrEMwmB,KAAY,CAACrqB,IAAO,OAAO;AAC/B,QAAMsqB,IAAO,CAAA;AACb,SAAAtqB,EAAK,QAAQ,CAACwB,MAAS;AACrB,IAAIA,EAAK,YAAY8oB,EAAK9oB,EAAK,QAAQ,IACrC8oB,EAAK9oB,EAAK,QAAQ,EAAE,SAAS,KAAK;AAAA,MAChC,OAAOA,EAAK,OAAO,SAAA;AAAA,MACnB,OAAOA,EAAK;AAAA,IAAA,CACb,IAED8oB,EAAK9oB,EAAK,QAAQ,IAAI;AAAA,MACpB,OAAOA,EAAK;AAAA,MACZ,OAAO,WAAWA,EAAK,SAAS,SAAA;AAAA,MAChC,UAAU,CAAC;AAAA,QACT,OAAOA,EAAK,OAAO,SAAA;AAAA,QACnB,OAAOA,EAAK;AAAA,MAAA,CACb;AAAA,IAAA;AAAA,EAGP,CAAC,GACM,OAAO,OAAO8oB,CAAI;AAC3B;AAiBA,SAAwBC,GAAa,EAAE,QAAA1lB,GAAQ,OAAAhB,GAAO,QAAA0P,GAAQ,SAAA9P,GAAS,cAAA0iB,GAAc,MAAA9E,KAAQ;AAC3F,QAAMjL,IAAU3S,IAAUA,EAAQoB,EAAO,MAAM,IAAI,CAAA,GAC7CylB,IAAOD,GAAUjU,CAAO,GACxBI,IAAajD,EAAO,OAAO1P,CAAK,GAAG,SAAS0P,EAAO,OAAO1P,CAAK,EAAE,MAAM,IAAI,IAAI,CAAA;AACrF,MAAIid;AACJ,SAAIO,MAAS,WACXP,IAAaqF,GAAc,6BAM1B/e,IAAA,EAAI,IAAI,EAAE,WAAW,OACpB,UAAA,gBAAAvK;AAAA,IAAC2tB;AAAA,IAAA;AAAA,MACC,eAAehU;AAAA,MACf,uBAPe,CAAC4R,GAAGvX,MAAa;AACpC,QAAA0C,EAAO,cAAc1P,GAAOgN,GAAU,KAAK,IAAI,KAAK,EAAE;AAAA,MACxD;AAAA,MAMM,UAAUiQ;AAAA,MACV,aAAW;AAAA,MACX,mBAAiB;AAAA,MAEhB,UAAAwJ,EAAK,IAAI,CAACG,MACT,gBAAA5tB,EAAC6tB,IAAA,EAA0B,QAAQD,EAAK,OAAO,OAAOA,EAAK,OACxD,YAAK,SAAS,IAAI,CAACE,MAClB,gBAAA9tB,EAAC6tB,IAAA,EAA2B,QAAQC,EAAM,OAAO,OAAOA,EAAM,MAAA,GAA/CA,EAAM,KAAgD,CACtE,EAAA,GAHYF,EAAK,KAIpB,CACD;AAAA,IAAA;AAAA,EAAA,GAEL;AAEJ;AC3EA,MAAMxC,KAAS,EAAE,WAAW,IAAA,GACtB,EAAE,cAAA2C,OAAiB3pB,IACnB4pB,KAAK,OAAO;AAClB,SAASC,GAAW,EAAE,QAAAjmB,GAAQ,OAAAhB,GAAO,QAAA0P,KAAU;AAC3C,QAAMiD,IAAajD,EAAO,OAAO1P,CAAK,KAAK,IACrC,EAAE,WAAAmH,EAAA,IAAciC,GAAA,GAChB,EAAE,SAAA8d,GAAS,SAAAC,EAAA,IAAYnmB,GACvB,EAAE,WAAAomB,GAAW,UAAAC,GAAU,KAAAC,EAAA,IAAQngB,GAAW,cAAc,aACxD,CAACogB,GAAWC,CAAY,IAAIluB,EAAS;AAAA,IACvC,YAAY;AAAA,IACZ,cAAc;AAAA,EAAA,CACjB,GACK,CAACmQ,GAASC,CAAU,IAAIpQ,EAAS,EAAK,GACtC8U,IAAW/T,GAAA,GACX,EAAE,WAAAye,GAAW,WAAAC,EAAA,IAAc5P,GAAA,GAC3B,EAAE,eAAAse,EAAA,IAAkB1O,EAAA,KAAeD,GACnCzX,IAAKomB,GAAe,MAAM,GAAG,EAAE,CAAC,KAAK,GAErCC,IAAoB,CAACvkB,MAAU;AACjC,UAAMwkB,KAAaxkB,EAAM,OAAO;AAChC,IAAAqkB,EAAa;AAAA,MACT,GAAGD;AAAA,MACH,YAAAI;AAAA,MACA,cAAc;AAAA,IAAA,CACjB,GACDjY,EAAO,cAAc1P,GAAO0P,EAAO,OAAO1P,CAAK,CAAC;AAAA,EACpD,GAEM4nB,IAAoB,CAACrnB,MAAM;AAC7B,IAAAmP,EAAO,cAAc1P,GAAOO,EAAE,OAAO,KAAK;AAAA,EAC9C,GAEMsnB,IAAmB,CAAC1kB,MAAU;AAChC,UAAM2kB,KAAe3kB,EAAM,OAAO,MAAM,CAAC;AACzC,QAAK2kB,IACL;AAAA,UAAIZ,KAAWY,GAAa,OAAOZ,IAAUF,IAAI;AAC7C,QAAA5Y,EAAS,UAAU,0CAA0C8Y,CAAO,MAAM;AAC1E;AAAA,MACJ;AACA,UAAI,MAAM,QAAQC,CAAO,KAAK,CAACA,EAAQ,SAASW,GAAa,IAAI,GAAG;AAChE,QAAA1Z,EAAS,UAAU,yCAAyC+Y,EAAQ,KAAK,IAAI,CAAC,GAAG;AACjF;AAAA,MACJ;AACA,MAAAK,EAAa,CAACO,OAAU,EAAE,GAAGA,GAAM,cAAAD,KAAe;AAAA;AAAA,EACtD,GAEME,IAAmB,YAAY;AACjC,QAAKT,EAAU,cAEf;AAAA,MAAA7d,EAAW,EAAI;AACf,UAAI;AACA,cAAMjO,IAAW,IAAI,SAAA;AACrB,QAAAA,EAAS,OAAO,QAAQ8rB,EAAU,YAAY,GAC9C9rB,EAAS,OAAO,mBAAmBiU,EAAO,OAAO,eAAe,GAChEjU,EAAS,OAAO,iBAAiB4F,CAAE;AAQnC,cAAMlF,KAPW,MAAMH,GAAU;AAAA,UAC7B,QAAQ;AAAA,UACR,KAAKorB;AAAA,UACL,MAAM3rB;AAAA,UACN,SAAS,EAAE,gBAAgB,sBAAA;AAAA,UAC3B,aAAa;AAAA,QAAA,CAChB,GACqB,QAAQ,CAAA;AAC9B,YAAI,CAACU,EAAK,SAAS;AACf,UAAAiS,EAAS,UAAUjS,EAAK,WAAW,eAAe;AAClD;AAAA,QACJ;AACA,cAAM8rB,IAAUZ,IAAW,MAAMlrB,EAAK;AACtC,QAAAuT,EAAO,cAAc1P,GAAOioB,CAAO;AAAA,MACvC,SAAS9mB,GAAO;AACZ,cAAM+mB,MAAc/mB,EAAM,QAAQ,MAAM,qBAAqB,KAAK,CAAA,GAAI,CAAC;AACvE,QAAAiN,EAAS,UAAU2Y,GAAamB,EAAU,CAAC;AAAA,MAC/C,UAAA;AACI,QAAAxe,EAAW,EAAK;AAAA,MACpB;AAAA;AAAA,EACJ,GAEMye,IAAO,IAAI,IAAIb,GAAK,OAAO,SAAS,MAAM,EAAE,SAAS,YAAA;AAC3DzuB,EAAAA,GAAM,UAAU,MAAM;AAClB,IAAA2uB,EAAa;AAAA,MACT,GAAGD;AAAA,MACH,YAAa5U,EAAW,YAAA,EAAc,SAASwV,CAAI,IAAY,OAAR;AAAA,IAAQ,CAClE;AAAA,EACL,GAAG,CAACxV,GAAY6U,CAAY,CAAC;AAE7B,QAAMY,KAAmB1Y,EAAO,OAAO1P,CAAK,GAAG,UAAUgB,EAAO,OAAOojB,GAAO,YACxEiE,KAAcD,KAAmB,QAAQ;AAE/C,2BACK7kB,IAAA,EAEG,UAAA;AAAA,IAAA,gBAAArJ,EAACqJ,IAAA,EAAI,IAAI,EAAE,SAAS,QAAQ,YAAY,UAAU,cAAc,EAAA,GAC5D,UAAA;AAAA,MAAA,gBAAAvK,EAACwK,IAAA,EAAW,SAAQ,SAAQ,IAAI,EAAE,OAAO,SAAS,aAAa,EAAA,GAAK,UAAA,iBAAA,CAEpE;AAAA,MACA,gBAAAtJ;AAAA,QAACgqB;AAAA,QAAA;AAAA,UACG,KAAG;AAAA,UACH,OAAOqD,EAAU;AAAA,UACjB,UAAUG;AAAA,UACV,cAAW;AAAA,UACX,MAAK;AAAA,UAEL,UAAA;AAAA,YAAA,gBAAA1uB,EAAC+Y,IAAA,EAAiB,OAAM,OAAM,2BAAUoS,IAAA,CAAA,CAAM,GAAI,OAAM,MAAA,CAAM;AAAA,YAC9D,gBAAAnrB,EAAC+Y,MAAiB,OAAM,MAAK,SAAS,gBAAA/Y,EAACmrB,IAAA,CAAA,CAAM,GAAI,OAAM,KAAA,CAAK;AAAA,UAAA;AAAA,QAAA;AAAA,MAAA;AAAA,IAChE,GACJ;AAAA,IAGA,gBAAAjqB,EAACqJ,IAAA,EAAI,IAAI,EAAE,SAAS,QAAQ,YAAY,UAAU,cAAc,EAAA,GAC5D,UAAA;AAAA,MAAA,gBAAAvK,EAACwK,IAAA,EAAW,SAAQ,SAAQ,IAAI,EAAE,OAAO,SAAS,aAAa,EAAA,GAAK,UAAA,gBAAA,CAEpE;AAAA,MACA,gBAAAtJ,EAACqJ,IAAA,EAAI,IAAI,EAAE,MAAM,GAAG,SAAS,QAAQ,eAAe,SAAA,GAC/C,UAAA;AAAA,QAAAgkB,EAAU,eAAe,QACtB,gBAAAvuB;AAAA,UAACyK;AAAAA,UAAA;AAAA,YACG,WAAS;AAAA,YACT,OAAOkP;AAAA,YACP,IAAI;AAAA,cACA,4BAA4B;AAAA,gBACxB,cAAc,EAAE,aAAa0V,GAAA;AAAA,gBAC7B,0BAA0B,EAAE,aAAaA,GAAA;AAAA,gBACzC,oBAAoB,EAAE,aAAaA,GAAA;AAAA,cAAY;AAAA,YACnD;AAAA,YAEJ,UAAUT;AAAA,YACV,aAAY;AAAA,UAAA;AAAA,QAAA,IAGhB,gBAAA5uB;AAAA,UAACyK;AAAAA,UAAA;AAAA,YACG,WAAS;AAAA,YACT,OAAOkP;AAAA,YACP,aAAY;AAAA,YACZ,YAAY,EAAE,UAAU,GAAA;AAAA,UAAK;AAAA,QAAA;AAAA,QAGpCyV,MAAoB,gBAAAluB,EAACsJ,IAAA,EAAW,IAAI,EAAE,OAAO,SAAS,UAAA;AAAA,UAAA;AAAA,UAAiDxC,EAAO;AAAA,UAAI;AAAA,QAAA,EAAA,CAAY;AAAA,MAAA,EAAA,CACnI;AAAA,IAAA,GACJ;AAAA,IAGCumB,EAAU,eAAe,QACtB,gBAAArtB,EAACqJ,IAAA,EAAI,IAAI,EAAE,SAAS,QAAQ,YAAY,UAAU,KAAK,KACnD,UAAA;AAAA,MAAA,gBAAArJ;AAAA,QAACkB;AAAAA,QAAA;AAAA,UACG,SAAQ;AAAA,UACR,WAAU;AAAA,UACV,UAAUqO;AAAA,UACb,UAAA;AAAA,YAAA;AAAA,8BAEI,SAAA,EAAM,MAAK,QAAO,QAAM,IAAC,UAAUoe,EAAA,CAAkB;AAAA,UAAA;AAAA,QAAA;AAAA,MAAA;AAAA,MAEzDN,EAAU,gBACP,gBAAAvuB,EAAC6U,IAAA,EAAQ,OAAO0Z,EAAU,aAAa,MAAM,OAAK,IAC9C,UAAA,gBAAAvuB,EAACwK,IAAA,EAAW,SAAQ,SACf,UAAA+jB,EAAU,aAAa,KAAK,SAAS,KAChC,GAAGA,EAAU,aAAa,KAAK,UAAU,GAAG,EAAE,CAAC,QAC/CA,EAAU,aAAa,MACjC,GACJ;AAAA,MAGJ,gBAAAvuB;AAAA,QAACoC;AAAAA,QAAA;AAAA,UACG,SAAQ;AAAA,UACR,OAAM;AAAA,UACN,SAAS4sB;AAAA,UACT,UAAU,CAACT,EAAU,gBAAgB9d;AAAA,UAEpC,cAAU,gBAAAzQ,EAACsvB,IAAA,EAAiB,MAAM,IAAI,OAAM,WAAU,IAAK;AAAA,QAAA;AAAA,MAAA;AAAA,IAChE,EAAA,CACJ;AAAA,EAAA,GAER;AAER;AC7KA,MAAMnI,KAAQ,CAAC,EAAE,OAAAngB,GAAO,QAAA0P,QAAa;AACjC,QAAM,CAACpK,GAAOijB,CAAQ,IAAI1vB,GAAM,SAAS,CAAA,CAAE,GACrC2vB,IAAiB9H,GAAYpb,GAAO,GAAG;AAE7C,EAAAzM,GAAM,UAAU,MAAM;AAClB,QAAK6W,EAAO,OAAO1P,CAAK;AACxB,UAAI;AACA,cAAMyoB,IAAY,KAAK,MAAM/Y,EAAO,OAAO1P,CAAK,CAAC;AACjD,QAAAuoB,EAASE,CAAS;AAAA,MACtB,QAAY;AACR,QAAAF,EAAS,CAAA,CAAE;AAAA,MACf;AAAA,EACJ,GAAG,CAAC7Y,EAAO,OAAO1P,CAAK,CAAC,CAAC,GAGzBnH,GAAM,UAAU,MAAM;AAClB,UAAM6vB,IAAY,KAAK,UAAUF,CAAc;AAC/C,IAAI9Y,EAAO,OAAO1P,CAAK,MAAM0oB,KACzBhZ,EAAO,cAAc1P,GAAO0oB,CAAS;AAAA,EAE7C,GAAG,CAACF,GAAgBxoB,GAAO0P,GAAQA,EAAO,OAAO1P,CAAK,CAAC,CAAC;AAExD,QAAM8C,IAAe,CAACpH,GAAKK,MAAU;AACjC,UAAM4sB,IAAe,EAAE,GAAGrjB,GAAO,CAAC5J,CAAG,GAAGK,EAAA;AACxC,IAAAwsB,EAASI,CAAY;AAAA,EACzB;AAEA,SACI,gBAAA3vB;AAAA,IAAC8Z;AAAAA,IAAA;AAAA,MACG,WAAS;AAAA,MAET,SAAQ;AAAA,MACR,OAAOpD,EAAO,QAAQ1P,CAAK,KAAK,EAAQ0P,EAAO,OAAO1P,CAAK;AAAA,MAC3D,OAAO,EAAE,cAAc,OAAA;AAAA,MAEtB,iBAAO,KAAKsF,CAAK,EAAE,IAAI,CAAC5J,MACrB,gBAAAxB;AAAA,QAAC;AAAA,QAAA;AAAA,UAEG,OAAO;AAAA,YACH,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,gBAAgB;AAAA,YAChB,cAAc;AAAA,UAAA;AAAA,UAGlB,UAAA;AAAA,YAAA,gBAAAA,EAACsJ,IAAA,EAAW,SAAQ,SAAQ,IAAI,EAAE,OAAO,SAAS,aAAa,EAAA,GAC1D,UAAA;AAAA,cAAA9H;AAAA,cAAI;AAAA,YAAA,GACT;AAAA,YACA,gBAAA1C;AAAA,cAAC4vB;AAAA,cAAA;AAAA,gBACG,IAAIltB;AAAA,gBACJ,MAAMA;AAAA,gBACN,OAAO4J,EAAM5J,CAAG;AAAA,gBAChB,UAAU,CAAC6E,MAAMuC,EAAapH,GAAK6E,EAAE,OAAO,KAAK;AAAA,gBACjD,WAAS;AAAA,gBACT,OAAO,EAAE,MAAM,EAAA;AAAA,cAAE;AAAA,YAAA;AAAA,UACrB;AAAA,QAAA;AAAA,QAlBK7E;AAAA,MAAA,CAoBZ;AAAA,IAAA;AAAA,IA3BIsE;AAAA,EAAA;AA8BjB,GCtCM6oB,KAAe;AAAA,EACjB,SAAWC;AAAAA,EACX,QAAUxF;AAAA,EACV,QAAU1B;AAAAA,EACV,QAAUmH;AAAAA,EACV,UAAYC;AAAAA,EACZ,MAAQC;AAAAA,EACR,UAAYC;AAAAA,EACZ,MAAQC;AAAAA,EACR,WAAaC;AAAAA,EACb,OAASC;AAAAA,EACT,cAAgBC;AAAAA,EAChB,UAAYlE;AAAA,EACZ,OAASxD;AAAAA,EACT,WAAa2H;AAAAA,EACb,cAAgBC;AAAAA,EAChB,YAAcvC;AAAA,EACd,MAAQwC;AACZ,GAEMC,KAAqB,EAAE,YAAY,SAAS,eAAe,QAAA,GAE3DC,KAAgBjV,GAAO,MAAM,EAAE;AAAA,EACnC,OAAO;AACT,CAAC,GAEKkV,KAAc,CAAC,EAAE,YAAAC,GAAY,OAAAtsB,GAAO,QAAAmS,GAAQ,MAAAvT,GAAM,UAAA2tB,GAAU,QAAAC,GAAQ,SAAAnqB,GAAS,cAAA0iB,GAAc,MAAA9E,GAAM,cAAAwM,QAAmB;AACtH,QAAM,CAACC,GAASC,CAAU,IAAIrxB,GAAM,SAAS,oBAAI,KAAK,GAEhD,EAAE,YAAAsxB,GAAY,eAAAC,EAAA,IAAkBvxB,GAAM,WAAWwxB,EAAiB,GAElEC,IAAY,CAAA;AAClB,WAAS5e,IAAQ,GAAG6e,IAAMhtB,EAAM,QAAQ,QAAQmO,IAAQ6e,GAAK7e,KAAS;AAClE,UAAM,EAAE,OAAA1L,GAAO,MAAAwqB,EAAA,IAASjtB,EAAM,QAAQmO,CAAK;AAC3C,IAAI8e,MACAF,EAAUE,EAAK,IAAI,IAAI9a,EAAO,OAAO1P,CAAK;AAAA,EAElD;AAEA,QAAMyqB,IAAgB,CAACC,MACZT,EAAQ,IAAIS,CAAI,KAAKJ,EAAUI,CAAI,GAGxCC,IAAa,MAAM;AACrB,aAASC,IAAWT,IAAa,GAAGS,IAAWf,EAAW,QAAQe;AAC9D,UAAI,CAACH,EAAcG,CAAQ;AACvB,eAAO;AAGf,WAAO;AAAA,EACX,GACMC,IAAa,MAAM;AACrB,QAAID,IAAWT,IAAa;AAC5B,WAAOG,EAAUM,CAAQ;AACrB,MAAAA;AAGJ,IAAAV,EAAW,CAACY,MAAgB,IAAI,IAAIA,CAAW,EAAE,IAAIX,CAAU,CAAC,GAE5DS,KAAYf,EAAW,UAAUc,EAAA,IACjCX,EAAA,IAEAI,EAAcQ,CAAQ;AAAA,EAE9B,GAEMvf,IAAa,MAAM;AACrB,QAAI0f,IAAWZ,IAAa;AAE5B,WAAOG,EAAUS,CAAQ,KAAKA,IAAW;AACrC,MAAAA;AAEJ,IAAAX,EAAcW,CAAQ;AAAA,EAC1B;AAEA,MAAI,CAAClB,GAAY;AACb,WAAO;AAGX,QAAMmB,IAAcnB,EAAWM,CAAU;AACzC,SACI,gBAAAjwB,EAAAC,IAAA,EACI,UAAA;AAAA,IAAA,gBAAAnB,EAACiyB,IAAA,EAAQ,YAAAd,GAAwB,IAAI,EAAE,cAAc,OAAA,GAChD,UAAAN,EAAW,IAAI,CAAC,EAAE,OAAA/vB,GAAO,KAAA4B,EAAA,GAAOgQ,wBAExBwf,IAAA,EAAe,WAAWT,EAAc/e,CAAK,GAC1C,4BAACyf,IAAA,EACG,UAAA,gBAAAnyB,EAACwK,IAAA,EAAW,IAAI,EAAE,UAAU,OAAA,GAAW,UAAA1J,EAAA,CAAM,GACjD,KAHO4B,CAIX,CAEP,EAAA,CACL;AAAA,IACA,gBAAAxB,EAACrB,GAAM,UAAN,EACG,UAAA;AAAA,MAAA,gBAAAG,EAACoyB,IAAA,EAAc,cAAcJ,EAAY,OAAO,OAAAztB,GAAc,QAAAmS,GAAgB,MAAAvT,GAAY,UAAA2tB,GAAoB,QAAAC,GAAgB,SAAAnqB,GAAkB,cAAA0iB,GAA4B,MAAA9E,EAAA,CAAY;AAAA,MACxL,gBAAAtjB,EAACqJ,IAAA,EAAI,IAAI,EAAE,SAAS,QAAQ,eAAe,OAAO,IAAI,GAAG,IAAI,EAAA,GACxD,UAAA;AAAA,QAAA4mB,MAAe,IAAI,gBAAAjwB,EAACkB,IAAA,EAAO,OAAM,WAAU,UAAU+uB,MAAe,GAAG,SAAS9e,GAAY,SAAQ,aAAY,IAAI,EAAE,IAAI,KAAK,UAAA;AAAA,UAAA;AAAA,UAAE;AAAA,QAAA,EAAA,CAAO,IAAY;AAAA,QACrJ,gBAAArS,EAACoC,MAAO,SAASyvB,GAAY,SAAQ,aAAa,UAAAF,MAAe,WAAW,OAAA,CAAO;AAAA,MAAA,EAAA,CACvF;AAAA,IAAA,EAAA,CACJ;AAAA,EAAA,GACJ;AAER,GAEMS,KAAgB,CAAC,EAAE,cAAAC,GAAc,OAAA9tB,GAAO,QAAAmS,GAAQ,MAAAvT,GAAM,UAAA2tB,GAAU,QAAAC,GAAQ,SAAAnqB,GAAS,cAAA0iB,GAAc,MAAA9E,GAAM,OAAAyI,QAClGoF,GAAc,SAIf,gBAAAryB,EAAAmB,IAAA,EAEQ,UAAAkxB,EAAa,IAAI,CAAC,EAAE,WAAAvH,GAAW,QAAA9iB,GAAQ,OAAAhB,GAAO,OAAAwS,GAAO,YAAA4N,EAAA,GAAc1kB,MAAQ;AACvE,QAAM4vB,IAAkB,OAAOtqB,EAAO,YAAa;AACnD,2BACKoJ,IAAA,EAAK,WAAS,IAAC,SAAS,GAAa,IAAI,EAAE,WAAW,QAAQ,cAAc,UAAU,YAAYkhB,IAAkB,eAAe,UAC/H,UAAA;AAAA,IAAAtqB,GAAQ,cAAc,KACnB,gBAAAhI,EAACoR,MAAK,MAAM,EAAE,IAAI,EAAA,GAAK,IAAIsf,IACvB,UAAA,gBAAAxvB,EAACsJ,MAAW,IAAI,EAAE,UAAU,QAAQ,YAAY,UAAW,UAAA;AAAA,MAAAxC,EAAO,SAAShB;AAAA,MAAM;AAAA,MAAGgB,EAAO,YAAY,gBAAAhI,EAAC2wB,IAAA,EAAc,UAAA,IAAA,CAAC;AAAA,IAAA,EAAA,CAAiB,GAC5I,IACE;AAAA,IAEN,gBAAA3wB,EAACoR,IAAA,EAAK,MAAM,EAAE,IAAIkhB,IAAkB,KAAK,EAAA,GAAK,IAAI5B,IAC9C,UAAA,gBAAA1wB,EAAC8qB,KAAU,OAAAmC,GAAc,OAAA1oB,GAAc,cAAc+kB,EAAatiB,CAAK,GAAG,MAAAwd,GAAY,QAAAxc,GAAgB,OAAAhB,GAAc,OAAAwS,GAAc,QAAA9C,GAAgB,MAAAvT,GAAY,UAAA2tB,GAAoB,QAAAC,GAAgB,SAAAnqB,GAAmB,GAAGwgB,GAAY,EAAA,CACxO;AAAA,EAAA,EAAA,GAT6B1kB,CAUjC;AAER,CAAC,EAAA,CAET,IAtBO,MA0BT6vB,KAAgB,SAAU,EAAE,SAAAlsB,GAAS,MAAAmsB,IAAO,CAAA,GAAI,IAAAnqB,GAAI,cAAAE,KAAgB;AACtE,QAAM8pB,IAAe,IAAIxB,IAAa,CAAA;AACtC,aAAW4B,KAAOD;AACd,IAAA3B,EAAW4B,CAAG,IAAI,CAAA;AAEtB,aAAWzqB,KAAU3B,GAAS;AAC1B,UAAMqsB,IAAY1qB,EAAO;AACzB,QAAIA,EAAO,UAAU;AACjB;AAEJ,UAAM,EAAE,OAAAhB,GAAO,OAAAwS,GAAO,KAAAiZ,EAAA,IAAQzqB,GACxBof,IAAa,CAAA;AACnB,IAAIpf,EAAO,YACPof,EAAW,UAAUpf,EAAO,UAE5BA,EAAO,cACPof,EAAW,YAAYpf,EAAO;AAElC,UAAM8iB,IAAY+E,GAAa6C,CAAS;AACxC,QAAI,CAAC5H,KAAc9iB,EAAO,iBAAiBK,MAAO;AAC9C;AAIJ,KADeoqB,KAAOD,EAAKC,CAAG,IAAI5B,EAAW4B,CAAG,IAAIJ,GAC7C,KAAK,EAAE,WAAAvH,GAAW,OAAA9jB,GAAO,OAAAwS,GAAO,QAAQ,EAAE,GAAGxR,GAAQ,UAAUO,EAAa,IAAI,cAAc,KAAKP,EAAO,SAAA,GAAY,YAAAof,GAAY;AAAA,EAC7I;AACA,QAAMuL,IAAW,CAAA;AACjB,aAAWC,KAAa/B;AACpB,IAAA8B,EAAS,KAAK,EAAE,KAAKC,GAAW,OAAOJ,EAAKI,CAAS,GAAG,OAAO/B,EAAW+B,CAAS,EAAA,CAAG;AAE1F,SAAO,EAAE,cAAAP,GAAc,YAAYM,EAAA;AACvC,GAEME,KAAa,CAAC,EAAE,OAAAtuB,GAAO,QAAAmS,GAAQ,MAAAvT,GAAM,QAAA4tB,GAAQ,UAAAD,GAAU,SAAAlqB,GAAS,IAAIksB,GAAW,cAAAxJ,GAAc,MAAA9E,GAAM,cAAAwM,QAAmB;AACxH,QAAM/D,IAAQ7oB,GAAM,cAAc,SAAS0uB,CAAS,GAC9C,EAAE,cAAAT,GAAc,YAAAxB,EAAA,IAAehxB,GAAM,QAAQ,MAAM;AACrD,UAAMkzB,IAAWxuB,EAAM,YAAY,YAC7BgE,IAAe,IAAI,gBAAgB,OAAO,SAAS,MAAM,GACzD,EAAE,cAAA8pB,GAAc,YAAAxB,MAAe0B,GAAc,EAAE,SAAShuB,EAAM,SAAS,MAAMwuB,IAAWxuB,EAAM,OAAO,CAAA,GAAI,IAAIuuB,GAAW,cAAAvqB,GAAc;AAC5I,WAAO,EAAE,cAAA8pB,GAAc,YAAAxB,GAAY,UAAUkC,KAAYlC,EAAW,SAAS,EAAA;AAAA,EACjF,GAAG,CAACtsB,CAAK,CAAC;AACV,2BACK,OAAA,EACG,UAAA;AAAA,IAAA,gBAAAvE,EAACoyB,IAAA,EAAc,OAAAnF,GAAc,cAAAoF,GAA4B,OAAA9tB,GAAc,QAAAmS,GAAgB,MAAAvT,GAAY,UAAA2tB,GAAoB,QAAAC,GAAgB,SAAAnqB,GAAkB,cAAA0iB,GAA4B,MAAA9E,EAAA,CAAY;AAAA,sBAChM,OAAA,EAAI,OAAO,EAAE,WAAW,UACrB,UAAA,gBAAAxkB,EAAC4wB,IAAA,EAAY,YAAAC,GAAwB,OAAAtsB,GAAc,QAAAmS,GAAgB,MAAAvT,GAAY,UAAA2tB,GAAoB,QAAAC,GAAgB,SAAAnqB,GAAkB,cAAA0iB,GAA4B,MAAA9E,GAAY,cAAAwM,GAA4B,EAAA,CAC7M;AAAA,EAAA,GACJ;AAER;ACxMA,SAASgC,GAAelzB,GAAO;AAC7B,QAAM,EAAE,UAAAK,GAAU,OAAA4C,GAAO,OAAA2P,GAAO,GAAGugB,MAAUnzB;AAC7C,SACE,gBAAAE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,MAAK;AAAA,MACL,QAAQ+C,MAAU2P;AAAA,MAClB,IAAI,mBAAmBA,CAAK;AAAA,MAC5B,mBAAiB,cAAcA,CAAK;AAAA,MACnC,GAAGugB;AAAA,MAEH,UAAAlwB,MAAU2P,KAAS,gBAAA1S,EAACuK,IAAA,EAAI,IAAI,EAAE,GAAG,EAAA,GAAM,UAAApK,EAAA,CAAS;AAAA,IAAA;AAAA,EAAA;AAGvD;AAEA,SAAS+yB,GAAUxgB,GAAO;AACxB,SAAO;AAAA,IACL,IAAI,cAAcA,CAAK;AAAA,IACvB,iBAAiB,mBAAmBA,CAAK;AAAA,EAAA;AAE7C;AAWA,MAAMygB,KAAY1V,GAAK,CAAC,EAAE,UAAA2V,GAAU,eAAAltB,GAAe,QAAAwX,GAAQ,OAAArW,GAAO,QAAAgsB,GAAQ,UAAA1U,QAAe;AACvF,QAAM2U,IAAyBD,EAAO,KAAK,CAAC,EAAE,MAAA5nB,EAAA,MAAWA,MAAS2nB,CAAQ;AAC1E,MAAI,CAACE,EAAwB,QAAO;AACpC,QAAMrwB,IAAS,EAAE,GAAGqwB,GAAwB,gBAAgB,GAAA,GACtDC,IAAatwB,aAAkBuwB,KAAUvwB,IAAS,IAAIuwB,GAAQvwB,CAAM;AAC1E,SAAKswB,IAGH,gBAAAvzB;AAAA,IAACuzB,EAAW;AAAA,IAAX;AAAA,MACC,UAAA5U;AAAA,MACA,eAAAzY;AAAA,MACA,QAAAwX;AAAA,MACA,OAAOza;AAAA,MACP,OAAAoE;AAAA,MACA,aAAa;AAAA,IAAA;AAAA,EAAA,IATO;AAY1B,CAAC,GAMKosB,KAAY5zB,GAAM,KAAK,CAAC,EAAE,WAAA6zB,GAAW,QAAAhW,GAAQ,OAAArW,IAAQ,IAAI,QAAAgsB,GAAQ,iBAAAM,GAAiB,UAAAhV,QAAe;AACrG,QAAM,CAACiV,GAAUC,CAAW,IAAIvzB,EAAS,CAAC;AAM1C,2BACGiK,IAAA,EAAI,IAAI,EAAE,OAAO,UAChB,UAAA;AAAA,IAAA,gBAAAvK,EAACuK,IAAA,EAAI,IAAI,EAAE,cAAc,GAAG,aAAa,UAAA,GACvC,UAAA,gBAAAvK,EAAC8zB,IAAA,EAAK,OAAOF,GAAU,UAPR,CAACrI,GAAGvX,MAAa;AACpC,MAAA6f,EAAY7f,CAAQ;AAAA,IACtB,GAKqD,cAAW,kBACvD,YAAU,IAAI,CAACof,GAAUW,MAAQ;AAChC,YAAMT,IAAyBD,EAAO,KAAK,CAAC,EAAE,MAAA5nB,QAAWA,MAAS2nB,CAAQ,KAAK,CAAA,GACzE5Z,IAAQ8Z,EAAuB,aAAaA,EAAuB,SAASF;AAClF,aACE,gBAAApzB;AAAA,QAACg0B;AAAA,QAAA;AAAA,UAEC,OAAAxa;AAAA,UACC,GAAG0Z,GAAUa,CAAG;AAAA,QAAA;AAAA,QAFZX;AAAA,MAAA;AAAA,IAKX,CAAC,GACH,GACF;AAAA,IACCM,EAAU,IAAI,CAACN,GAAUW,wBACvBf,IAAA,EAAe,OAAOY,GAAU,OAAOG,GACtC,UAAA,gBAAA/zB;AAAA,MAACmzB;AAAA,MAAA;AAAA,QACC,UAAAxU;AAAA,QACA,UAAAyU;AAAA,QAEA,QAAAC;AAAA,QACA,eAAeM,EAAgBP,CAAQ,KAAK,CAAA;AAAA,QAC5C,QAAA1V;AAAA,QACA,OAAArW;AAAA,MAAA;AAAA,MAJK+rB;AAAA,IAAA,EAKP,GATgDA,CAUlD,CACD;AAAA,EAAA,GACH;AAEJ,CAAC,GCjFY/B,KAAoB5xB,GAAc,CAAC,GAC1Cw0B,KAAsB,CAAA,GACtB7I,KAAS;AAAA,EACb,QAAQ;AAAA,EACR,UAAU;AAAA,EACV,UAAU;AAAA,EACV,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,MAAM;AAAA,EACN,MAAM;AAAA,EACN,QAAQ;AACV,GAEM8I,KAAO,CAAC;AAAA,EACZ,OAAA3vB;AAAA,EACA,KAAA0B;AAAA,EACA,QAAAotB;AAAA,EACA,iBAAAM,IAAkB,CAAA;AAAA,EAClB,aAAAlvB,IAAc,CAAA;AAAA,EACd,QAAA0vB,IAAStB;AAAA,EACT,cAAA3Q,IAAe,CAAA;AAAA,EACf,IAAAkS;AAAA,EACA,UAAAzV;AAAA,EACA,cAAA0V;AAAA,EACA,kBAAAC;AACF,MAAM;AACJ,QAAMC,IAAYhwB,EAAM,aAAaA,EAAM,OACrC,EAAE,UAAAkN,GAAU,WAAAqO,GAAW,WAAAC,GAAW,UAAAC,EAAA,IAAa7P,GAAA,GAC/C,EAAE,WAAAujB,IAAY,CAAA,EAAC,IAAMnvB,GACrB,EAAE,cAAAN,GAAc,WAAAkK,EAAA,IAAciC,GAAA,GAC9BzM,IAASoc,OAAeD,GACxB,EAAE,IAAIG,IAAgB,GAAA,IAAOtc,GAC7B0E,IAAK4X,EAAc,MAAM,GAAG,EAAE,CAAC,GAC/B1X,IAAe,IAAI,gBAAgB,OAAO,SAAS,MAAM,GACzD0Z,IAAqB1Z,EAAa,IAAI6iB,GAAO,QAAQ,KAAK7iB,EAAa,IAAI6iB,GAAO,QAAQ;AAChG,MAAInJ,GAAoB;AACtB,UAAME,IAAa,KAAK,MAAMF,CAAkB;AAChD,IAAI,OAAOE,MAAeiJ,GAAO,UAAUjJ,MAAe,SACxDD,IAAe,EAAE,GAAGA,GAAc,GAAGC,EAAA;AAAA,EAEzC;AACA,QAAM,CAACrD,IAAWnZ,EAAY,IAAIrF,EAAS,EAAI,GACzC,CAAC6C,GAAMyC,EAAO,IAAItF,EAAS,CAAA,CAAE,GAC7B,CAACsG,GAAS4tB,CAAU,IAAIl0B,EAAS,IAAI,GACrC,CAAC4e,GAAYC,CAAa,IAAI7e,EAAS,EAAK,GAC5C8U,IAAW/T,GAAA,GACX,CAACkV,GAAkBke,CAAmB,IAAIn0B,EAAS,IAAI,GACvD,CAAC6wB,GAAYC,EAAa,IAAI9wB,EAAS,CAAC,GACxC,CAACo0B,IAAqBC,EAAsB,IAAIr0B,EAAS,EAAK,GAC9D,CAACs0B,IAAaC,EAAc,IAAIv0B,EAAS,IAAI,GAC7C,CAACmf,IAAcC,EAAe,IAAIpf,EAAS,EAAE,GAC7CsC,KAAMuL,GAAW,cAAc,aAAa,OAAO,IACnDmb,KAAe,OAAO/kB,EAAM,qBAAqB6mB,GAAO,WAC1D7mB,EAAM,iBAAiB,EAAE,MAAApB,GAAM,SAAAyD,EAAA,CAAS,IACxCqtB,IACE9P,KAAU3N,GAAQ,MAAM,GAAG5T,EAAG,GAAG2B,EAAM,OAAO0B,KAAO,EAAE,IAAI,CAACrD,IAAK2B,EAAM,KAAK0B,CAAG,CAAC,GAChF,EAAE,MAAAue,OAASrW,EAAU,UACrB7J,KAAW6J,EAAU,eAAe,CAAA,GACpC3J,KAAyB;AAAA,IAC7B,KAAK;AAAA,IACL,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,GAAGD,EAAM;AAAA,IACT,GAAGE;AAAA,EAAA,GAEC,EAAE,SAAA6c,GAAA,IAAYjd,GAAe;AAAA,IACjC,UAAAC;AAAA,IACA,OAAAC;AAAA,IACA,wBAAAC;AAAA,EAAA,CACD,GACK,EAAE,gBAAAkd,KAAiB,IAAO,cAAAjB,EAAA,IAAiBlc,GAE3CuwB,IAAmB,MAAM;AAC7B,QAAIC;AACJ,YAAQ,OAAOtU,GAAA;AAAA,MACb,KAAK2K,GAAO;AACV,QAAA2J,IAAetU,EAAa,EAAE,QAAA9c,GAAQ,cAAA4E,GAAc,MAAApF,GAAM;AAC1D;AAAA,MACF,KAAKioB,GAAO;AAAA,MACZ,KAAKA,GAAO;AACV,QAAA2J,IAAetU;AACf;AAAA,MACF;AACE,QAAAsU,IAAe/U,EAAS,UAAU,GAAGA,EAAS,YAAY,GAAG,CAAC;AAC9D;AAAA,IAAA;AAEJ,IAAAvO,EAASsjB,CAAY;AAAA,EACvB,GAEMC,KAAQxe,GAAQ,MAAMpS,GAAM,cAAc,SAASiE,CAAE,GAAG,CAACA,CAAE,CAAC,GAE5D2M,IAAgBwB,GAAQ,MAAMwe,KAChC,EAAE,GAAGzwB,EAAM,eAAe,GAAGpB,GAAM,GAAG+e,EAAA,IACtC,EAAE,GAAGA,GAAc,GAAG3d,EAAM,eAAe,GAAGpB,EAAA,GAAQ,CAACoB,EAAM,eAAepB,GAAMkF,CAAE,CAAC;AAEzF,EAAA0B,GAAU,MAAM;AACd,QAAI,CAACnH,GAAK;AACV,IAAA6xB,EAAoBlwB,EAAM,oBAAoB,EAAE,IAAA8D,GAAI,UAAA+M,EAAA,CAAU,CAAC;AAC/D,UAAMmE,IAAU0G,EAAc,MAAM,GAAG;AAMvC,IAAA7X,GAAU;AAAA,MACR,GANa;AAAA,QACb,KAAKnC,KAAOke;AAAA,QACZ,OAAA5f;AAAA,QACA,UAAU0wB;AAAA,MAAA;AAAA,MAIV,IAAI1b,EAAQ,SAAS,IAAIA,EAAQ,CAAC,IAAIA,EAAQ,CAAC;AAAA,MAC/C,cAAA5T;AAAA,MACA,iBAAA2C;AAAA,IAAA,CACD;AAAA,EAEH,GAAG,CAACD,GAAI4X,GAAe1b,GAAO3B,EAAG,CAAC;AAElC,QAAM8T,KAASC,GAAU;AAAA,IACvB,oBAAoB;AAAA,IACpB,eAAA3B;AAAA,IACA,kBAAAuB;AAAA,IACA,gBAAgB;AAAA,IAChB,UAAU,OAAOvN,GAAQ,EAAE,WAAAksB,SAAgB;AACzC,aAAO,KAAKlsB,CAAM,EAAE,QAAQ,CAAAtG,OAAO;AACjC,QAAI,OAAOsG,EAAOtG,EAAG,MAAM0oB,GAAO,WAChCpiB,EAAOtG,EAAG,IAAIsG,EAAOtG,EAAG,EAAE,KAAA;AAAA,MAE9B,CAAC,GACDiD,GAAa,EAAI,GACjBoD,GAAW;AAAA,QACT,IAAAV;AAAA,QACA,KAAK8b;AAAA,QACL,QAAAnb;AAAA,QACA,cAAArD;AAAA,QACA,UAAUyP,EAAS;AAAA,MAAA,CACpB,EACE,KAAK,CAAC+f,OAAY;AACjB,YAAI,CAACA,GAAS;AACd,YAAI5wB,EAAM;AACR,iBAAO,OAAO,SAAS,OAAA;AAEzB,cAAMnE,KAAU+0B,GAAQ,OAAOA,GAAQ,OAAO,UAAU9sB,MAAO,IAAI,UAAU,SAAS;AACtF,QAAA+M,EAAS,YAAYhV,EAAO,GAM5BqgB,MAAiB,MAASqU,EAAA;AAAA,MAC5B,CAAC,EACA,MAAM,CAAChP,OAAQ;AACd,QAAA1Q,EAAS;AAAA,UACP;AAAA,UACA0Q;AAAA,QAAA,GAEEvhB,EAAM,gBACR2wB,GAAA;AAAA,MAEJ,CAAC,EACA,QAAQ,MAAMvvB,GAAa,EAAK,CAAC;AAAA,IACtC;AAAA,EAAA,CACD,GAEKyvB,KAAuB,MAAM;AACjC,IAAA1e,GAAO,UAAA,GACPie,GAAuB,EAAK,GAC5BlU,MAAiB,MAASqU,EAAA;AAAA,EAC5B,GAEMG,KAAc,SAAUn0B,GAAOqH,IAAO;AAC1C,IAAAiN,EAAS,UAAUtU,GAAOqH,EAAK,GAC/B2sB,EAAA;AAAA,EACF,GAEMxsB,KAAkB,SAAU,EAAE,IAAAD,GAAI,OAAAvH,IAAO,QAAAiH,IAAQ,SAAAnB,MAAW;AAChE,UAAMyuB,KAASpV,EAAc,QAAQ,GAAG,IAAI,IACtC+U,KAAQ,CAAC3sB,KAAMA,MAAO,KACtB0e,KAAYiO,KAAQ5J,GAAO,SAASiK,KAASjK,GAAO,OAAOA,GAAO,MAClEkK,KAAaN,KAAQ,KAAKjtB,GAAOxD,EAAM,UAAU,GACjDuN,KAAc,CAAC,EAAE,MAAMvN,EAAM,eAAe,EAAE,MAAMwiB,IAAW;AACrE,IAAIsO,OACFttB,GAAOxD,EAAM,UAAU,IAAI,KAE7BA,EAAM,QAAQ,QAAQ,CAACI,OAAS;AAC9B,MAAIA,GAAK,YAAY0wB,OACnBttB,GAAOpD,GAAK,KAAK,IAAI;AAAA,IAEzB,CAAC,GACDiB,GAAQmC,EAAM,GACdysB,EAAW5tB,EAAO,GACd0uB,OAAe,MACjBxjB,GAAY,KAAK,EAAE,MAAMwjB,IAAY,GAEvCrxB,EAAa;AAAA,MACX,MAAM5B,EAAqB;AAAA,MAC3B,SAAS;AAAA,QACP,iBAAiB;AAAA,QACjB,aAAayP;AAAAA,MAAA;AAAA,IACf,CACD;AAAA,EACH,GACMyjB,KAAmB,SAAUprB,GAAO;AACxC,IAAIuM,GAAO,SAAS8e,KAClBb,GAAuB,EAAI,IAE3BlU,MAAiB,MAASqU,EAAA,GAE5B3qB,EAAM,eAAA;AAAA,EACR,GACMkb,KAAe,iBAAkB;AACrC,QAAI;AACF,MAAAlG,EAAc,EAAI,GACD,MAAMtW,GAAa;AAAA,QAClC,IAAAR;AAAA,QACA,KAAKpC,KAAO1B,EAAM;AAAA,QAClB,cAAAoB;AAAA,QACA,UAAUyP,EAAS;AAAA,QACnB,iBAAAsK;AAAA,MAAA,CACD,MACgB,OACftK,EAAS,YAAY,8BAA8B,GACnDqL,MAAiB,MAASqU,EAAA;AAAA,IAE9B,QAAgB;AACd,MAAA1f,EAAS,UAAU,+CAA+C;AAAA,IACpE,UAAA;AACE,MAAA+J,EAAc,EAAK;AAAA,IACrB;AAAA,EACF,GACMmG,KAAa,MAAM;AACvB,IAAA5F,GAAgB,IAAI,GACpBP,EAAc,EAAK;AAAA,EACrB;AACA,MAAIL;AACF,WACE,gBAAA9e,EAACuK,IAAA,EAAI,IAAI,EAAE,SAAS,QAAQ,IAAI,OAAO,gBAAgB,SAAA,GACrD,UAAA,gBAAAvK,EAACsvB,MAAiB,GACpB;AAGJ,QAAMxlB,KAAe,SAAUvC,GAAG;AAChC,UAAM,EAAE,MAAAkE,IAAM,OAAA1I,GAAA,IAAUwE,EAAE;AAC1B,IAAA3B,GAAQ,EAAE,GAAGzC,GAAM,CAACsI,EAAI,GAAG1I,IAAO;AAAA,EACpC,GAEMiuB,KAAe,eAAgBzpB,GAAG;AACtC,IAAIA,OAAK,eAAA,GACL,OAAO8sB,MAAiBjJ,GAAO,YACjC,MAAMiJ,EAAa,EAAE,QAAA3d,IAAQ;AAE/B,UAAM,EAAE,QAAA+e,OAAW/e;AACnB,IAAAA,GAAO,aAAA;AACP,UAAMgf,KAAY,OAAO,KAAKD,EAAM,EAAE,CAAC,GACjChW,KAAegW,GAAOC,EAAS;AACrC,IAAIjW,MACFrK,EAAS,UAAUqK,IAAc,MAAM,OAAO;AAEhD,UAAMkW,KAAcpxB,EAAM,QAAQ;AAAA,MAChC,CAACyD,OAAWA,GAAO,UAAU0tB;AAAA,IAAA,KAC1B,CAAA;AACL,IAAIC,GAAY,OACdvE,GAAc,OAAO,KAAK7sB,EAAM,IAAI,EAAE,QAAQoxB,GAAY,GAAG,CAAC;AAAA,EAElE,GAEM7jB,KAAc;AAAA,IAClB,EAAE,MAAMyiB,EAAA;AAAA,IACR,EAAE,MAAMlsB,MAAO,MAAM,QAAQ,SAAA;AAAA,EAAS,GAElCutB,KAAgB,OAAOvtB,CAAE,MAAM,KAAK,EAAQqrB,EAAU,QACtDmC,KAAiBttB,EAAa,IAAI,cAAc,GAChDitB,KAAiB,EAAE,aAAaryB,MAASA,EAAK,SAC9C2yB,KAAoB,CAACN,MAAkBryB,EAAK;AAClD,SAAAmxB,IAAmBA,KAAoB,qCAErC,gBAAApzB,EAAAC,IAAA,EACE,UAAA;AAAA,IAAA,gBAAAnB;AAAA,MAACuR;AAAAA,MAAA;AAAA,QACC,UAAAE;AAAA,QACA,OAAO8iB;AAAA,QACP,iBAAiB,CAAC7S;AAAA,QAClB,aAAA5P;AAAA,QACA,OAAAvN;AAAA,MAAA;AAAA,IAAA;AAAA,sBAED8sB,GAAkB,UAAlB,EAA2B,OAAO,EAAE,YAAAF,GAAY,eAAAC,GAAA,GAC/C,UAAA,gBAAAlwB,EAAC60B,MAAM,IAAI,EAAE,SAAS,GAAG,GAAG3B,KAC1B,UAAA;AAAA,MAAA,gBAAAlzB,EAAC,QAAA,EACC,UAAA;AAAA,QAAA,gBAAAA;AAAA,UAAC4X;AAAAA,UAAA;AAAA,YACC,WAAU;AAAA,YACV,SAAS;AAAA,YACT,gBAAe;AAAA,YACf,IAAI;AAAA,YAEH,UAAA;AAAA,cAAAwI,MAAWkU,MAAkB,CAACK,MAAkB,CAAClX,KAChD,gBAAA3e;AAAA,gBAACoC;AAAA,gBAAA;AAAA,kBACC,SAAQ;AAAA,kBACR,MAAK;AAAA,kBACL,OAAM;AAAA,kBACN,SAAS4uB;AAAA,kBACT;gBAAS;AAAA,cAAA;AAAA,cAEb,gBAAAhxB;AAAA,gBAACoC;AAAA,gBAAA;AAAA,kBACC,SAAQ;AAAA,kBACR,MAAK;AAAA,kBACL,OAAM;AAAA,kBACN,SAASmzB;AAAA,kBACT;gBAAW;AAAA,cAAA;AAAA,cACZ9wB,EAAY,UACX,gBAAAzE;AAAA,gBAACoC;AAAA,gBAAA;AAAA,kBACC,SAAQ;AAAA,kBACR,OAAM;AAAA,kBACN,SAAS,MAAM+c,EAAc,EAAI;AAAA,kBACjC;gBAAW;AAAA,cAAA;AAAA,YAAG;AAAA,UAAA;AAAA,QAAA;AAAA,QAGpB,gBAAAnf;AAAA,UAACm0B;AAAA,UAAA;AAAA,YACC,OAAA5vB;AAAA,YACA,QAAAmS;AAAA,YACA,MAAAvT;AAAA,YACA,cAAAmmB;AAAA,YACA,UAAUxf;AAAA,YACV,SAAAlD;AAAA,YACA,IAAAyB;AAAA,YACA,cAAA2oB;AAAA,YACA,MAAAxM;AAAA,UAAA;AAAA,QAAA;AAAA,MACF,GACF;AAAA,MACC/E,MACC,gBAAAve;AAAA,QAACK;AAAA,QAAA;AAAA,UACC,MAAM,CAAC,CAACke;AAAA,UACR,WAAW6F;AAAA,UACX,UAAUA;AAAA,UACV,OAAM;AAAA,UACN,kBAAkB;AAAA,UAEjB,UAAA;AAAA,YAAA;AAAA,YACA7F;AAAA,UAAA;AAAA,QAAA;AAAA,MAAA;AAAA,MAGL,gBAAAzf;AAAA,QAACuB;AAAA,QAAA;AAAA,UACC,MAAMmzB;AAAA,UACN,WAAWU;AAAA,UACX,UAAU,MAAMT,GAAuB,EAAK;AAAA,UAC5C,OAAM;AAAA,UACN,QAAO;AAAA,UACP,YAAW;AAAA,UAEV,UAAA;AAAA,QAAA;AAAA,MAAA;AAAA,MAEH,gBAAA30B;AAAA,QAACuB;AAAA,QAAA;AAAA,UACC,MAAM2d;AAAA,UACN,WAAWmG;AAAA,UACX,UAAU,MAAM;AACd,YAAAlG,EAAc,EAAK,GACnB0V,GAAe,IAAI;AAAA,UACrB;AAAA,UACA,OAAOD,KAAc,0BAA0B;AAAA,UAC/C,UAAAN;AAAA,QAAA;AAAA,MAAA;AAAA,MACDsB,KACC,gBAAA51B;AAAA,QAACyzB;AAAA,QAAA;AAAA,UACC,UAAUqC;AAAA,UACV,QAAAzC;AAAA,UACA,iBAAAM;AAAA,UACA,WAAAD;AAAA,UACA,QAAQnvB,EAAM,QAAQA,EAAM,SAAS;AAAA,QAAA;AAAA,MAAA,IAErC;AAAA,IAAA,EAAA,CACN,EAAA,CACF;AAAA,EAAA,GACF;AAEJ,GC7XMyxB,KAAc;AAAA,EACnB,UAAU;AAAA,EACV,iBAAiB;AAAA,EACjB,uBAAuB;AAAA,EACvB,OAAO;AACR,GAEMlY,KAAc,CAAA,GACdC,KAAmB,IACnBkY,KAAsB;AAAA,EAC3B,QAAU;AAAA,EACV,SAAW;AAAA,EACX,OAAS;AAAA,EACT,WAAa;AACd;AAEA,MAAMzC,GAAQ;AAAA,EAEb,OAAO,qBAAqB;AAAA,IAC3B,KAAK;AAAA,IACL,MAAM;AAAA,IACN,QAAQ;AAAA,EAAA;AAAA,EAGT,YAAY0C,GAAa;AACxB,UAAM,EAAE,OAAAp1B,IAAQ,IAAI,gBAAAwF,EAAA,IAAmB4vB;AACvC,QAAI,EAAE,KAAAjwB,GAAK,YAAAia,IAAaja,IAAM,SAASiwB;AACvC,UAAMC,IAAS,YAAYD,IAAcA,EAAY,SAASp1B,EAAM,QAAQ,aAAa,EAAE;AAC3F,IAAKmF,MACJA,IAAM,GAAGnF,EAAM,WAAWk1B,GAAY,iBAAiB,GAAG,EAAE,aAAa,IACzE9V,IAAapf,EAAM,WAAW,KAAK,EAAE,IAAI,OAE1CmF,IAAMK,MAAmB,OAAO,GAAGL,CAAG,UAAU,GAAGA,CAAG;AACtD,UAAM2C,IAAgB,EAAE,GAAGstB,EAAY,cAAA,GACjCzqB,IAAO0qB,KAAUr1B;AACvB,WAAO,OAAO,MAAM;AAAA,MACnB,UAAU;AAAA,MACV,MAAA2K;AAAA,MACA,aAAa,EAAE,GAAG+nB,GAAQ,mBAAA;AAAA,MAC1B,YAAAtT;AAAA,MACA,YAAY,GAAGzU,CAAI;AAAA,MACnB,kBAAkB3K;AAAA,MAClB,cAAc2K;AAAA,MACd,WAAWA;AAAA,MACX,QAAA0qB;AAAA,MACA,GAAGD;AAAA,MACH,KAAAjwB;AAAA,IAAA,CACA,GACD,KAAK,wBAAwB,KAAK,0BAAA,GAClC,KAAK,gBAAgB,KAAK,kBAAkB2C,CAAa;AAAA,EAC1D;AAAA,EAEA,4BAA4B;AAC3B,UAAM6O,IAAwB,CAAA;AAC9B,eAAWE,KAAO,KAAK;AACtB,MAAIA,EAAI,SAAS,OAChBF,EAAsBE,EAAI,MAAMA,EAAI,KAAK,IAAI;AAG/C,WAAOF;AAAA,EACR;AAAA,EAEA,kBAAkB7O,GAAe;AAChC,eAAW+O,KAAO,KAAK,SAAS;AAC/B,YAAMlM,IAAOkM,EAAI,SAASA,EAAI;AAC9B,MAAA/O,EAAc6C,CAAI,IAAIkM,EAAI,iBAAiB,SAAase,GAAoBte,EAAI,IAAI,KAAK,KAAMA,EAAI;AAAA,IACpG;AACA,WAAO/O;AAAA,EACR;AAAA,EAEA,oBAAoB,EAAE,IAAAP,KAAM;AAC3B,UAAM,EAAE,SAAAhC,MAAY,MACd+vB,IAAmB,CAAA;AACzB,eAAWpuB,KAAU3B,GAAS;AAC7B,YAAM,EAAE,OAAAW,GAAO,OAAAwS,GAAO,QAAAiK,GAAQ,MAAAne,IAAO,UAAU,eAAA+wB,IAAgB,IAAO,UAAAC,IAAW,IAAO,KAAAjO,IAAM,IAAI,KAAAC,IAAM,IAAI,UAAAiO,MAAavuB,GACnHwuB,IAAYhd,KAASiK,KAAUzc;AACrC,UAAI,CAACwvB;AACJ;AAED,UAAIvzB;AACJ,cAAQqC,GAAA;AAAA,QACP,KAAK;AACJ,UAAArC,IAASwT,GAAI,SAAS,SAAA,EAAW,KAAA,EAAO,MAAM+f,CAAS,GACnDnO,KAAO,CAAC,MAAM,OAAOA,CAAG,CAAC,MAC5BplB,IAASA,EAAO,IAAI,OAAOolB,CAAG,GAAG,GAAGmO,CAAS,qBAAqBnO,CAAG,kBAAkB,IAEpFC,KAAO,CAAC,MAAM,OAAOA,CAAG,CAAC,MAC5BrlB,IAASA,EAAO,IAAI,OAAOqlB,CAAG,GAAG,GAAGkO,CAAS,oBAAoBlO,CAAG,kBAAkB,IAEnFgO,MACHrzB,IAASA,EAAO,KAAA,EAAO,SAAS,GAAGuzB,CAAS,cAAc;AAE3D;AAAA,QACD,KAAK;AACJ,UAAAvzB,IAASwT,GAAI,OAAO,SAAA,EAAW,UAAU,CAAC1T,GAAO0zB,MAC5CA,MAAkB,KAAW,OAC1B1zB,CACP,EAAE,MAAMyzB,CAAS;AAClB;AAAA,QAED,KAAK;AAAA,QACL,KAAK;AACJ,UAAAvzB,IAASwT,GAAI,QAAQ,MAAM+f,CAAS,EAAE,SAAS,kCAAkCA,CAAS,EAAE;AAC5F;AAAA,QACD,KAAK;AACJ,UAAAvzB,IAASwT,GAAI,OAAO,SAAA,EAAW,UAAU,CAAC1T,GAAO0zB,MAC5CA,MAAkB,MAAMA,MAAkB,OAAa,OACpD1zB,CACP,EAAE,MAAMyzB,CAAS,EAAE,SAAS,GAAGA,CAAS,cAAc;AACvD;AAAA,QACD,KAAK;AACJ,UAAAvzB,IAASwT,GACP,OACA,SAAA,EACA,UAAU,CAAC1T,GAAO0zB,MAEdA,MAAkB,MAAMA,MAAkB,OAAa,OACpD1zB,CACP,EACA,MAAMyzB,CAAS;AACjB;AAAA,QACD,KAAK;AAAA,QACL,KAAK;AACJ,UAAIF,IACHrzB,IAASwT,GAAI,OAAA,EAAS,KAAA,EAAO,MAAM+f,CAAS,EAAE,SAAS,uBAAuBA,CAAS,EAAE,IAEzFvzB,IAASwT,GAAI,OAAA,EAAS,SAAA;AAEvB;AAAA,QACD,KAAK;AACJ,UAAAxT,IAASwT,GAAI,SACX,MAAM+f,CAAS,EACf,KAAK,oBAAoB,GAAGA,CAAS,8BAA8B,CAACzzB,MAAU;AAE9E,gBAAIA,MAAU,SAAU,QAAO;AAC/B,kBAAM2zB,IAAY,OAAOrO,CAAG,KAAK,GAC3BsO,IAAY,OAAOrO,CAAG,KAAK,IAC3BsO,IAAQ5uB,EAAO,SAASguB,GAAY;AAE1C,mBAAOvf,GAAI,OAAA,EACT,IAAIigB,GAAW,GAAGF,CAAS,qBAAqBE,CAAS,aAAa,EACtE,IAAIC,GAAW,GAAGH,CAAS,oBAAoBG,CAAS,aAAa,EACrE;AAAA,cACAC;AAAA,cACA,GAAGJ,CAAS;AAAA,YAAA,EAEZ,YAAYzzB,CAAK;AAAA,UACpB,CAAC;AACF;AAAA,QACD,KAAK;AACJ,UAAAE,IAASwT,GACP,SACA,KAAA,EACA;AAAA,YACCzO,EAAO,SAASguB,GAAY;AAAA,YAC7B;AAAA,UAAA;AAEF;AAAA,QACD,KAAK;AACJ,UAAIM,IACHrzB,IAASwT,GAAI,SAAS,MAAM+f,CAAS,EAAE,SAAS,GAAGA,CAAS,eAAe,IAE3EvzB,IAASwT,GAAI,OAAA,EAAS,SAAA,GAEnB4R,MAAQ,UAAaA,MAAQ,MAAM,CAAC,MAAM,OAAOA,CAAG,CAAC,MACxDplB,IAASA,EAAO,IAAI,OAAOolB,CAAG,GAAG,GAAGmO,CAAS,qCAAqCnO,CAAG,EAAE,IAEpFC,MAAQ,UAAaA,MAAQ,MAAM,CAAC,MAAM,OAAOA,CAAG,CAAC,MACxDrlB,IAASA,EAAO,IAAI,OAAOqlB,CAAG,GAAG,GAAGkO,CAAS,kCAAkClO,CAAG,EAAE;AAErF;AAAA,QACD,KAAK;AACJ,UAAArlB,IAASwT,GAAI,OAAA,EAAS,KAAA,EAAO,MAAM+f,CAAS;AAC5C;AAAA,QACD;AACC,UAAAvzB,IAASwT,GAAI,MAAA,EAAQ,SAAA,EAAW,MAAM+f,CAAS;AAC/C;AAAA,MAAA;AAQF,UANIF,KAAYhxB,MAAS,aACxBrC,IAASA,EAAO,SAAS,GAAGuzB,CAAS,cAAc,IAEhDH,MAAkB,CAAChuB,KAAMA,MAAO,QACnCpF,IAASA,EAAO,KAAA,EAAO,SAAS,GAAGuzB,CAAS,cAAc,IAEvDD,GAAU;AACb,cAAMM,IAAmBb,GAAY,sBAAsB,KAAKO,CAAQ;AACxE,YAAIM,GAAkB;AACrB,gBAAMC,IAAmBD,EAAiB,CAAC,GACrCE,IAAe1wB,EAAQ;AAAA,YAC5B,CAAC2wB,OAAOA,EAAE,cAAcF,KAAoBE,EAAE,WAAWF;AAAA,UAAA;AAE1D,UAAA7zB,IAASA,EAAO;AAAA,YACf,CAACwT,GAAI,IAAIqgB,CAAgB,CAAC;AAAA,YAC1B,GAAGN,CAAS,eAAeO,EAAa,KAAK;AAAA,UAAA;AAAA,QAE/C;AAAA,MAED;AAEA,MAAAX,EAAiBpvB,CAAK,IAAI/D;AAAA,IAC3B;AAEA,WAAOwT,GAAI,OAAO,EAAE,GAAG2f,GAAkB,GAAG,KAAK,kBAAkB;AAAA,EACpE;AAAA,EAEA,OAAO,CAAC,EAAE,OAAAprB,GAAO,GAAGlL,QACZ,gBAAAE,EAACk0B,MAAK,OAAO,MAAM,QAAQ,KAAK,QAAS,GAAGp0B,GAAO;AAAA,EAG3D,OAAO,CAAC,EAAE,OAAAkL,GAAO,GAAGlL,0BACX0d,IAAA,EAAS,OAAO,MAAM,kBAAAO,IAAqC,GAAGje,GAAO;AAAA,EAE9E,YAAY,CAACA,MACL,gBAAAoB,EAAAC,IAAA,EACN,UAAA;AAAA,IAAA,gBAAAnB,EAACwd,MAAS,OAAO,MAAO,GAAG1d,GAAO,aAAAge,IAA0B,kBAAAC,IAAoC;AAAA,IAChG,gBAAA/d,EAACi3B,MAAQ,aAAY,cAAa,IAAI,EAAE,IAAI,IAAE,CAAG;AAAA,EAAA,GAClD;AAEF;"}